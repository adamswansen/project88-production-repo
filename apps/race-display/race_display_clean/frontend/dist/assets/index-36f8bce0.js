function NO(o,n){for(var e=0;e<n.length;e++){const t=n[e];if(typeof t!="string"&&!Array.isArray(t)){for(const r in t)if(r!=="default"&&!(r in o)){const i=Object.getOwnPropertyDescriptor(t,r);i&&Object.defineProperty(o,r,i.get?i:{enumerable:!0,get:()=>t[r]})}}}return Object.freeze(Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))t(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&t(s)}).observe(document,{childList:!0,subtree:!0});function e(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function t(r){if(r.ep)return;r.ep=!0;const i=e(r);fetch(r.href,i)}})();var RO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wb(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var _b={exports:{}},zp={},bb={exports:{}},rn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qc=Symbol.for("react.element"),FO=Symbol.for("react.portal"),VO=Symbol.for("react.fragment"),zO=Symbol.for("react.strict_mode"),HO=Symbol.for("react.profiler"),UO=Symbol.for("react.provider"),BO=Symbol.for("react.context"),WO=Symbol.for("react.forward_ref"),$O=Symbol.for("react.suspense"),KO=Symbol.for("react.memo"),GO=Symbol.for("react.lazy"),D0=Symbol.iterator;function YO(o){return o===null||typeof o!="object"?null:(o=D0&&o[D0]||o["@@iterator"],typeof o=="function"?o:null)}var xb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Cb=Object.assign,Sb={};function mu(o,n,e){this.props=o,this.context=n,this.refs=Sb,this.updater=e||xb}mu.prototype.isReactComponent={};mu.prototype.setState=function(o,n){if(typeof o!="object"&&typeof o!="function"&&o!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,o,n,"setState")};mu.prototype.forceUpdate=function(o){this.updater.enqueueForceUpdate(this,o,"forceUpdate")};function Ob(){}Ob.prototype=mu.prototype;function am(o,n,e){this.props=o,this.context=n,this.refs=Sb,this.updater=e||xb}var sm=am.prototype=new Ob;sm.constructor=am;Cb(sm,mu.prototype);sm.isPureReactComponent=!0;var L0=Array.isArray,Tb=Object.prototype.hasOwnProperty,lm={current:null},Eb={key:!0,ref:!0,__self:!0,__source:!0};function Pb(o,n,e){var t,r={},i=null,s=null;if(n!=null)for(t in n.ref!==void 0&&(s=n.ref),n.key!==void 0&&(i=""+n.key),n)Tb.call(n,t)&&!Eb.hasOwnProperty(t)&&(r[t]=n[t]);var u=arguments.length-2;if(u===1)r.children=e;else if(1<u){for(var c=Array(u),f=0;f<u;f++)c[f]=arguments[f+2];r.children=c}if(o&&o.defaultProps)for(t in u=o.defaultProps,u)r[t]===void 0&&(r[t]=u[t]);return{$$typeof:Qc,type:o,key:i,ref:s,props:r,_owner:lm.current}}function XO(o,n){return{$$typeof:Qc,type:o.type,key:n,ref:o.ref,props:o.props,_owner:o._owner}}function um(o){return typeof o=="object"&&o!==null&&o.$$typeof===Qc}function qO(o){var n={"=":"=0",":":"=2"};return"$"+o.replace(/[=:]/g,function(e){return n[e]})}var j0=/\/+/g;function Ih(o,n){return typeof o=="object"&&o!==null&&o.key!=null?qO(""+o.key):n.toString(36)}function ed(o,n,e,t,r){var i=typeof o;(i==="undefined"||i==="boolean")&&(o=null);var s=!1;if(o===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(o.$$typeof){case Qc:case FO:s=!0}}if(s)return s=o,r=r(s),o=t===""?"."+Ih(s,0):t,L0(r)?(e="",o!=null&&(e=o.replace(j0,"$&/")+"/"),ed(r,n,e,"",function(f){return f})):r!=null&&(um(r)&&(r=XO(r,e+(!r.key||s&&s.key===r.key?"":(""+r.key).replace(j0,"$&/")+"/")+o)),n.push(r)),1;if(s=0,t=t===""?".":t+":",L0(o))for(var u=0;u<o.length;u++){i=o[u];var c=t+Ih(i,u);s+=ed(i,n,e,c,r)}else if(c=YO(o),typeof c=="function")for(o=c.call(o),u=0;!(i=o.next()).done;)i=i.value,c=t+Ih(i,u++),s+=ed(i,n,e,c,r);else if(i==="object")throw n=String(o),Error("Objects are not valid as a React child (found: "+(n==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return s}function Pf(o,n,e){if(o==null)return o;var t=[],r=0;return ed(o,t,"","",function(i){return n.call(e,i,r++)}),t}function JO(o){if(o._status===-1){var n=o._result;n=n(),n.then(function(e){(o._status===0||o._status===-1)&&(o._status=1,o._result=e)},function(e){(o._status===0||o._status===-1)&&(o._status=2,o._result=e)}),o._status===-1&&(o._status=0,o._result=n)}if(o._status===1)return o._result.default;throw o._result}var So={current:null},td={transition:null},ZO={ReactCurrentDispatcher:So,ReactCurrentBatchConfig:td,ReactCurrentOwner:lm};function kb(){throw Error("act(...) is not supported in production builds of React.")}rn.Children={map:Pf,forEach:function(o,n,e){Pf(o,function(){n.apply(this,arguments)},e)},count:function(o){var n=0;return Pf(o,function(){n++}),n},toArray:function(o){return Pf(o,function(n){return n})||[]},only:function(o){if(!um(o))throw Error("React.Children.only expected to receive a single React element child.");return o}};rn.Component=mu;rn.Fragment=VO;rn.Profiler=HO;rn.PureComponent=am;rn.StrictMode=zO;rn.Suspense=$O;rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZO;rn.act=kb;rn.cloneElement=function(o,n,e){if(o==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+o+".");var t=Cb({},o.props),r=o.key,i=o.ref,s=o._owner;if(n!=null){if(n.ref!==void 0&&(i=n.ref,s=lm.current),n.key!==void 0&&(r=""+n.key),o.type&&o.type.defaultProps)var u=o.type.defaultProps;for(c in n)Tb.call(n,c)&&!Eb.hasOwnProperty(c)&&(t[c]=n[c]===void 0&&u!==void 0?u[c]:n[c])}var c=arguments.length-2;if(c===1)t.children=e;else if(1<c){u=Array(c);for(var f=0;f<c;f++)u[f]=arguments[f+2];t.children=u}return{$$typeof:Qc,type:o.type,key:r,ref:i,props:t,_owner:s}};rn.createContext=function(o){return o={$$typeof:BO,_currentValue:o,_currentValue2:o,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},o.Provider={$$typeof:UO,_context:o},o.Consumer=o};rn.createElement=Pb;rn.createFactory=function(o){var n=Pb.bind(null,o);return n.type=o,n};rn.createRef=function(){return{current:null}};rn.forwardRef=function(o){return{$$typeof:WO,render:o}};rn.isValidElement=um;rn.lazy=function(o){return{$$typeof:GO,_payload:{_status:-1,_result:o},_init:JO}};rn.memo=function(o,n){return{$$typeof:KO,type:o,compare:n===void 0?null:n}};rn.startTransition=function(o){var n=td.transition;td.transition={};try{o()}finally{td.transition=n}};rn.unstable_act=kb;rn.useCallback=function(o,n){return So.current.useCallback(o,n)};rn.useContext=function(o){return So.current.useContext(o)};rn.useDebugValue=function(){};rn.useDeferredValue=function(o){return So.current.useDeferredValue(o)};rn.useEffect=function(o,n){return So.current.useEffect(o,n)};rn.useId=function(){return So.current.useId()};rn.useImperativeHandle=function(o,n,e){return So.current.useImperativeHandle(o,n,e)};rn.useInsertionEffect=function(o,n){return So.current.useInsertionEffect(o,n)};rn.useLayoutEffect=function(o,n){return So.current.useLayoutEffect(o,n)};rn.useMemo=function(o,n){return So.current.useMemo(o,n)};rn.useReducer=function(o,n,e){return So.current.useReducer(o,n,e)};rn.useRef=function(o){return So.current.useRef(o)};rn.useState=function(o){return So.current.useState(o)};rn.useSyncExternalStore=function(o,n,e){return So.current.useSyncExternalStore(o,n,e)};rn.useTransition=function(){return So.current.useTransition()};rn.version="18.3.1";bb.exports=rn;var We=bb.exports;const mn=wb(We),QO=NO({__proto__:null,default:mn},[We]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eT=We,tT=Symbol.for("react.element"),nT=Symbol.for("react.fragment"),rT=Object.prototype.hasOwnProperty,oT=eT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,iT={key:!0,ref:!0,__self:!0,__source:!0};function Ab(o,n,e){var t,r={},i=null,s=null;e!==void 0&&(i=""+e),n.key!==void 0&&(i=""+n.key),n.ref!==void 0&&(s=n.ref);for(t in n)rT.call(n,t)&&!iT.hasOwnProperty(t)&&(r[t]=n[t]);if(o&&o.defaultProps)for(t in n=o.defaultProps,n)r[t]===void 0&&(r[t]=n[t]);return{$$typeof:tT,type:o,key:i,ref:s,props:r,_owner:oT.current}}zp.Fragment=nT;zp.jsx=Ab;zp.jsxs=Ab;_b.exports=zp;var Ie=_b.exports,Vv={},Mb={exports:{}},ai={},Db={exports:{}},Lb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(o){function n(he,Le){var $e=he.length;he.push(Le);e:for(;0<$e;){var be=$e-1>>>1,Re=he[be];if(0<r(Re,Le))he[be]=Le,he[$e]=Re,$e=be;else break e}}function e(he){return he.length===0?null:he[0]}function t(he){if(he.length===0)return null;var Le=he[0],$e=he.pop();if($e!==Le){he[0]=$e;e:for(var be=0,Re=he.length,rt=Re>>>1;be<rt;){var He=2*(be+1)-1,_t=he[He],Te=He+1,Ne=he[Te];if(0>r(_t,$e))Te<Re&&0>r(Ne,_t)?(he[be]=Ne,he[Te]=$e,be=Te):(he[be]=_t,he[He]=$e,be=He);else if(Te<Re&&0>r(Ne,$e))he[be]=Ne,he[Te]=$e,be=Te;else break e}}return Le}function r(he,Le){var $e=he.sortIndex-Le.sortIndex;return $e!==0?$e:he.id-Le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;o.unstable_now=function(){return i.now()}}else{var s=Date,u=s.now();o.unstable_now=function(){return s.now()-u}}var c=[],f=[],h=1,v=null,m=3,_=!1,C=!1,T=!1,k=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(he){for(var Le=e(f);Le!==null;){if(Le.callback===null)t(f);else if(Le.startTime<=he)t(f),Le.sortIndex=Le.expirationTime,n(c,Le);else break;Le=e(f)}}function V(he){if(T=!1,D(he),!C)if(e(c)!==null)C=!0,R(re);else{var Le=e(f);Le!==null&&ke(V,Le.startTime-he)}}function re(he,Le){C=!1,T&&(T=!1,P(pe),pe=-1),_=!0;var $e=m;try{for(D(Le),v=e(c);v!==null&&(!(v.expirationTime>Le)||he&&!Y());){var be=v.callback;if(typeof be=="function"){v.callback=null,m=v.priorityLevel;var Re=be(v.expirationTime<=Le);Le=o.unstable_now(),typeof Re=="function"?v.callback=Re:v===e(c)&&t(c),D(Le)}else t(c);v=e(c)}if(v!==null)var rt=!0;else{var He=e(f);He!==null&&ke(V,He.startTime-Le),rt=!1}return rt}finally{v=null,m=$e,_=!1}}var _e=!1,Q=null,pe=-1,ne=5,me=-1;function Y(){return!(o.unstable_now()-me<ne)}function W(){if(Q!==null){var he=o.unstable_now();me=he;var Le=!0;try{Le=Q(!0,he)}finally{Le?te():(_e=!1,Q=null)}}else _e=!1}var te;if(typeof L=="function")te=function(){L(W)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,ge=q.port2;q.port1.onmessage=W,te=function(){ge.postMessage(null)}}else te=function(){k(W,0)};function R(he){Q=he,_e||(_e=!0,te())}function ke(he,Le){pe=k(function(){he(o.unstable_now())},Le)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(he){he.callback=null},o.unstable_continueExecution=function(){C||_||(C=!0,R(re))},o.unstable_forceFrameRate=function(he){0>he||125<he?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ne=0<he?Math.floor(1e3/he):5},o.unstable_getCurrentPriorityLevel=function(){return m},o.unstable_getFirstCallbackNode=function(){return e(c)},o.unstable_next=function(he){switch(m){case 1:case 2:case 3:var Le=3;break;default:Le=m}var $e=m;m=Le;try{return he()}finally{m=$e}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=function(){},o.unstable_runWithPriority=function(he,Le){switch(he){case 1:case 2:case 3:case 4:case 5:break;default:he=3}var $e=m;m=he;try{return Le()}finally{m=$e}},o.unstable_scheduleCallback=function(he,Le,$e){var be=o.unstable_now();switch(typeof $e=="object"&&$e!==null?($e=$e.delay,$e=typeof $e=="number"&&0<$e?be+$e:be):$e=be,he){case 1:var Re=-1;break;case 2:Re=250;break;case 5:Re=1073741823;break;case 4:Re=1e4;break;default:Re=5e3}return Re=$e+Re,he={id:h++,callback:Le,priorityLevel:he,startTime:$e,expirationTime:Re,sortIndex:-1},$e>be?(he.sortIndex=$e,n(f,he),e(c)===null&&he===e(f)&&(T?(P(pe),pe=-1):T=!0,ke(V,$e-be))):(he.sortIndex=Re,n(c,he),C||_||(C=!0,R(re))),he},o.unstable_shouldYield=Y,o.unstable_wrapCallback=function(he){var Le=m;return function(){var $e=m;m=Le;try{return he.apply(this,arguments)}finally{m=$e}}}})(Lb);Db.exports=Lb;var aT=Db.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sT=We,ii=aT;function ht(o){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+o,e=1;e<arguments.length;e++)n+="&args[]="+encodeURIComponent(arguments[e]);return"Minified React error #"+o+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var jb=new Set,Mc={};function nl(o,n){su(o,n),su(o+"Capture",n)}function su(o,n){for(Mc[o]=n,o=0;o<n.length;o++)jb.add(n[o])}var _a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zv=Object.prototype.hasOwnProperty,lT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,I0={},N0={};function uT(o){return zv.call(N0,o)?!0:zv.call(I0,o)?!1:lT.test(o)?N0[o]=!0:(I0[o]=!0,!1)}function cT(o,n,e,t){if(e!==null&&e.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return t?!1:e!==null?!e.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function fT(o,n,e,t){if(n===null||typeof n>"u"||cT(o,n,e,t))return!0;if(t)return!1;if(e!==null)switch(e.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function Oo(o,n,e,t,r,i,s){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=t,this.attributeNamespace=r,this.mustUseProperty=e,this.propertyName=o,this.type=n,this.sanitizeURL=i,this.removeEmptyString=s}var Ur={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){Ur[o]=new Oo(o,0,!1,o,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var n=o[0];Ur[n]=new Oo(n,1,!1,o[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(o){Ur[o]=new Oo(o,2,!1,o.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){Ur[o]=new Oo(o,2,!1,o,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){Ur[o]=new Oo(o,3,!1,o.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(o){Ur[o]=new Oo(o,3,!0,o,null,!1,!1)});["capture","download"].forEach(function(o){Ur[o]=new Oo(o,4,!1,o,null,!1,!1)});["cols","rows","size","span"].forEach(function(o){Ur[o]=new Oo(o,6,!1,o,null,!1,!1)});["rowSpan","start"].forEach(function(o){Ur[o]=new Oo(o,5,!1,o.toLowerCase(),null,!1,!1)});var cm=/[\-:]([a-z])/g;function fm(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var n=o.replace(cm,fm);Ur[n]=new Oo(n,1,!1,o,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var n=o.replace(cm,fm);Ur[n]=new Oo(n,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(o){var n=o.replace(cm,fm);Ur[n]=new Oo(n,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(o){Ur[o]=new Oo(o,1,!1,o.toLowerCase(),null,!1,!1)});Ur.xlinkHref=new Oo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(o){Ur[o]=new Oo(o,1,!1,o.toLowerCase(),null,!0,!0)});function dm(o,n,e,t){var r=Ur.hasOwnProperty(n)?Ur[n]:null;(r!==null?r.type!==0:t||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(fT(n,e,r,t)&&(e=null),t||r===null?uT(n)&&(e===null?o.removeAttribute(n):o.setAttribute(n,""+e)):r.mustUseProperty?o[r.propertyName]=e===null?r.type===3?!1:"":e:(n=r.attributeName,t=r.attributeNamespace,e===null?o.removeAttribute(n):(r=r.type,e=r===3||r===4&&e===!0?"":""+e,t?o.setAttributeNS(t,n,e):o.setAttribute(n,e))))}var Oa=sT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,kf=Symbol.for("react.element"),Ll=Symbol.for("react.portal"),jl=Symbol.for("react.fragment"),pm=Symbol.for("react.strict_mode"),Hv=Symbol.for("react.profiler"),Ib=Symbol.for("react.provider"),Nb=Symbol.for("react.context"),hm=Symbol.for("react.forward_ref"),Uv=Symbol.for("react.suspense"),Bv=Symbol.for("react.suspense_list"),vm=Symbol.for("react.memo"),Ba=Symbol.for("react.lazy"),Rb=Symbol.for("react.offscreen"),R0=Symbol.iterator;function Bu(o){return o===null||typeof o!="object"?null:(o=R0&&o[R0]||o["@@iterator"],typeof o=="function"?o:null)}var Xn=Object.assign,Nh;function tc(o){if(Nh===void 0)try{throw Error()}catch(e){var n=e.stack.trim().match(/\n( *(at )?)/);Nh=n&&n[1]||""}return`
`+Nh+o}var Rh=!1;function Fh(o,n){if(!o||Rh)return"";Rh=!0;var e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(f){var t=f}Reflect.construct(o,[],n)}else{try{n.call()}catch(f){t=f}o.call(n.prototype)}else{try{throw Error()}catch(f){t=f}o()}}catch(f){if(f&&t&&typeof f.stack=="string"){for(var r=f.stack.split(`
`),i=t.stack.split(`
`),s=r.length-1,u=i.length-1;1<=s&&0<=u&&r[s]!==i[u];)u--;for(;1<=s&&0<=u;s--,u--)if(r[s]!==i[u]){if(s!==1||u!==1)do if(s--,u--,0>u||r[s]!==i[u]){var c=`
`+r[s].replace(" at new "," at ");return o.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",o.displayName)),c}while(1<=s&&0<=u);break}}}finally{Rh=!1,Error.prepareStackTrace=e}return(o=o?o.displayName||o.name:"")?tc(o):""}function dT(o){switch(o.tag){case 5:return tc(o.type);case 16:return tc("Lazy");case 13:return tc("Suspense");case 19:return tc("SuspenseList");case 0:case 2:case 15:return o=Fh(o.type,!1),o;case 11:return o=Fh(o.type.render,!1),o;case 1:return o=Fh(o.type,!0),o;default:return""}}function Wv(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case jl:return"Fragment";case Ll:return"Portal";case Hv:return"Profiler";case pm:return"StrictMode";case Uv:return"Suspense";case Bv:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case Nb:return(o.displayName||"Context")+".Consumer";case Ib:return(o._context.displayName||"Context")+".Provider";case hm:var n=o.render;return o=o.displayName,o||(o=n.displayName||n.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case vm:return n=o.displayName||null,n!==null?n:Wv(o.type)||"Memo";case Ba:n=o._payload,o=o._init;try{return Wv(o(n))}catch{}}return null}function pT(o){var n=o.type;switch(o.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=n.render,o=o.displayName||o.name||"",n.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Wv(n);case 8:return n===pm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function us(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Fb(o){var n=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function hT(o){var n=Fb(o)?"checked":"value",e=Object.getOwnPropertyDescriptor(o.constructor.prototype,n),t=""+o[n];if(!o.hasOwnProperty(n)&&typeof e<"u"&&typeof e.get=="function"&&typeof e.set=="function"){var r=e.get,i=e.set;return Object.defineProperty(o,n,{configurable:!0,get:function(){return r.call(this)},set:function(s){t=""+s,i.call(this,s)}}),Object.defineProperty(o,n,{enumerable:e.enumerable}),{getValue:function(){return t},setValue:function(s){t=""+s},stopTracking:function(){o._valueTracker=null,delete o[n]}}}}function Af(o){o._valueTracker||(o._valueTracker=hT(o))}function Vb(o){if(!o)return!1;var n=o._valueTracker;if(!n)return!0;var e=n.getValue(),t="";return o&&(t=Fb(o)?o.checked?"true":"false":o.value),o=t,o!==e?(n.setValue(o),!0):!1}function vd(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function $v(o,n){var e=n.checked;return Xn({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:e??o._wrapperState.initialChecked})}function F0(o,n){var e=n.defaultValue==null?"":n.defaultValue,t=n.checked!=null?n.checked:n.defaultChecked;e=us(n.value!=null?n.value:e),o._wrapperState={initialChecked:t,initialValue:e,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function zb(o,n){n=n.checked,n!=null&&dm(o,"checked",n,!1)}function Kv(o,n){zb(o,n);var e=us(n.value),t=n.type;if(e!=null)t==="number"?(e===0&&o.value===""||o.value!=e)&&(o.value=""+e):o.value!==""+e&&(o.value=""+e);else if(t==="submit"||t==="reset"){o.removeAttribute("value");return}n.hasOwnProperty("value")?Gv(o,n.type,e):n.hasOwnProperty("defaultValue")&&Gv(o,n.type,us(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(o.defaultChecked=!!n.defaultChecked)}function V0(o,n,e){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var t=n.type;if(!(t!=="submit"&&t!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+o._wrapperState.initialValue,e||n===o.value||(o.value=n),o.defaultValue=n}e=o.name,e!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,e!==""&&(o.name=e)}function Gv(o,n,e){(n!=="number"||vd(o.ownerDocument)!==o)&&(e==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+e&&(o.defaultValue=""+e))}var nc=Array.isArray;function Ql(o,n,e,t){if(o=o.options,n){n={};for(var r=0;r<e.length;r++)n["$"+e[r]]=!0;for(e=0;e<o.length;e++)r=n.hasOwnProperty("$"+o[e].value),o[e].selected!==r&&(o[e].selected=r),r&&t&&(o[e].defaultSelected=!0)}else{for(e=""+us(e),n=null,r=0;r<o.length;r++){if(o[r].value===e){o[r].selected=!0,t&&(o[r].defaultSelected=!0);return}n!==null||o[r].disabled||(n=o[r])}n!==null&&(n.selected=!0)}}function Yv(o,n){if(n.dangerouslySetInnerHTML!=null)throw Error(ht(91));return Xn({},n,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function z0(o,n){var e=n.value;if(e==null){if(e=n.children,n=n.defaultValue,e!=null){if(n!=null)throw Error(ht(92));if(nc(e)){if(1<e.length)throw Error(ht(93));e=e[0]}n=e}n==null&&(n=""),e=n}o._wrapperState={initialValue:us(e)}}function Hb(o,n){var e=us(n.value),t=us(n.defaultValue);e!=null&&(e=""+e,e!==o.value&&(o.value=e),n.defaultValue==null&&o.defaultValue!==e&&(o.defaultValue=e)),t!=null&&(o.defaultValue=""+t)}function H0(o){var n=o.textContent;n===o._wrapperState.initialValue&&n!==""&&n!==null&&(o.value=n)}function Ub(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xv(o,n){return o==null||o==="http://www.w3.org/1999/xhtml"?Ub(n):o==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var Mf,Bb=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,e,t,r){MSApp.execUnsafeLocalFunction(function(){return o(n,e,t,r)})}:o}(function(o,n){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=n;else{for(Mf=Mf||document.createElement("div"),Mf.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=Mf.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;n.firstChild;)o.appendChild(n.firstChild)}});function Dc(o,n){if(n){var e=o.firstChild;if(e&&e===o.lastChild&&e.nodeType===3){e.nodeValue=n;return}}o.textContent=n}var uc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vT=["Webkit","ms","Moz","O"];Object.keys(uc).forEach(function(o){vT.forEach(function(n){n=n+o.charAt(0).toUpperCase()+o.substring(1),uc[n]=uc[o]})});function Wb(o,n,e){return n==null||typeof n=="boolean"||n===""?"":e||typeof n!="number"||n===0||uc.hasOwnProperty(o)&&uc[o]?(""+n).trim():n+"px"}function $b(o,n){o=o.style;for(var e in n)if(n.hasOwnProperty(e)){var t=e.indexOf("--")===0,r=Wb(e,n[e],t);e==="float"&&(e="cssFloat"),t?o.setProperty(e,r):o[e]=r}}var gT=Xn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qv(o,n){if(n){if(gT[o]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(ht(137,o));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(ht(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(ht(61))}if(n.style!=null&&typeof n.style!="object")throw Error(ht(62))}}function Jv(o,n){if(o.indexOf("-")===-1)return typeof n.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zv=null;function gm(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Qv=null,eu=null,tu=null;function U0(o){if(o=nf(o)){if(typeof Qv!="function")throw Error(ht(280));var n=o.stateNode;n&&(n=$p(n),Qv(o.stateNode,o.type,n))}}function Kb(o){eu?tu?tu.push(o):tu=[o]:eu=o}function Gb(){if(eu){var o=eu,n=tu;if(tu=eu=null,U0(o),n)for(o=0;o<n.length;o++)U0(n[o])}}function Yb(o,n){return o(n)}function Xb(){}var Vh=!1;function qb(o,n,e){if(Vh)return o(n,e);Vh=!0;try{return Yb(o,n,e)}finally{Vh=!1,(eu!==null||tu!==null)&&(Xb(),Gb())}}function Lc(o,n){var e=o.stateNode;if(e===null)return null;var t=$p(e);if(t===null)return null;e=t[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(t=!t.disabled)||(o=o.type,t=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!t;break e;default:o=!1}if(o)return null;if(e&&typeof e!="function")throw Error(ht(231,n,typeof e));return e}var eg=!1;if(_a)try{var Wu={};Object.defineProperty(Wu,"passive",{get:function(){eg=!0}}),window.addEventListener("test",Wu,Wu),window.removeEventListener("test",Wu,Wu)}catch{eg=!1}function mT(o,n,e,t,r,i,s,u,c){var f=Array.prototype.slice.call(arguments,3);try{n.apply(e,f)}catch(h){this.onError(h)}}var cc=!1,gd=null,md=!1,tg=null,yT={onError:function(o){cc=!0,gd=o}};function wT(o,n,e,t,r,i,s,u,c){cc=!1,gd=null,mT.apply(yT,arguments)}function _T(o,n,e,t,r,i,s,u,c){if(wT.apply(this,arguments),cc){if(cc){var f=gd;cc=!1,gd=null}else throw Error(ht(198));md||(md=!0,tg=f)}}function rl(o){var n=o,e=o;if(o.alternate)for(;n.return;)n=n.return;else{o=n;do n=o,n.flags&4098&&(e=n.return),o=n.return;while(o)}return n.tag===3?e:null}function Jb(o){if(o.tag===13){var n=o.memoizedState;if(n===null&&(o=o.alternate,o!==null&&(n=o.memoizedState)),n!==null)return n.dehydrated}return null}function B0(o){if(rl(o)!==o)throw Error(ht(188))}function bT(o){var n=o.alternate;if(!n){if(n=rl(o),n===null)throw Error(ht(188));return n!==o?null:o}for(var e=o,t=n;;){var r=e.return;if(r===null)break;var i=r.alternate;if(i===null){if(t=r.return,t!==null){e=t;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===e)return B0(r),o;if(i===t)return B0(r),n;i=i.sibling}throw Error(ht(188))}if(e.return!==t.return)e=r,t=i;else{for(var s=!1,u=r.child;u;){if(u===e){s=!0,e=r,t=i;break}if(u===t){s=!0,t=r,e=i;break}u=u.sibling}if(!s){for(u=i.child;u;){if(u===e){s=!0,e=i,t=r;break}if(u===t){s=!0,t=i,e=r;break}u=u.sibling}if(!s)throw Error(ht(189))}}if(e.alternate!==t)throw Error(ht(190))}if(e.tag!==3)throw Error(ht(188));return e.stateNode.current===e?o:n}function Zb(o){return o=bT(o),o!==null?Qb(o):null}function Qb(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var n=Qb(o);if(n!==null)return n;o=o.sibling}return null}var ex=ii.unstable_scheduleCallback,W0=ii.unstable_cancelCallback,xT=ii.unstable_shouldYield,CT=ii.unstable_requestPaint,ir=ii.unstable_now,ST=ii.unstable_getCurrentPriorityLevel,mm=ii.unstable_ImmediatePriority,tx=ii.unstable_UserBlockingPriority,yd=ii.unstable_NormalPriority,OT=ii.unstable_LowPriority,nx=ii.unstable_IdlePriority,Hp=null,oa=null;function TT(o){if(oa&&typeof oa.onCommitFiberRoot=="function")try{oa.onCommitFiberRoot(Hp,o,void 0,(o.current.flags&128)===128)}catch{}}var Ri=Math.clz32?Math.clz32:kT,ET=Math.log,PT=Math.LN2;function kT(o){return o>>>=0,o===0?32:31-(ET(o)/PT|0)|0}var Df=64,Lf=4194304;function rc(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function wd(o,n){var e=o.pendingLanes;if(e===0)return 0;var t=0,r=o.suspendedLanes,i=o.pingedLanes,s=e&268435455;if(s!==0){var u=s&~r;u!==0?t=rc(u):(i&=s,i!==0&&(t=rc(i)))}else s=e&~r,s!==0?t=rc(s):i!==0&&(t=rc(i));if(t===0)return 0;if(n!==0&&n!==t&&!(n&r)&&(r=t&-t,i=n&-n,r>=i||r===16&&(i&4194240)!==0))return n;if(t&4&&(t|=e&16),n=o.entangledLanes,n!==0)for(o=o.entanglements,n&=t;0<n;)e=31-Ri(n),r=1<<e,t|=o[e],n&=~r;return t}function AT(o,n){switch(o){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function MT(o,n){for(var e=o.suspendedLanes,t=o.pingedLanes,r=o.expirationTimes,i=o.pendingLanes;0<i;){var s=31-Ri(i),u=1<<s,c=r[s];c===-1?(!(u&e)||u&t)&&(r[s]=AT(u,n)):c<=n&&(o.expiredLanes|=u),i&=~u}}function ng(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function rx(){var o=Df;return Df<<=1,!(Df&4194240)&&(Df=64),o}function zh(o){for(var n=[],e=0;31>e;e++)n.push(o);return n}function ef(o,n,e){o.pendingLanes|=n,n!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,n=31-Ri(n),o[n]=e}function DT(o,n){var e=o.pendingLanes&~n;o.pendingLanes=n,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=n,o.mutableReadLanes&=n,o.entangledLanes&=n,n=o.entanglements;var t=o.eventTimes;for(o=o.expirationTimes;0<e;){var r=31-Ri(e),i=1<<r;n[r]=0,t[r]=-1,o[r]=-1,e&=~i}}function ym(o,n){var e=o.entangledLanes|=n;for(o=o.entanglements;e;){var t=31-Ri(e),r=1<<t;r&n|o[t]&n&&(o[t]|=n),e&=~r}}var _n=0;function ox(o){return o&=-o,1<o?4<o?o&268435455?16:536870912:4:1}var ix,wm,ax,sx,lx,rg=!1,jf=[],ts=null,ns=null,rs=null,jc=new Map,Ic=new Map,Xa=[],LT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $0(o,n){switch(o){case"focusin":case"focusout":ts=null;break;case"dragenter":case"dragleave":ns=null;break;case"mouseover":case"mouseout":rs=null;break;case"pointerover":case"pointerout":jc.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ic.delete(n.pointerId)}}function $u(o,n,e,t,r,i){return o===null||o.nativeEvent!==i?(o={blockedOn:n,domEventName:e,eventSystemFlags:t,nativeEvent:i,targetContainers:[r]},n!==null&&(n=nf(n),n!==null&&wm(n)),o):(o.eventSystemFlags|=t,n=o.targetContainers,r!==null&&n.indexOf(r)===-1&&n.push(r),o)}function jT(o,n,e,t,r){switch(n){case"focusin":return ts=$u(ts,o,n,e,t,r),!0;case"dragenter":return ns=$u(ns,o,n,e,t,r),!0;case"mouseover":return rs=$u(rs,o,n,e,t,r),!0;case"pointerover":var i=r.pointerId;return jc.set(i,$u(jc.get(i)||null,o,n,e,t,r)),!0;case"gotpointercapture":return i=r.pointerId,Ic.set(i,$u(Ic.get(i)||null,o,n,e,t,r)),!0}return!1}function ux(o){var n=zs(o.target);if(n!==null){var e=rl(n);if(e!==null){if(n=e.tag,n===13){if(n=Jb(e),n!==null){o.blockedOn=n,lx(o.priority,function(){ax(e)});return}}else if(n===3&&e.stateNode.current.memoizedState.isDehydrated){o.blockedOn=e.tag===3?e.stateNode.containerInfo:null;return}}}o.blockedOn=null}function nd(o){if(o.blockedOn!==null)return!1;for(var n=o.targetContainers;0<n.length;){var e=og(o.domEventName,o.eventSystemFlags,n[0],o.nativeEvent);if(e===null){e=o.nativeEvent;var t=new e.constructor(e.type,e);Zv=t,e.target.dispatchEvent(t),Zv=null}else return n=nf(e),n!==null&&wm(n),o.blockedOn=e,!1;n.shift()}return!0}function K0(o,n,e){nd(o)&&e.delete(n)}function IT(){rg=!1,ts!==null&&nd(ts)&&(ts=null),ns!==null&&nd(ns)&&(ns=null),rs!==null&&nd(rs)&&(rs=null),jc.forEach(K0),Ic.forEach(K0)}function Ku(o,n){o.blockedOn===n&&(o.blockedOn=null,rg||(rg=!0,ii.unstable_scheduleCallback(ii.unstable_NormalPriority,IT)))}function Nc(o){function n(r){return Ku(r,o)}if(0<jf.length){Ku(jf[0],o);for(var e=1;e<jf.length;e++){var t=jf[e];t.blockedOn===o&&(t.blockedOn=null)}}for(ts!==null&&Ku(ts,o),ns!==null&&Ku(ns,o),rs!==null&&Ku(rs,o),jc.forEach(n),Ic.forEach(n),e=0;e<Xa.length;e++)t=Xa[e],t.blockedOn===o&&(t.blockedOn=null);for(;0<Xa.length&&(e=Xa[0],e.blockedOn===null);)ux(e),e.blockedOn===null&&Xa.shift()}var nu=Oa.ReactCurrentBatchConfig,_d=!0;function NT(o,n,e,t){var r=_n,i=nu.transition;nu.transition=null;try{_n=1,_m(o,n,e,t)}finally{_n=r,nu.transition=i}}function RT(o,n,e,t){var r=_n,i=nu.transition;nu.transition=null;try{_n=4,_m(o,n,e,t)}finally{_n=r,nu.transition=i}}function _m(o,n,e,t){if(_d){var r=og(o,n,e,t);if(r===null)qh(o,n,t,bd,e),$0(o,t);else if(jT(r,o,n,e,t))t.stopPropagation();else if($0(o,t),n&4&&-1<LT.indexOf(o)){for(;r!==null;){var i=nf(r);if(i!==null&&ix(i),i=og(o,n,e,t),i===null&&qh(o,n,t,bd,e),i===r)break;r=i}r!==null&&t.stopPropagation()}else qh(o,n,t,null,e)}}var bd=null;function og(o,n,e,t){if(bd=null,o=gm(t),o=zs(o),o!==null)if(n=rl(o),n===null)o=null;else if(e=n.tag,e===13){if(o=Jb(n),o!==null)return o;o=null}else if(e===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;o=null}else n!==o&&(o=null);return bd=o,null}function cx(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ST()){case mm:return 1;case tx:return 4;case yd:case OT:return 16;case nx:return 536870912;default:return 16}default:return 16}}var Ja=null,bm=null,rd=null;function fx(){if(rd)return rd;var o,n=bm,e=n.length,t,r="value"in Ja?Ja.value:Ja.textContent,i=r.length;for(o=0;o<e&&n[o]===r[o];o++);var s=e-o;for(t=1;t<=s&&n[e-t]===r[i-t];t++);return rd=r.slice(o,1<t?1-t:void 0)}function od(o){var n=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&n===13&&(o=13)):o=n,o===10&&(o=13),32<=o||o===13?o:0}function If(){return!0}function G0(){return!1}function si(o){function n(e,t,r,i,s){this._reactName=e,this._targetInst=r,this.type=t,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var u in o)o.hasOwnProperty(u)&&(e=o[u],this[u]=e?e(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?If:G0,this.isPropagationStopped=G0,this}return Xn(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!="unknown"&&(e.returnValue=!1),this.isDefaultPrevented=If)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!="unknown"&&(e.cancelBubble=!0),this.isPropagationStopped=If)},persist:function(){},isPersistent:If}),n}var yu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xm=si(yu),tf=Xn({},yu,{view:0,detail:0}),FT=si(tf),Hh,Uh,Gu,Up=Xn({},tf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cm,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Gu&&(Gu&&o.type==="mousemove"?(Hh=o.screenX-Gu.screenX,Uh=o.screenY-Gu.screenY):Uh=Hh=0,Gu=o),Hh)},movementY:function(o){return"movementY"in o?o.movementY:Uh}}),Y0=si(Up),VT=Xn({},Up,{dataTransfer:0}),zT=si(VT),HT=Xn({},tf,{relatedTarget:0}),Bh=si(HT),UT=Xn({},yu,{animationName:0,elapsedTime:0,pseudoElement:0}),BT=si(UT),WT=Xn({},yu,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),$T=si(WT),KT=Xn({},yu,{data:0}),X0=si(KT),GT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},YT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},XT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qT(o){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(o):(o=XT[o])?!!n[o]:!1}function Cm(){return qT}var JT=Xn({},tf,{key:function(o){if(o.key){var n=GT[o.key]||o.key;if(n!=="Unidentified")return n}return o.type==="keypress"?(o=od(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?YT[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cm,charCode:function(o){return o.type==="keypress"?od(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?od(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),ZT=si(JT),QT=Xn({},Up,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),q0=si(QT),eE=Xn({},tf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cm}),tE=si(eE),nE=Xn({},yu,{propertyName:0,elapsedTime:0,pseudoElement:0}),rE=si(nE),oE=Xn({},Up,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),iE=si(oE),aE=[9,13,27,32],Sm=_a&&"CompositionEvent"in window,fc=null;_a&&"documentMode"in document&&(fc=document.documentMode);var sE=_a&&"TextEvent"in window&&!fc,dx=_a&&(!Sm||fc&&8<fc&&11>=fc),J0=String.fromCharCode(32),Z0=!1;function px(o,n){switch(o){case"keyup":return aE.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hx(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Il=!1;function lE(o,n){switch(o){case"compositionend":return hx(n);case"keypress":return n.which!==32?null:(Z0=!0,J0);case"textInput":return o=n.data,o===J0&&Z0?null:o;default:return null}}function uE(o,n){if(Il)return o==="compositionend"||!Sm&&px(o,n)?(o=fx(),rd=bm=Ja=null,Il=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return dx&&n.locale!=="ko"?null:n.data;default:return null}}var cE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Q0(o){var n=o&&o.nodeName&&o.nodeName.toLowerCase();return n==="input"?!!cE[o.type]:n==="textarea"}function vx(o,n,e,t){Kb(t),n=xd(n,"onChange"),0<n.length&&(e=new xm("onChange","change",null,e,t),o.push({event:e,listeners:n}))}var dc=null,Rc=null;function fE(o){Tx(o,0)}function Bp(o){var n=Fl(o);if(Vb(n))return o}function dE(o,n){if(o==="change")return n}var gx=!1;if(_a){var Wh;if(_a){var $h="oninput"in document;if(!$h){var ew=document.createElement("div");ew.setAttribute("oninput","return;"),$h=typeof ew.oninput=="function"}Wh=$h}else Wh=!1;gx=Wh&&(!document.documentMode||9<document.documentMode)}function tw(){dc&&(dc.detachEvent("onpropertychange",mx),Rc=dc=null)}function mx(o){if(o.propertyName==="value"&&Bp(Rc)){var n=[];vx(n,Rc,o,gm(o)),qb(fE,n)}}function pE(o,n,e){o==="focusin"?(tw(),dc=n,Rc=e,dc.attachEvent("onpropertychange",mx)):o==="focusout"&&tw()}function hE(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Bp(Rc)}function vE(o,n){if(o==="click")return Bp(n)}function gE(o,n){if(o==="input"||o==="change")return Bp(n)}function mE(o,n){return o===n&&(o!==0||1/o===1/n)||o!==o&&n!==n}var Vi=typeof Object.is=="function"?Object.is:mE;function Fc(o,n){if(Vi(o,n))return!0;if(typeof o!="object"||o===null||typeof n!="object"||n===null)return!1;var e=Object.keys(o),t=Object.keys(n);if(e.length!==t.length)return!1;for(t=0;t<e.length;t++){var r=e[t];if(!zv.call(n,r)||!Vi(o[r],n[r]))return!1}return!0}function nw(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function rw(o,n){var e=nw(o);o=0;for(var t;e;){if(e.nodeType===3){if(t=o+e.textContent.length,o<=n&&t>=n)return{node:e,offset:n-o};o=t}e:{for(;e;){if(e.nextSibling){e=e.nextSibling;break e}e=e.parentNode}e=void 0}e=nw(e)}}function yx(o,n){return o&&n?o===n?!0:o&&o.nodeType===3?!1:n&&n.nodeType===3?yx(o,n.parentNode):"contains"in o?o.contains(n):o.compareDocumentPosition?!!(o.compareDocumentPosition(n)&16):!1:!1}function wx(){for(var o=window,n=vd();n instanceof o.HTMLIFrameElement;){try{var e=typeof n.contentWindow.location.href=="string"}catch{e=!1}if(e)o=n.contentWindow;else break;n=vd(o.document)}return n}function Om(o){var n=o&&o.nodeName&&o.nodeName.toLowerCase();return n&&(n==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||n==="textarea"||o.contentEditable==="true")}function yE(o){var n=wx(),e=o.focusedElem,t=o.selectionRange;if(n!==e&&e&&e.ownerDocument&&yx(e.ownerDocument.documentElement,e)){if(t!==null&&Om(e)){if(n=t.start,o=t.end,o===void 0&&(o=n),"selectionStart"in e)e.selectionStart=n,e.selectionEnd=Math.min(o,e.value.length);else if(o=(n=e.ownerDocument||document)&&n.defaultView||window,o.getSelection){o=o.getSelection();var r=e.textContent.length,i=Math.min(t.start,r);t=t.end===void 0?i:Math.min(t.end,r),!o.extend&&i>t&&(r=t,t=i,i=r),r=rw(e,i);var s=rw(e,t);r&&s&&(o.rangeCount!==1||o.anchorNode!==r.node||o.anchorOffset!==r.offset||o.focusNode!==s.node||o.focusOffset!==s.offset)&&(n=n.createRange(),n.setStart(r.node,r.offset),o.removeAllRanges(),i>t?(o.addRange(n),o.extend(s.node,s.offset)):(n.setEnd(s.node,s.offset),o.addRange(n)))}}for(n=[],o=e;o=o.parentNode;)o.nodeType===1&&n.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof e.focus=="function"&&e.focus(),e=0;e<n.length;e++)o=n[e],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var wE=_a&&"documentMode"in document&&11>=document.documentMode,Nl=null,ig=null,pc=null,ag=!1;function ow(o,n,e){var t=e.window===e?e.document:e.nodeType===9?e:e.ownerDocument;ag||Nl==null||Nl!==vd(t)||(t=Nl,"selectionStart"in t&&Om(t)?t={start:t.selectionStart,end:t.selectionEnd}:(t=(t.ownerDocument&&t.ownerDocument.defaultView||window).getSelection(),t={anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}),pc&&Fc(pc,t)||(pc=t,t=xd(ig,"onSelect"),0<t.length&&(n=new xm("onSelect","select",null,n,e),o.push({event:n,listeners:t}),n.target=Nl)))}function Nf(o,n){var e={};return e[o.toLowerCase()]=n.toLowerCase(),e["Webkit"+o]="webkit"+n,e["Moz"+o]="moz"+n,e}var Rl={animationend:Nf("Animation","AnimationEnd"),animationiteration:Nf("Animation","AnimationIteration"),animationstart:Nf("Animation","AnimationStart"),transitionend:Nf("Transition","TransitionEnd")},Kh={},_x={};_a&&(_x=document.createElement("div").style,"AnimationEvent"in window||(delete Rl.animationend.animation,delete Rl.animationiteration.animation,delete Rl.animationstart.animation),"TransitionEvent"in window||delete Rl.transitionend.transition);function Wp(o){if(Kh[o])return Kh[o];if(!Rl[o])return o;var n=Rl[o],e;for(e in n)if(n.hasOwnProperty(e)&&e in _x)return Kh[o]=n[e];return o}var bx=Wp("animationend"),xx=Wp("animationiteration"),Cx=Wp("animationstart"),Sx=Wp("transitionend"),Ox=new Map,iw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ds(o,n){Ox.set(o,n),nl(n,[o])}for(var Gh=0;Gh<iw.length;Gh++){var Yh=iw[Gh],_E=Yh.toLowerCase(),bE=Yh[0].toUpperCase()+Yh.slice(1);ds(_E,"on"+bE)}ds(bx,"onAnimationEnd");ds(xx,"onAnimationIteration");ds(Cx,"onAnimationStart");ds("dblclick","onDoubleClick");ds("focusin","onFocus");ds("focusout","onBlur");ds(Sx,"onTransitionEnd");su("onMouseEnter",["mouseout","mouseover"]);su("onMouseLeave",["mouseout","mouseover"]);su("onPointerEnter",["pointerout","pointerover"]);su("onPointerLeave",["pointerout","pointerover"]);nl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));nl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));nl("onBeforeInput",["compositionend","keypress","textInput","paste"]);nl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));nl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));nl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xE=new Set("cancel close invalid load scroll toggle".split(" ").concat(oc));function aw(o,n,e){var t=o.type||"unknown-event";o.currentTarget=e,_T(t,n,void 0,o),o.currentTarget=null}function Tx(o,n){n=(n&4)!==0;for(var e=0;e<o.length;e++){var t=o[e],r=t.event;t=t.listeners;e:{var i=void 0;if(n)for(var s=t.length-1;0<=s;s--){var u=t[s],c=u.instance,f=u.currentTarget;if(u=u.listener,c!==i&&r.isPropagationStopped())break e;aw(r,u,f),i=c}else for(s=0;s<t.length;s++){if(u=t[s],c=u.instance,f=u.currentTarget,u=u.listener,c!==i&&r.isPropagationStopped())break e;aw(r,u,f),i=c}}}if(md)throw o=tg,md=!1,tg=null,o}function Ln(o,n){var e=n[fg];e===void 0&&(e=n[fg]=new Set);var t=o+"__bubble";e.has(t)||(Ex(n,o,2,!1),e.add(t))}function Xh(o,n,e){var t=0;n&&(t|=4),Ex(e,o,t,n)}var Rf="_reactListening"+Math.random().toString(36).slice(2);function Vc(o){if(!o[Rf]){o[Rf]=!0,jb.forEach(function(e){e!=="selectionchange"&&(xE.has(e)||Xh(e,!1,o),Xh(e,!0,o))});var n=o.nodeType===9?o:o.ownerDocument;n===null||n[Rf]||(n[Rf]=!0,Xh("selectionchange",!1,n))}}function Ex(o,n,e,t){switch(cx(n)){case 1:var r=NT;break;case 4:r=RT;break;default:r=_m}e=r.bind(null,n,e,o),r=void 0,!eg||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(r=!0),t?r!==void 0?o.addEventListener(n,e,{capture:!0,passive:r}):o.addEventListener(n,e,!0):r!==void 0?o.addEventListener(n,e,{passive:r}):o.addEventListener(n,e,!1)}function qh(o,n,e,t,r){var i=t;if(!(n&1)&&!(n&2)&&t!==null)e:for(;;){if(t===null)return;var s=t.tag;if(s===3||s===4){var u=t.stateNode.containerInfo;if(u===r||u.nodeType===8&&u.parentNode===r)break;if(s===4)for(s=t.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;s=s.return}for(;u!==null;){if(s=zs(u),s===null)return;if(c=s.tag,c===5||c===6){t=i=s;continue e}u=u.parentNode}}t=t.return}qb(function(){var f=i,h=gm(e),v=[];e:{var m=Ox.get(o);if(m!==void 0){var _=xm,C=o;switch(o){case"keypress":if(od(e)===0)break e;case"keydown":case"keyup":_=ZT;break;case"focusin":C="focus",_=Bh;break;case"focusout":C="blur",_=Bh;break;case"beforeblur":case"afterblur":_=Bh;break;case"click":if(e.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=Y0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=zT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=tE;break;case bx:case xx:case Cx:_=BT;break;case Sx:_=rE;break;case"scroll":_=FT;break;case"wheel":_=iE;break;case"copy":case"cut":case"paste":_=$T;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=q0}var T=(n&4)!==0,k=!T&&o==="scroll",P=T?m!==null?m+"Capture":null:m;T=[];for(var L=f,D;L!==null;){D=L;var V=D.stateNode;if(D.tag===5&&V!==null&&(D=V,P!==null&&(V=Lc(L,P),V!=null&&T.push(zc(L,V,D)))),k)break;L=L.return}0<T.length&&(m=new _(m,C,null,e,h),v.push({event:m,listeners:T}))}}if(!(n&7)){e:{if(m=o==="mouseover"||o==="pointerover",_=o==="mouseout"||o==="pointerout",m&&e!==Zv&&(C=e.relatedTarget||e.fromElement)&&(zs(C)||C[ba]))break e;if((_||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,_?(C=e.relatedTarget||e.toElement,_=f,C=C?zs(C):null,C!==null&&(k=rl(C),C!==k||C.tag!==5&&C.tag!==6)&&(C=null)):(_=null,C=f),_!==C)){if(T=Y0,V="onMouseLeave",P="onMouseEnter",L="mouse",(o==="pointerout"||o==="pointerover")&&(T=q0,V="onPointerLeave",P="onPointerEnter",L="pointer"),k=_==null?m:Fl(_),D=C==null?m:Fl(C),m=new T(V,L+"leave",_,e,h),m.target=k,m.relatedTarget=D,V=null,zs(h)===f&&(T=new T(P,L+"enter",C,e,h),T.target=D,T.relatedTarget=k,V=T),k=V,_&&C)t:{for(T=_,P=C,L=0,D=T;D;D=Tl(D))L++;for(D=0,V=P;V;V=Tl(V))D++;for(;0<L-D;)T=Tl(T),L--;for(;0<D-L;)P=Tl(P),D--;for(;L--;){if(T===P||P!==null&&T===P.alternate)break t;T=Tl(T),P=Tl(P)}T=null}else T=null;_!==null&&sw(v,m,_,T,!1),C!==null&&k!==null&&sw(v,k,C,T,!0)}}e:{if(m=f?Fl(f):window,_=m.nodeName&&m.nodeName.toLowerCase(),_==="select"||_==="input"&&m.type==="file")var re=dE;else if(Q0(m))if(gx)re=gE;else{re=hE;var _e=pE}else(_=m.nodeName)&&_.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(re=vE);if(re&&(re=re(o,f))){vx(v,re,e,h);break e}_e&&_e(o,m,f),o==="focusout"&&(_e=m._wrapperState)&&_e.controlled&&m.type==="number"&&Gv(m,"number",m.value)}switch(_e=f?Fl(f):window,o){case"focusin":(Q0(_e)||_e.contentEditable==="true")&&(Nl=_e,ig=f,pc=null);break;case"focusout":pc=ig=Nl=null;break;case"mousedown":ag=!0;break;case"contextmenu":case"mouseup":case"dragend":ag=!1,ow(v,e,h);break;case"selectionchange":if(wE)break;case"keydown":case"keyup":ow(v,e,h)}var Q;if(Sm)e:{switch(o){case"compositionstart":var pe="onCompositionStart";break e;case"compositionend":pe="onCompositionEnd";break e;case"compositionupdate":pe="onCompositionUpdate";break e}pe=void 0}else Il?px(o,e)&&(pe="onCompositionEnd"):o==="keydown"&&e.keyCode===229&&(pe="onCompositionStart");pe&&(dx&&e.locale!=="ko"&&(Il||pe!=="onCompositionStart"?pe==="onCompositionEnd"&&Il&&(Q=fx()):(Ja=h,bm="value"in Ja?Ja.value:Ja.textContent,Il=!0)),_e=xd(f,pe),0<_e.length&&(pe=new X0(pe,o,null,e,h),v.push({event:pe,listeners:_e}),Q?pe.data=Q:(Q=hx(e),Q!==null&&(pe.data=Q)))),(Q=sE?lE(o,e):uE(o,e))&&(f=xd(f,"onBeforeInput"),0<f.length&&(h=new X0("onBeforeInput","beforeinput",null,e,h),v.push({event:h,listeners:f}),h.data=Q))}Tx(v,n)})}function zc(o,n,e){return{instance:o,listener:n,currentTarget:e}}function xd(o,n){for(var e=n+"Capture",t=[];o!==null;){var r=o,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=Lc(o,e),i!=null&&t.unshift(zc(o,i,r)),i=Lc(o,n),i!=null&&t.push(zc(o,i,r))),o=o.return}return t}function Tl(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function sw(o,n,e,t,r){for(var i=n._reactName,s=[];e!==null&&e!==t;){var u=e,c=u.alternate,f=u.stateNode;if(c!==null&&c===t)break;u.tag===5&&f!==null&&(u=f,r?(c=Lc(e,i),c!=null&&s.unshift(zc(e,c,u))):r||(c=Lc(e,i),c!=null&&s.push(zc(e,c,u)))),e=e.return}s.length!==0&&o.push({event:n,listeners:s})}var CE=/\r\n?/g,SE=/\u0000|\uFFFD/g;function lw(o){return(typeof o=="string"?o:""+o).replace(CE,`
`).replace(SE,"")}function Ff(o,n,e){if(n=lw(n),lw(o)!==n&&e)throw Error(ht(425))}function Cd(){}var sg=null,lg=null;function ug(o,n){return o==="textarea"||o==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var cg=typeof setTimeout=="function"?setTimeout:void 0,OE=typeof clearTimeout=="function"?clearTimeout:void 0,uw=typeof Promise=="function"?Promise:void 0,TE=typeof queueMicrotask=="function"?queueMicrotask:typeof uw<"u"?function(o){return uw.resolve(null).then(o).catch(EE)}:cg;function EE(o){setTimeout(function(){throw o})}function Jh(o,n){var e=n,t=0;do{var r=e.nextSibling;if(o.removeChild(e),r&&r.nodeType===8)if(e=r.data,e==="/$"){if(t===0){o.removeChild(r),Nc(n);return}t--}else e!=="$"&&e!=="$?"&&e!=="$!"||t++;e=r}while(e);Nc(n)}function os(o){for(;o!=null;o=o.nextSibling){var n=o.nodeType;if(n===1||n===3)break;if(n===8){if(n=o.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return o}function cw(o){o=o.previousSibling;for(var n=0;o;){if(o.nodeType===8){var e=o.data;if(e==="$"||e==="$!"||e==="$?"){if(n===0)return o;n--}else e==="/$"&&n++}o=o.previousSibling}return null}var wu=Math.random().toString(36).slice(2),ra="__reactFiber$"+wu,Hc="__reactProps$"+wu,ba="__reactContainer$"+wu,fg="__reactEvents$"+wu,PE="__reactListeners$"+wu,kE="__reactHandles$"+wu;function zs(o){var n=o[ra];if(n)return n;for(var e=o.parentNode;e;){if(n=e[ba]||e[ra]){if(e=n.alternate,n.child!==null||e!==null&&e.child!==null)for(o=cw(o);o!==null;){if(e=o[ra])return e;o=cw(o)}return n}o=e,e=o.parentNode}return null}function nf(o){return o=o[ra]||o[ba],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function Fl(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(ht(33))}function $p(o){return o[Hc]||null}var dg=[],Vl=-1;function ps(o){return{current:o}}function In(o){0>Vl||(o.current=dg[Vl],dg[Vl]=null,Vl--)}function kn(o,n){Vl++,dg[Vl]=o.current,o.current=n}var cs={},ro=ps(cs),Uo=ps(!1),Ys=cs;function lu(o,n){var e=o.type.contextTypes;if(!e)return cs;var t=o.stateNode;if(t&&t.__reactInternalMemoizedUnmaskedChildContext===n)return t.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in e)r[i]=n[i];return t&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=n,o.__reactInternalMemoizedMaskedChildContext=r),r}function Bo(o){return o=o.childContextTypes,o!=null}function Sd(){In(Uo),In(ro)}function fw(o,n,e){if(ro.current!==cs)throw Error(ht(168));kn(ro,n),kn(Uo,e)}function Px(o,n,e){var t=o.stateNode;if(n=n.childContextTypes,typeof t.getChildContext!="function")return e;t=t.getChildContext();for(var r in t)if(!(r in n))throw Error(ht(108,pT(o)||"Unknown",r));return Xn({},e,t)}function Od(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||cs,Ys=ro.current,kn(ro,o),kn(Uo,Uo.current),!0}function dw(o,n,e){var t=o.stateNode;if(!t)throw Error(ht(169));e?(o=Px(o,n,Ys),t.__reactInternalMemoizedMergedChildContext=o,In(Uo),In(ro),kn(ro,o)):In(Uo),kn(Uo,e)}var ha=null,Kp=!1,Zh=!1;function kx(o){ha===null?ha=[o]:ha.push(o)}function AE(o){Kp=!0,kx(o)}function hs(){if(!Zh&&ha!==null){Zh=!0;var o=0,n=_n;try{var e=ha;for(_n=1;o<e.length;o++){var t=e[o];do t=t(!0);while(t!==null)}ha=null,Kp=!1}catch(r){throw ha!==null&&(ha=ha.slice(o+1)),ex(mm,hs),r}finally{_n=n,Zh=!1}}return null}var zl=[],Hl=0,Td=null,Ed=0,hi=[],vi=0,Xs=null,ga=1,ma="";function Ls(o,n){zl[Hl++]=Ed,zl[Hl++]=Td,Td=o,Ed=n}function Ax(o,n,e){hi[vi++]=ga,hi[vi++]=ma,hi[vi++]=Xs,Xs=o;var t=ga;o=ma;var r=32-Ri(t)-1;t&=~(1<<r),e+=1;var i=32-Ri(n)+r;if(30<i){var s=r-r%5;i=(t&(1<<s)-1).toString(32),t>>=s,r-=s,ga=1<<32-Ri(n)+r|e<<r|t,ma=i+o}else ga=1<<i|e<<r|t,ma=o}function Tm(o){o.return!==null&&(Ls(o,1),Ax(o,1,0))}function Em(o){for(;o===Td;)Td=zl[--Hl],zl[Hl]=null,Ed=zl[--Hl],zl[Hl]=null;for(;o===Xs;)Xs=hi[--vi],hi[vi]=null,ma=hi[--vi],hi[vi]=null,ga=hi[--vi],hi[vi]=null}var oi=null,ti=null,Un=!1,Ni=null;function Mx(o,n){var e=gi(5,null,null,0);e.elementType="DELETED",e.stateNode=n,e.return=o,n=o.deletions,n===null?(o.deletions=[e],o.flags|=16):n.push(e)}function pw(o,n){switch(o.tag){case 5:var e=o.type;return n=n.nodeType!==1||e.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(o.stateNode=n,oi=o,ti=os(n.firstChild),!0):!1;case 6:return n=o.pendingProps===""||n.nodeType!==3?null:n,n!==null?(o.stateNode=n,oi=o,ti=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(e=Xs!==null?{id:ga,overflow:ma}:null,o.memoizedState={dehydrated:n,treeContext:e,retryLane:1073741824},e=gi(18,null,null,0),e.stateNode=n,e.return=o,o.child=e,oi=o,ti=null,!0):!1;default:return!1}}function pg(o){return(o.mode&1)!==0&&(o.flags&128)===0}function hg(o){if(Un){var n=ti;if(n){var e=n;if(!pw(o,n)){if(pg(o))throw Error(ht(418));n=os(e.nextSibling);var t=oi;n&&pw(o,n)?Mx(t,e):(o.flags=o.flags&-4097|2,Un=!1,oi=o)}}else{if(pg(o))throw Error(ht(418));o.flags=o.flags&-4097|2,Un=!1,oi=o}}}function hw(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;oi=o}function Vf(o){if(o!==oi)return!1;if(!Un)return hw(o),Un=!0,!1;var n;if((n=o.tag!==3)&&!(n=o.tag!==5)&&(n=o.type,n=n!=="head"&&n!=="body"&&!ug(o.type,o.memoizedProps)),n&&(n=ti)){if(pg(o))throw Dx(),Error(ht(418));for(;n;)Mx(o,n),n=os(n.nextSibling)}if(hw(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ht(317));e:{for(o=o.nextSibling,n=0;o;){if(o.nodeType===8){var e=o.data;if(e==="/$"){if(n===0){ti=os(o.nextSibling);break e}n--}else e!=="$"&&e!=="$!"&&e!=="$?"||n++}o=o.nextSibling}ti=null}}else ti=oi?os(o.stateNode.nextSibling):null;return!0}function Dx(){for(var o=ti;o;)o=os(o.nextSibling)}function uu(){ti=oi=null,Un=!1}function Pm(o){Ni===null?Ni=[o]:Ni.push(o)}var ME=Oa.ReactCurrentBatchConfig;function Yu(o,n,e){if(o=e.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(e._owner){if(e=e._owner,e){if(e.tag!==1)throw Error(ht(309));var t=e.stateNode}if(!t)throw Error(ht(147,o));var r=t,i=""+o;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===i?n.ref:(n=function(s){var u=r.refs;s===null?delete u[i]:u[i]=s},n._stringRef=i,n)}if(typeof o!="string")throw Error(ht(284));if(!e._owner)throw Error(ht(290,o))}return o}function zf(o,n){throw o=Object.prototype.toString.call(n),Error(ht(31,o==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":o))}function vw(o){var n=o._init;return n(o._payload)}function Lx(o){function n(P,L){if(o){var D=P.deletions;D===null?(P.deletions=[L],P.flags|=16):D.push(L)}}function e(P,L){if(!o)return null;for(;L!==null;)n(P,L),L=L.sibling;return null}function t(P,L){for(P=new Map;L!==null;)L.key!==null?P.set(L.key,L):P.set(L.index,L),L=L.sibling;return P}function r(P,L){return P=ls(P,L),P.index=0,P.sibling=null,P}function i(P,L,D){return P.index=D,o?(D=P.alternate,D!==null?(D=D.index,D<L?(P.flags|=2,L):D):(P.flags|=2,L)):(P.flags|=1048576,L)}function s(P){return o&&P.alternate===null&&(P.flags|=2),P}function u(P,L,D,V){return L===null||L.tag!==6?(L=iv(D,P.mode,V),L.return=P,L):(L=r(L,D),L.return=P,L)}function c(P,L,D,V){var re=D.type;return re===jl?h(P,L,D.props.children,V,D.key):L!==null&&(L.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===Ba&&vw(re)===L.type)?(V=r(L,D.props),V.ref=Yu(P,L,D),V.return=P,V):(V=fd(D.type,D.key,D.props,null,P.mode,V),V.ref=Yu(P,L,D),V.return=P,V)}function f(P,L,D,V){return L===null||L.tag!==4||L.stateNode.containerInfo!==D.containerInfo||L.stateNode.implementation!==D.implementation?(L=av(D,P.mode,V),L.return=P,L):(L=r(L,D.children||[]),L.return=P,L)}function h(P,L,D,V,re){return L===null||L.tag!==7?(L=Ks(D,P.mode,V,re),L.return=P,L):(L=r(L,D),L.return=P,L)}function v(P,L,D){if(typeof L=="string"&&L!==""||typeof L=="number")return L=iv(""+L,P.mode,D),L.return=P,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case kf:return D=fd(L.type,L.key,L.props,null,P.mode,D),D.ref=Yu(P,null,L),D.return=P,D;case Ll:return L=av(L,P.mode,D),L.return=P,L;case Ba:var V=L._init;return v(P,V(L._payload),D)}if(nc(L)||Bu(L))return L=Ks(L,P.mode,D,null),L.return=P,L;zf(P,L)}return null}function m(P,L,D,V){var re=L!==null?L.key:null;if(typeof D=="string"&&D!==""||typeof D=="number")return re!==null?null:u(P,L,""+D,V);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case kf:return D.key===re?c(P,L,D,V):null;case Ll:return D.key===re?f(P,L,D,V):null;case Ba:return re=D._init,m(P,L,re(D._payload),V)}if(nc(D)||Bu(D))return re!==null?null:h(P,L,D,V,null);zf(P,D)}return null}function _(P,L,D,V,re){if(typeof V=="string"&&V!==""||typeof V=="number")return P=P.get(D)||null,u(L,P,""+V,re);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case kf:return P=P.get(V.key===null?D:V.key)||null,c(L,P,V,re);case Ll:return P=P.get(V.key===null?D:V.key)||null,f(L,P,V,re);case Ba:var _e=V._init;return _(P,L,D,_e(V._payload),re)}if(nc(V)||Bu(V))return P=P.get(D)||null,h(L,P,V,re,null);zf(L,V)}return null}function C(P,L,D,V){for(var re=null,_e=null,Q=L,pe=L=0,ne=null;Q!==null&&pe<D.length;pe++){Q.index>pe?(ne=Q,Q=null):ne=Q.sibling;var me=m(P,Q,D[pe],V);if(me===null){Q===null&&(Q=ne);break}o&&Q&&me.alternate===null&&n(P,Q),L=i(me,L,pe),_e===null?re=me:_e.sibling=me,_e=me,Q=ne}if(pe===D.length)return e(P,Q),Un&&Ls(P,pe),re;if(Q===null){for(;pe<D.length;pe++)Q=v(P,D[pe],V),Q!==null&&(L=i(Q,L,pe),_e===null?re=Q:_e.sibling=Q,_e=Q);return Un&&Ls(P,pe),re}for(Q=t(P,Q);pe<D.length;pe++)ne=_(Q,P,pe,D[pe],V),ne!==null&&(o&&ne.alternate!==null&&Q.delete(ne.key===null?pe:ne.key),L=i(ne,L,pe),_e===null?re=ne:_e.sibling=ne,_e=ne);return o&&Q.forEach(function(Y){return n(P,Y)}),Un&&Ls(P,pe),re}function T(P,L,D,V){var re=Bu(D);if(typeof re!="function")throw Error(ht(150));if(D=re.call(D),D==null)throw Error(ht(151));for(var _e=re=null,Q=L,pe=L=0,ne=null,me=D.next();Q!==null&&!me.done;pe++,me=D.next()){Q.index>pe?(ne=Q,Q=null):ne=Q.sibling;var Y=m(P,Q,me.value,V);if(Y===null){Q===null&&(Q=ne);break}o&&Q&&Y.alternate===null&&n(P,Q),L=i(Y,L,pe),_e===null?re=Y:_e.sibling=Y,_e=Y,Q=ne}if(me.done)return e(P,Q),Un&&Ls(P,pe),re;if(Q===null){for(;!me.done;pe++,me=D.next())me=v(P,me.value,V),me!==null&&(L=i(me,L,pe),_e===null?re=me:_e.sibling=me,_e=me);return Un&&Ls(P,pe),re}for(Q=t(P,Q);!me.done;pe++,me=D.next())me=_(Q,P,pe,me.value,V),me!==null&&(o&&me.alternate!==null&&Q.delete(me.key===null?pe:me.key),L=i(me,L,pe),_e===null?re=me:_e.sibling=me,_e=me);return o&&Q.forEach(function(W){return n(P,W)}),Un&&Ls(P,pe),re}function k(P,L,D,V){if(typeof D=="object"&&D!==null&&D.type===jl&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case kf:e:{for(var re=D.key,_e=L;_e!==null;){if(_e.key===re){if(re=D.type,re===jl){if(_e.tag===7){e(P,_e.sibling),L=r(_e,D.props.children),L.return=P,P=L;break e}}else if(_e.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===Ba&&vw(re)===_e.type){e(P,_e.sibling),L=r(_e,D.props),L.ref=Yu(P,_e,D),L.return=P,P=L;break e}e(P,_e);break}else n(P,_e);_e=_e.sibling}D.type===jl?(L=Ks(D.props.children,P.mode,V,D.key),L.return=P,P=L):(V=fd(D.type,D.key,D.props,null,P.mode,V),V.ref=Yu(P,L,D),V.return=P,P=V)}return s(P);case Ll:e:{for(_e=D.key;L!==null;){if(L.key===_e)if(L.tag===4&&L.stateNode.containerInfo===D.containerInfo&&L.stateNode.implementation===D.implementation){e(P,L.sibling),L=r(L,D.children||[]),L.return=P,P=L;break e}else{e(P,L);break}else n(P,L);L=L.sibling}L=av(D,P.mode,V),L.return=P,P=L}return s(P);case Ba:return _e=D._init,k(P,L,_e(D._payload),V)}if(nc(D))return C(P,L,D,V);if(Bu(D))return T(P,L,D,V);zf(P,D)}return typeof D=="string"&&D!==""||typeof D=="number"?(D=""+D,L!==null&&L.tag===6?(e(P,L.sibling),L=r(L,D),L.return=P,P=L):(e(P,L),L=iv(D,P.mode,V),L.return=P,P=L),s(P)):e(P,L)}return k}var cu=Lx(!0),jx=Lx(!1),Pd=ps(null),kd=null,Ul=null,km=null;function Am(){km=Ul=kd=null}function Mm(o){var n=Pd.current;In(Pd),o._currentValue=n}function vg(o,n,e){for(;o!==null;){var t=o.alternate;if((o.childLanes&n)!==n?(o.childLanes|=n,t!==null&&(t.childLanes|=n)):t!==null&&(t.childLanes&n)!==n&&(t.childLanes|=n),o===e)break;o=o.return}}function ru(o,n){kd=o,km=Ul=null,o=o.dependencies,o!==null&&o.firstContext!==null&&(o.lanes&n&&(Ho=!0),o.firstContext=null)}function wi(o){var n=o._currentValue;if(km!==o)if(o={context:o,memoizedValue:n,next:null},Ul===null){if(kd===null)throw Error(ht(308));Ul=o,kd.dependencies={lanes:0,firstContext:o}}else Ul=Ul.next=o;return n}var Hs=null;function Dm(o){Hs===null?Hs=[o]:Hs.push(o)}function Ix(o,n,e,t){var r=n.interleaved;return r===null?(e.next=e,Dm(n)):(e.next=r.next,r.next=e),n.interleaved=e,xa(o,t)}function xa(o,n){o.lanes|=n;var e=o.alternate;for(e!==null&&(e.lanes|=n),e=o,o=o.return;o!==null;)o.childLanes|=n,e=o.alternate,e!==null&&(e.childLanes|=n),e=o,o=o.return;return e.tag===3?e.stateNode:null}var Wa=!1;function Lm(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Nx(o,n){o=o.updateQueue,n.updateQueue===o&&(n.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function ya(o,n){return{eventTime:o,lane:n,tag:0,payload:null,callback:null,next:null}}function is(o,n,e){var t=o.updateQueue;if(t===null)return null;if(t=t.shared,cn&2){var r=t.pending;return r===null?n.next=n:(n.next=r.next,r.next=n),t.pending=n,xa(o,e)}return r=t.interleaved,r===null?(n.next=n,Dm(t)):(n.next=r.next,r.next=n),t.interleaved=n,xa(o,e)}function id(o,n,e){if(n=n.updateQueue,n!==null&&(n=n.shared,(e&4194240)!==0)){var t=n.lanes;t&=o.pendingLanes,e|=t,n.lanes=e,ym(o,e)}}function gw(o,n){var e=o.updateQueue,t=o.alternate;if(t!==null&&(t=t.updateQueue,e===t)){var r=null,i=null;if(e=e.firstBaseUpdate,e!==null){do{var s={eventTime:e.eventTime,lane:e.lane,tag:e.tag,payload:e.payload,callback:e.callback,next:null};i===null?r=i=s:i=i.next=s,e=e.next}while(e!==null);i===null?r=i=n:i=i.next=n}else r=i=n;e={baseState:t.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:t.shared,effects:t.effects},o.updateQueue=e;return}o=e.lastBaseUpdate,o===null?e.firstBaseUpdate=n:o.next=n,e.lastBaseUpdate=n}function Ad(o,n,e,t){var r=o.updateQueue;Wa=!1;var i=r.firstBaseUpdate,s=r.lastBaseUpdate,u=r.shared.pending;if(u!==null){r.shared.pending=null;var c=u,f=c.next;c.next=null,s===null?i=f:s.next=f,s=c;var h=o.alternate;h!==null&&(h=h.updateQueue,u=h.lastBaseUpdate,u!==s&&(u===null?h.firstBaseUpdate=f:u.next=f,h.lastBaseUpdate=c))}if(i!==null){var v=r.baseState;s=0,h=f=c=null,u=i;do{var m=u.lane,_=u.eventTime;if((t&m)===m){h!==null&&(h=h.next={eventTime:_,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var C=o,T=u;switch(m=n,_=e,T.tag){case 1:if(C=T.payload,typeof C=="function"){v=C.call(_,v,m);break e}v=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=T.payload,m=typeof C=="function"?C.call(_,v,m):C,m==null)break e;v=Xn({},v,m);break e;case 2:Wa=!0}}u.callback!==null&&u.lane!==0&&(o.flags|=64,m=r.effects,m===null?r.effects=[u]:m.push(u))}else _={eventTime:_,lane:m,tag:u.tag,payload:u.payload,callback:u.callback,next:null},h===null?(f=h=_,c=v):h=h.next=_,s|=m;if(u=u.next,u===null){if(u=r.shared.pending,u===null)break;m=u,u=m.next,m.next=null,r.lastBaseUpdate=m,r.shared.pending=null}}while(1);if(h===null&&(c=v),r.baseState=c,r.firstBaseUpdate=f,r.lastBaseUpdate=h,n=r.shared.interleaved,n!==null){r=n;do s|=r.lane,r=r.next;while(r!==n)}else i===null&&(r.shared.lanes=0);Js|=s,o.lanes=s,o.memoizedState=v}}function mw(o,n,e){if(o=n.effects,n.effects=null,o!==null)for(n=0;n<o.length;n++){var t=o[n],r=t.callback;if(r!==null){if(t.callback=null,t=e,typeof r!="function")throw Error(ht(191,r));r.call(t)}}}var rf={},ia=ps(rf),Uc=ps(rf),Bc=ps(rf);function Us(o){if(o===rf)throw Error(ht(174));return o}function jm(o,n){switch(kn(Bc,n),kn(Uc,o),kn(ia,rf),o=n.nodeType,o){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:Xv(null,"");break;default:o=o===8?n.parentNode:n,n=o.namespaceURI||null,o=o.tagName,n=Xv(n,o)}In(ia),kn(ia,n)}function fu(){In(ia),In(Uc),In(Bc)}function Rx(o){Us(Bc.current);var n=Us(ia.current),e=Xv(n,o.type);n!==e&&(kn(Uc,o),kn(ia,e))}function Im(o){Uc.current===o&&(In(ia),In(Uc))}var Gn=ps(0);function Md(o){for(var n=o;n!==null;){if(n.tag===13){var e=n.memoizedState;if(e!==null&&(e=e.dehydrated,e===null||e.data==="$?"||e.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if(n.flags&128)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===o)break;for(;n.sibling===null;){if(n.return===null||n.return===o)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Qh=[];function Nm(){for(var o=0;o<Qh.length;o++)Qh[o]._workInProgressVersionPrimary=null;Qh.length=0}var ad=Oa.ReactCurrentDispatcher,ev=Oa.ReactCurrentBatchConfig,qs=0,Yn=null,xr=null,Ar=null,Dd=!1,hc=!1,Wc=0,DE=0;function Jr(){throw Error(ht(321))}function Rm(o,n){if(n===null)return!1;for(var e=0;e<n.length&&e<o.length;e++)if(!Vi(o[e],n[e]))return!1;return!0}function Fm(o,n,e,t,r,i){if(qs=i,Yn=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,ad.current=o===null||o.memoizedState===null?NE:RE,o=e(t,r),hc){i=0;do{if(hc=!1,Wc=0,25<=i)throw Error(ht(301));i+=1,Ar=xr=null,n.updateQueue=null,ad.current=FE,o=e(t,r)}while(hc)}if(ad.current=Ld,n=xr!==null&&xr.next!==null,qs=0,Ar=xr=Yn=null,Dd=!1,n)throw Error(ht(300));return o}function Vm(){var o=Wc!==0;return Wc=0,o}function Qi(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ar===null?Yn.memoizedState=Ar=o:Ar=Ar.next=o,Ar}function _i(){if(xr===null){var o=Yn.alternate;o=o!==null?o.memoizedState:null}else o=xr.next;var n=Ar===null?Yn.memoizedState:Ar.next;if(n!==null)Ar=n,xr=o;else{if(o===null)throw Error(ht(310));xr=o,o={memoizedState:xr.memoizedState,baseState:xr.baseState,baseQueue:xr.baseQueue,queue:xr.queue,next:null},Ar===null?Yn.memoizedState=Ar=o:Ar=Ar.next=o}return Ar}function $c(o,n){return typeof n=="function"?n(o):n}function tv(o){var n=_i(),e=n.queue;if(e===null)throw Error(ht(311));e.lastRenderedReducer=o;var t=xr,r=t.baseQueue,i=e.pending;if(i!==null){if(r!==null){var s=r.next;r.next=i.next,i.next=s}t.baseQueue=r=i,e.pending=null}if(r!==null){i=r.next,t=t.baseState;var u=s=null,c=null,f=i;do{var h=f.lane;if((qs&h)===h)c!==null&&(c=c.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),t=f.hasEagerState?f.eagerState:o(t,f.action);else{var v={lane:h,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};c===null?(u=c=v,s=t):c=c.next=v,Yn.lanes|=h,Js|=h}f=f.next}while(f!==null&&f!==i);c===null?s=t:c.next=u,Vi(t,n.memoizedState)||(Ho=!0),n.memoizedState=t,n.baseState=s,n.baseQueue=c,e.lastRenderedState=t}if(o=e.interleaved,o!==null){r=o;do i=r.lane,Yn.lanes|=i,Js|=i,r=r.next;while(r!==o)}else r===null&&(e.lanes=0);return[n.memoizedState,e.dispatch]}function nv(o){var n=_i(),e=n.queue;if(e===null)throw Error(ht(311));e.lastRenderedReducer=o;var t=e.dispatch,r=e.pending,i=n.memoizedState;if(r!==null){e.pending=null;var s=r=r.next;do i=o(i,s.action),s=s.next;while(s!==r);Vi(i,n.memoizedState)||(Ho=!0),n.memoizedState=i,n.baseQueue===null&&(n.baseState=i),e.lastRenderedState=i}return[i,t]}function Fx(){}function Vx(o,n){var e=Yn,t=_i(),r=n(),i=!Vi(t.memoizedState,r);if(i&&(t.memoizedState=r,Ho=!0),t=t.queue,zm(Ux.bind(null,e,t,o),[o]),t.getSnapshot!==n||i||Ar!==null&&Ar.memoizedState.tag&1){if(e.flags|=2048,Kc(9,Hx.bind(null,e,t,r,n),void 0,null),Mr===null)throw Error(ht(349));qs&30||zx(e,n,r)}return r}function zx(o,n,e){o.flags|=16384,o={getSnapshot:n,value:e},n=Yn.updateQueue,n===null?(n={lastEffect:null,stores:null},Yn.updateQueue=n,n.stores=[o]):(e=n.stores,e===null?n.stores=[o]:e.push(o))}function Hx(o,n,e,t){n.value=e,n.getSnapshot=t,Bx(n)&&Wx(o)}function Ux(o,n,e){return e(function(){Bx(n)&&Wx(o)})}function Bx(o){var n=o.getSnapshot;o=o.value;try{var e=n();return!Vi(o,e)}catch{return!0}}function Wx(o){var n=xa(o,1);n!==null&&Fi(n,o,1,-1)}function yw(o){var n=Qi();return typeof o=="function"&&(o=o()),n.memoizedState=n.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$c,lastRenderedState:o},n.queue=o,o=o.dispatch=IE.bind(null,Yn,o),[n.memoizedState,o]}function Kc(o,n,e,t){return o={tag:o,create:n,destroy:e,deps:t,next:null},n=Yn.updateQueue,n===null?(n={lastEffect:null,stores:null},Yn.updateQueue=n,n.lastEffect=o.next=o):(e=n.lastEffect,e===null?n.lastEffect=o.next=o:(t=e.next,e.next=o,o.next=t,n.lastEffect=o)),o}function $x(){return _i().memoizedState}function sd(o,n,e,t){var r=Qi();Yn.flags|=o,r.memoizedState=Kc(1|n,e,void 0,t===void 0?null:t)}function Gp(o,n,e,t){var r=_i();t=t===void 0?null:t;var i=void 0;if(xr!==null){var s=xr.memoizedState;if(i=s.destroy,t!==null&&Rm(t,s.deps)){r.memoizedState=Kc(n,e,i,t);return}}Yn.flags|=o,r.memoizedState=Kc(1|n,e,i,t)}function ww(o,n){return sd(8390656,8,o,n)}function zm(o,n){return Gp(2048,8,o,n)}function Kx(o,n){return Gp(4,2,o,n)}function Gx(o,n){return Gp(4,4,o,n)}function Yx(o,n){if(typeof n=="function")return o=o(),n(o),function(){n(null)};if(n!=null)return o=o(),n.current=o,function(){n.current=null}}function Xx(o,n,e){return e=e!=null?e.concat([o]):null,Gp(4,4,Yx.bind(null,n,o),e)}function Hm(){}function qx(o,n){var e=_i();n=n===void 0?null:n;var t=e.memoizedState;return t!==null&&n!==null&&Rm(n,t[1])?t[0]:(e.memoizedState=[o,n],o)}function Jx(o,n){var e=_i();n=n===void 0?null:n;var t=e.memoizedState;return t!==null&&n!==null&&Rm(n,t[1])?t[0]:(o=o(),e.memoizedState=[o,n],o)}function Zx(o,n,e){return qs&21?(Vi(e,n)||(e=rx(),Yn.lanes|=e,Js|=e,o.baseState=!0),n):(o.baseState&&(o.baseState=!1,Ho=!0),o.memoizedState=e)}function LE(o,n){var e=_n;_n=e!==0&&4>e?e:4,o(!0);var t=ev.transition;ev.transition={};try{o(!1),n()}finally{_n=e,ev.transition=t}}function Qx(){return _i().memoizedState}function jE(o,n,e){var t=ss(o);if(e={lane:t,action:e,hasEagerState:!1,eagerState:null,next:null},eC(o))tC(n,e);else if(e=Ix(o,n,e,t),e!==null){var r=xo();Fi(e,o,t,r),nC(e,n,t)}}function IE(o,n,e){var t=ss(o),r={lane:t,action:e,hasEagerState:!1,eagerState:null,next:null};if(eC(o))tC(n,r);else{var i=o.alternate;if(o.lanes===0&&(i===null||i.lanes===0)&&(i=n.lastRenderedReducer,i!==null))try{var s=n.lastRenderedState,u=i(s,e);if(r.hasEagerState=!0,r.eagerState=u,Vi(u,s)){var c=n.interleaved;c===null?(r.next=r,Dm(n)):(r.next=c.next,c.next=r),n.interleaved=r;return}}catch{}finally{}e=Ix(o,n,r,t),e!==null&&(r=xo(),Fi(e,o,t,r),nC(e,n,t))}}function eC(o){var n=o.alternate;return o===Yn||n!==null&&n===Yn}function tC(o,n){hc=Dd=!0;var e=o.pending;e===null?n.next=n:(n.next=e.next,e.next=n),o.pending=n}function nC(o,n,e){if(e&4194240){var t=n.lanes;t&=o.pendingLanes,e|=t,n.lanes=e,ym(o,e)}}var Ld={readContext:wi,useCallback:Jr,useContext:Jr,useEffect:Jr,useImperativeHandle:Jr,useInsertionEffect:Jr,useLayoutEffect:Jr,useMemo:Jr,useReducer:Jr,useRef:Jr,useState:Jr,useDebugValue:Jr,useDeferredValue:Jr,useTransition:Jr,useMutableSource:Jr,useSyncExternalStore:Jr,useId:Jr,unstable_isNewReconciler:!1},NE={readContext:wi,useCallback:function(o,n){return Qi().memoizedState=[o,n===void 0?null:n],o},useContext:wi,useEffect:ww,useImperativeHandle:function(o,n,e){return e=e!=null?e.concat([o]):null,sd(4194308,4,Yx.bind(null,n,o),e)},useLayoutEffect:function(o,n){return sd(4194308,4,o,n)},useInsertionEffect:function(o,n){return sd(4,2,o,n)},useMemo:function(o,n){var e=Qi();return n=n===void 0?null:n,o=o(),e.memoizedState=[o,n],o},useReducer:function(o,n,e){var t=Qi();return n=e!==void 0?e(n):n,t.memoizedState=t.baseState=n,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:n},t.queue=o,o=o.dispatch=jE.bind(null,Yn,o),[t.memoizedState,o]},useRef:function(o){var n=Qi();return o={current:o},n.memoizedState=o},useState:yw,useDebugValue:Hm,useDeferredValue:function(o){return Qi().memoizedState=o},useTransition:function(){var o=yw(!1),n=o[0];return o=LE.bind(null,o[1]),Qi().memoizedState=o,[n,o]},useMutableSource:function(){},useSyncExternalStore:function(o,n,e){var t=Yn,r=Qi();if(Un){if(e===void 0)throw Error(ht(407));e=e()}else{if(e=n(),Mr===null)throw Error(ht(349));qs&30||zx(t,n,e)}r.memoizedState=e;var i={value:e,getSnapshot:n};return r.queue=i,ww(Ux.bind(null,t,i,o),[o]),t.flags|=2048,Kc(9,Hx.bind(null,t,i,e,n),void 0,null),e},useId:function(){var o=Qi(),n=Mr.identifierPrefix;if(Un){var e=ma,t=ga;e=(t&~(1<<32-Ri(t)-1)).toString(32)+e,n=":"+n+"R"+e,e=Wc++,0<e&&(n+="H"+e.toString(32)),n+=":"}else e=DE++,n=":"+n+"r"+e.toString(32)+":";return o.memoizedState=n},unstable_isNewReconciler:!1},RE={readContext:wi,useCallback:qx,useContext:wi,useEffect:zm,useImperativeHandle:Xx,useInsertionEffect:Kx,useLayoutEffect:Gx,useMemo:Jx,useReducer:tv,useRef:$x,useState:function(){return tv($c)},useDebugValue:Hm,useDeferredValue:function(o){var n=_i();return Zx(n,xr.memoizedState,o)},useTransition:function(){var o=tv($c)[0],n=_i().memoizedState;return[o,n]},useMutableSource:Fx,useSyncExternalStore:Vx,useId:Qx,unstable_isNewReconciler:!1},FE={readContext:wi,useCallback:qx,useContext:wi,useEffect:zm,useImperativeHandle:Xx,useInsertionEffect:Kx,useLayoutEffect:Gx,useMemo:Jx,useReducer:nv,useRef:$x,useState:function(){return nv($c)},useDebugValue:Hm,useDeferredValue:function(o){var n=_i();return xr===null?n.memoizedState=o:Zx(n,xr.memoizedState,o)},useTransition:function(){var o=nv($c)[0],n=_i().memoizedState;return[o,n]},useMutableSource:Fx,useSyncExternalStore:Vx,useId:Qx,unstable_isNewReconciler:!1};function ji(o,n){if(o&&o.defaultProps){n=Xn({},n),o=o.defaultProps;for(var e in o)n[e]===void 0&&(n[e]=o[e]);return n}return n}function gg(o,n,e,t){n=o.memoizedState,e=e(t,n),e=e==null?n:Xn({},n,e),o.memoizedState=e,o.lanes===0&&(o.updateQueue.baseState=e)}var Yp={isMounted:function(o){return(o=o._reactInternals)?rl(o)===o:!1},enqueueSetState:function(o,n,e){o=o._reactInternals;var t=xo(),r=ss(o),i=ya(t,r);i.payload=n,e!=null&&(i.callback=e),n=is(o,i,r),n!==null&&(Fi(n,o,r,t),id(n,o,r))},enqueueReplaceState:function(o,n,e){o=o._reactInternals;var t=xo(),r=ss(o),i=ya(t,r);i.tag=1,i.payload=n,e!=null&&(i.callback=e),n=is(o,i,r),n!==null&&(Fi(n,o,r,t),id(n,o,r))},enqueueForceUpdate:function(o,n){o=o._reactInternals;var e=xo(),t=ss(o),r=ya(e,t);r.tag=2,n!=null&&(r.callback=n),n=is(o,r,t),n!==null&&(Fi(n,o,t,e),id(n,o,t))}};function _w(o,n,e,t,r,i,s){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(t,i,s):n.prototype&&n.prototype.isPureReactComponent?!Fc(e,t)||!Fc(r,i):!0}function rC(o,n,e){var t=!1,r=cs,i=n.contextType;return typeof i=="object"&&i!==null?i=wi(i):(r=Bo(n)?Ys:ro.current,t=n.contextTypes,i=(t=t!=null)?lu(o,r):cs),n=new n(e,i),o.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=Yp,o.stateNode=n,n._reactInternals=o,t&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=r,o.__reactInternalMemoizedMaskedChildContext=i),n}function bw(o,n,e,t){o=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(e,t),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(e,t),n.state!==o&&Yp.enqueueReplaceState(n,n.state,null)}function mg(o,n,e,t){var r=o.stateNode;r.props=e,r.state=o.memoizedState,r.refs={},Lm(o);var i=n.contextType;typeof i=="object"&&i!==null?r.context=wi(i):(i=Bo(n)?Ys:ro.current,r.context=lu(o,i)),r.state=o.memoizedState,i=n.getDerivedStateFromProps,typeof i=="function"&&(gg(o,n,i,e),r.state=o.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(n=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),n!==r.state&&Yp.enqueueReplaceState(r,r.state,null),Ad(o,e,r,t),r.state=o.memoizedState),typeof r.componentDidMount=="function"&&(o.flags|=4194308)}function du(o,n){try{var e="",t=n;do e+=dT(t),t=t.return;while(t);var r=e}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:o,source:n,stack:r,digest:null}}function rv(o,n,e){return{value:o,source:null,stack:e??null,digest:n??null}}function yg(o,n){try{console.error(n.value)}catch(e){setTimeout(function(){throw e})}}var VE=typeof WeakMap=="function"?WeakMap:Map;function oC(o,n,e){e=ya(-1,e),e.tag=3,e.payload={element:null};var t=n.value;return e.callback=function(){Id||(Id=!0,Pg=t),yg(o,n)},e}function iC(o,n,e){e=ya(-1,e),e.tag=3;var t=o.type.getDerivedStateFromError;if(typeof t=="function"){var r=n.value;e.payload=function(){return t(r)},e.callback=function(){yg(o,n)}}var i=o.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(e.callback=function(){yg(o,n),typeof t!="function"&&(as===null?as=new Set([this]):as.add(this));var s=n.stack;this.componentDidCatch(n.value,{componentStack:s!==null?s:""})}),e}function xw(o,n,e){var t=o.pingCache;if(t===null){t=o.pingCache=new VE;var r=new Set;t.set(n,r)}else r=t.get(n),r===void 0&&(r=new Set,t.set(n,r));r.has(e)||(r.add(e),o=QE.bind(null,o,n,e),n.then(o,o))}function Cw(o){do{var n;if((n=o.tag===13)&&(n=o.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return o;o=o.return}while(o!==null);return null}function Sw(o,n,e,t,r){return o.mode&1?(o.flags|=65536,o.lanes=r,o):(o===n?o.flags|=65536:(o.flags|=128,e.flags|=131072,e.flags&=-52805,e.tag===1&&(e.alternate===null?e.tag=17:(n=ya(-1,1),n.tag=2,is(e,n,1))),e.lanes|=1),o)}var zE=Oa.ReactCurrentOwner,Ho=!1;function wo(o,n,e,t){n.child=o===null?jx(n,null,e,t):cu(n,o.child,e,t)}function Ow(o,n,e,t,r){e=e.render;var i=n.ref;return ru(n,r),t=Fm(o,n,e,t,i,r),e=Vm(),o!==null&&!Ho?(n.updateQueue=o.updateQueue,n.flags&=-2053,o.lanes&=~r,Ca(o,n,r)):(Un&&e&&Tm(n),n.flags|=1,wo(o,n,t,r),n.child)}function Tw(o,n,e,t,r){if(o===null){var i=e.type;return typeof i=="function"&&!Xm(i)&&i.defaultProps===void 0&&e.compare===null&&e.defaultProps===void 0?(n.tag=15,n.type=i,aC(o,n,i,t,r)):(o=fd(e.type,null,t,n,n.mode,r),o.ref=n.ref,o.return=n,n.child=o)}if(i=o.child,!(o.lanes&r)){var s=i.memoizedProps;if(e=e.compare,e=e!==null?e:Fc,e(s,t)&&o.ref===n.ref)return Ca(o,n,r)}return n.flags|=1,o=ls(i,t),o.ref=n.ref,o.return=n,n.child=o}function aC(o,n,e,t,r){if(o!==null){var i=o.memoizedProps;if(Fc(i,t)&&o.ref===n.ref)if(Ho=!1,n.pendingProps=t=i,(o.lanes&r)!==0)o.flags&131072&&(Ho=!0);else return n.lanes=o.lanes,Ca(o,n,r)}return wg(o,n,e,t,r)}function sC(o,n,e){var t=n.pendingProps,r=t.children,i=o!==null?o.memoizedState:null;if(t.mode==="hidden")if(!(n.mode&1))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},kn(Wl,Qo),Qo|=e;else{if(!(e&1073741824))return o=i!==null?i.baseLanes|e:e,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:o,cachePool:null,transitions:null},n.updateQueue=null,kn(Wl,Qo),Qo|=o,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},t=i!==null?i.baseLanes:e,kn(Wl,Qo),Qo|=t}else i!==null?(t=i.baseLanes|e,n.memoizedState=null):t=e,kn(Wl,Qo),Qo|=t;return wo(o,n,r,e),n.child}function lC(o,n){var e=n.ref;(o===null&&e!==null||o!==null&&o.ref!==e)&&(n.flags|=512,n.flags|=2097152)}function wg(o,n,e,t,r){var i=Bo(e)?Ys:ro.current;return i=lu(n,i),ru(n,r),e=Fm(o,n,e,t,i,r),t=Vm(),o!==null&&!Ho?(n.updateQueue=o.updateQueue,n.flags&=-2053,o.lanes&=~r,Ca(o,n,r)):(Un&&t&&Tm(n),n.flags|=1,wo(o,n,e,r),n.child)}function Ew(o,n,e,t,r){if(Bo(e)){var i=!0;Od(n)}else i=!1;if(ru(n,r),n.stateNode===null)ld(o,n),rC(n,e,t),mg(n,e,t,r),t=!0;else if(o===null){var s=n.stateNode,u=n.memoizedProps;s.props=u;var c=s.context,f=e.contextType;typeof f=="object"&&f!==null?f=wi(f):(f=Bo(e)?Ys:ro.current,f=lu(n,f));var h=e.getDerivedStateFromProps,v=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function";v||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==t||c!==f)&&bw(n,s,t,f),Wa=!1;var m=n.memoizedState;s.state=m,Ad(n,t,s,r),c=n.memoizedState,u!==t||m!==c||Uo.current||Wa?(typeof h=="function"&&(gg(n,e,h,t),c=n.memoizedState),(u=Wa||_w(n,e,u,t,m,c,f))?(v||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(n.flags|=4194308)):(typeof s.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=t,n.memoizedState=c),s.props=t,s.state=c,s.context=f,t=u):(typeof s.componentDidMount=="function"&&(n.flags|=4194308),t=!1)}else{s=n.stateNode,Nx(o,n),u=n.memoizedProps,f=n.type===n.elementType?u:ji(n.type,u),s.props=f,v=n.pendingProps,m=s.context,c=e.contextType,typeof c=="object"&&c!==null?c=wi(c):(c=Bo(e)?Ys:ro.current,c=lu(n,c));var _=e.getDerivedStateFromProps;(h=typeof _=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==v||m!==c)&&bw(n,s,t,c),Wa=!1,m=n.memoizedState,s.state=m,Ad(n,t,s,r);var C=n.memoizedState;u!==v||m!==C||Uo.current||Wa?(typeof _=="function"&&(gg(n,e,_,t),C=n.memoizedState),(f=Wa||_w(n,e,f,t,m,C,c)||!1)?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(t,C,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(t,C,c)),typeof s.componentDidUpdate=="function"&&(n.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof s.componentDidUpdate!="function"||u===o.memoizedProps&&m===o.memoizedState||(n.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===o.memoizedProps&&m===o.memoizedState||(n.flags|=1024),n.memoizedProps=t,n.memoizedState=C),s.props=t,s.state=C,s.context=c,t=f):(typeof s.componentDidUpdate!="function"||u===o.memoizedProps&&m===o.memoizedState||(n.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===o.memoizedProps&&m===o.memoizedState||(n.flags|=1024),t=!1)}return _g(o,n,e,t,i,r)}function _g(o,n,e,t,r,i){lC(o,n);var s=(n.flags&128)!==0;if(!t&&!s)return r&&dw(n,e,!1),Ca(o,n,i);t=n.stateNode,zE.current=n;var u=s&&typeof e.getDerivedStateFromError!="function"?null:t.render();return n.flags|=1,o!==null&&s?(n.child=cu(n,o.child,null,i),n.child=cu(n,null,u,i)):wo(o,n,u,i),n.memoizedState=t.state,r&&dw(n,e,!0),n.child}function uC(o){var n=o.stateNode;n.pendingContext?fw(o,n.pendingContext,n.pendingContext!==n.context):n.context&&fw(o,n.context,!1),jm(o,n.containerInfo)}function Pw(o,n,e,t,r){return uu(),Pm(r),n.flags|=256,wo(o,n,e,t),n.child}var bg={dehydrated:null,treeContext:null,retryLane:0};function xg(o){return{baseLanes:o,cachePool:null,transitions:null}}function cC(o,n,e){var t=n.pendingProps,r=Gn.current,i=!1,s=(n.flags&128)!==0,u;if((u=s)||(u=o!==null&&o.memoizedState===null?!1:(r&2)!==0),u?(i=!0,n.flags&=-129):(o===null||o.memoizedState!==null)&&(r|=1),kn(Gn,r&1),o===null)return hg(n),o=n.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?(n.mode&1?o.data==="$!"?n.lanes=8:n.lanes=1073741824:n.lanes=1,null):(s=t.children,o=t.fallback,i?(t=n.mode,i=n.child,s={mode:"hidden",children:s},!(t&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=Jp(s,t,0,null),o=Ks(o,t,e,null),i.return=n,o.return=n,i.sibling=o,n.child=i,n.child.memoizedState=xg(e),n.memoizedState=bg,o):Um(n,s));if(r=o.memoizedState,r!==null&&(u=r.dehydrated,u!==null))return HE(o,n,s,t,u,r,e);if(i){i=t.fallback,s=n.mode,r=o.child,u=r.sibling;var c={mode:"hidden",children:t.children};return!(s&1)&&n.child!==r?(t=n.child,t.childLanes=0,t.pendingProps=c,n.deletions=null):(t=ls(r,c),t.subtreeFlags=r.subtreeFlags&14680064),u!==null?i=ls(u,i):(i=Ks(i,s,e,null),i.flags|=2),i.return=n,t.return=n,t.sibling=i,n.child=t,t=i,i=n.child,s=o.child.memoizedState,s=s===null?xg(e):{baseLanes:s.baseLanes|e,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=o.childLanes&~e,n.memoizedState=bg,t}return i=o.child,o=i.sibling,t=ls(i,{mode:"visible",children:t.children}),!(n.mode&1)&&(t.lanes=e),t.return=n,t.sibling=null,o!==null&&(e=n.deletions,e===null?(n.deletions=[o],n.flags|=16):e.push(o)),n.child=t,n.memoizedState=null,t}function Um(o,n){return n=Jp({mode:"visible",children:n},o.mode,0,null),n.return=o,o.child=n}function Hf(o,n,e,t){return t!==null&&Pm(t),cu(n,o.child,null,e),o=Um(n,n.pendingProps.children),o.flags|=2,n.memoizedState=null,o}function HE(o,n,e,t,r,i,s){if(e)return n.flags&256?(n.flags&=-257,t=rv(Error(ht(422))),Hf(o,n,s,t)):n.memoizedState!==null?(n.child=o.child,n.flags|=128,null):(i=t.fallback,r=n.mode,t=Jp({mode:"visible",children:t.children},r,0,null),i=Ks(i,r,s,null),i.flags|=2,t.return=n,i.return=n,t.sibling=i,n.child=t,n.mode&1&&cu(n,o.child,null,s),n.child.memoizedState=xg(s),n.memoizedState=bg,i);if(!(n.mode&1))return Hf(o,n,s,null);if(r.data==="$!"){if(t=r.nextSibling&&r.nextSibling.dataset,t)var u=t.dgst;return t=u,i=Error(ht(419)),t=rv(i,t,void 0),Hf(o,n,s,t)}if(u=(s&o.childLanes)!==0,Ho||u){if(t=Mr,t!==null){switch(s&-s){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(t.suspendedLanes|s)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,xa(o,r),Fi(t,o,r,-1))}return Ym(),t=rv(Error(ht(421))),Hf(o,n,s,t)}return r.data==="$?"?(n.flags|=128,n.child=o.child,n=eP.bind(null,o),r._reactRetry=n,null):(o=i.treeContext,ti=os(r.nextSibling),oi=n,Un=!0,Ni=null,o!==null&&(hi[vi++]=ga,hi[vi++]=ma,hi[vi++]=Xs,ga=o.id,ma=o.overflow,Xs=n),n=Um(n,t.children),n.flags|=4096,n)}function kw(o,n,e){o.lanes|=n;var t=o.alternate;t!==null&&(t.lanes|=n),vg(o.return,n,e)}function ov(o,n,e,t,r){var i=o.memoizedState;i===null?o.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:t,tail:e,tailMode:r}:(i.isBackwards=n,i.rendering=null,i.renderingStartTime=0,i.last=t,i.tail=e,i.tailMode=r)}function fC(o,n,e){var t=n.pendingProps,r=t.revealOrder,i=t.tail;if(wo(o,n,t.children,e),t=Gn.current,t&2)t=t&1|2,n.flags|=128;else{if(o!==null&&o.flags&128)e:for(o=n.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&kw(o,e,n);else if(o.tag===19)kw(o,e,n);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break e;for(;o.sibling===null;){if(o.return===null||o.return===n)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t&=1}if(kn(Gn,t),!(n.mode&1))n.memoizedState=null;else switch(r){case"forwards":for(e=n.child,r=null;e!==null;)o=e.alternate,o!==null&&Md(o)===null&&(r=e),e=e.sibling;e=r,e===null?(r=n.child,n.child=null):(r=e.sibling,e.sibling=null),ov(n,!1,r,e,i);break;case"backwards":for(e=null,r=n.child,n.child=null;r!==null;){if(o=r.alternate,o!==null&&Md(o)===null){n.child=r;break}o=r.sibling,r.sibling=e,e=r,r=o}ov(n,!0,e,null,i);break;case"together":ov(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function ld(o,n){!(n.mode&1)&&o!==null&&(o.alternate=null,n.alternate=null,n.flags|=2)}function Ca(o,n,e){if(o!==null&&(n.dependencies=o.dependencies),Js|=n.lanes,!(e&n.childLanes))return null;if(o!==null&&n.child!==o.child)throw Error(ht(153));if(n.child!==null){for(o=n.child,e=ls(o,o.pendingProps),n.child=e,e.return=n;o.sibling!==null;)o=o.sibling,e=e.sibling=ls(o,o.pendingProps),e.return=n;e.sibling=null}return n.child}function UE(o,n,e){switch(n.tag){case 3:uC(n),uu();break;case 5:Rx(n);break;case 1:Bo(n.type)&&Od(n);break;case 4:jm(n,n.stateNode.containerInfo);break;case 10:var t=n.type._context,r=n.memoizedProps.value;kn(Pd,t._currentValue),t._currentValue=r;break;case 13:if(t=n.memoizedState,t!==null)return t.dehydrated!==null?(kn(Gn,Gn.current&1),n.flags|=128,null):e&n.child.childLanes?cC(o,n,e):(kn(Gn,Gn.current&1),o=Ca(o,n,e),o!==null?o.sibling:null);kn(Gn,Gn.current&1);break;case 19:if(t=(e&n.childLanes)!==0,o.flags&128){if(t)return fC(o,n,e);n.flags|=128}if(r=n.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),kn(Gn,Gn.current),t)break;return null;case 22:case 23:return n.lanes=0,sC(o,n,e)}return Ca(o,n,e)}var dC,Cg,pC,hC;dC=function(o,n){for(var e=n.child;e!==null;){if(e.tag===5||e.tag===6)o.appendChild(e.stateNode);else if(e.tag!==4&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return;e=e.return}e.sibling.return=e.return,e=e.sibling}};Cg=function(){};pC=function(o,n,e,t){var r=o.memoizedProps;if(r!==t){o=n.stateNode,Us(ia.current);var i=null;switch(e){case"input":r=$v(o,r),t=$v(o,t),i=[];break;case"select":r=Xn({},r,{value:void 0}),t=Xn({},t,{value:void 0}),i=[];break;case"textarea":r=Yv(o,r),t=Yv(o,t),i=[];break;default:typeof r.onClick!="function"&&typeof t.onClick=="function"&&(o.onclick=Cd)}qv(e,t);var s;e=null;for(f in r)if(!t.hasOwnProperty(f)&&r.hasOwnProperty(f)&&r[f]!=null)if(f==="style"){var u=r[f];for(s in u)u.hasOwnProperty(s)&&(e||(e={}),e[s]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Mc.hasOwnProperty(f)?i||(i=[]):(i=i||[]).push(f,null));for(f in t){var c=t[f];if(u=r!=null?r[f]:void 0,t.hasOwnProperty(f)&&c!==u&&(c!=null||u!=null))if(f==="style")if(u){for(s in u)!u.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(e||(e={}),e[s]="");for(s in c)c.hasOwnProperty(s)&&u[s]!==c[s]&&(e||(e={}),e[s]=c[s])}else e||(i||(i=[]),i.push(f,e)),e=c;else f==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(i=i||[]).push(f,c)):f==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(f,""+c):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Mc.hasOwnProperty(f)?(c!=null&&f==="onScroll"&&Ln("scroll",o),i||u===c||(i=[])):(i=i||[]).push(f,c))}e&&(i=i||[]).push("style",e);var f=i;(n.updateQueue=f)&&(n.flags|=4)}};hC=function(o,n,e,t){e!==t&&(n.flags|=4)};function Xu(o,n){if(!Un)switch(o.tailMode){case"hidden":n=o.tail;for(var e=null;n!==null;)n.alternate!==null&&(e=n),n=n.sibling;e===null?o.tail=null:e.sibling=null;break;case"collapsed":e=o.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n||o.tail===null?o.tail=null:o.tail.sibling=null:t.sibling=null}}function Zr(o){var n=o.alternate!==null&&o.alternate.child===o.child,e=0,t=0;if(n)for(var r=o.child;r!==null;)e|=r.lanes|r.childLanes,t|=r.subtreeFlags&14680064,t|=r.flags&14680064,r.return=o,r=r.sibling;else for(r=o.child;r!==null;)e|=r.lanes|r.childLanes,t|=r.subtreeFlags,t|=r.flags,r.return=o,r=r.sibling;return o.subtreeFlags|=t,o.childLanes=e,n}function BE(o,n,e){var t=n.pendingProps;switch(Em(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zr(n),null;case 1:return Bo(n.type)&&Sd(),Zr(n),null;case 3:return t=n.stateNode,fu(),In(Uo),In(ro),Nm(),t.pendingContext&&(t.context=t.pendingContext,t.pendingContext=null),(o===null||o.child===null)&&(Vf(n)?n.flags|=4:o===null||o.memoizedState.isDehydrated&&!(n.flags&256)||(n.flags|=1024,Ni!==null&&(Mg(Ni),Ni=null))),Cg(o,n),Zr(n),null;case 5:Im(n);var r=Us(Bc.current);if(e=n.type,o!==null&&n.stateNode!=null)pC(o,n,e,t,r),o.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!t){if(n.stateNode===null)throw Error(ht(166));return Zr(n),null}if(o=Us(ia.current),Vf(n)){t=n.stateNode,e=n.type;var i=n.memoizedProps;switch(t[ra]=n,t[Hc]=i,o=(n.mode&1)!==0,e){case"dialog":Ln("cancel",t),Ln("close",t);break;case"iframe":case"object":case"embed":Ln("load",t);break;case"video":case"audio":for(r=0;r<oc.length;r++)Ln(oc[r],t);break;case"source":Ln("error",t);break;case"img":case"image":case"link":Ln("error",t),Ln("load",t);break;case"details":Ln("toggle",t);break;case"input":F0(t,i),Ln("invalid",t);break;case"select":t._wrapperState={wasMultiple:!!i.multiple},Ln("invalid",t);break;case"textarea":z0(t,i),Ln("invalid",t)}qv(e,i),r=null;for(var s in i)if(i.hasOwnProperty(s)){var u=i[s];s==="children"?typeof u=="string"?t.textContent!==u&&(i.suppressHydrationWarning!==!0&&Ff(t.textContent,u,o),r=["children",u]):typeof u=="number"&&t.textContent!==""+u&&(i.suppressHydrationWarning!==!0&&Ff(t.textContent,u,o),r=["children",""+u]):Mc.hasOwnProperty(s)&&u!=null&&s==="onScroll"&&Ln("scroll",t)}switch(e){case"input":Af(t),V0(t,i,!0);break;case"textarea":Af(t),H0(t);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(t.onclick=Cd)}t=r,n.updateQueue=t,t!==null&&(n.flags|=4)}else{s=r.nodeType===9?r:r.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=Ub(e)),o==="http://www.w3.org/1999/xhtml"?e==="script"?(o=s.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof t.is=="string"?o=s.createElement(e,{is:t.is}):(o=s.createElement(e),e==="select"&&(s=o,t.multiple?s.multiple=!0:t.size&&(s.size=t.size))):o=s.createElementNS(o,e),o[ra]=n,o[Hc]=t,dC(o,n,!1,!1),n.stateNode=o;e:{switch(s=Jv(e,t),e){case"dialog":Ln("cancel",o),Ln("close",o),r=t;break;case"iframe":case"object":case"embed":Ln("load",o),r=t;break;case"video":case"audio":for(r=0;r<oc.length;r++)Ln(oc[r],o);r=t;break;case"source":Ln("error",o),r=t;break;case"img":case"image":case"link":Ln("error",o),Ln("load",o),r=t;break;case"details":Ln("toggle",o),r=t;break;case"input":F0(o,t),r=$v(o,t),Ln("invalid",o);break;case"option":r=t;break;case"select":o._wrapperState={wasMultiple:!!t.multiple},r=Xn({},t,{value:void 0}),Ln("invalid",o);break;case"textarea":z0(o,t),r=Yv(o,t),Ln("invalid",o);break;default:r=t}qv(e,r),u=r;for(i in u)if(u.hasOwnProperty(i)){var c=u[i];i==="style"?$b(o,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Bb(o,c)):i==="children"?typeof c=="string"?(e!=="textarea"||c!=="")&&Dc(o,c):typeof c=="number"&&Dc(o,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Mc.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ln("scroll",o):c!=null&&dm(o,i,c,s))}switch(e){case"input":Af(o),V0(o,t,!1);break;case"textarea":Af(o),H0(o);break;case"option":t.value!=null&&o.setAttribute("value",""+us(t.value));break;case"select":o.multiple=!!t.multiple,i=t.value,i!=null?Ql(o,!!t.multiple,i,!1):t.defaultValue!=null&&Ql(o,!!t.multiple,t.defaultValue,!0);break;default:typeof r.onClick=="function"&&(o.onclick=Cd)}switch(e){case"button":case"input":case"select":case"textarea":t=!!t.autoFocus;break e;case"img":t=!0;break e;default:t=!1}}t&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return Zr(n),null;case 6:if(o&&n.stateNode!=null)hC(o,n,o.memoizedProps,t);else{if(typeof t!="string"&&n.stateNode===null)throw Error(ht(166));if(e=Us(Bc.current),Us(ia.current),Vf(n)){if(t=n.stateNode,e=n.memoizedProps,t[ra]=n,(i=t.nodeValue!==e)&&(o=oi,o!==null))switch(o.tag){case 3:Ff(t.nodeValue,e,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&Ff(t.nodeValue,e,(o.mode&1)!==0)}i&&(n.flags|=4)}else t=(e.nodeType===9?e:e.ownerDocument).createTextNode(t),t[ra]=n,n.stateNode=t}return Zr(n),null;case 13:if(In(Gn),t=n.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(Un&&ti!==null&&n.mode&1&&!(n.flags&128))Dx(),uu(),n.flags|=98560,i=!1;else if(i=Vf(n),t!==null&&t.dehydrated!==null){if(o===null){if(!i)throw Error(ht(318));if(i=n.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ht(317));i[ra]=n}else uu(),!(n.flags&128)&&(n.memoizedState=null),n.flags|=4;Zr(n),i=!1}else Ni!==null&&(Mg(Ni),Ni=null),i=!0;if(!i)return n.flags&65536?n:null}return n.flags&128?(n.lanes=e,n):(t=t!==null,t!==(o!==null&&o.memoizedState!==null)&&t&&(n.child.flags|=8192,n.mode&1&&(o===null||Gn.current&1?Cr===0&&(Cr=3):Ym())),n.updateQueue!==null&&(n.flags|=4),Zr(n),null);case 4:return fu(),Cg(o,n),o===null&&Vc(n.stateNode.containerInfo),Zr(n),null;case 10:return Mm(n.type._context),Zr(n),null;case 17:return Bo(n.type)&&Sd(),Zr(n),null;case 19:if(In(Gn),i=n.memoizedState,i===null)return Zr(n),null;if(t=(n.flags&128)!==0,s=i.rendering,s===null)if(t)Xu(i,!1);else{if(Cr!==0||o!==null&&o.flags&128)for(o=n.child;o!==null;){if(s=Md(o),s!==null){for(n.flags|=128,Xu(i,!1),t=s.updateQueue,t!==null&&(n.updateQueue=t,n.flags|=4),n.subtreeFlags=0,t=e,e=n.child;e!==null;)i=e,o=t,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,o=s.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),e=e.sibling;return kn(Gn,Gn.current&1|2),n.child}o=o.sibling}i.tail!==null&&ir()>pu&&(n.flags|=128,t=!0,Xu(i,!1),n.lanes=4194304)}else{if(!t)if(o=Md(s),o!==null){if(n.flags|=128,t=!0,e=o.updateQueue,e!==null&&(n.updateQueue=e,n.flags|=4),Xu(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!Un)return Zr(n),null}else 2*ir()-i.renderingStartTime>pu&&e!==1073741824&&(n.flags|=128,t=!0,Xu(i,!1),n.lanes=4194304);i.isBackwards?(s.sibling=n.child,n.child=s):(e=i.last,e!==null?e.sibling=s:n.child=s,i.last=s)}return i.tail!==null?(n=i.tail,i.rendering=n,i.tail=n.sibling,i.renderingStartTime=ir(),n.sibling=null,e=Gn.current,kn(Gn,t?e&1|2:e&1),n):(Zr(n),null);case 22:case 23:return Gm(),t=n.memoizedState!==null,o!==null&&o.memoizedState!==null!==t&&(n.flags|=8192),t&&n.mode&1?Qo&1073741824&&(Zr(n),n.subtreeFlags&6&&(n.flags|=8192)):Zr(n),null;case 24:return null;case 25:return null}throw Error(ht(156,n.tag))}function WE(o,n){switch(Em(n),n.tag){case 1:return Bo(n.type)&&Sd(),o=n.flags,o&65536?(n.flags=o&-65537|128,n):null;case 3:return fu(),In(Uo),In(ro),Nm(),o=n.flags,o&65536&&!(o&128)?(n.flags=o&-65537|128,n):null;case 5:return Im(n),null;case 13:if(In(Gn),o=n.memoizedState,o!==null&&o.dehydrated!==null){if(n.alternate===null)throw Error(ht(340));uu()}return o=n.flags,o&65536?(n.flags=o&-65537|128,n):null;case 19:return In(Gn),null;case 4:return fu(),null;case 10:return Mm(n.type._context),null;case 22:case 23:return Gm(),null;case 24:return null;default:return null}}var Uf=!1,to=!1,$E=typeof WeakSet=="function"?WeakSet:Set,kt=null;function Bl(o,n){var e=o.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(t){Zn(o,n,t)}else e.current=null}function Sg(o,n,e){try{e()}catch(t){Zn(o,n,t)}}var Aw=!1;function KE(o,n){if(sg=_d,o=wx(),Om(o)){if("selectionStart"in o)var e={start:o.selectionStart,end:o.selectionEnd};else e:{e=(e=o.ownerDocument)&&e.defaultView||window;var t=e.getSelection&&e.getSelection();if(t&&t.rangeCount!==0){e=t.anchorNode;var r=t.anchorOffset,i=t.focusNode;t=t.focusOffset;try{e.nodeType,i.nodeType}catch{e=null;break e}var s=0,u=-1,c=-1,f=0,h=0,v=o,m=null;t:for(;;){for(var _;v!==e||r!==0&&v.nodeType!==3||(u=s+r),v!==i||t!==0&&v.nodeType!==3||(c=s+t),v.nodeType===3&&(s+=v.nodeValue.length),(_=v.firstChild)!==null;)m=v,v=_;for(;;){if(v===o)break t;if(m===e&&++f===r&&(u=s),m===i&&++h===t&&(c=s),(_=v.nextSibling)!==null)break;v=m,m=v.parentNode}v=_}e=u===-1||c===-1?null:{start:u,end:c}}else e=null}e=e||{start:0,end:0}}else e=null;for(lg={focusedElem:o,selectionRange:e},_d=!1,kt=n;kt!==null;)if(n=kt,o=n.child,(n.subtreeFlags&1028)!==0&&o!==null)o.return=n,kt=o;else for(;kt!==null;){n=kt;try{var C=n.alternate;if(n.flags&1024)switch(n.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var T=C.memoizedProps,k=C.memoizedState,P=n.stateNode,L=P.getSnapshotBeforeUpdate(n.elementType===n.type?T:ji(n.type,T),k);P.__reactInternalSnapshotBeforeUpdate=L}break;case 3:var D=n.stateNode.containerInfo;D.nodeType===1?D.textContent="":D.nodeType===9&&D.documentElement&&D.removeChild(D.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ht(163))}}catch(V){Zn(n,n.return,V)}if(o=n.sibling,o!==null){o.return=n.return,kt=o;break}kt=n.return}return C=Aw,Aw=!1,C}function vc(o,n,e){var t=n.updateQueue;if(t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&o)===o){var i=r.destroy;r.destroy=void 0,i!==void 0&&Sg(n,e,i)}r=r.next}while(r!==t)}}function Xp(o,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var e=n=n.next;do{if((e.tag&o)===o){var t=e.create;e.destroy=t()}e=e.next}while(e!==n)}}function Og(o){var n=o.ref;if(n!==null){var e=o.stateNode;switch(o.tag){case 5:o=e;break;default:o=e}typeof n=="function"?n(o):n.current=o}}function vC(o){var n=o.alternate;n!==null&&(o.alternate=null,vC(n)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(n=o.stateNode,n!==null&&(delete n[ra],delete n[Hc],delete n[fg],delete n[PE],delete n[kE])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function gC(o){return o.tag===5||o.tag===3||o.tag===4}function Mw(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||gC(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Tg(o,n,e){var t=o.tag;if(t===5||t===6)o=o.stateNode,n?e.nodeType===8?e.parentNode.insertBefore(o,n):e.insertBefore(o,n):(e.nodeType===8?(n=e.parentNode,n.insertBefore(o,e)):(n=e,n.appendChild(o)),e=e._reactRootContainer,e!=null||n.onclick!==null||(n.onclick=Cd));else if(t!==4&&(o=o.child,o!==null))for(Tg(o,n,e),o=o.sibling;o!==null;)Tg(o,n,e),o=o.sibling}function Eg(o,n,e){var t=o.tag;if(t===5||t===6)o=o.stateNode,n?e.insertBefore(o,n):e.appendChild(o);else if(t!==4&&(o=o.child,o!==null))for(Eg(o,n,e),o=o.sibling;o!==null;)Eg(o,n,e),o=o.sibling}var zr=null,Ii=!1;function Ha(o,n,e){for(e=e.child;e!==null;)mC(o,n,e),e=e.sibling}function mC(o,n,e){if(oa&&typeof oa.onCommitFiberUnmount=="function")try{oa.onCommitFiberUnmount(Hp,e)}catch{}switch(e.tag){case 5:to||Bl(e,n);case 6:var t=zr,r=Ii;zr=null,Ha(o,n,e),zr=t,Ii=r,zr!==null&&(Ii?(o=zr,e=e.stateNode,o.nodeType===8?o.parentNode.removeChild(e):o.removeChild(e)):zr.removeChild(e.stateNode));break;case 18:zr!==null&&(Ii?(o=zr,e=e.stateNode,o.nodeType===8?Jh(o.parentNode,e):o.nodeType===1&&Jh(o,e),Nc(o)):Jh(zr,e.stateNode));break;case 4:t=zr,r=Ii,zr=e.stateNode.containerInfo,Ii=!0,Ha(o,n,e),zr=t,Ii=r;break;case 0:case 11:case 14:case 15:if(!to&&(t=e.updateQueue,t!==null&&(t=t.lastEffect,t!==null))){r=t=t.next;do{var i=r,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&Sg(e,n,s),r=r.next}while(r!==t)}Ha(o,n,e);break;case 1:if(!to&&(Bl(e,n),t=e.stateNode,typeof t.componentWillUnmount=="function"))try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(u){Zn(e,n,u)}Ha(o,n,e);break;case 21:Ha(o,n,e);break;case 22:e.mode&1?(to=(t=to)||e.memoizedState!==null,Ha(o,n,e),to=t):Ha(o,n,e);break;default:Ha(o,n,e)}}function Dw(o){var n=o.updateQueue;if(n!==null){o.updateQueue=null;var e=o.stateNode;e===null&&(e=o.stateNode=new $E),n.forEach(function(t){var r=tP.bind(null,o,t);e.has(t)||(e.add(t),t.then(r,r))})}}function Ai(o,n){var e=n.deletions;if(e!==null)for(var t=0;t<e.length;t++){var r=e[t];try{var i=o,s=n,u=s;e:for(;u!==null;){switch(u.tag){case 5:zr=u.stateNode,Ii=!1;break e;case 3:zr=u.stateNode.containerInfo,Ii=!0;break e;case 4:zr=u.stateNode.containerInfo,Ii=!0;break e}u=u.return}if(zr===null)throw Error(ht(160));mC(i,s,r),zr=null,Ii=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(f){Zn(r,n,f)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)yC(n,o),n=n.sibling}function yC(o,n){var e=o.alternate,t=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Ai(n,o),Zi(o),t&4){try{vc(3,o,o.return),Xp(3,o)}catch(T){Zn(o,o.return,T)}try{vc(5,o,o.return)}catch(T){Zn(o,o.return,T)}}break;case 1:Ai(n,o),Zi(o),t&512&&e!==null&&Bl(e,e.return);break;case 5:if(Ai(n,o),Zi(o),t&512&&e!==null&&Bl(e,e.return),o.flags&32){var r=o.stateNode;try{Dc(r,"")}catch(T){Zn(o,o.return,T)}}if(t&4&&(r=o.stateNode,r!=null)){var i=o.memoizedProps,s=e!==null?e.memoizedProps:i,u=o.type,c=o.updateQueue;if(o.updateQueue=null,c!==null)try{u==="input"&&i.type==="radio"&&i.name!=null&&zb(r,i),Jv(u,s);var f=Jv(u,i);for(s=0;s<c.length;s+=2){var h=c[s],v=c[s+1];h==="style"?$b(r,v):h==="dangerouslySetInnerHTML"?Bb(r,v):h==="children"?Dc(r,v):dm(r,h,v,f)}switch(u){case"input":Kv(r,i);break;case"textarea":Hb(r,i);break;case"select":var m=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var _=i.value;_!=null?Ql(r,!!i.multiple,_,!1):m!==!!i.multiple&&(i.defaultValue!=null?Ql(r,!!i.multiple,i.defaultValue,!0):Ql(r,!!i.multiple,i.multiple?[]:"",!1))}r[Hc]=i}catch(T){Zn(o,o.return,T)}}break;case 6:if(Ai(n,o),Zi(o),t&4){if(o.stateNode===null)throw Error(ht(162));r=o.stateNode,i=o.memoizedProps;try{r.nodeValue=i}catch(T){Zn(o,o.return,T)}}break;case 3:if(Ai(n,o),Zi(o),t&4&&e!==null&&e.memoizedState.isDehydrated)try{Nc(n.containerInfo)}catch(T){Zn(o,o.return,T)}break;case 4:Ai(n,o),Zi(o);break;case 13:Ai(n,o),Zi(o),r=o.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||($m=ir())),t&4&&Dw(o);break;case 22:if(h=e!==null&&e.memoizedState!==null,o.mode&1?(to=(f=to)||h,Ai(n,o),to=f):Ai(n,o),Zi(o),t&8192){if(f=o.memoizedState!==null,(o.stateNode.isHidden=f)&&!h&&o.mode&1)for(kt=o,h=o.child;h!==null;){for(v=kt=h;kt!==null;){switch(m=kt,_=m.child,m.tag){case 0:case 11:case 14:case 15:vc(4,m,m.return);break;case 1:Bl(m,m.return);var C=m.stateNode;if(typeof C.componentWillUnmount=="function"){t=m,e=m.return;try{n=t,C.props=n.memoizedProps,C.state=n.memoizedState,C.componentWillUnmount()}catch(T){Zn(t,e,T)}}break;case 5:Bl(m,m.return);break;case 22:if(m.memoizedState!==null){jw(v);continue}}_!==null?(_.return=m,kt=_):jw(v)}h=h.sibling}e:for(h=null,v=o;;){if(v.tag===5){if(h===null){h=v;try{r=v.stateNode,f?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(u=v.stateNode,c=v.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=Wb("display",s))}catch(T){Zn(o,o.return,T)}}}else if(v.tag===6){if(h===null)try{v.stateNode.nodeValue=f?"":v.memoizedProps}catch(T){Zn(o,o.return,T)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===o)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===o)break e;for(;v.sibling===null;){if(v.return===null||v.return===o)break e;h===v&&(h=null),v=v.return}h===v&&(h=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:Ai(n,o),Zi(o),t&4&&Dw(o);break;case 21:break;default:Ai(n,o),Zi(o)}}function Zi(o){var n=o.flags;if(n&2){try{e:{for(var e=o.return;e!==null;){if(gC(e)){var t=e;break e}e=e.return}throw Error(ht(160))}switch(t.tag){case 5:var r=t.stateNode;t.flags&32&&(Dc(r,""),t.flags&=-33);var i=Mw(o);Eg(o,i,r);break;case 3:case 4:var s=t.stateNode.containerInfo,u=Mw(o);Tg(o,u,s);break;default:throw Error(ht(161))}}catch(c){Zn(o,o.return,c)}o.flags&=-3}n&4096&&(o.flags&=-4097)}function GE(o,n,e){kt=o,wC(o)}function wC(o,n,e){for(var t=(o.mode&1)!==0;kt!==null;){var r=kt,i=r.child;if(r.tag===22&&t){var s=r.memoizedState!==null||Uf;if(!s){var u=r.alternate,c=u!==null&&u.memoizedState!==null||to;u=Uf;var f=to;if(Uf=s,(to=c)&&!f)for(kt=r;kt!==null;)s=kt,c=s.child,s.tag===22&&s.memoizedState!==null?Iw(r):c!==null?(c.return=s,kt=c):Iw(r);for(;i!==null;)kt=i,wC(i),i=i.sibling;kt=r,Uf=u,to=f}Lw(o)}else r.subtreeFlags&8772&&i!==null?(i.return=r,kt=i):Lw(o)}}function Lw(o){for(;kt!==null;){var n=kt;if(n.flags&8772){var e=n.alternate;try{if(n.flags&8772)switch(n.tag){case 0:case 11:case 15:to||Xp(5,n);break;case 1:var t=n.stateNode;if(n.flags&4&&!to)if(e===null)t.componentDidMount();else{var r=n.elementType===n.type?e.memoizedProps:ji(n.type,e.memoizedProps);t.componentDidUpdate(r,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate)}var i=n.updateQueue;i!==null&&mw(n,i,t);break;case 3:var s=n.updateQueue;if(s!==null){if(e=null,n.child!==null)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}mw(n,s,e)}break;case 5:var u=n.stateNode;if(e===null&&n.flags&4){e=u;var c=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&e.focus();break;case"img":c.src&&(e.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var f=n.alternate;if(f!==null){var h=f.memoizedState;if(h!==null){var v=h.dehydrated;v!==null&&Nc(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ht(163))}to||n.flags&512&&Og(n)}catch(m){Zn(n,n.return,m)}}if(n===o){kt=null;break}if(e=n.sibling,e!==null){e.return=n.return,kt=e;break}kt=n.return}}function jw(o){for(;kt!==null;){var n=kt;if(n===o){kt=null;break}var e=n.sibling;if(e!==null){e.return=n.return,kt=e;break}kt=n.return}}function Iw(o){for(;kt!==null;){var n=kt;try{switch(n.tag){case 0:case 11:case 15:var e=n.return;try{Xp(4,n)}catch(c){Zn(n,e,c)}break;case 1:var t=n.stateNode;if(typeof t.componentDidMount=="function"){var r=n.return;try{t.componentDidMount()}catch(c){Zn(n,r,c)}}var i=n.return;try{Og(n)}catch(c){Zn(n,i,c)}break;case 5:var s=n.return;try{Og(n)}catch(c){Zn(n,s,c)}}}catch(c){Zn(n,n.return,c)}if(n===o){kt=null;break}var u=n.sibling;if(u!==null){u.return=n.return,kt=u;break}kt=n.return}}var YE=Math.ceil,jd=Oa.ReactCurrentDispatcher,Bm=Oa.ReactCurrentOwner,yi=Oa.ReactCurrentBatchConfig,cn=0,Mr=null,fr=null,Hr=0,Qo=0,Wl=ps(0),Cr=0,Gc=null,Js=0,qp=0,Wm=0,gc=null,Fo=null,$m=0,pu=1/0,fa=null,Id=!1,Pg=null,as=null,Bf=!1,Za=null,Nd=0,mc=0,kg=null,ud=-1,cd=0;function xo(){return cn&6?ir():ud!==-1?ud:ud=ir()}function ss(o){return o.mode&1?cn&2&&Hr!==0?Hr&-Hr:ME.transition!==null?(cd===0&&(cd=rx()),cd):(o=_n,o!==0||(o=window.event,o=o===void 0?16:cx(o.type)),o):1}function Fi(o,n,e,t){if(50<mc)throw mc=0,kg=null,Error(ht(185));ef(o,e,t),(!(cn&2)||o!==Mr)&&(o===Mr&&(!(cn&2)&&(qp|=e),Cr===4&&qa(o,Hr)),Wo(o,t),e===1&&cn===0&&!(n.mode&1)&&(pu=ir()+500,Kp&&hs()))}function Wo(o,n){var e=o.callbackNode;MT(o,n);var t=wd(o,o===Mr?Hr:0);if(t===0)e!==null&&W0(e),o.callbackNode=null,o.callbackPriority=0;else if(n=t&-t,o.callbackPriority!==n){if(e!=null&&W0(e),n===1)o.tag===0?AE(Nw.bind(null,o)):kx(Nw.bind(null,o)),TE(function(){!(cn&6)&&hs()}),e=null;else{switch(ox(t)){case 1:e=mm;break;case 4:e=tx;break;case 16:e=yd;break;case 536870912:e=nx;break;default:e=yd}e=EC(e,_C.bind(null,o))}o.callbackPriority=n,o.callbackNode=e}}function _C(o,n){if(ud=-1,cd=0,cn&6)throw Error(ht(327));var e=o.callbackNode;if(ou()&&o.callbackNode!==e)return null;var t=wd(o,o===Mr?Hr:0);if(t===0)return null;if(t&30||t&o.expiredLanes||n)n=Rd(o,t);else{n=t;var r=cn;cn|=2;var i=xC();(Mr!==o||Hr!==n)&&(fa=null,pu=ir()+500,$s(o,n));do try{JE();break}catch(u){bC(o,u)}while(1);Am(),jd.current=i,cn=r,fr!==null?n=0:(Mr=null,Hr=0,n=Cr)}if(n!==0){if(n===2&&(r=ng(o),r!==0&&(t=r,n=Ag(o,r))),n===1)throw e=Gc,$s(o,0),qa(o,t),Wo(o,ir()),e;if(n===6)qa(o,t);else{if(r=o.current.alternate,!(t&30)&&!XE(r)&&(n=Rd(o,t),n===2&&(i=ng(o),i!==0&&(t=i,n=Ag(o,i))),n===1))throw e=Gc,$s(o,0),qa(o,t),Wo(o,ir()),e;switch(o.finishedWork=r,o.finishedLanes=t,n){case 0:case 1:throw Error(ht(345));case 2:js(o,Fo,fa);break;case 3:if(qa(o,t),(t&130023424)===t&&(n=$m+500-ir(),10<n)){if(wd(o,0)!==0)break;if(r=o.suspendedLanes,(r&t)!==t){xo(),o.pingedLanes|=o.suspendedLanes&r;break}o.timeoutHandle=cg(js.bind(null,o,Fo,fa),n);break}js(o,Fo,fa);break;case 4:if(qa(o,t),(t&4194240)===t)break;for(n=o.eventTimes,r=-1;0<t;){var s=31-Ri(t);i=1<<s,s=n[s],s>r&&(r=s),t&=~i}if(t=r,t=ir()-t,t=(120>t?120:480>t?480:1080>t?1080:1920>t?1920:3e3>t?3e3:4320>t?4320:1960*YE(t/1960))-t,10<t){o.timeoutHandle=cg(js.bind(null,o,Fo,fa),t);break}js(o,Fo,fa);break;case 5:js(o,Fo,fa);break;default:throw Error(ht(329))}}}return Wo(o,ir()),o.callbackNode===e?_C.bind(null,o):null}function Ag(o,n){var e=gc;return o.current.memoizedState.isDehydrated&&($s(o,n).flags|=256),o=Rd(o,n),o!==2&&(n=Fo,Fo=e,n!==null&&Mg(n)),o}function Mg(o){Fo===null?Fo=o:Fo.push.apply(Fo,o)}function XE(o){for(var n=o;;){if(n.flags&16384){var e=n.updateQueue;if(e!==null&&(e=e.stores,e!==null))for(var t=0;t<e.length;t++){var r=e[t],i=r.getSnapshot;r=r.value;try{if(!Vi(i(),r))return!1}catch{return!1}}}if(e=n.child,n.subtreeFlags&16384&&e!==null)e.return=n,n=e;else{if(n===o)break;for(;n.sibling===null;){if(n.return===null||n.return===o)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function qa(o,n){for(n&=~Wm,n&=~qp,o.suspendedLanes|=n,o.pingedLanes&=~n,o=o.expirationTimes;0<n;){var e=31-Ri(n),t=1<<e;o[e]=-1,n&=~t}}function Nw(o){if(cn&6)throw Error(ht(327));ou();var n=wd(o,0);if(!(n&1))return Wo(o,ir()),null;var e=Rd(o,n);if(o.tag!==0&&e===2){var t=ng(o);t!==0&&(n=t,e=Ag(o,t))}if(e===1)throw e=Gc,$s(o,0),qa(o,n),Wo(o,ir()),e;if(e===6)throw Error(ht(345));return o.finishedWork=o.current.alternate,o.finishedLanes=n,js(o,Fo,fa),Wo(o,ir()),null}function Km(o,n){var e=cn;cn|=1;try{return o(n)}finally{cn=e,cn===0&&(pu=ir()+500,Kp&&hs())}}function Zs(o){Za!==null&&Za.tag===0&&!(cn&6)&&ou();var n=cn;cn|=1;var e=yi.transition,t=_n;try{if(yi.transition=null,_n=1,o)return o()}finally{_n=t,yi.transition=e,cn=n,!(cn&6)&&hs()}}function Gm(){Qo=Wl.current,In(Wl)}function $s(o,n){o.finishedWork=null,o.finishedLanes=0;var e=o.timeoutHandle;if(e!==-1&&(o.timeoutHandle=-1,OE(e)),fr!==null)for(e=fr.return;e!==null;){var t=e;switch(Em(t),t.tag){case 1:t=t.type.childContextTypes,t!=null&&Sd();break;case 3:fu(),In(Uo),In(ro),Nm();break;case 5:Im(t);break;case 4:fu();break;case 13:In(Gn);break;case 19:In(Gn);break;case 10:Mm(t.type._context);break;case 22:case 23:Gm()}e=e.return}if(Mr=o,fr=o=ls(o.current,null),Hr=Qo=n,Cr=0,Gc=null,Wm=qp=Js=0,Fo=gc=null,Hs!==null){for(n=0;n<Hs.length;n++)if(e=Hs[n],t=e.interleaved,t!==null){e.interleaved=null;var r=t.next,i=e.pending;if(i!==null){var s=i.next;i.next=r,t.next=s}e.pending=t}Hs=null}return o}function bC(o,n){do{var e=fr;try{if(Am(),ad.current=Ld,Dd){for(var t=Yn.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}Dd=!1}if(qs=0,Ar=xr=Yn=null,hc=!1,Wc=0,Bm.current=null,e===null||e.return===null){Cr=1,Gc=n,fr=null;break}e:{var i=o,s=e.return,u=e,c=n;if(n=Hr,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=c,h=u,v=h.tag;if(!(h.mode&1)&&(v===0||v===11||v===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var _=Cw(s);if(_!==null){_.flags&=-257,Sw(_,s,u,i,n),_.mode&1&&xw(i,f,n),n=_,c=f;var C=n.updateQueue;if(C===null){var T=new Set;T.add(c),n.updateQueue=T}else C.add(c);break e}else{if(!(n&1)){xw(i,f,n),Ym();break e}c=Error(ht(426))}}else if(Un&&u.mode&1){var k=Cw(s);if(k!==null){!(k.flags&65536)&&(k.flags|=256),Sw(k,s,u,i,n),Pm(du(c,u));break e}}i=c=du(c,u),Cr!==4&&(Cr=2),gc===null?gc=[i]:gc.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,n&=-n,i.lanes|=n;var P=oC(i,c,n);gw(i,P);break e;case 1:u=c;var L=i.type,D=i.stateNode;if(!(i.flags&128)&&(typeof L.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(as===null||!as.has(D)))){i.flags|=65536,n&=-n,i.lanes|=n;var V=iC(i,u,n);gw(i,V);break e}}i=i.return}while(i!==null)}SC(e)}catch(re){n=re,fr===e&&e!==null&&(fr=e=e.return);continue}break}while(1)}function xC(){var o=jd.current;return jd.current=Ld,o===null?Ld:o}function Ym(){(Cr===0||Cr===3||Cr===2)&&(Cr=4),Mr===null||!(Js&268435455)&&!(qp&268435455)||qa(Mr,Hr)}function Rd(o,n){var e=cn;cn|=2;var t=xC();(Mr!==o||Hr!==n)&&(fa=null,$s(o,n));do try{qE();break}catch(r){bC(o,r)}while(1);if(Am(),cn=e,jd.current=t,fr!==null)throw Error(ht(261));return Mr=null,Hr=0,Cr}function qE(){for(;fr!==null;)CC(fr)}function JE(){for(;fr!==null&&!xT();)CC(fr)}function CC(o){var n=TC(o.alternate,o,Qo);o.memoizedProps=o.pendingProps,n===null?SC(o):fr=n,Bm.current=null}function SC(o){var n=o;do{var e=n.alternate;if(o=n.return,n.flags&32768){if(e=WE(e,n),e!==null){e.flags&=32767,fr=e;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{Cr=6,fr=null;return}}else if(e=BE(e,n,Qo),e!==null){fr=e;return}if(n=n.sibling,n!==null){fr=n;return}fr=n=o}while(n!==null);Cr===0&&(Cr=5)}function js(o,n,e){var t=_n,r=yi.transition;try{yi.transition=null,_n=1,ZE(o,n,e,t)}finally{yi.transition=r,_n=t}return null}function ZE(o,n,e,t){do ou();while(Za!==null);if(cn&6)throw Error(ht(327));e=o.finishedWork;var r=o.finishedLanes;if(e===null)return null;if(o.finishedWork=null,o.finishedLanes=0,e===o.current)throw Error(ht(177));o.callbackNode=null,o.callbackPriority=0;var i=e.lanes|e.childLanes;if(DT(o,i),o===Mr&&(fr=Mr=null,Hr=0),!(e.subtreeFlags&2064)&&!(e.flags&2064)||Bf||(Bf=!0,EC(yd,function(){return ou(),null})),i=(e.flags&15990)!==0,e.subtreeFlags&15990||i){i=yi.transition,yi.transition=null;var s=_n;_n=1;var u=cn;cn|=4,Bm.current=null,KE(o,e),yC(e,o),yE(lg),_d=!!sg,lg=sg=null,o.current=e,GE(e),CT(),cn=u,_n=s,yi.transition=i}else o.current=e;if(Bf&&(Bf=!1,Za=o,Nd=r),i=o.pendingLanes,i===0&&(as=null),TT(e.stateNode),Wo(o,ir()),n!==null)for(t=o.onRecoverableError,e=0;e<n.length;e++)r=n[e],t(r.value,{componentStack:r.stack,digest:r.digest});if(Id)throw Id=!1,o=Pg,Pg=null,o;return Nd&1&&o.tag!==0&&ou(),i=o.pendingLanes,i&1?o===kg?mc++:(mc=0,kg=o):mc=0,hs(),null}function ou(){if(Za!==null){var o=ox(Nd),n=yi.transition,e=_n;try{if(yi.transition=null,_n=16>o?16:o,Za===null)var t=!1;else{if(o=Za,Za=null,Nd=0,cn&6)throw Error(ht(331));var r=cn;for(cn|=4,kt=o.current;kt!==null;){var i=kt,s=i.child;if(kt.flags&16){var u=i.deletions;if(u!==null){for(var c=0;c<u.length;c++){var f=u[c];for(kt=f;kt!==null;){var h=kt;switch(h.tag){case 0:case 11:case 15:vc(8,h,i)}var v=h.child;if(v!==null)v.return=h,kt=v;else for(;kt!==null;){h=kt;var m=h.sibling,_=h.return;if(vC(h),h===f){kt=null;break}if(m!==null){m.return=_,kt=m;break}kt=_}}}var C=i.alternate;if(C!==null){var T=C.child;if(T!==null){C.child=null;do{var k=T.sibling;T.sibling=null,T=k}while(T!==null)}}kt=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,kt=s;else e:for(;kt!==null;){if(i=kt,i.flags&2048)switch(i.tag){case 0:case 11:case 15:vc(9,i,i.return)}var P=i.sibling;if(P!==null){P.return=i.return,kt=P;break e}kt=i.return}}var L=o.current;for(kt=L;kt!==null;){s=kt;var D=s.child;if(s.subtreeFlags&2064&&D!==null)D.return=s,kt=D;else e:for(s=L;kt!==null;){if(u=kt,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Xp(9,u)}}catch(re){Zn(u,u.return,re)}if(u===s){kt=null;break e}var V=u.sibling;if(V!==null){V.return=u.return,kt=V;break e}kt=u.return}}if(cn=r,hs(),oa&&typeof oa.onPostCommitFiberRoot=="function")try{oa.onPostCommitFiberRoot(Hp,o)}catch{}t=!0}return t}finally{_n=e,yi.transition=n}}return!1}function Rw(o,n,e){n=du(e,n),n=oC(o,n,1),o=is(o,n,1),n=xo(),o!==null&&(ef(o,1,n),Wo(o,n))}function Zn(o,n,e){if(o.tag===3)Rw(o,o,e);else for(;n!==null;){if(n.tag===3){Rw(n,o,e);break}else if(n.tag===1){var t=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof t.componentDidCatch=="function"&&(as===null||!as.has(t))){o=du(e,o),o=iC(n,o,1),n=is(n,o,1),o=xo(),n!==null&&(ef(n,1,o),Wo(n,o));break}}n=n.return}}function QE(o,n,e){var t=o.pingCache;t!==null&&t.delete(n),n=xo(),o.pingedLanes|=o.suspendedLanes&e,Mr===o&&(Hr&e)===e&&(Cr===4||Cr===3&&(Hr&130023424)===Hr&&500>ir()-$m?$s(o,0):Wm|=e),Wo(o,n)}function OC(o,n){n===0&&(o.mode&1?(n=Lf,Lf<<=1,!(Lf&130023424)&&(Lf=4194304)):n=1);var e=xo();o=xa(o,n),o!==null&&(ef(o,n,e),Wo(o,e))}function eP(o){var n=o.memoizedState,e=0;n!==null&&(e=n.retryLane),OC(o,e)}function tP(o,n){var e=0;switch(o.tag){case 13:var t=o.stateNode,r=o.memoizedState;r!==null&&(e=r.retryLane);break;case 19:t=o.stateNode;break;default:throw Error(ht(314))}t!==null&&t.delete(n),OC(o,e)}var TC;TC=function(o,n,e){if(o!==null)if(o.memoizedProps!==n.pendingProps||Uo.current)Ho=!0;else{if(!(o.lanes&e)&&!(n.flags&128))return Ho=!1,UE(o,n,e);Ho=!!(o.flags&131072)}else Ho=!1,Un&&n.flags&1048576&&Ax(n,Ed,n.index);switch(n.lanes=0,n.tag){case 2:var t=n.type;ld(o,n),o=n.pendingProps;var r=lu(n,ro.current);ru(n,e),r=Fm(null,n,t,o,r,e);var i=Vm();return n.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,Bo(t)?(i=!0,Od(n)):i=!1,n.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Lm(n),r.updater=Yp,n.stateNode=r,r._reactInternals=n,mg(n,t,o,e),n=_g(null,n,t,!0,i,e)):(n.tag=0,Un&&i&&Tm(n),wo(null,n,r,e),n=n.child),n;case 16:t=n.elementType;e:{switch(ld(o,n),o=n.pendingProps,r=t._init,t=r(t._payload),n.type=t,r=n.tag=rP(t),o=ji(t,o),r){case 0:n=wg(null,n,t,o,e);break e;case 1:n=Ew(null,n,t,o,e);break e;case 11:n=Ow(null,n,t,o,e);break e;case 14:n=Tw(null,n,t,ji(t.type,o),e);break e}throw Error(ht(306,t,""))}return n;case 0:return t=n.type,r=n.pendingProps,r=n.elementType===t?r:ji(t,r),wg(o,n,t,r,e);case 1:return t=n.type,r=n.pendingProps,r=n.elementType===t?r:ji(t,r),Ew(o,n,t,r,e);case 3:e:{if(uC(n),o===null)throw Error(ht(387));t=n.pendingProps,i=n.memoizedState,r=i.element,Nx(o,n),Ad(n,t,null,e);var s=n.memoizedState;if(t=s.element,i.isDehydrated)if(i={element:t,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},n.updateQueue.baseState=i,n.memoizedState=i,n.flags&256){r=du(Error(ht(423)),n),n=Pw(o,n,t,e,r);break e}else if(t!==r){r=du(Error(ht(424)),n),n=Pw(o,n,t,e,r);break e}else for(ti=os(n.stateNode.containerInfo.firstChild),oi=n,Un=!0,Ni=null,e=jx(n,null,t,e),n.child=e;e;)e.flags=e.flags&-3|4096,e=e.sibling;else{if(uu(),t===r){n=Ca(o,n,e);break e}wo(o,n,t,e)}n=n.child}return n;case 5:return Rx(n),o===null&&hg(n),t=n.type,r=n.pendingProps,i=o!==null?o.memoizedProps:null,s=r.children,ug(t,r)?s=null:i!==null&&ug(t,i)&&(n.flags|=32),lC(o,n),wo(o,n,s,e),n.child;case 6:return o===null&&hg(n),null;case 13:return cC(o,n,e);case 4:return jm(n,n.stateNode.containerInfo),t=n.pendingProps,o===null?n.child=cu(n,null,t,e):wo(o,n,t,e),n.child;case 11:return t=n.type,r=n.pendingProps,r=n.elementType===t?r:ji(t,r),Ow(o,n,t,r,e);case 7:return wo(o,n,n.pendingProps,e),n.child;case 8:return wo(o,n,n.pendingProps.children,e),n.child;case 12:return wo(o,n,n.pendingProps.children,e),n.child;case 10:e:{if(t=n.type._context,r=n.pendingProps,i=n.memoizedProps,s=r.value,kn(Pd,t._currentValue),t._currentValue=s,i!==null)if(Vi(i.value,s)){if(i.children===r.children&&!Uo.current){n=Ca(o,n,e);break e}}else for(i=n.child,i!==null&&(i.return=n);i!==null;){var u=i.dependencies;if(u!==null){s=i.child;for(var c=u.firstContext;c!==null;){if(c.context===t){if(i.tag===1){c=ya(-1,e&-e),c.tag=2;var f=i.updateQueue;if(f!==null){f=f.shared;var h=f.pending;h===null?c.next=c:(c.next=h.next,h.next=c),f.pending=c}}i.lanes|=e,c=i.alternate,c!==null&&(c.lanes|=e),vg(i.return,e,n),u.lanes|=e;break}c=c.next}}else if(i.tag===10)s=i.type===n.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(ht(341));s.lanes|=e,u=s.alternate,u!==null&&(u.lanes|=e),vg(s,e,n),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===n){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}wo(o,n,r.children,e),n=n.child}return n;case 9:return r=n.type,t=n.pendingProps.children,ru(n,e),r=wi(r),t=t(r),n.flags|=1,wo(o,n,t,e),n.child;case 14:return t=n.type,r=ji(t,n.pendingProps),r=ji(t.type,r),Tw(o,n,t,r,e);case 15:return aC(o,n,n.type,n.pendingProps,e);case 17:return t=n.type,r=n.pendingProps,r=n.elementType===t?r:ji(t,r),ld(o,n),n.tag=1,Bo(t)?(o=!0,Od(n)):o=!1,ru(n,e),rC(n,t,r),mg(n,t,r,e),_g(null,n,t,!0,o,e);case 19:return fC(o,n,e);case 22:return sC(o,n,e)}throw Error(ht(156,n.tag))};function EC(o,n){return ex(o,n)}function nP(o,n,e,t){this.tag=o,this.key=e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=t,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gi(o,n,e,t){return new nP(o,n,e,t)}function Xm(o){return o=o.prototype,!(!o||!o.isReactComponent)}function rP(o){if(typeof o=="function")return Xm(o)?1:0;if(o!=null){if(o=o.$$typeof,o===hm)return 11;if(o===vm)return 14}return 2}function ls(o,n){var e=o.alternate;return e===null?(e=gi(o.tag,n,o.key,o.mode),e.elementType=o.elementType,e.type=o.type,e.stateNode=o.stateNode,e.alternate=o,o.alternate=e):(e.pendingProps=n,e.type=o.type,e.flags=0,e.subtreeFlags=0,e.deletions=null),e.flags=o.flags&14680064,e.childLanes=o.childLanes,e.lanes=o.lanes,e.child=o.child,e.memoizedProps=o.memoizedProps,e.memoizedState=o.memoizedState,e.updateQueue=o.updateQueue,n=o.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},e.sibling=o.sibling,e.index=o.index,e.ref=o.ref,e}function fd(o,n,e,t,r,i){var s=2;if(t=o,typeof o=="function")Xm(o)&&(s=1);else if(typeof o=="string")s=5;else e:switch(o){case jl:return Ks(e.children,r,i,n);case pm:s=8,r|=8;break;case Hv:return o=gi(12,e,n,r|2),o.elementType=Hv,o.lanes=i,o;case Uv:return o=gi(13,e,n,r),o.elementType=Uv,o.lanes=i,o;case Bv:return o=gi(19,e,n,r),o.elementType=Bv,o.lanes=i,o;case Rb:return Jp(e,r,i,n);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case Ib:s=10;break e;case Nb:s=9;break e;case hm:s=11;break e;case vm:s=14;break e;case Ba:s=16,t=null;break e}throw Error(ht(130,o==null?o:typeof o,""))}return n=gi(s,e,n,r),n.elementType=o,n.type=t,n.lanes=i,n}function Ks(o,n,e,t){return o=gi(7,o,t,n),o.lanes=e,o}function Jp(o,n,e,t){return o=gi(22,o,t,n),o.elementType=Rb,o.lanes=e,o.stateNode={isHidden:!1},o}function iv(o,n,e){return o=gi(6,o,null,n),o.lanes=e,o}function av(o,n,e){return n=gi(4,o.children!==null?o.children:[],o.key,n),n.lanes=e,n.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},n}function oP(o,n,e,t,r){this.tag=n,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zh(0),this.expirationTimes=zh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zh(0),this.identifierPrefix=t,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function qm(o,n,e,t,r,i,s,u,c){return o=new oP(o,n,e,u,c),n===1?(n=1,i===!0&&(n|=8)):n=0,i=gi(3,null,null,n),o.current=i,i.stateNode=o,i.memoizedState={element:t,isDehydrated:e,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lm(i),o}function iP(o,n,e){var t=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ll,key:t==null?null:""+t,children:o,containerInfo:n,implementation:e}}function PC(o){if(!o)return cs;o=o._reactInternals;e:{if(rl(o)!==o||o.tag!==1)throw Error(ht(170));var n=o;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(Bo(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(ht(171))}if(o.tag===1){var e=o.type;if(Bo(e))return Px(o,e,n)}return n}function kC(o,n,e,t,r,i,s,u,c){return o=qm(e,t,!0,o,r,i,s,u,c),o.context=PC(null),e=o.current,t=xo(),r=ss(e),i=ya(t,r),i.callback=n??null,is(e,i,r),o.current.lanes=r,ef(o,r,t),Wo(o,t),o}function Zp(o,n,e,t){var r=n.current,i=xo(),s=ss(r);return e=PC(e),n.context===null?n.context=e:n.pendingContext=e,n=ya(i,s),n.payload={element:o},t=t===void 0?null:t,t!==null&&(n.callback=t),o=is(r,n,s),o!==null&&(Fi(o,r,s,i),id(o,r,s)),s}function Fd(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function Fw(o,n){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var e=o.retryLane;o.retryLane=e!==0&&e<n?e:n}}function Jm(o,n){Fw(o,n),(o=o.alternate)&&Fw(o,n)}function aP(){return null}var AC=typeof reportError=="function"?reportError:function(o){console.error(o)};function Zm(o){this._internalRoot=o}Qp.prototype.render=Zm.prototype.render=function(o){var n=this._internalRoot;if(n===null)throw Error(ht(409));Zp(o,n,null,null)};Qp.prototype.unmount=Zm.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var n=o.containerInfo;Zs(function(){Zp(null,o,null,null)}),n[ba]=null}};function Qp(o){this._internalRoot=o}Qp.prototype.unstable_scheduleHydration=function(o){if(o){var n=sx();o={blockedOn:null,target:o,priority:n};for(var e=0;e<Xa.length&&n!==0&&n<Xa[e].priority;e++);Xa.splice(e,0,o),e===0&&ux(o)}};function Qm(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function eh(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function Vw(){}function sP(o,n,e,t,r){if(r){if(typeof t=="function"){var i=t;t=function(){var f=Fd(s);i.call(f)}}var s=kC(n,t,o,0,null,!1,!1,"",Vw);return o._reactRootContainer=s,o[ba]=s.current,Vc(o.nodeType===8?o.parentNode:o),Zs(),s}for(;r=o.lastChild;)o.removeChild(r);if(typeof t=="function"){var u=t;t=function(){var f=Fd(c);u.call(f)}}var c=qm(o,0,!1,null,null,!1,!1,"",Vw);return o._reactRootContainer=c,o[ba]=c.current,Vc(o.nodeType===8?o.parentNode:o),Zs(function(){Zp(n,c,e,t)}),c}function th(o,n,e,t,r){var i=e._reactRootContainer;if(i){var s=i;if(typeof r=="function"){var u=r;r=function(){var c=Fd(s);u.call(c)}}Zp(n,s,o,r)}else s=sP(e,n,o,r,t);return Fd(s)}ix=function(o){switch(o.tag){case 3:var n=o.stateNode;if(n.current.memoizedState.isDehydrated){var e=rc(n.pendingLanes);e!==0&&(ym(n,e|1),Wo(n,ir()),!(cn&6)&&(pu=ir()+500,hs()))}break;case 13:Zs(function(){var t=xa(o,1);if(t!==null){var r=xo();Fi(t,o,1,r)}}),Jm(o,1)}};wm=function(o){if(o.tag===13){var n=xa(o,134217728);if(n!==null){var e=xo();Fi(n,o,134217728,e)}Jm(o,134217728)}};ax=function(o){if(o.tag===13){var n=ss(o),e=xa(o,n);if(e!==null){var t=xo();Fi(e,o,n,t)}Jm(o,n)}};sx=function(){return _n};lx=function(o,n){var e=_n;try{return _n=o,n()}finally{_n=e}};Qv=function(o,n,e){switch(n){case"input":if(Kv(o,e),n=e.name,e.type==="radio"&&n!=null){for(e=o;e.parentNode;)e=e.parentNode;for(e=e.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<e.length;n++){var t=e[n];if(t!==o&&t.form===o.form){var r=$p(t);if(!r)throw Error(ht(90));Vb(t),Kv(t,r)}}}break;case"textarea":Hb(o,e);break;case"select":n=e.value,n!=null&&Ql(o,!!e.multiple,n,!1)}};Yb=Km;Xb=Zs;var lP={usingClientEntryPoint:!1,Events:[nf,Fl,$p,Kb,Gb,Km]},qu={findFiberByHostInstance:zs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},uP={bundleType:qu.bundleType,version:qu.version,rendererPackageName:qu.rendererPackageName,rendererConfig:qu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Oa.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=Zb(o),o===null?null:o.stateNode},findFiberByHostInstance:qu.findFiberByHostInstance||aP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wf.isDisabled&&Wf.supportsFiber)try{Hp=Wf.inject(uP),oa=Wf}catch{}}ai.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lP;ai.createPortal=function(o,n){var e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qm(n))throw Error(ht(200));return iP(o,n,null,e)};ai.createRoot=function(o,n){if(!Qm(o))throw Error(ht(299));var e=!1,t="",r=AC;return n!=null&&(n.unstable_strictMode===!0&&(e=!0),n.identifierPrefix!==void 0&&(t=n.identifierPrefix),n.onRecoverableError!==void 0&&(r=n.onRecoverableError)),n=qm(o,1,!1,null,null,e,!1,t,r),o[ba]=n.current,Vc(o.nodeType===8?o.parentNode:o),new Zm(n)};ai.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var n=o._reactInternals;if(n===void 0)throw typeof o.render=="function"?Error(ht(188)):(o=Object.keys(o).join(","),Error(ht(268,o)));return o=Zb(n),o=o===null?null:o.stateNode,o};ai.flushSync=function(o){return Zs(o)};ai.hydrate=function(o,n,e){if(!eh(n))throw Error(ht(200));return th(null,o,n,!0,e)};ai.hydrateRoot=function(o,n,e){if(!Qm(o))throw Error(ht(405));var t=e!=null&&e.hydratedSources||null,r=!1,i="",s=AC;if(e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),n=kC(n,null,o,1,e??null,r,!1,i,s),o[ba]=n.current,Vc(o),t)for(o=0;o<t.length;o++)e=t[o],r=e._getVersion,r=r(e._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[e,r]:n.mutableSourceEagerHydrationData.push(e,r);return new Qp(n)};ai.render=function(o,n,e){if(!eh(n))throw Error(ht(200));return th(null,o,n,!1,e)};ai.unmountComponentAtNode=function(o){if(!eh(o))throw Error(ht(40));return o._reactRootContainer?(Zs(function(){th(null,null,o,!1,function(){o._reactRootContainer=null,o[ba]=null})}),!0):!1};ai.unstable_batchedUpdates=Km;ai.unstable_renderSubtreeIntoContainer=function(o,n,e,t){if(!eh(e))throw Error(ht(200));if(o==null||o._reactInternals===void 0)throw Error(ht(38));return th(o,n,e,!1,t)};ai.version="18.3.1-next-f1338f8080-20240426";function MC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(MC)}catch(o){console.error(o)}}MC(),Mb.exports=ai;var cP=Mb.exports,zw=cP;Vv.createRoot=zw.createRoot,Vv.hydrateRoot=zw.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yc(){return Yc=Object.assign?Object.assign.bind():function(o){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(o[t]=e[t])}return o},Yc.apply(this,arguments)}var Qa;(function(o){o.Pop="POP",o.Push="PUSH",o.Replace="REPLACE"})(Qa||(Qa={}));const Hw="popstate";function fP(o){o===void 0&&(o={});function n(t,r){let{pathname:i,search:s,hash:u}=t.location;return Dg("",{pathname:i,search:s,hash:u},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function e(t,r){return typeof r=="string"?r:LC(r)}return pP(n,e,null,o)}function Sr(o,n){if(o===!1||o===null||typeof o>"u")throw new Error(n)}function DC(o,n){if(!o){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function dP(){return Math.random().toString(36).substr(2,8)}function Uw(o,n){return{usr:o.state,key:o.key,idx:n}}function Dg(o,n,e,t){return e===void 0&&(e=null),Yc({pathname:typeof o=="string"?o:o.pathname,search:"",hash:""},typeof n=="string"?_u(n):n,{state:e,key:n&&n.key||t||dP()})}function LC(o){let{pathname:n="/",search:e="",hash:t=""}=o;return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function _u(o){let n={};if(o){let e=o.indexOf("#");e>=0&&(n.hash=o.substr(e),o=o.substr(0,e));let t=o.indexOf("?");t>=0&&(n.search=o.substr(t),o=o.substr(0,t)),o&&(n.pathname=o)}return n}function pP(o,n,e,t){t===void 0&&(t={});let{window:r=document.defaultView,v5Compat:i=!1}=t,s=r.history,u=Qa.Pop,c=null,f=h();f==null&&(f=0,s.replaceState(Yc({},s.state,{idx:f}),""));function h(){return(s.state||{idx:null}).idx}function v(){u=Qa.Pop;let k=h(),P=k==null?null:k-f;f=k,c&&c({action:u,location:T.location,delta:P})}function m(k,P){u=Qa.Push;let L=Dg(T.location,k,P);e&&e(L,k),f=h()+1;let D=Uw(L,f),V=T.createHref(L);try{s.pushState(D,"",V)}catch(re){if(re instanceof DOMException&&re.name==="DataCloneError")throw re;r.location.assign(V)}i&&c&&c({action:u,location:T.location,delta:1})}function _(k,P){u=Qa.Replace;let L=Dg(T.location,k,P);e&&e(L,k),f=h();let D=Uw(L,f),V=T.createHref(L);s.replaceState(D,"",V),i&&c&&c({action:u,location:T.location,delta:0})}function C(k){let P=r.location.origin!=="null"?r.location.origin:r.location.href,L=typeof k=="string"?k:LC(k);return L=L.replace(/ $/,"%20"),Sr(P,"No window.location.(origin|href) available to create URL for href: "+L),new URL(L,P)}let T={get action(){return u},get location(){return o(r,s)},listen(k){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(Hw,v),c=k,()=>{r.removeEventListener(Hw,v),c=null}},createHref(k){return n(r,k)},createURL:C,encodeLocation(k){let P=C(k);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:m,replace:_,go(k){return s.go(k)}};return T}var Bw;(function(o){o.data="data",o.deferred="deferred",o.redirect="redirect",o.error="error"})(Bw||(Bw={}));function hP(o,n,e){return e===void 0&&(e="/"),vP(o,n,e,!1)}function vP(o,n,e,t){let r=typeof n=="string"?_u(n):n,i=NC(r.pathname||"/",e);if(i==null)return null;let s=jC(o);gP(s);let u=null;for(let c=0;u==null&&c<s.length;++c){let f=EP(i);u=OP(s[c],f,t)}return u}function jC(o,n,e,t){n===void 0&&(n=[]),e===void 0&&(e=[]),t===void 0&&(t="");let r=(i,s,u)=>{let c={relativePath:u===void 0?i.path||"":u,caseSensitive:i.caseSensitive===!0,childrenIndex:s,route:i};c.relativePath.startsWith("/")&&(Sr(c.relativePath.startsWith(t),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+t+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(t.length));let f=Gs([t,c.relativePath]),h=e.concat(c);i.children&&i.children.length>0&&(Sr(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),jC(i.children,n,h,f)),!(i.path==null&&!i.index)&&n.push({path:f,score:CP(f,i.index),routesMeta:h})};return o.forEach((i,s)=>{var u;if(i.path===""||!((u=i.path)!=null&&u.includes("?")))r(i,s);else for(let c of IC(i.path))r(i,s,c)}),n}function IC(o){let n=o.split("/");if(n.length===0)return[];let[e,...t]=n,r=e.endsWith("?"),i=e.replace(/\?$/,"");if(t.length===0)return r?[i,""]:[i];let s=IC(t.join("/")),u=[];return u.push(...s.map(c=>c===""?i:[i,c].join("/"))),r&&u.push(...s),u.map(c=>o.startsWith("/")&&c===""?"/":c)}function gP(o){o.sort((n,e)=>n.score!==e.score?e.score-n.score:SP(n.routesMeta.map(t=>t.childrenIndex),e.routesMeta.map(t=>t.childrenIndex)))}const mP=/^:[\w-]+$/,yP=3,wP=2,_P=1,bP=10,xP=-2,Ww=o=>o==="*";function CP(o,n){let e=o.split("/"),t=e.length;return e.some(Ww)&&(t+=xP),n&&(t+=wP),e.filter(r=>!Ww(r)).reduce((r,i)=>r+(mP.test(i)?yP:i===""?_P:bP),t)}function SP(o,n){return o.length===n.length&&o.slice(0,-1).every((t,r)=>t===n[r])?o[o.length-1]-n[n.length-1]:0}function OP(o,n,e){e===void 0&&(e=!1);let{routesMeta:t}=o,r={},i="/",s=[];for(let u=0;u<t.length;++u){let c=t[u],f=u===t.length-1,h=i==="/"?n:n.slice(i.length)||"/",v=$w({path:c.relativePath,caseSensitive:c.caseSensitive,end:f},h),m=c.route;if(!v&&f&&e&&!t[t.length-1].route.index&&(v=$w({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!v)return null;Object.assign(r,v.params),s.push({params:r,pathname:Gs([i,v.pathname]),pathnameBase:LP(Gs([i,v.pathnameBase])),route:m}),v.pathnameBase!=="/"&&(i=Gs([i,v.pathnameBase]))}return s}function $w(o,n){typeof o=="string"&&(o={path:o,caseSensitive:!1,end:!0});let[e,t]=TP(o.path,o.caseSensitive,o.end),r=n.match(e);if(!r)return null;let i=r[0],s=i.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:t.reduce((f,h,v)=>{let{paramName:m,isOptional:_}=h;if(m==="*"){let T=u[v]||"";s=i.slice(0,i.length-T.length).replace(/(.)\/+$/,"$1")}const C=u[v];return _&&!C?f[m]=void 0:f[m]=(C||"").replace(/%2F/g,"/"),f},{}),pathname:i,pathnameBase:s,pattern:o}}function TP(o,n,e){n===void 0&&(n=!1),e===void 0&&(e=!0),DC(o==="*"||!o.endsWith("*")||o.endsWith("/*"),'Route path "'+o+'" will be treated as if it were '+('"'+o.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+o.replace(/\*$/,"/*")+'".'));let t=[],r="^"+o.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,u,c)=>(t.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return o.endsWith("*")?(t.push({paramName:"*"}),r+=o==="*"||o==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?r+="\\/*$":o!==""&&o!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,n?void 0:"i"),t]}function EP(o){try{return o.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return DC(!1,'The URL path "'+o+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+n+").")),o}}function NC(o,n){if(n==="/")return o;if(!o.toLowerCase().startsWith(n.toLowerCase()))return null;let e=n.endsWith("/")?n.length-1:n.length,t=o.charAt(e);return t&&t!=="/"?null:o.slice(e)||"/"}function PP(o,n){n===void 0&&(n="/");let{pathname:e,search:t="",hash:r=""}=typeof o=="string"?_u(o):o;return{pathname:e?e.startsWith("/")?e:kP(e,n):n,search:jP(t),hash:IP(r)}}function kP(o,n){let e=n.replace(/\/+$/,"").split("/");return o.split("/").forEach(r=>{r===".."?e.length>1&&e.pop():r!=="."&&e.push(r)}),e.length>1?e.join("/"):"/"}function sv(o,n,e,t){return"Cannot include a '"+o+"' character in a manually specified "+("`to."+n+"` field ["+JSON.stringify(t)+"].  Please separate it out to the ")+("`to."+e+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function AP(o){return o.filter((n,e)=>e===0||n.route.path&&n.route.path.length>0)}function MP(o,n){let e=AP(o);return n?e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase):e.map(t=>t.pathnameBase)}function DP(o,n,e,t){t===void 0&&(t=!1);let r;typeof o=="string"?r=_u(o):(r=Yc({},o),Sr(!r.pathname||!r.pathname.includes("?"),sv("?","pathname","search",r)),Sr(!r.pathname||!r.pathname.includes("#"),sv("#","pathname","hash",r)),Sr(!r.search||!r.search.includes("#"),sv("#","search","hash",r)));let i=o===""||r.pathname==="",s=i?"/":r.pathname,u;if(s==null)u=e;else{let v=n.length-1;if(!t&&s.startsWith("..")){let m=s.split("/");for(;m[0]==="..";)m.shift(),v-=1;r.pathname=m.join("/")}u=v>=0?n[v]:"/"}let c=PP(r,u),f=s&&s!=="/"&&s.endsWith("/"),h=(i||s===".")&&e.endsWith("/");return!c.pathname.endsWith("/")&&(f||h)&&(c.pathname+="/"),c}const Gs=o=>o.join("/").replace(/\/\/+/g,"/"),LP=o=>o.replace(/\/+$/,"").replace(/^\/*/,"/"),jP=o=>!o||o==="?"?"":o.startsWith("?")?o:"?"+o,IP=o=>!o||o==="#"?"":o.startsWith("#")?o:"#"+o;function NP(o){return o!=null&&typeof o.status=="number"&&typeof o.statusText=="string"&&typeof o.internal=="boolean"&&"data"in o}const RC=["post","put","patch","delete"];new Set(RC);const RP=["get",...RC];new Set(RP);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xc(){return Xc=Object.assign?Object.assign.bind():function(o){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(o[t]=e[t])}return o},Xc.apply(this,arguments)}const ey=We.createContext(null),FP=We.createContext(null),nh=We.createContext(null),rh=We.createContext(null),bu=We.createContext({outlet:null,matches:[],isDataRoute:!1}),FC=We.createContext(null);function oh(){return We.useContext(rh)!=null}function VC(){return oh()||Sr(!1),We.useContext(rh).location}function zC(o){We.useContext(nh).static||We.useLayoutEffect(o)}function ty(){let{isDataRoute:o}=We.useContext(bu);return o?JP():VP()}function VP(){oh()||Sr(!1);let o=We.useContext(ey),{basename:n,future:e,navigator:t}=We.useContext(nh),{matches:r}=We.useContext(bu),{pathname:i}=VC(),s=JSON.stringify(MP(r,e.v7_relativeSplatPath)),u=We.useRef(!1);return zC(()=>{u.current=!0}),We.useCallback(function(f,h){if(h===void 0&&(h={}),!u.current)return;if(typeof f=="number"){t.go(f);return}let v=DP(f,JSON.parse(s),i,h.relative==="path");o==null&&n!=="/"&&(v.pathname=v.pathname==="/"?n:Gs([n,v.pathname])),(h.replace?t.replace:t.push)(v,h.state,h)},[n,t,s,i,o])}function zP(o,n){return HP(o,n)}function HP(o,n,e,t){oh()||Sr(!1);let{navigator:r}=We.useContext(nh),{matches:i}=We.useContext(bu),s=i[i.length-1],u=s?s.params:{};s&&s.pathname;let c=s?s.pathnameBase:"/";s&&s.route;let f=VC(),h;if(n){var v;let k=typeof n=="string"?_u(n):n;c==="/"||(v=k.pathname)!=null&&v.startsWith(c)||Sr(!1),h=k}else h=f;let m=h.pathname||"/",_=m;if(c!=="/"){let k=c.replace(/^\//,"").split("/");_="/"+m.replace(/^\//,"").split("/").slice(k.length).join("/")}let C=hP(o,{pathname:_}),T=KP(C&&C.map(k=>Object.assign({},k,{params:Object.assign({},u,k.params),pathname:Gs([c,r.encodeLocation?r.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?c:Gs([c,r.encodeLocation?r.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),i,e,t);return n&&T?We.createElement(rh.Provider,{value:{location:Xc({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Qa.Pop}},T):T}function UP(){let o=qP(),n=NP(o)?o.status+" "+o.statusText:o instanceof Error?o.message:JSON.stringify(o),e=o instanceof Error?o.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return We.createElement(We.Fragment,null,We.createElement("h2",null,"Unexpected Application Error!"),We.createElement("h3",{style:{fontStyle:"italic"}},n),e?We.createElement("pre",{style:r},e):null,i)}const BP=We.createElement(UP,null);class WP extends We.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?We.createElement(bu.Provider,{value:this.props.routeContext},We.createElement(FC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function $P(o){let{routeContext:n,match:e,children:t}=o,r=We.useContext(ey);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),We.createElement(bu.Provider,{value:n},t)}function KP(o,n,e,t){var r;if(n===void 0&&(n=[]),e===void 0&&(e=null),t===void 0&&(t=null),o==null){var i;if(!e)return null;if(e.errors)o=e.matches;else if((i=t)!=null&&i.v7_partialHydration&&n.length===0&&!e.initialized&&e.matches.length>0)o=e.matches;else return null}let s=o,u=(r=e)==null?void 0:r.errors;if(u!=null){let h=s.findIndex(v=>v.route.id&&(u==null?void 0:u[v.route.id])!==void 0);h>=0||Sr(!1),s=s.slice(0,Math.min(s.length,h+1))}let c=!1,f=-1;if(e&&t&&t.v7_partialHydration)for(let h=0;h<s.length;h++){let v=s[h];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(f=h),v.route.id){let{loaderData:m,errors:_}=e,C=v.route.loader&&m[v.route.id]===void 0&&(!_||_[v.route.id]===void 0);if(v.route.lazy||C){c=!0,f>=0?s=s.slice(0,f+1):s=[s[0]];break}}}return s.reduceRight((h,v,m)=>{let _,C=!1,T=null,k=null;e&&(_=u&&v.route.id?u[v.route.id]:void 0,T=v.route.errorElement||BP,c&&(f<0&&m===0?(ZP("route-fallback",!1),C=!0,k=null):f===m&&(C=!0,k=v.route.hydrateFallbackElement||null)));let P=n.concat(s.slice(0,m+1)),L=()=>{let D;return _?D=T:C?D=k:v.route.Component?D=We.createElement(v.route.Component,null):v.route.element?D=v.route.element:D=h,We.createElement($P,{match:v,routeContext:{outlet:h,matches:P,isDataRoute:e!=null},children:D})};return e&&(v.route.ErrorBoundary||v.route.errorElement||m===0)?We.createElement(WP,{location:e.location,revalidation:e.revalidation,component:T,error:_,children:L(),routeContext:{outlet:null,matches:P,isDataRoute:!0}}):L()},null)}var HC=function(o){return o.UseBlocker="useBlocker",o.UseRevalidator="useRevalidator",o.UseNavigateStable="useNavigate",o}(HC||{}),Vd=function(o){return o.UseBlocker="useBlocker",o.UseLoaderData="useLoaderData",o.UseActionData="useActionData",o.UseRouteError="useRouteError",o.UseNavigation="useNavigation",o.UseRouteLoaderData="useRouteLoaderData",o.UseMatches="useMatches",o.UseRevalidator="useRevalidator",o.UseNavigateStable="useNavigate",o.UseRouteId="useRouteId",o}(Vd||{});function GP(o){let n=We.useContext(ey);return n||Sr(!1),n}function YP(o){let n=We.useContext(FP);return n||Sr(!1),n}function XP(o){let n=We.useContext(bu);return n||Sr(!1),n}function UC(o){let n=XP(),e=n.matches[n.matches.length-1];return e.route.id||Sr(!1),e.route.id}function qP(){var o;let n=We.useContext(FC),e=YP(Vd.UseRouteError),t=UC(Vd.UseRouteError);return n!==void 0?n:(o=e.errors)==null?void 0:o[t]}function JP(){let{router:o}=GP(HC.UseNavigateStable),n=UC(Vd.UseNavigateStable),e=We.useRef(!1);return zC(()=>{e.current=!0}),We.useCallback(function(r,i){i===void 0&&(i={}),e.current&&(typeof r=="number"?o.navigate(r):o.navigate(r,Xc({fromRouteId:n},i)))},[o,n])}const Kw={};function ZP(o,n,e){!n&&!Kw[o]&&(Kw[o]=!0)}function QP(o,n){o==null||o.v7_startTransition,(o==null?void 0:o.v7_relativeSplatPath)===void 0&&(!n||n.v7_relativeSplatPath),n&&(n.v7_fetcherPersist,n.v7_normalizeFormMethod,n.v7_partialHydration,n.v7_skipActionErrorRevalidation)}function ic(o){Sr(!1)}function ek(o){let{basename:n="/",children:e=null,location:t,navigationType:r=Qa.Pop,navigator:i,static:s=!1,future:u}=o;oh()&&Sr(!1);let c=n.replace(/^\/*/,"/"),f=We.useMemo(()=>({basename:c,navigator:i,static:s,future:Xc({v7_relativeSplatPath:!1},u)}),[c,u,i,s]);typeof t=="string"&&(t=_u(t));let{pathname:h="/",search:v="",hash:m="",state:_=null,key:C="default"}=t,T=We.useMemo(()=>{let k=NC(h,c);return k==null?null:{location:{pathname:k,search:v,hash:m,state:_,key:C},navigationType:r}},[c,h,v,m,_,C,r]);return T==null?null:We.createElement(nh.Provider,{value:f},We.createElement(rh.Provider,{children:e,value:T}))}function tk(o){let{children:n,location:e}=o;return zP(Lg(n),e)}new Promise(()=>{});function Lg(o,n){n===void 0&&(n=[]);let e=[];return We.Children.forEach(o,(t,r)=>{if(!We.isValidElement(t))return;let i=[...n,r];if(t.type===We.Fragment){e.push.apply(e,Lg(t.props.children,i));return}t.type!==ic&&Sr(!1),!t.props.index||!t.props.children||Sr(!1);let s={id:t.props.id||i.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:t.props.ErrorBoundary!=null||t.props.errorElement!=null,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(s.children=Lg(t.props.children,i)),e.push(s)}),e}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const nk="6";try{window.__reactRouterVersion=nk}catch{}const rk="startTransition",Gw=QO[rk];function ok(o){let{basename:n,children:e,future:t,window:r}=o,i=We.useRef();i.current==null&&(i.current=fP({window:r,v5Compat:!0}));let s=i.current,[u,c]=We.useState({action:s.action,location:s.location}),{v7_startTransition:f}=t||{},h=We.useCallback(v=>{f&&Gw?Gw(()=>c(v)):c(v)},[c,f]);return We.useLayoutEffect(()=>s.listen(h),[s,h]),We.useEffect(()=>QP(t),[t]),We.createElement(ek,{basename:n,children:e,location:u.location,navigationType:u.action,navigator:s,future:t})}var Yw;(function(o){o.UseScrollRestoration="useScrollRestoration",o.UseSubmit="useSubmit",o.UseSubmitFetcher="useSubmitFetcher",o.UseFetcher="useFetcher",o.useViewTransitionState="useViewTransitionState"})(Yw||(Yw={}));var Xw;(function(o){o.UseFetcher="useFetcher",o.UseFetchers="useFetchers",o.UseScrollRestoration="useScrollRestoration"})(Xw||(Xw={}));function ik(){const[o,n]=We.useState(""),[e,t]=We.useState(""),[r,i]=We.useState(""),[s,u]=We.useState(""),[c,f]=We.useState({loaded:0,total:0}),h=We.useRef(null),v=ty(),m=async _=>{_.preventDefault(),u("Connecting..."),f({loaded:0,total:0});const C=async()=>{try{const T=await fetch("/api/login-progress");if(T.ok){const k=await T.json();f({loaded:k.loaded_entries,total:k.total_entries}),k.complete&&h.current&&(clearInterval(h.current),h.current=null)}}catch{}};h.current=setInterval(C,500);try{const k=await(await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:o,password:e,event_id:r})})).json();k.success?v("/builder"):u(k.error||"Login failed")}catch{u("Network error")}finally{h.current&&(clearInterval(h.current),h.current=null)}};return Ie.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"100vh"},children:Ie.jsxs("form",{onSubmit:m,className:"rd-form",children:[Ie.jsx("h2",{className:"mb-4",children:"Race Display"}),Ie.jsx("div",{className:"rd-form-control",children:Ie.jsx("input",{className:"rd-input",placeholder:"User ID",value:o,onChange:_=>n(_.target.value),required:!0})}),Ie.jsx("div",{className:"rd-form-control",children:Ie.jsx("input",{className:"rd-input",placeholder:"Password",type:"password",value:e,onChange:_=>t(_.target.value),required:!0})}),Ie.jsx("div",{className:"rd-form-control",children:Ie.jsx("input",{className:"rd-input",placeholder:"Event ID",value:r,onChange:_=>i(_.target.value),required:!0})}),Ie.jsx("div",{className:"rd-button-group",children:Ie.jsx("button",{className:"rd-button",type:"submit",children:"Login"})}),s&&Ie.jsx("div",{className:"rd-alert",children:s}),c.total>0&&Ie.jsx("div",{className:"progress mt-2",style:{width:"100%"},children:Ie.jsx("div",{className:"progress-bar",role:"progressbar",style:{width:`${c.loaded/c.total*100}%`},"aria-valuenow":c.loaded,"aria-valuemin":"0","aria-valuemax":c.total,children:`${c.loaded}/${c.total}`})})]})})}var ak={982:(o,n,e)=>{var t,r,i;/*!
* Backbone.Undo.js v0.2
* 
* Copyright (c)2013 Oliver Sartun
* Released under the MIT License
*
* Documentation and full license available at
* https://github.com/osartun/Backbone.Undo.js
*/(function(s){r=[e(523),e(391)],t=s,i=typeof t=="function"?t.apply(n,r):t,i!==void 0&&(o.exports=i)})(function(s,u){var c=Array.prototype.slice;function f(ne,me,Y){return Y.length<=4?ne.call(me,Y[0],Y[1],Y[2],Y[3]):ne.apply(me,Y)}function h(ne,me){return c.call(ne,me)}function v(ne,me){return ne==null?!1:(s.isArray(me)||(me=h(arguments,1)),s.all(me,function(Y){return Y in ne}))}var m=function(){var ne=!1,me=-1;function Y(){me++,ne=!0,s.defer(function(){ne=!1})}return function(){return ne||Y(),me}}();function _(){this.registeredObjects=[],this.cidIndexes=[]}_.prototype={isRegistered:function(ne){return ne&&ne.cid?this.registeredObjects[ne.cid]:s.contains(this.registeredObjects,ne)},register:function(ne){return this.isRegistered(ne)?!1:(ne&&ne.cid?(this.registeredObjects[ne.cid]=ne,this.cidIndexes.push(ne.cid)):this.registeredObjects.push(ne),!0)},unregister:function(ne){if(this.isRegistered(ne)){if(ne&&ne.cid)delete this.registeredObjects[ne.cid],this.cidIndexes.splice(s.indexOf(this.cidIndexes,ne.cid),1);else{var me=s.indexOf(this.registeredObjects,ne);this.registeredObjects.splice(me,1)}return!0}return!1},get:function(){return s.map(this.cidIndexes,function(ne){return this.registeredObjects[ne]},this).concat(this.registeredObjects)}};function C(ne,me,Y,W){for(var te=0,q=me.length,ge;te<q;te++)if(ge=me[te],!!ge){if(ne==="on"){if(!W.objectRegistry.register(ge))continue}else if(!W.objectRegistry.unregister(ge))continue;s.isFunction(ge[ne])&&ge[ne]("all",Y,W)}}function T(ne,me){var Y=me.type,W=me.undoTypes,te=!W[Y]||W[Y][ne];s.isFunction(te)&&te(me.object,me.before,me.after,me.options)}function k(ne,me,Y,W,te){if(!(Y.isCurrentlyUndoRedoing||ne==="undo"&&Y.pointer===-1||ne==="redo"&&Y.pointer===Y.length-1)){Y.isCurrentlyUndoRedoing=!0;var q,ge,R=ne==="undo";for(te?ge=R&&Y.pointer===Y.length-1||!R&&Y.pointer===-1?s.clone(Y.models):c.apply(Y.models,R?[0,Y.pointer]:[Y.pointer,Y.length-1]):(q=Y.at(R?Y.pointer:Y.pointer+1),ge=W?Y.where({magicFusionIndex:q.get("magicFusionIndex")}):[q]),Y.pointer+=(R?-1:1)*ge.length;q=R?ge.pop():ge.shift();)q[ne]();Y.isCurrentlyUndoRedoing=!1,me.trigger(ne,me)}}function P(ne,me){var Y=ne.condition,W=typeof Y;return W==="function"?!!f(Y,ne,me):W==="boolean"?Y:!0}function L(ne,me,Y,W){if(ne.track&&!ne.isCurrentlyUndoRedoing&&me in W&&P(W[me],Y)){var te=f(W[me].on,W[me],Y),q;if(v(te,"object","before","after")){if(te.type=me,te.magicFusionIndex=m(),te.undoTypes=W,ne.pointer<ne.length-1)for(var q=ne.length-ne.pointer-1;q--;)ne.pop();ne.pointer=ne.length,ne.add(te),ne.length>ne.maximumStackLength&&(ne.shift(),ne.pointer--)}}}var D={add:{undo:function(ne,me,Y,W){ne.remove(Y,W)},redo:function(ne,me,Y,W){W.index&&(W.at=W.index),ne.add(Y,W)},on:function(ne,me,Y){return{object:me,before:void 0,after:ne,options:s.clone(Y)}}},remove:{undo:function(ne,me,Y,W){"index"in W&&(W.at=W.index),ne.add(me,W)},redo:function(ne,me,Y,W){ne.remove(me,W)},on:function(ne,me,Y){return{object:me,before:ne,after:void 0,options:s.clone(Y)}}},change:{undo:function(ne,me,Y,W){s.isEmpty(me)?s.each(s.keys(Y),ne.unset,ne):(ne.set(me),W&&W.unsetData&&W.unsetData.before&&W.unsetData.before.length&&s.each(W.unsetData.before,ne.unset,ne))},redo:function(ne,me,Y,W){s.isEmpty(Y)?s.each(s.keys(me),ne.unset,ne):(ne.set(Y),W&&W.unsetData&&W.unsetData.after&&W.unsetData.after.length&&s.each(W.unsetData.after,ne.unset,ne))},on:function(ne,me){var Y=ne.changedAttributes(),W=s.keys(Y),te=s.pick(ne.previousAttributes(),W),q=s.keys(te),ge=(me||(me={})).unsetData={after:[],before:[]};return W.length!=q.length&&(W.length>q.length?s.each(W,function(R){R in te||ge.before.push(R)},this):s.each(q,function(R){R in Y||ge.after.push(R)})),{object:ne,before:te,after:Y,options:s.clone(me)}}},reset:{undo:function(ne,me,Y){ne.reset(me)},redo:function(ne,me,Y){ne.reset(Y)},on:function(ne,me){return{object:ne,before:me.previousModels,after:s.clone(ne.models)}}}};function V(){}V.prototype=D;function re(ne,me,Y,W){if(typeof me=="object")return s.each(me,function(te,q){ne===2?re(ne,te,Y,W):re(ne,q,te,Y)});switch(ne){case 0:v(Y,"undo","redo","on")&&s.all(s.pick(Y,"undo","redo","on"),s.isFunction)&&(W[me]=Y);break;case 1:W[me]&&s.isObject(Y)&&(W[me]=s.extend({},W[me],Y));break;case 2:delete W[me];break}return this}var _e=u.Model.extend({defaults:{type:null,object:null,before:null,after:null,magicFusionIndex:null},undo:function(ne){T("undo",this.attributes)},redo:function(ne){T("redo",this.attributes)}}),Q=u.Collection.extend({model:_e,pointer:-1,track:!1,isCurrentlyUndoRedoing:!1,maximumStackLength:1/0,setMaxLength:function(ne){this.maximumStackLength=ne}}),pe=u.Model.extend({defaults:{maximumStackLength:1/0,track:!1},initialize:function(ne){this.stack=new Q,this.objectRegistry=new _,this.undoTypes=new V,this.stack.setMaxLength(this.get("maximumStackLength")),this.on("change:maximumStackLength",function(me,Y){this.stack.setMaxLength(Y)},this),ne&&ne.track&&this.startTracking(),ne&&ne.register&&(s.isArray(ne.register)||s.isArguments(ne.register)?f(this.register,this,ne.register):this.register(ne.register))},startTracking:function(){this.set("track",!0),this.stack.track=!0},stopTracking:function(){this.set("track",!1),this.stack.track=!1},isTracking:function(){return this.get("track")},_addToStack:function(ne){L(this.stack,ne,h(arguments,1),this.undoTypes)},register:function(){C("on",arguments,this._addToStack,this)},unregister:function(){C("off",arguments,this._addToStack,this)},unregisterAll:function(){f(this.unregister,this,this.objectRegistry.get())},undo:function(ne){k("undo",this,this.stack,ne)},undoAll:function(){k("undo",this,this.stack,!1,!0)},redo:function(ne){k("redo",this,this.stack,ne)},redoAll:function(){k("redo",this,this.stack,!1,!0)},isAvailable:function(ne){var me=this.stack,Y=me.length;switch(ne){case"undo":return Y>0&&me.pointer>-1;case"redo":return Y>0&&me.pointer<Y-1;default:return!1}},merge:function(ne){for(var me=s.isArray(ne)?ne:h(arguments),Y;Y=me.pop();)Y instanceof pe&&Y.stack instanceof Q&&(Y.stack=this.stack)},addUndoType:function(ne,me){re(0,ne,me,this.undoTypes)},changeUndoType:function(ne,me){re(1,ne,me,this.undoTypes)},removeUndoType:function(ne){re(2,ne,void 0,this.undoTypes)},clear:function(){this.stack.reset(),this.stack.pointer=-1}});return s.extend(pe,{defaults:function(ne){s.extend(pe.prototype.defaults,ne)},addUndoType:function(ne,me){re(0,ne,me,D)},changeUndoType:function(ne,me){re(1,ne,me,D)},removeUndoType:function(ne){re(2,ne,void 0,D)}}),u.UndoManager=pe})},391:(o,n,e)=>{var t,r;(function(i){var s=typeof self=="object"&&self.self===self&&self||typeof e.g=="object"&&e.g.global===e.g&&e.g;t=[e(523),e(694),n],r=(function(u,c,f){s.Backbone=i(s,f,u,c)}).apply(n,t),r!==void 0&&(o.exports=r)})(function(i,s,u,c){var f=i.Backbone,h=Array.prototype.slice;s.VERSION="1.4.1",s.$=c,s.noConflict=function(){return i.Backbone=f,this},s.emulateHTTP=!1,s.emulateJSON=!1;var v=s.Events={},m=/\s+/,_,C=function(E,H,J,we,xe){var ee=0,se;if(J&&typeof J=="object")for(we!==void 0&&("context"in xe)&&xe.context===void 0&&(xe.context=we),se=u.keys(J);ee<se.length;ee++)H=C(E,H,se[ee],J[se[ee]],xe);else if(J&&m.test(J))for(se=J.split(m);ee<se.length;ee++)H=E(H,se[ee],we,xe);else H=E(H,J,we,xe);return H};v.on=function(E,H,J){if(this._events=C(T,this._events||{},E,H,{context:J,ctx:this,listening:_}),_){var we=this._listeners||(this._listeners={});we[_.id]=_,_.interop=!1}return this},v.listenTo=function(E,H,J){if(!E)return this;var we=E._listenId||(E._listenId=u.uniqueId("l")),xe=this._listeningTo||(this._listeningTo={}),ee=_=xe[we];ee||(this._listenId||(this._listenId=u.uniqueId("l")),ee=_=xe[we]=new re(this,E));var se=k(E,H,J,this);if(_=void 0,se)throw se;return ee.interop&&ee.on(H,J),this};var T=function(E,H,J,we){if(J){var xe=E[H]||(E[H]=[]),ee=we.context,se=we.ctx,ae=we.listening;ae&&ae.count++,xe.push({callback:J,context:ee,ctx:ee||se,listening:ae})}return E},k=function(E,H,J,we){try{E.on(H,J,we)}catch(xe){return xe}};v.off=function(E,H,J){return this._events?(this._events=C(P,this._events,E,H,{context:J,listeners:this._listeners}),this):this},v.stopListening=function(E,H,J){var we=this._listeningTo;if(!we)return this;for(var xe=E?[E._listenId]:u.keys(we),ee=0;ee<xe.length;ee++){var se=we[xe[ee]];if(!se)break;se.obj.off(H,J,this),se.interop&&se.off(H,J)}return u.isEmpty(we)&&(this._listeningTo=void 0),this};var P=function(E,H,J,we){if(E){var xe=we.context,ee=we.listeners,se=0,ae;if(!H&&!xe&&!J){for(ae=u.keys(ee);se<ae.length;se++)ee[ae[se]].cleanup();return}for(ae=H?[H]:u.keys(E);se<ae.length;se++){H=ae[se];var et=E[H];if(!et)break;for(var ct=[],ot=0;ot<et.length;ot++){var X=et[ot];if(J&&J!==X.callback&&J!==X.callback._callback||xe&&xe!==X.context)ct.push(X);else{var fe=X.listening;fe&&fe.off(H,J)}}ct.length?E[H]=ct:delete E[H]}return E}};v.once=function(E,H,J){var we=C(L,{},E,H,this.off.bind(this));return typeof E=="string"&&J==null&&(H=void 0),this.on(we,H,J)},v.listenToOnce=function(E,H,J){var we=C(L,{},H,J,this.stopListening.bind(this,E));return this.listenTo(E,we)};var L=function(E,H,J,we){if(J){var xe=E[H]=u.once(function(){we(H,xe),J.apply(this,arguments)});xe._callback=J}return E};v.trigger=function(E){if(!this._events)return this;for(var H=Math.max(0,arguments.length-1),J=Array(H),we=0;we<H;we++)J[we]=arguments[we+1];return C(D,this._events,E,void 0,J),this};var D=function(E,H,J,we){if(E){var xe=E[H],ee=E.all;xe&&ee&&(ee=ee.slice()),xe&&V(xe,we),ee&&V(ee,[H].concat(we))}return E},V=function(E,H){var J,we=-1,xe=E.length,ee=H[0],se=H[1],ae=H[2];switch(H.length){case 0:for(;++we<xe;)(J=E[we]).callback.call(J.ctx);return;case 1:for(;++we<xe;)(J=E[we]).callback.call(J.ctx,ee);return;case 2:for(;++we<xe;)(J=E[we]).callback.call(J.ctx,ee,se);return;case 3:for(;++we<xe;)(J=E[we]).callback.call(J.ctx,ee,se,ae);return;default:for(;++we<xe;)(J=E[we]).callback.apply(J.ctx,H);return}},re=function(E,H){this.id=E._listenId,this.listener=E,this.obj=H,this.interop=!0,this.count=0,this._events=void 0};re.prototype.on=v.on,re.prototype.off=function(E,H){var J;this.interop?(this._events=C(P,this._events,E,H,{context:void 0,listeners:void 0}),J=!this._events):(this.count--,J=this.count===0),J&&this.cleanup()},re.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},v.bind=v.on,v.unbind=v.off,u.extend(s,v);var _e=s.Model=function(E,H){var J=E||{};H||(H={}),this.preinitialize.apply(this,arguments),this.cid=u.uniqueId(this.cidPrefix),this.attributes={},H.collection&&(this.collection=H.collection),H.parse&&(J=this.parse(J,H)||{});var we=u.result(this,"defaults");J=u.defaults(u.extend({},we,J),we),this.set(J,H),this.changed={},this.initialize.apply(this,arguments)};u.extend(_e.prototype,v,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(E){return u.clone(this.attributes)},sync:function(){return s.sync.apply(this,arguments)},get:function(E){return this.attributes[E]},escape:function(E){return u.escape(this.get(E))},has:function(E){return this.get(E)!=null},matches:function(E){return!!u.iteratee(E,this)(this.attributes)},set:function(E,H,J){if(E==null)return this;var we;if(typeof E=="object"?(we=E,J=H):(we={})[E]=H,J||(J={}),!this._validate(we,J))return!1;var xe=J.unset,ee=J.silent,se=[],ae=this._changing;this._changing=!0,ae||(this._previousAttributes=u.clone(this.attributes),this.changed={});var et=this.attributes,ct=this.changed,ot=this._previousAttributes;for(var X in we)H=we[X],u.isEqual(et[X],H)||se.push(X),u.isEqual(ot[X],H)?delete ct[X]:ct[X]=H,xe?delete et[X]:et[X]=H;if(this.idAttribute in we){var fe=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,fe,J)}if(!ee){se.length&&(this._pending=J);for(var z=0;z<se.length;z++)this.trigger("change:"+se[z],this,et[se[z]],J)}if(ae)return this;if(!ee)for(;this._pending;)J=this._pending,this._pending=!1,this.trigger("change",this,J);return this._pending=!1,this._changing=!1,this},unset:function(E,H){return this.set(E,void 0,u.extend({},H,{unset:!0}))},clear:function(E){var H={};for(var J in this.attributes)H[J]=void 0;return this.set(H,u.extend({},E,{unset:!0}))},hasChanged:function(E){return E==null?!u.isEmpty(this.changed):u.has(this.changed,E)},changedAttributes:function(E){if(!E)return this.hasChanged()?u.clone(this.changed):!1;var H=this._changing?this._previousAttributes:this.attributes,J={},we;for(var xe in E){var ee=E[xe];u.isEqual(H[xe],ee)||(J[xe]=ee,we=!0)}return we?J:!1},previous:function(E){return E==null||!this._previousAttributes?null:this._previousAttributes[E]},previousAttributes:function(){return u.clone(this._previousAttributes)},fetch:function(E){E=u.extend({parse:!0},E);var H=this,J=E.success;return E.success=function(we){var xe=E.parse?H.parse(we,E):we;if(!H.set(xe,E))return!1;J&&J.call(E.context,H,we,E),H.trigger("sync",H,we,E)},Rt(this,E),this.sync("read",this,E)},save:function(E,H,J){var we;E==null||typeof E=="object"?(we=E,J=H):(we={})[E]=H,J=u.extend({validate:!0,parse:!0},J);var xe=J.wait;if(we&&!xe){if(!this.set(we,J))return!1}else if(!this._validate(we,J))return!1;var ee=this,se=J.success,ae=this.attributes;J.success=function(ot){ee.attributes=ae;var X=J.parse?ee.parse(ot,J):ot;if(xe&&(X=u.extend({},we,X)),X&&!ee.set(X,J))return!1;se&&se.call(J.context,ee,ot,J),ee.trigger("sync",ee,ot,J)},Rt(this,J),we&&xe&&(this.attributes=u.extend({},ae,we));var et=this.isNew()?"create":J.patch?"patch":"update";et==="patch"&&!J.attrs&&(J.attrs=we);var ct=this.sync(et,this,J);return this.attributes=ae,ct},destroy:function(E){E=E?u.clone(E):{};var H=this,J=E.success,we=E.wait,xe=function(){H.stopListening(),H.trigger("destroy",H,H.collection,E)};E.success=function(se){we&&xe(),J&&J.call(E.context,H,se,E),H.isNew()||H.trigger("sync",H,se,E)};var ee=!1;return this.isNew()?u.defer(E.success):(Rt(this,E),ee=this.sync("delete",this,E)),we||xe(),ee},url:function(){var E=u.result(this,"urlRoot")||u.result(this.collection,"url")||tn();if(this.isNew())return E;var H=this.get(this.idAttribute);return E.replace(/[^\/]$/,"$&/")+encodeURIComponent(H)},parse:function(E,H){return E},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(E){return this._validate({},u.extend({},E,{validate:!0}))},_validate:function(E,H){if(!H.validate||!this.validate)return!0;E=u.extend({},this.attributes,E);var J=this.validationError=this.validate(E,H)||null;return J?(this.trigger("invalid",this,J,u.extend(H,{validationError:J})),!1):!0}});var Q=s.Collection=function(E,H){H||(H={}),this.preinitialize.apply(this,arguments),H.model&&(this.model=H.model),H.comparator!==void 0&&(this.comparator=H.comparator),this._reset(),this.initialize.apply(this,arguments),E&&this.reset(E,u.extend({silent:!0},H))},pe={add:!0,remove:!0,merge:!0},ne={add:!0,remove:!1},me=function(E,H,J){J=Math.min(Math.max(J,0),E.length);var we=Array(E.length-J),xe=H.length,ee;for(ee=0;ee<we.length;ee++)we[ee]=E[ee+J];for(ee=0;ee<xe;ee++)E[ee+J]=H[ee];for(ee=0;ee<we.length;ee++)E[ee+xe+J]=we[ee]};u.extend(Q.prototype,v,{model:_e,preinitialize:function(){},initialize:function(){},toJSON:function(E){return this.map(function(H){return H.toJSON(E)})},sync:function(){return s.sync.apply(this,arguments)},add:function(E,H){return this.set(E,u.extend({merge:!1},H,ne))},remove:function(E,H){H=u.extend({},H);var J=!u.isArray(E);E=J?[E]:E.slice();var we=this._removeModels(E,H);return!H.silent&&we.length&&(H.changes={added:[],merged:[],removed:we},this.trigger("update",this,H)),J?we[0]:we},set:function(E,H){if(E!=null){H=u.extend({},pe,H),H.parse&&!this._isModel(E)&&(E=this.parse(E,H)||[]);var J=!u.isArray(E);E=J?[E]:E.slice();var we=H.at;we!=null&&(we=+we),we>this.length&&(we=this.length),we<0&&(we+=this.length+1);var xe=[],ee=[],se=[],ae=[],et={},ct=H.add,ot=H.merge,X=H.remove,fe=!1,z=this.comparator&&we==null&&H.sort!==!1,je=u.isString(this.comparator)?this.comparator:null,Se,Be;for(Be=0;Be<E.length;Be++){Se=E[Be];var qe=this.get(Se);if(qe){if(ot&&Se!==qe){var st=this._isModel(Se)?Se.attributes:Se;H.parse&&(st=qe.parse(st,H)),qe.set(st,H),se.push(qe),z&&!fe&&(fe=qe.hasChanged(je))}et[qe.cid]||(et[qe.cid]=!0,xe.push(qe)),E[Be]=qe}else ct&&(Se=E[Be]=this._prepareModel(Se,H),Se&&(ee.push(Se),this._addReference(Se,H),et[Se.cid]=!0,xe.push(Se)))}if(X){for(Be=0;Be<this.length;Be++)Se=this.models[Be],et[Se.cid]||ae.push(Se);ae.length&&this._removeModels(ae,H)}var ut=!1,Ot=!z&&ct&&X;if(xe.length&&Ot?(ut=this.length!==xe.length||u.some(this.models,function(Ht,Bt){return Ht!==xe[Bt]}),this.models.length=0,me(this.models,xe,0),this.length=this.models.length):ee.length&&(z&&(fe=!0),me(this.models,ee,we??this.length),this.length=this.models.length),fe&&this.sort({silent:!0}),!H.silent){for(Be=0;Be<ee.length;Be++)we!=null&&(H.index=we+Be),Se=ee[Be],Se.trigger("add",Se,this,H);(fe||ut)&&this.trigger("sort",this,H),(ee.length||ae.length||se.length)&&(H.changes={added:ee,removed:ae,merged:se},this.trigger("update",this,H))}return J?E[0]:E}},reset:function(E,H){H=H?u.clone(H):{};for(var J=0;J<this.models.length;J++)this._removeReference(this.models[J],H);return H.previousModels=this.models,this._reset(),E=this.add(E,u.extend({silent:!0},H)),H.silent||this.trigger("reset",this,H),E},push:function(E,H){return this.add(E,u.extend({at:this.length},H))},pop:function(E){var H=this.at(this.length-1);return this.remove(H,E)},unshift:function(E,H){return this.add(E,u.extend({at:0},H))},shift:function(E){var H=this.at(0);return this.remove(H,E)},slice:function(){return h.apply(this.models,arguments)},get:function(E){if(E!=null)return this._byId[E]||this._byId[this.modelId(this._isModel(E)?E.attributes:E,E.idAttribute)]||E.cid&&this._byId[E.cid]},has:function(E){return this.get(E)!=null},at:function(E){return E<0&&(E+=this.length),this.models[E]},where:function(E,H){return this[H?"find":"filter"](E)},findWhere:function(E){return this.where(E,!0)},sort:function(E){var H=this.comparator;if(!H)throw new Error("Cannot sort a set without a comparator");E||(E={});var J=H.length;return u.isFunction(H)&&(H=H.bind(this)),J===1||u.isString(H)?this.models=this.sortBy(H):this.models.sort(H),E.silent||this.trigger("sort",this,E),this},pluck:function(E){return this.map(E+"")},fetch:function(E){E=u.extend({parse:!0},E);var H=E.success,J=this;return E.success=function(we){var xe=E.reset?"reset":"set";J[xe](we,E),H&&H.call(E.context,J,we,E),J.trigger("sync",J,we,E)},Rt(this,E),this.sync("read",this,E)},create:function(E,H){H=H?u.clone(H):{};var J=H.wait;if(E=this._prepareModel(E,H),!E)return!1;J||this.add(E,H);var we=this,xe=H.success;return H.success=function(ee,se,ae){J&&we.add(ee,ae),xe&&xe.call(ae.context,ee,se,ae)},E.save(null,H),E},parse:function(E,H){return E},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(E,H){return E[H||this.model.prototype.idAttribute||"id"]},values:function(){return new W(this,te)},keys:function(){return new W(this,q)},entries:function(){return new W(this,ge)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(E,H){if(this._isModel(E))return E.collection||(E.collection=this),E;H=H?u.clone(H):{},H.collection=this;var J;return this.model.prototype?J=new this.model(E,H):J=this.model(E,H),J.validationError?(this.trigger("invalid",this,J.validationError,H),!1):J},_removeModels:function(E,H){for(var J=[],we=0;we<E.length;we++){var xe=this.get(E[we]);if(xe){var ee=this.indexOf(xe);this.models.splice(ee,1),this.length--,delete this._byId[xe.cid];var se=this.modelId(xe.attributes,xe.idAttribute);se!=null&&delete this._byId[se],H.silent||(H.index=ee,xe.trigger("remove",xe,this,H)),J.push(xe),this._removeReference(xe,H)}}return J},_isModel:function(E){return E instanceof _e},_addReference:function(E,H){this._byId[E.cid]=E;var J=this.modelId(E.attributes,E.idAttribute);J!=null&&(this._byId[J]=E),E.on("all",this._onModelEvent,this)},_removeReference:function(E,H){delete this._byId[E.cid];var J=this.modelId(E.attributes,E.idAttribute);J!=null&&delete this._byId[J],this===E.collection&&delete E.collection,E.off("all",this._onModelEvent,this)},_onModelEvent:function(E,H,J,we){if(H){if((E==="add"||E==="remove")&&J!==this)return;if(E==="destroy"&&this.remove(H,we),E==="changeId"){var xe=this.modelId(H.previousAttributes(),H.idAttribute),ee=this.modelId(H.attributes,H.idAttribute);xe!=null&&delete this._byId[xe],ee!=null&&(this._byId[ee]=H)}}this.trigger.apply(this,arguments)}});var Y=typeof Symbol=="function"&&Symbol.iterator;Y&&(Q.prototype[Y]=Q.prototype.values);var W=function(E,H){this._collection=E,this._kind=H,this._index=0},te=1,q=2,ge=3;Y&&(W.prototype[Y]=function(){return this}),W.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var E=this._collection.at(this._index);this._index++;var H;if(this._kind===te)H=E;else{var J=this._collection.modelId(E.attributes,E.idAttribute);this._kind===q?H=J:H=[J,E]}return{value:H,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var R=s.View=function(E){this.cid=u.uniqueId("view"),this.preinitialize.apply(this,arguments),u.extend(this,u.pick(E,he)),this._ensureElement(),this.initialize.apply(this,arguments)},ke=/^(\S+)\s*(.*)$/,he=["model","collection","el","id","attributes","className","tagName","events"];u.extend(R.prototype,v,{tagName:"div",$:function(E){return this.$el.find(E)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(E){return this.undelegateEvents(),this._setElement(E),this.delegateEvents(),this},_setElement:function(E){this.$el=E instanceof s.$?E:s.$(E),this.el=this.$el[0]},delegateEvents:function(E){if(E||(E=u.result(this,"events")),!E)return this;this.undelegateEvents();for(var H in E){var J=E[H];if(u.isFunction(J)||(J=this[J]),!!J){var we=H.match(ke);this.delegate(we[1],we[2],J.bind(this))}}return this},delegate:function(E,H,J){return this.$el.on(E+".delegateEvents"+this.cid,H,J),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(E,H,J){return this.$el.off(E+".delegateEvents"+this.cid,H,J),this},_createElement:function(E){return document.createElement(E)},_ensureElement:function(){if(this.el)this.setElement(u.result(this,"el"));else{var E=u.extend({},u.result(this,"attributes"));this.id&&(E.id=u.result(this,"id")),this.className&&(E.class=u.result(this,"className")),this.setElement(this._createElement(u.result(this,"tagName"))),this._setAttributes(E)}},_setAttributes:function(E){this.$el.attr(E)}});var Le=function(E,H,J,we){switch(H){case 1:return function(){return E[J](this[we])};case 2:return function(xe){return E[J](this[we],xe)};case 3:return function(xe,ee){return E[J](this[we],be(xe,this),ee)};case 4:return function(xe,ee,se){return E[J](this[we],be(xe,this),ee,se)};default:return function(){var xe=h.call(arguments);return xe.unshift(this[we]),E[J].apply(E,xe)}}},$e=function(E,H,J,we){u.each(J,function(xe,ee){H[ee]&&(E.prototype[ee]=Le(H,xe,ee,we))})},be=function(E,H){return u.isFunction(E)?E:u.isObject(E)&&!H._isModel(E)?Re(E):u.isString(E)?function(J){return J.get(E)}:E},Re=function(E){var H=u.matches(E);return function(J){return H(J.attributes)}},rt={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},He={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};u.each([[Q,rt,"models"],[_e,He,"attributes"]],function(E){var H=E[0],J=E[1],we=E[2];H.mixin=function(xe){var ee=u.reduce(u.functions(xe),function(se,ae){return se[ae]=0,se},{});$e(H,xe,ee,we)},$e(H,u,J,we)}),s.sync=function(E,H,J){var we=_t[E];u.defaults(J||(J={}),{emulateHTTP:s.emulateHTTP,emulateJSON:s.emulateJSON});var xe={type:we,dataType:"json"};if(J.url||(xe.url=u.result(H,"url")||tn()),J.data==null&&H&&(E==="create"||E==="update"||E==="patch")&&(xe.contentType="application/json",xe.data=JSON.stringify(J.attrs||H.toJSON(J))),J.emulateJSON&&(xe.contentType="application/x-www-form-urlencoded",xe.data=xe.data?{model:xe.data}:{}),J.emulateHTTP&&(we==="PUT"||we==="DELETE"||we==="PATCH")){xe.type="POST",J.emulateJSON&&(xe.data._method=we);var ee=J.beforeSend;J.beforeSend=function(et){if(et.setRequestHeader("X-HTTP-Method-Override",we),ee)return ee.apply(this,arguments)}}xe.type!=="GET"&&!J.emulateJSON&&(xe.processData=!1);var se=J.error;J.error=function(et,ct,ot){J.textStatus=ct,J.errorThrown=ot,se&&se.call(J.context,et,ct,ot)};var ae=J.xhr=s.ajax(u.extend(xe,J));return H.trigger("request",H,ae,J),ae};var _t={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};s.ajax=function(){return s.$.ajax.apply(s.$,arguments)};var Te=s.Router=function(E){E||(E={}),this.preinitialize.apply(this,arguments),E.routes&&(this.routes=E.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},Ne=/\((.*?)\)/g,Ye=/(\(\?)?:\w+/g,Fe=/\*\w+/g,vt=/[\-{}\[\]+?.,\\\^$|#\s]/g;u.extend(Te.prototype,v,{preinitialize:function(){},initialize:function(){},route:function(E,H,J){u.isRegExp(E)||(E=this._routeToRegExp(E)),u.isFunction(H)&&(J=H,H=""),J||(J=this[H]);var we=this;return s.history.route(E,function(xe){var ee=we._extractParameters(E,xe);we.execute(J,ee,H)!==!1&&(we.trigger.apply(we,["route:"+H].concat(ee)),we.trigger("route",H,ee),s.history.trigger("route",we,H,ee))}),this},execute:function(E,H,J){E&&E.apply(this,H)},navigate:function(E,H){return s.history.navigate(E,H),this},_bindRoutes:function(){if(this.routes){this.routes=u.result(this,"routes");for(var E,H=u.keys(this.routes);(E=H.pop())!=null;)this.route(E,this.routes[E])}},_routeToRegExp:function(E){return E=E.replace(vt,"\\$&").replace(Ne,"(?:$1)?").replace(Ye,function(H,J){return J?H:"([^/?]+)"}).replace(Fe,"([^?]*?)"),new RegExp("^"+E+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(E,H){var J=E.exec(H).slice(1);return u.map(J,function(we,xe){return xe===J.length-1?we||null:we?decodeURIComponent(we):null})}});var nt=s.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),typeof window<"u"&&(this.location=window.location,this.history=window.history)},bt=/^[#\/]|\s+$/g,Yt=/^\/+|\/+$/g,Mt=/#.*$/;nt.started=!1,u.extend(nt.prototype,v,{interval:50,atRoot:function(){var E=this.location.pathname.replace(/[^\/]$/,"$&/");return E===this.root&&!this.getSearch()},matchRoot:function(){var E=this.decodeFragment(this.location.pathname),H=E.slice(0,this.root.length-1)+"/";return H===this.root},decodeFragment:function(E){return decodeURI(E.replace(/%25/g,"%2525"))},getSearch:function(){var E=this.location.href.replace(/#.*/,"").match(/\?.+/);return E?E[0]:""},getHash:function(E){var H=(E||this).location.href.match(/#(.*)$/);return H?H[1]:""},getPath:function(){var E=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return E.charAt(0)==="/"?E.slice(1):E},getFragment:function(E){return E==null&&(this._usePushState||!this._wantsHashChange?E=this.getPath():E=this.getHash()),E.replace(bt,"")},start:function(E){if(nt.started)throw new Error("Backbone.history has already been started");if(nt.started=!0,this.options=u.extend({root:"/"},this.options,E),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.history&&this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(Yt,"/"),this._wantsHashChange&&this._wantsPushState)if(!this._hasPushState&&!this.atRoot()){var H=this.root.slice(0,-1)||"/";return this.location.replace(H+"#"+this.getPath()),!0}else this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0});if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var J=document.body,we=J.insertBefore(this.iframe,J.firstChild).contentWindow;we.document.open(),we.document.close(),we.location.hash="#"+this.fragment}var xe=window.addEventListener||function(ee,se){return attachEvent("on"+ee,se)};if(this._usePushState?xe("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?xe("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var E=window.removeEventListener||function(H,J){return detachEvent("on"+H,J)};this._usePushState?E("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&E("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),nt.started=!1},route:function(E,H){this.handlers.unshift({route:E,callback:H})},checkUrl:function(E){var H=this.getFragment();if(H===this.fragment&&this.iframe&&(H=this.getHash(this.iframe.contentWindow)),H===this.fragment)return!1;this.iframe&&this.navigate(H),this.loadUrl()},loadUrl:function(E){return this.matchRoot()?(E=this.fragment=this.getFragment(E),u.some(this.handlers,function(H){if(H.route.test(E))return H.callback(E),!0})):!1},navigate:function(E,H){if(!nt.started)return!1;(!H||H===!0)&&(H={trigger:!!H}),E=this.getFragment(E||"");var J=this.root;(E===""||E.charAt(0)==="?")&&(J=J.slice(0,-1)||"/");var we=J+E;E=E.replace(Mt,"");var xe=this.decodeFragment(E);if(this.fragment!==xe){if(this.fragment=xe,this._usePushState)this.history[H.replace?"replaceState":"pushState"]({},document.title,we);else if(this._wantsHashChange){if(this._updateHash(this.location,E,H.replace),this.iframe&&E!==this.getHash(this.iframe.contentWindow)){var ee=this.iframe.contentWindow;H.replace||(ee.document.open(),ee.document.close()),this._updateHash(ee.location,E,H.replace)}}else return this.location.assign(we);if(H.trigger)return this.loadUrl(E)}},_updateHash:function(E,H,J){if(J){var we=E.href.replace(/(javascript:|#).*$/,"");E.replace(we+"#"+H)}else E.hash="#"+H}}),s.history=new nt;var un=function(E,H){var J=this,we;return E&&u.has(E,"constructor")?we=E.constructor:we=function(){return J.apply(this,arguments)},u.extend(we,J,H),we.prototype=u.create(J.prototype,E),we.prototype.constructor=we,we.__super__=J.prototype,we};_e.extend=Q.extend=Te.extend=R.extend=nt.extend=un;var tn=function(){throw new Error('A "url" property or function must be specified')},Rt=function(E,H){var J=H.error;H.error=function(we){J&&J.call(H.context,E,we,H),E.trigger("error",E,we,H)}};return s})},862:(o,n,e)=>{(function(t){t(e(237))})(function(t){t.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(i,s){return/^[;{}]$/.test(s)}}),t.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(i,s,u,c){return this.jsonMode?/^[\[,{]$/.test(s)||/^}/.test(u):s==";"&&c.lexical&&c.lexical.type==")"?!1:/^[;{}]$/.test(s)&&!/^;/.test(u)}});var r=/^(a|abbr|acronym|area|base|bdo|big|br|button|caption|cite|code|col|colgroup|dd|del|dfn|em|frame|hr|iframe|img|input|ins|kbd|label|legend|link|map|object|optgroup|option|param|q|samp|script|select|small|span|strong|sub|sup|textarea|tt|var)$/;t.extendMode("xml",{commentStart:"<!--",commentEnd:"-->",newlineAfterToken:function(i,s,u,c){var f=!1;return this.configuration=="html"&&(f=c.context?r.test(c.context.tagName):!1),!f&&(i=="tag"&&/>$/.test(s)&&c.context||/^</.test(u))}}),t.defineExtension("commentRange",function(i,s,u){var c=this,f=t.innerMode(c.getMode(),c.getTokenAt(s).state).mode;c.operation(function(){if(i)c.replaceRange(f.commentEnd,u),c.replaceRange(f.commentStart,s),s.line==u.line&&s.ch==u.ch&&c.setCursor(s.line,s.ch+f.commentStart.length);else{var h=c.getRange(s,u),v=h.indexOf(f.commentStart),m=h.lastIndexOf(f.commentEnd);v>-1&&m>-1&&m>v&&(h=h.substr(0,v)+h.substring(v+f.commentStart.length,m)+h.substr(m+f.commentEnd.length)),c.replaceRange(h,s,u)}})}),t.defineExtension("autoIndentRange",function(i,s){var u=this;this.operation(function(){for(var c=i.line;c<=s.line;c++)u.indentLine(c,"smart")})}),t.defineExtension("autoFormatRange",function(i,s){var u=this,c=u.getMode(),f=u.getRange(i,s).split(`
`),h=t.copyState(c,u.getTokenAt(i).state),v=u.getOption("tabSize"),m="",_=0,C=i.ch===0;function T(){m+=`
`,C=!0,++_}for(var k=0;k<f.length;++k){for(var P=new t.StringStream(f[k],v);!P.eol();){var L=t.innerMode(c,h),D=c.token(P,h),V=P.current();P.start=P.pos,(!C||/\S/.test(V))&&(m+=V,C=!1),!C&&L.mode.newlineAfterToken&&L.mode.newlineAfterToken(D,V,P.string.slice(P.pos)||f[k+1]||"",L.state)&&T()}!P.pos&&c.blankLine&&c.blankLine(h),!C&&k<f.length-1&&T()}u.operation(function(){u.replaceRange(m,i,s);for(var re=i.line+1,_e=i.line+_;re<=_e;++re)u.indentLine(re,"smart");u.setSelection(i,u.getCursor(!1))})})})},237:function(o){(function(n,e){o.exports=e()})(this,function(){var n=navigator.userAgent,e=navigator.platform,t=/gecko\/\d/i.test(n),r=/MSIE \d/.test(n),i=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(n),s=/Edge\/(\d+)/.exec(n),u=r||i||s,c=u&&(r?document.documentMode||6:+(s||i)[1]),f=!s&&/WebKit\//.test(n),h=f&&/Qt\/\d+\.\d+/.test(n),v=!s&&/Chrome\//.test(n),m=/Opera\//.test(n),_=/Apple Computer/.test(navigator.vendor),C=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(n),T=/PhantomJS/.test(n),k=_&&(/Mobile\/\w+/.test(n)||navigator.maxTouchPoints>2),P=/Android/.test(n),L=k||P||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(n),D=k||/Mac/.test(e),V=/\bCrOS\b/.test(n),re=/win/i.test(e),_e=m&&n.match(/Version\/(\d*\.\d*)/);_e&&(_e=Number(_e[1])),_e&&_e>=15&&(m=!1,f=!0);var Q=D&&(h||m&&(_e==null||_e<12.11)),pe=t||u&&c>=9;function ne(a){return new RegExp("(^|\\s)"+a+"(?:$|\\s)\\s*")}var me=function(a,l){var p=a.className,d=ne(l).exec(p);if(d){var g=p.slice(d.index+d[0].length);a.className=p.slice(0,d.index)+(g?d[1]+g:"")}};function Y(a){for(var l=a.childNodes.length;l>0;--l)a.removeChild(a.firstChild);return a}function W(a,l){return Y(a).appendChild(l)}function te(a,l,p,d){var g=document.createElement(a);if(p&&(g.className=p),d&&(g.style.cssText=d),typeof l=="string")g.appendChild(document.createTextNode(l));else if(l)for(var b=0;b<l.length;++b)g.appendChild(l[b]);return g}function q(a,l,p,d){var g=te(a,l,p,d);return g.setAttribute("role","presentation"),g}var ge;document.createRange?ge=function(a,l,p,d){var g=document.createRange();return g.setEnd(d||a,p),g.setStart(a,l),g}:ge=function(a,l,p){var d=document.body.createTextRange();try{d.moveToElementText(a.parentNode)}catch{return d}return d.collapse(!0),d.moveEnd("character",p),d.moveStart("character",l),d};function R(a,l){if(l.nodeType==3&&(l=l.parentNode),a.contains)return a.contains(l);do if(l.nodeType==11&&(l=l.host),l==a)return!0;while(l=l.parentNode)}function ke(){var a;try{a=document.activeElement}catch{a=document.body||null}for(;a&&a.shadowRoot&&a.shadowRoot.activeElement;)a=a.shadowRoot.activeElement;return a}function he(a,l){var p=a.className;ne(l).test(p)||(a.className+=(p?" ":"")+l)}function Le(a,l){for(var p=a.split(" "),d=0;d<p.length;d++)p[d]&&!ne(p[d]).test(l)&&(l+=" "+p[d]);return l}var $e=function(a){a.select()};k?$e=function(a){a.selectionStart=0,a.selectionEnd=a.value.length}:u&&($e=function(a){try{a.select()}catch{}});function be(a){var l=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,l)}}function Re(a,l,p){l||(l={});for(var d in a)a.hasOwnProperty(d)&&(p!==!1||!l.hasOwnProperty(d))&&(l[d]=a[d]);return l}function rt(a,l,p,d,g){l==null&&(l=a.search(/[^\s\u00a0]/),l==-1&&(l=a.length));for(var b=d||0,S=g||0;;){var A=a.indexOf("	",b);if(A<0||A>=l)return S+(l-b);S+=A-b,S+=p-S%p,b=A+1}}var He=function(){this.id=null,this.f=null,this.time=0,this.handler=be(this.onTimeout,this)};He.prototype.onTimeout=function(a){a.id=0,a.time<=+new Date?a.f():setTimeout(a.handler,a.time-+new Date)},He.prototype.set=function(a,l){this.f=l;var p=+new Date+a;(!this.id||p<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,a),this.time=p)};function _t(a,l){for(var p=0;p<a.length;++p)if(a[p]==l)return p;return-1}var Te=50,Ne={toString:function(){return"CodeMirror.Pass"}},Ye={scroll:!1},Fe={origin:"*mouse"},vt={origin:"+move"};function nt(a,l,p){for(var d=0,g=0;;){var b=a.indexOf("	",d);b==-1&&(b=a.length);var S=b-d;if(b==a.length||g+S>=l)return d+Math.min(S,l-g);if(g+=b-d,g+=p-g%p,d=b+1,g>=l)return d}}var bt=[""];function Yt(a){for(;bt.length<=a;)bt.push(Mt(bt)+" ");return bt[a]}function Mt(a){return a[a.length-1]}function un(a,l){for(var p=[],d=0;d<a.length;d++)p[d]=l(a[d],d);return p}function tn(a,l,p){for(var d=0,g=p(l);d<a.length&&p(a[d])<=g;)d++;a.splice(d,0,l)}function Rt(){}function E(a,l){var p;return Object.create?p=Object.create(a):(Rt.prototype=a,p=new Rt),l&&Re(l,p),p}var H=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function J(a){return/\w/.test(a)||a>""&&(a.toUpperCase()!=a.toLowerCase()||H.test(a))}function we(a,l){return l?l.source.indexOf("\\w")>-1&&J(a)?!0:l.test(a):J(a)}function xe(a){for(var l in a)if(a.hasOwnProperty(l)&&a[l])return!1;return!0}var ee=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function se(a){return a.charCodeAt(0)>=768&&ee.test(a)}function ae(a,l,p){for(;(p<0?l>0:l<a.length)&&se(a.charAt(l));)l+=p;return l}function et(a,l,p){for(var d=l>p?-1:1;;){if(l==p)return l;var g=(l+p)/2,b=d<0?Math.ceil(g):Math.floor(g);if(b==l)return a(b)?l:p;a(b)?p=b:l=b+d}}function ct(a,l,p,d){if(!a)return d(l,p,"ltr",0);for(var g=!1,b=0;b<a.length;++b){var S=a[b];(S.from<p&&S.to>l||l==p&&S.to==l)&&(d(Math.max(S.from,l),Math.min(S.to,p),S.level==1?"rtl":"ltr",b),g=!0)}g||d(l,p,"ltr")}var ot=null;function X(a,l,p){var d;ot=null;for(var g=0;g<a.length;++g){var b=a[g];if(b.from<l&&b.to>l)return g;b.to==l&&(b.from!=b.to&&p=="before"?d=g:ot=g),b.from==l&&(b.from!=b.to&&p!="before"?d=g:ot=g)}return d??ot}var fe=function(){var a="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",l="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function p(F){return F<=247?a.charAt(F):1424<=F&&F<=1524?"R":1536<=F&&F<=1785?l.charAt(F-1536):1774<=F&&F<=2220?"r":8192<=F&&F<=8203?"w":F==8204?"b":"L"}var d=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,g=/[stwN]/,b=/[LRr]/,S=/[Lb1n]/,A=/[1n]/;function j(F,oe,de){this.level=F,this.from=oe,this.to=de}return function(F,oe){var de=oe=="ltr"?"L":"R";if(F.length==0||oe=="ltr"&&!d.test(F))return!1;for(var Me=F.length,Oe=[],ze=0;ze<Me;++ze)Oe.push(p(F.charCodeAt(ze)));for(var Je=0,lt=de;Je<Me;++Je){var mt=Oe[Je];mt=="m"?Oe[Je]=lt:lt=mt}for(var Ct=0,yt=de;Ct<Me;++Ct){var Tt=Oe[Ct];Tt=="1"&&yt=="r"?Oe[Ct]="n":b.test(Tt)&&(yt=Tt,Tt=="r"&&(Oe[Ct]="R"))}for(var zt=1,Nt=Oe[0];zt<Me-1;++zt){var Qt=Oe[zt];Qt=="+"&&Nt=="1"&&Oe[zt+1]=="1"?Oe[zt]="1":Qt==","&&Nt==Oe[zt+1]&&(Nt=="1"||Nt=="n")&&(Oe[zt]=Nt),Nt=Qt}for(var Sn=0;Sn<Me;++Sn){var wr=Oe[Sn];if(wr==",")Oe[Sn]="N";else if(wr=="%"){var Vn=void 0;for(Vn=Sn+1;Vn<Me&&Oe[Vn]=="%";++Vn);for(var jo=Sn&&Oe[Sn-1]=="!"||Vn<Me&&Oe[Vn]=="1"?"1":"N",ho=Sn;ho<Vn;++ho)Oe[ho]=jo;Sn=Vn-1}}for(var rr=0,vo=de;rr<Me;++rr){var kr=Oe[rr];vo=="L"&&kr=="1"?Oe[rr]="L":b.test(kr)&&(vo=kr)}for(var cr=0;cr<Me;++cr)if(g.test(Oe[cr])){var or=void 0;for(or=cr+1;or<Me&&g.test(Oe[or]);++or);for(var Kn=(cr?Oe[cr-1]:de)=="L",go=(or<Me?Oe[or]:de)=="L",Sl=Kn==go?Kn?"L":"R":de,za=cr;za<or;++za)Oe[za]=Sl;cr=or-1}for(var Vr=[],Ji,_r=0;_r<Me;)if(S.test(Oe[_r])){var Lh=_r;for(++_r;_r<Me&&S.test(Oe[_r]);++_r);Vr.push(new j(0,Lh,_r))}else{var ca=_r,As=Vr.length,Ms=oe=="rtl"?1:0;for(++_r;_r<Me&&Oe[_r]!="L";++_r);for(var qr=ca;qr<_r;)if(A.test(Oe[qr])){ca<qr&&(Vr.splice(As,0,new j(1,ca,qr)),As+=Ms);var Ol=qr;for(++qr;qr<_r&&A.test(Oe[qr]);++qr);Vr.splice(As,0,new j(2,Ol,qr)),As+=Ms,ca=qr}else++qr;ca<_r&&Vr.splice(As,0,new j(1,ca,_r))}return oe=="ltr"&&(Vr[0].level==1&&(Ji=F.match(/^\s+/))&&(Vr[0].from=Ji[0].length,Vr.unshift(new j(0,0,Ji[0].length))),Mt(Vr).level==1&&(Ji=F.match(/\s+$/))&&(Mt(Vr).to-=Ji[0].length,Vr.push(new j(0,Me-Ji[0].length,Me)))),oe=="rtl"?Vr.reverse():Vr}}();function z(a,l){var p=a.order;return p==null&&(p=a.order=fe(a.text,l)),p}var je=[],Se=function(a,l,p){if(a.addEventListener)a.addEventListener(l,p,!1);else if(a.attachEvent)a.attachEvent("on"+l,p);else{var d=a._handlers||(a._handlers={});d[l]=(d[l]||je).concat(p)}};function Be(a,l){return a._handlers&&a._handlers[l]||je}function qe(a,l,p){if(a.removeEventListener)a.removeEventListener(l,p,!1);else if(a.detachEvent)a.detachEvent("on"+l,p);else{var d=a._handlers,g=d&&d[l];if(g){var b=_t(g,p);b>-1&&(d[l]=g.slice(0,b).concat(g.slice(b+1)))}}}function st(a,l){var p=Be(a,l);if(p.length)for(var d=Array.prototype.slice.call(arguments,2),g=0;g<p.length;++g)p[g].apply(null,d)}function ut(a,l,p){return typeof l=="string"&&(l={type:l,preventDefault:function(){this.defaultPrevented=!0}}),st(a,p||l.type,a,l),Bn(l)||l.codemirrorIgnore}function Ot(a){var l=a._handlers&&a._handlers.cursorActivity;if(l)for(var p=a.curOp.cursorActivityHandlers||(a.curOp.cursorActivityHandlers=[]),d=0;d<l.length;++d)_t(p,l[d])==-1&&p.push(l[d])}function Ht(a,l){return Be(a,l).length>0}function Bt(a){a.prototype.on=function(l,p){Se(this,l,p)},a.prototype.off=function(l,p){qe(this,l,p)}}function Kt(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function hn(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function Bn(a){return a.defaultPrevented!=null?a.defaultPrevented:a.returnValue==!1}function G(a){Kt(a),hn(a)}function ve(a){return a.target||a.srcElement}function Ee(a){var l=a.which;return l==null&&(a.button&1?l=1:a.button&2?l=3:a.button&4&&(l=2)),D&&a.ctrlKey&&l==1&&(l=3),l}var Ke=function(){if(u&&c<9)return!1;var a=te("div");return"draggable"in a||"dragDrop"in a}(),pt;function Dt(a){if(pt==null){var l=te("span","​");W(a,te("span",[l,document.createTextNode("x")])),a.firstChild.offsetHeight!=0&&(pt=l.offsetWidth<=1&&l.offsetHeight>2&&!(u&&c<8))}var p=pt?te("span","​"):te("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return p.setAttribute("cm-text",""),p}var Ut;function bn(a){if(Ut!=null)return Ut;var l=W(a,document.createTextNode("AخA")),p=ge(l,0,1).getBoundingClientRect(),d=ge(l,1,2).getBoundingClientRect();return Y(a),!p||p.left==p.right?!1:Ut=d.right-p.right<3}var Nn=`

b`.split(/\n/).length!=3?function(a){for(var l=0,p=[],d=a.length;l<=d;){var g=a.indexOf(`
`,l);g==-1&&(g=a.length);var b=a.slice(l,a.charAt(g-1)=="\r"?g-1:g),S=b.indexOf("\r");S!=-1?(p.push(b.slice(0,S)),l+=S+1):(p.push(b),l=g+1)}return p}:function(a){return a.split(/\r\n?|\n/)},yn=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch{return!1}}:function(a){var l;try{l=a.ownerDocument.selection.createRange()}catch{}return!l||l.parentElement()!=a?!1:l.compareEndPoints("StartToEnd",l)!=0},Wn=function(){var a=te("div");return"oncopy"in a?!0:(a.setAttribute("oncopy","return;"),typeof a.oncopy=="function")}(),ln=null;function Pn(a){if(ln!=null)return ln;var l=W(a,te("span","x")),p=l.getBoundingClientRect(),d=ge(l,0,1).getBoundingClientRect();return ln=Math.abs(p.left-d.left)>1}var Br={},on={};function An(a,l){arguments.length>2&&(l.dependencies=Array.prototype.slice.call(arguments,2)),Br[a]=l}function $t(a,l){on[a]=l}function At(a){if(typeof a=="string"&&on.hasOwnProperty(a))a=on[a];else if(a&&typeof a.name=="string"&&on.hasOwnProperty(a.name)){var l=on[a.name];typeof l=="string"&&(l={name:l}),a=E(l,a),a.name=l.name}else{if(typeof a=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(a))return At("application/xml");if(typeof a=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(a))return At("application/json")}return typeof a=="string"?{name:a}:a||{name:"null"}}function Ft(a,l){l=At(l);var p=Br[l.name];if(!p)return Ft(a,"text/plain");var d=p(a,l);if(Dr.hasOwnProperty(l.name)){var g=Dr[l.name];for(var b in g)g.hasOwnProperty(b)&&(d.hasOwnProperty(b)&&(d["_"+b]=d[b]),d[b]=g[b])}if(d.name=l.name,l.helperType&&(d.helperType=l.helperType),l.modeProps)for(var S in l.modeProps)d[S]=l.modeProps[S];return d}var Dr={};function Lr(a,l){var p=Dr.hasOwnProperty(a)?Dr[a]:Dr[a]={};Re(l,p)}function $n(a,l){if(l===!0)return l;if(a.copyState)return a.copyState(l);var p={};for(var d in l){var g=l[d];g instanceof Array&&(g=g.concat([])),p[d]=g}return p}function Tn(a,l){for(var p;a.innerMode&&(p=a.innerMode(l),!(!p||p.mode==a));)l=p.state,a=p.mode;return p||{mode:a,state:l}}function sr(a,l,p){return a.startState?a.startState(l,p):!0}var an=function(a,l,p){this.pos=this.start=0,this.string=a,this.tabSize=l||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=p};an.prototype.eol=function(){return this.pos>=this.string.length},an.prototype.sol=function(){return this.pos==this.lineStart},an.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},an.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},an.prototype.eat=function(a){var l=this.string.charAt(this.pos),p;if(typeof a=="string"?p=l==a:p=l&&(a.test?a.test(l):a(l)),p)return++this.pos,l},an.prototype.eatWhile=function(a){for(var l=this.pos;this.eat(a););return this.pos>l},an.prototype.eatSpace=function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a},an.prototype.skipToEnd=function(){this.pos=this.string.length},an.prototype.skipTo=function(a){var l=this.string.indexOf(a,this.pos);if(l>-1)return this.pos=l,!0},an.prototype.backUp=function(a){this.pos-=a},an.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=rt(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?rt(this.string,this.lineStart,this.tabSize):0)},an.prototype.indentation=function(){return rt(this.string,null,this.tabSize)-(this.lineStart?rt(this.string,this.lineStart,this.tabSize):0)},an.prototype.match=function(a,l,p){if(typeof a=="string"){var d=function(S){return p?S.toLowerCase():S},g=this.string.substr(this.pos,a.length);if(d(g)==d(a))return l!==!1&&(this.pos+=a.length),!0}else{var b=this.string.slice(this.pos).match(a);return b&&b.index>0?null:(b&&l!==!1&&(this.pos+=b[0].length),b)}},an.prototype.current=function(){return this.string.slice(this.start,this.pos)},an.prototype.hideFirstChars=function(a,l){this.lineStart+=a;try{return l()}finally{this.lineStart-=a}},an.prototype.lookAhead=function(a){var l=this.lineOracle;return l&&l.lookAhead(a)},an.prototype.baseToken=function(){var a=this.lineOracle;return a&&a.baseToken(this.pos)};function xt(a,l){if(l-=a.first,l<0||l>=a.size)throw new Error("There is no line "+(l+a.first)+" in the document.");for(var p=a;!p.lines;)for(var d=0;;++d){var g=p.children[d],b=g.chunkSize();if(l<b){p=g;break}l-=b}return p.lines[l]}function Qn(a,l,p){var d=[],g=l.line;return a.iter(l.line,p.line+1,function(b){var S=b.text;g==p.line&&(S=S.slice(0,p.ch)),g==l.line&&(S=S.slice(l.ch)),d.push(S),++g}),d}function xn(a,l,p){var d=[];return a.iter(l,p,function(g){d.push(g.text)}),d}function er(a,l){var p=l-a.height;if(p)for(var d=a;d;d=d.parent)d.height+=p}function qt(a){if(a.parent==null)return null;for(var l=a.parent,p=_t(l.lines,a),d=l.parent;d;l=d,d=d.parent)for(var g=0;d.children[g]!=l;++g)p+=d.children[g].chunkSize();return p+l.first}function fn(a,l){var p=a.first;e:do{for(var d=0;d<a.children.length;++d){var g=a.children[d],b=g.height;if(l<b){a=g;continue e}l-=b,p+=g.chunkSize()}return p}while(!a.lines);for(var S=0;S<a.lines.length;++S){var A=a.lines[S],j=A.height;if(l<j)break;l-=j}return p+S}function pr(a,l){return l>=a.first&&l<a.first+a.size}function Wr(a,l){return String(a.lineNumberFormatter(l+a.firstLineNumber))}function Ze(a,l,p){if(p===void 0&&(p=null),!(this instanceof Ze))return new Ze(a,l,p);this.line=a,this.ch=l,this.sticky=p}function jt(a,l){return a.line-l.line||a.ch-l.ch}function io(a,l){return a.sticky==l.sticky&&jt(a,l)==0}function B(a){return Ze(a.line,a.ch)}function ue(a,l){return jt(a,l)<0?l:a}function Ve(a,l){return jt(a,l)<0?a:l}function tt(a,l){return Math.max(a.first,Math.min(l,a.first+a.size-1))}function it(a,l){if(l.line<a.first)return Ze(a.first,0);var p=a.first+a.size-1;return l.line>p?Ze(p,xt(a,p).text.length):Gt(l,xt(a,l.line).text.length)}function Gt(a,l){var p=a.ch;return p==null||p>l?Ze(a.line,l):p<0?Ze(a.line,0):a}function Jt(a,l){for(var p=[],d=0;d<l.length;d++)p[d]=it(a,l[d]);return p}var Cn=function(a,l){this.state=a,this.lookAhead=l},sn=function(a,l,p,d){this.state=l,this.doc=a,this.line=p,this.maxLookAhead=d||0,this.baseTokens=null,this.baseTokenPos=1};sn.prototype.lookAhead=function(a){var l=this.doc.getLine(this.line+a);return l!=null&&a>this.maxLookAhead&&(this.maxLookAhead=a),l},sn.prototype.baseToken=function(a){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=a;)this.baseTokenPos+=2;var l=this.baseTokens[this.baseTokenPos+1];return{type:l&&l.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-a}},sn.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},sn.fromSaved=function(a,l,p){return l instanceof Cn?new sn(a,$n(a.mode,l.state),p,l.lookAhead):new sn(a,$n(a.mode,l),p)},sn.prototype.save=function(a){var l=a!==!1?$n(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Cn(l,this.maxLookAhead):l};function hr(a,l,p,d){var g=[a.state.modeGen],b={};Eo(a,l.text,a.doc.mode,p,function(F,oe){return g.push(F,oe)},b,d);for(var S=p.state,A=function(F){p.baseTokens=g;var oe=a.state.overlays[F],de=1,Me=0;p.state=!0,Eo(a,l.text,oe.mode,p,function(Oe,ze){for(var Je=de;Me<Oe;){var lt=g[de];lt>Oe&&g.splice(de,1,Oe,g[de+1],lt),de+=2,Me=Math.min(Oe,lt)}if(ze)if(oe.opaque)g.splice(Je,de-Je,Oe,"overlay "+ze),de=Je+2;else for(;Je<de;Je+=2){var mt=g[Je+1];g[Je+1]=(mt?mt+" ":"")+"overlay "+ze}},b),p.state=S,p.baseTokens=null,p.baseTokenPos=1},j=0;j<a.state.overlays.length;++j)A(j);return{styles:g,classes:b.bgClass||b.textClass?b:null}}function ao(a,l,p){if(!l.styles||l.styles[0]!=a.state.modeGen){var d=Ko(a,qt(l)),g=l.text.length>a.options.maxHighlightLength&&$n(a.doc.mode,d.state),b=hr(a,l,d);g&&(d.state=g),l.stateAfter=d.save(!g),l.styles=b.styles,b.classes?l.styleClasses=b.classes:l.styleClasses&&(l.styleClasses=null),p===a.doc.highlightFrontier&&(a.doc.modeFrontier=Math.max(a.doc.modeFrontier,++a.doc.highlightFrontier))}return l.styles}function Ko(a,l,p){var d=a.doc,g=a.display;if(!d.mode.startState)return new sn(d,!0,l);var b=Yo(a,l,p),S=b>d.first&&xt(d,b-1).stateAfter,A=S?sn.fromSaved(d,S,b):new sn(d,sr(d.mode),b);return d.iter(b,l,function(j){To(a,j.text,A);var F=A.line;j.stateAfter=F==l-1||F%5==0||F>=g.viewFrom&&F<g.viewTo?A.save():null,A.nextLine()}),p&&(d.modeFrontier=A.line),A}function To(a,l,p,d){var g=a.doc.mode,b=new an(l,a.options.tabSize,p);for(b.start=b.pos=d||0,l==""&&Or(g,p.state);!b.eol();)Go(g,b,p.state),b.start=b.pos}function Or(a,l){if(a.blankLine)return a.blankLine(l);if(a.innerMode){var p=Tn(a,l);if(p.mode.blankLine)return p.mode.blankLine(p.state)}}function Go(a,l,p,d){for(var g=0;g<10;g++){d&&(d[0]=Tn(a,p).mode);var b=a.token(l,p);if(l.pos>l.start)return b}throw new Error("Mode "+a.name+" failed to advance stream.")}var zi=function(a,l,p){this.start=a.start,this.end=a.pos,this.string=a.current(),this.type=l||null,this.state=p};function xi(a,l,p,d){var g=a.doc,b=g.mode,S;l=it(g,l);var A=xt(g,l.line),j=Ko(a,l.line,p),F=new an(A.text,a.options.tabSize,j),oe;for(d&&(oe=[]);(d||F.pos<l.ch)&&!F.eol();)F.start=F.pos,S=Go(b,F,j.state),d&&oe.push(new zi(F,S,$n(g.mode,j.state)));return d?oe:new zi(F,S,j.state)}function li(a,l){if(a)for(;;){var p=a.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!p)break;a=a.slice(0,p.index)+a.slice(p.index+p[0].length);var d=p[1]?"bgClass":"textClass";l[d]==null?l[d]=p[2]:new RegExp("(?:^|\\s)"+p[2]+"(?:$|\\s)").test(l[d])||(l[d]+=" "+p[2])}return a}function Eo(a,l,p,d,g,b,S){var A=p.flattenSpans;A==null&&(A=a.options.flattenSpans);var j=0,F=null,oe=new an(l,a.options.tabSize,d),de,Me=a.options.addModeClass&&[null];for(l==""&&li(Or(p,d.state),b);!oe.eol();){if(oe.pos>a.options.maxHighlightLength?(A=!1,S&&To(a,l,d,oe.pos),oe.pos=l.length,de=null):de=li(Go(p,oe,d.state,Me),b),Me){var Oe=Me[0].name;Oe&&(de="m-"+(de?Oe+" "+de:Oe))}if(!A||F!=de){for(;j<oe.start;)j=Math.min(oe.start,j+5e3),g(j,F);F=de}oe.start=oe.pos}for(;j<oe.pos;){var ze=Math.min(oe.pos,j+5e3);g(ze,F),j=ze}}function Yo(a,l,p){for(var d,g,b=a.doc,S=p?-1:l-(a.doc.mode.innerMode?1e3:100),A=l;A>S;--A){if(A<=b.first)return b.first;var j=xt(b,A-1),F=j.stateAfter;if(F&&(!p||A+(F instanceof Cn?F.lookAhead:0)<=b.modeFrontier))return A;var oe=rt(j.text,null,a.options.tabSize);(g==null||d>oe)&&(g=A-1,d=oe)}return g}function Hi(a,l){if(a.modeFrontier=Math.min(a.modeFrontier,l),!(a.highlightFrontier<l-10)){for(var p=a.first,d=l-1;d>p;d--){var g=xt(a,d).stateAfter;if(g&&(!(g instanceof Cn)||d+g.lookAhead<l)){p=d+1;break}}a.highlightFrontier=Math.min(a.highlightFrontier,p)}}var Rn=!1,qn=!1;function aa(){Rn=!0}function $r(){qn=!0}function Po(a,l,p){this.marker=a,this.from=l,this.to=p}function Tr(a,l){if(a)for(var p=0;p<a.length;++p){var d=a[p];if(d.marker==l)return d}}function Fn(a,l){for(var p,d=0;d<a.length;++d)a[d]!=l&&(p||(p=[])).push(a[d]);return p}function Ta(a,l,p){var d=p&&window.WeakSet&&(p.markedSpans||(p.markedSpans=new WeakSet));d&&d.has(a.markedSpans)?a.markedSpans.push(l):(a.markedSpans=a.markedSpans?a.markedSpans.concat([l]):[l],d&&d.add(a.markedSpans)),l.marker.attachLine(a)}function ko(a,l,p){var d;if(a)for(var g=0;g<a.length;++g){var b=a[g],S=b.marker,A=b.from==null||(S.inclusiveLeft?b.from<=l:b.from<l);if(A||b.from==l&&S.type=="bookmark"&&(!p||!b.marker.insertLeft)){var j=b.to==null||(S.inclusiveRight?b.to>=l:b.to>l);(d||(d=[])).push(new Po(S,b.from,j?null:b.to))}}return d}function so(a,l,p){var d;if(a)for(var g=0;g<a.length;++g){var b=a[g],S=b.marker,A=b.to==null||(S.inclusiveRight?b.to>=l:b.to>l);if(A||b.from==l&&S.type=="bookmark"&&(!p||b.marker.insertLeft)){var j=b.from==null||(S.inclusiveLeft?b.from<=l:b.from<l);(d||(d=[])).push(new Po(S,j?null:b.from-l,b.to==null?null:b.to-l))}}return d}function Ao(a,l){if(l.full)return null;var p=pr(a,l.from.line)&&xt(a,l.from.line).markedSpans,d=pr(a,l.to.line)&&xt(a,l.to.line).markedSpans;if(!p&&!d)return null;var g=l.from.ch,b=l.to.ch,S=jt(l.from,l.to)==0,A=ko(p,g,S),j=so(d,b,S),F=l.text.length==1,oe=Mt(l.text).length+(F?g:0);if(A)for(var de=0;de<A.length;++de){var Me=A[de];if(Me.to==null){var Oe=Tr(j,Me.marker);Oe?F&&(Me.to=Oe.to==null?null:Oe.to+oe):Me.to=g}}if(j)for(var ze=0;ze<j.length;++ze){var Je=j[ze];if(Je.to!=null&&(Je.to+=oe),Je.from==null){var lt=Tr(A,Je.marker);lt||(Je.from=oe,F&&(A||(A=[])).push(Je))}else Je.from+=oe,F&&(A||(A=[])).push(Je)}A&&(A=lo(A)),j&&j!=A&&(j=lo(j));var mt=[A];if(!F){var Ct=l.text.length-2,yt;if(Ct>0&&A)for(var Tt=0;Tt<A.length;++Tt)A[Tt].to==null&&(yt||(yt=[])).push(new Po(A[Tt].marker,null,null));for(var zt=0;zt<Ct;++zt)mt.push(yt);mt.push(j)}return mt}function lo(a){for(var l=0;l<a.length;++l){var p=a[l];p.from!=null&&p.from==p.to&&p.marker.clearWhenEmpty!==!1&&a.splice(l--,1)}return a.length?a:null}function Kr(a,l,p){var d=null;if(a.iter(l.line,p.line+1,function(Oe){if(Oe.markedSpans)for(var ze=0;ze<Oe.markedSpans.length;++ze){var Je=Oe.markedSpans[ze].marker;Je.readOnly&&(!d||_t(d,Je)==-1)&&(d||(d=[])).push(Je)}}),!d)return null;for(var g=[{from:l,to:p}],b=0;b<d.length;++b)for(var S=d[b],A=S.find(0),j=0;j<g.length;++j){var F=g[j];if(!(jt(F.to,A.from)<0||jt(F.from,A.to)>0)){var oe=[j,1],de=jt(F.from,A.from),Me=jt(F.to,A.to);(de<0||!S.inclusiveLeft&&!de)&&oe.push({from:F.from,to:A.from}),(Me>0||!S.inclusiveRight&&!Me)&&oe.push({from:A.to,to:F.to}),g.splice.apply(g,oe),j+=oe.length-3}}return g}function Ui(a){var l=a.markedSpans;if(l){for(var p=0;p<l.length;++p)l[p].marker.detachLine(a);a.markedSpans=null}}function Bi(a,l){if(l){for(var p=0;p<l.length;++p)l[p].marker.attachLine(a);a.markedSpans=l}}function ui(a){return a.inclusiveLeft?-1:0}function uo(a){return a.inclusiveRight?1:0}function Ci(a,l){var p=a.lines.length-l.lines.length;if(p!=0)return p;var d=a.find(),g=l.find(),b=jt(d.from,g.from)||ui(a)-ui(l);if(b)return-b;var S=jt(d.to,g.to)||uo(a)-uo(l);return S||l.id-a.id}function jr(a,l){var p=qn&&a.markedSpans,d;if(p)for(var g=void 0,b=0;b<p.length;++b)g=p[b],g.marker.collapsed&&(l?g.from:g.to)==null&&(!d||Ci(d,g.marker)<0)&&(d=g.marker);return d}function Pt(a){return jr(a,!0)}function Lt(a){return jr(a,!1)}function en(a,l){var p=qn&&a.markedSpans,d;if(p)for(var g=0;g<p.length;++g){var b=p[g];b.marker.collapsed&&(b.from==null||b.from<l)&&(b.to==null||b.to>l)&&(!d||Ci(d,b.marker)<0)&&(d=b.marker)}return d}function Vt(a,l,p,d,g){var b=xt(a,l),S=qn&&b.markedSpans;if(S)for(var A=0;A<S.length;++A){var j=S[A];if(j.marker.collapsed){var F=j.marker.find(0),oe=jt(F.from,p)||ui(j.marker)-ui(g),de=jt(F.to,d)||uo(j.marker)-uo(g);if(!(oe>=0&&de<=0||oe<=0&&de>=0)&&(oe<=0&&(j.marker.inclusiveRight&&g.inclusiveLeft?jt(F.to,p)>=0:jt(F.to,p)>0)||oe>=0&&(j.marker.inclusiveRight&&g.inclusiveLeft?jt(F.from,d)<=0:jt(F.from,d)<0)))return!0}}}function En(a){for(var l;l=Pt(a);)a=l.find(-1,!0).line;return a}function Mn(a){for(var l;l=Lt(a);)a=l.find(1,!0).line;return a}function vr(a){for(var l,p;l=Lt(a);)a=l.find(1,!0).line,(p||(p=[])).push(a);return p}function co(a,l){var p=xt(a,l),d=En(p);return p==d?l:qt(d)}function gr(a,l){if(l>a.lastLine())return l;var p=xt(a,l),d;if(!Ir(a,p))return l;for(;d=Lt(p);)p=d.find(1,!0).line;return qt(p)+1}function Ir(a,l){var p=qn&&l.markedSpans;if(p){for(var d=void 0,g=0;g<p.length;++g)if(d=p[g],!!d.marker.collapsed){if(d.from==null)return!0;if(!d.marker.widgetNode&&d.from==0&&d.marker.inclusiveLeft&&Gr(a,l,d))return!0}}}function Gr(a,l,p){if(p.to==null){var d=p.marker.find(1,!0);return Gr(a,d.line,Tr(d.line.markedSpans,p.marker))}if(p.marker.inclusiveRight&&p.to==l.text.length)return!0;for(var g=void 0,b=0;b<l.markedSpans.length;++b)if(g=l.markedSpans[b],g.marker.collapsed&&!g.marker.widgetNode&&g.from==p.to&&(g.to==null||g.to!=p.from)&&(g.marker.inclusiveLeft||p.marker.inclusiveRight)&&Gr(a,l,g))return!0}function tr(a){a=En(a);for(var l=0,p=a.parent,d=0;d<p.lines.length;++d){var g=p.lines[d];if(g==a)break;l+=g.height}for(var b=p.parent;b;p=b,b=p.parent)for(var S=0;S<b.children.length;++S){var A=b.children[S];if(A==p)break;l+=A.height}return l}function Si(a){if(a.height==0)return 0;for(var l=a.text.length,p,d=a;p=Pt(d);){var g=p.find(0,!0);d=g.from.line,l+=g.from.ch-g.to.ch}for(d=a;p=Lt(d);){var b=p.find(0,!0);l-=d.text.length-b.from.ch,d=b.to.line,l+=d.text.length-b.to.ch}return l}function Wi(a){var l=a.display,p=a.doc;l.maxLine=xt(p,p.first),l.maxLineLength=Si(l.maxLine),l.maxLineChanged=!0,p.iter(function(d){var g=Si(d);g>l.maxLineLength&&(l.maxLineLength=g,l.maxLine=d)})}var nr=function(a,l,p){this.text=a,Bi(this,l),this.height=p?p(this):1};nr.prototype.lineNo=function(){return qt(this)},Bt(nr);function gs(a,l,p,d){a.text=l,a.stateAfter&&(a.stateAfter=null),a.styles&&(a.styles=null),a.order!=null&&(a.order=null),Ui(a),Bi(a,p);var g=d?d(a):1;g!=a.height&&er(a,g)}function sa(a){a.parent=null,Ui(a)}var lr={},ms={};function ys(a,l){if(!a||/^\s*$/.test(a))return null;var p=l.addModeClass?ms:lr;return p[a]||(p[a]=a.replace(/\S+/g,"cm-$&"))}function Ea(a,l){var p=q("span",null,null,f?"padding-right: .1px":null),d={pre:q("pre",[p],"CodeMirror-line"),content:p,col:0,pos:0,cm:a,trailingSpace:!1,splitSpaces:a.getOption("lineWrapping")};l.measure={};for(var g=0;g<=(l.rest?l.rest.length:0);g++){var b=g?l.rest[g-1]:l.line,S=void 0;d.pos=0,d.addToken=il,bn(a.display.measure)&&(S=z(b,a.doc.direction))&&(d.addToken=al(d.addToken,S)),d.map=[];var A=l!=a.display.externalMeasured&&qt(b);_s(b,d,ao(a,b,A)),b.styleClasses&&(b.styleClasses.bgClass&&(d.bgClass=Le(b.styleClasses.bgClass,d.bgClass||"")),b.styleClasses.textClass&&(d.textClass=Le(b.styleClasses.textClass,d.textClass||""))),d.map.length==0&&d.map.push(0,0,d.content.appendChild(Dt(a.display.measure))),g==0?(l.measure.map=d.map,l.measure.cache={}):((l.measure.maps||(l.measure.maps=[])).push(d.map),(l.measure.caches||(l.measure.caches=[])).push({}))}if(f){var j=d.content.lastChild;(/\bcm-tab\b/.test(j.className)||j.querySelector&&j.querySelector(".cm-tab"))&&(d.content.className="cm-tab-wrap-hack")}return st(a,"renderLine",a,l.line,d.pre),d.pre.className&&(d.textClass=Le(d.pre.className,d.textClass||"")),d}function ol(a){var l=te("span","•","cm-invalidchar");return l.title="\\u"+a.charCodeAt(0).toString(16),l.setAttribute("aria-label",l.title),l}function il(a,l,p,d,g,b,S){if(l){var A=a.splitSpaces?Pa(l,a.trailingSpace):l,j=a.cm.state.specialChars,F=!1,oe;if(!j.test(l))a.col+=l.length,oe=document.createTextNode(A),a.map.push(a.pos,a.pos+l.length,oe),u&&c<9&&(F=!0),a.pos+=l.length;else{oe=document.createDocumentFragment();for(var de=0;;){j.lastIndex=de;var Me=j.exec(l),Oe=Me?Me.index-de:l.length-de;if(Oe){var ze=document.createTextNode(A.slice(de,de+Oe));u&&c<9?oe.appendChild(te("span",[ze])):oe.appendChild(ze),a.map.push(a.pos,a.pos+Oe,ze),a.col+=Oe,a.pos+=Oe}if(!Me)break;de+=Oe+1;var Je=void 0;if(Me[0]=="	"){var lt=a.cm.options.tabSize,mt=lt-a.col%lt;Je=oe.appendChild(te("span",Yt(mt),"cm-tab")),Je.setAttribute("role","presentation"),Je.setAttribute("cm-text","	"),a.col+=mt}else Me[0]=="\r"||Me[0]==`
`?(Je=oe.appendChild(te("span",Me[0]=="\r"?"␍":"␤","cm-invalidchar")),Je.setAttribute("cm-text",Me[0]),a.col+=1):(Je=a.cm.options.specialCharPlaceholder(Me[0]),Je.setAttribute("cm-text",Me[0]),u&&c<9?oe.appendChild(te("span",[Je])):oe.appendChild(Je),a.col+=1);a.map.push(a.pos,a.pos+1,Je),a.pos++}}if(a.trailingSpace=A.charCodeAt(l.length-1)==32,p||d||g||F||b||S){var Ct=p||"";d&&(Ct+=d),g&&(Ct+=g);var yt=te("span",[oe],Ct,b);if(S)for(var Tt in S)S.hasOwnProperty(Tt)&&Tt!="style"&&Tt!="class"&&yt.setAttribute(Tt,S[Tt]);return a.content.appendChild(yt)}a.content.appendChild(oe)}}function Pa(a,l){if(a.length>1&&!/  /.test(a))return a;for(var p=l,d="",g=0;g<a.length;g++){var b=a.charAt(g);b==" "&&p&&(g==a.length-1||a.charCodeAt(g+1)==32)&&(b=" "),d+=b,p=b==" "}return d}function al(a,l){return function(p,d,g,b,S,A,j){g=g?g+" cm-force-border":"cm-force-border";for(var F=p.pos,oe=F+d.length;;){for(var de=void 0,Me=0;Me<l.length&&(de=l[Me],!(de.to>F&&de.from<=F));Me++);if(de.to>=oe)return a(p,d,g,b,S,A,j);a(p,d.slice(0,de.to-F),g,b,null,A,j),b=null,d=d.slice(de.to-F),F=de.to}}}function ws(a,l,p,d){var g=!d&&p.widgetNode;g&&a.map.push(a.pos,a.pos+l,g),!d&&a.cm.display.input.needsContentAttribute&&(g||(g=a.content.appendChild(document.createElement("span"))),g.setAttribute("cm-marker",p.id)),g&&(a.cm.display.input.setUneditable(g),a.content.appendChild(g)),a.pos+=l,a.trailingSpace=!1}function _s(a,l,p){var d=a.markedSpans,g=a.text,b=0;if(!d){for(var S=1;S<p.length;S+=2)l.addToken(l,g.slice(b,b=p[S]),ys(p[S+1],l.cm.options));return}for(var A=g.length,j=0,F=1,oe="",de,Me,Oe=0,ze,Je,lt,mt,Ct;;){if(Oe==j){ze=Je=lt=Me="",Ct=null,mt=null,Oe=1/0;for(var yt=[],Tt=void 0,zt=0;zt<d.length;++zt){var Nt=d[zt],Qt=Nt.marker;if(Qt.type=="bookmark"&&Nt.from==j&&Qt.widgetNode)yt.push(Qt);else if(Nt.from<=j&&(Nt.to==null||Nt.to>j||Qt.collapsed&&Nt.to==j&&Nt.from==j)){if(Nt.to!=null&&Nt.to!=j&&Oe>Nt.to&&(Oe=Nt.to,Je=""),Qt.className&&(ze+=" "+Qt.className),Qt.css&&(Me=(Me?Me+";":"")+Qt.css),Qt.startStyle&&Nt.from==j&&(lt+=" "+Qt.startStyle),Qt.endStyle&&Nt.to==Oe&&(Tt||(Tt=[])).push(Qt.endStyle,Nt.to),Qt.title&&((Ct||(Ct={})).title=Qt.title),Qt.attributes)for(var Sn in Qt.attributes)(Ct||(Ct={}))[Sn]=Qt.attributes[Sn];Qt.collapsed&&(!mt||Ci(mt.marker,Qt)<0)&&(mt=Nt)}else Nt.from>j&&Oe>Nt.from&&(Oe=Nt.from)}if(Tt)for(var wr=0;wr<Tt.length;wr+=2)Tt[wr+1]==Oe&&(Je+=" "+Tt[wr]);if(!mt||mt.from==j)for(var Vn=0;Vn<yt.length;++Vn)ws(l,0,yt[Vn]);if(mt&&(mt.from||0)==j){if(ws(l,(mt.to==null?A+1:mt.to)-j,mt.marker,mt.from==null),mt.to==null)return;mt.to==j&&(mt=!1)}}if(j>=A)break;for(var jo=Math.min(A,Oe);;){if(oe){var ho=j+oe.length;if(!mt){var rr=ho>jo?oe.slice(0,jo-j):oe;l.addToken(l,rr,de?de+ze:ze,lt,j+rr.length==Oe?Je:"",Me,Ct)}if(ho>=jo){oe=oe.slice(jo-j),j=jo;break}j=ho,lt=""}oe=g.slice(b,b=p[F++]),de=ys(p[F++],l.cm.options)}}}function $i(a,l,p){this.line=l,this.rest=vr(l),this.size=this.rest?qt(Mt(this.rest))-p+1:1,this.node=this.text=null,this.hidden=Ir(a,l)}function Mo(a,l,p){for(var d=[],g,b=l;b<p;b=g){var S=new $i(a.doc,xt(a.doc,b),b);g=b+S.size,d.push(S)}return d}var Do=null;function sl(a){Do?Do.ops.push(a):a.ownsGroup=Do={ops:[a],delayedCallbacks:[]}}function ll(a){var l=a.delayedCallbacks,p=0;do{for(;p<l.length;p++)l[p].call(null);for(var d=0;d<a.ops.length;d++){var g=a.ops[d];if(g.cursorActivityHandlers)for(;g.cursorActivityCalled<g.cursorActivityHandlers.length;)g.cursorActivityHandlers[g.cursorActivityCalled++].call(null,g.cm)}}while(p<l.length)}function ka(a,l){var p=a.ownsGroup;if(p)try{ll(p)}finally{Do=null,l(p)}}var Oi=null;function wn(a,l){var p=Be(a,l);if(p.length){var d=Array.prototype.slice.call(arguments,2),g;Do?g=Do.delayedCallbacks:Oi?g=Oi:(g=Oi=[],setTimeout(Ki,0));for(var b=function(A){g.push(function(){return p[A].apply(null,d)})},S=0;S<p.length;++S)b(S)}}function Ki(){var a=Oi;Oi=null;for(var l=0;l<a.length;++l)a[l]()}function ci(a,l,p,d){for(var g=0;g<l.changes.length;g++){var b=l.changes[g];b=="text"?xs(a,l):b=="gutter"?Xi(a,l,p,d):b=="class"?Yi(a,l):b=="widget"&&la(a,l,d)}l.changes=null}function Gi(a){return a.node==a.text&&(a.node=te("div",null,null,"position: relative"),a.text.parentNode&&a.text.parentNode.replaceChild(a.node,a.text),a.node.appendChild(a.text),u&&c<8&&(a.node.style.zIndex=2)),a.node}function ul(a,l){var p=l.bgClass?l.bgClass+" "+(l.line.bgClass||""):l.line.bgClass;if(p&&(p+=" CodeMirror-linebackground"),l.background)p?l.background.className=p:(l.background.parentNode.removeChild(l.background),l.background=null);else if(p){var d=Gi(l);l.background=d.insertBefore(te("div",null,p),d.firstChild),a.display.input.setUneditable(l.background)}}function bs(a,l){var p=a.display.externalMeasured;return p&&p.line==l.line?(a.display.externalMeasured=null,l.measure=p.measure,p.built):Ea(a,l)}function xs(a,l){var p=l.text.className,d=bs(a,l);l.text==l.node&&(l.node=d.pre),l.text.parentNode.replaceChild(d.pre,l.text),l.text=d.pre,d.bgClass!=l.bgClass||d.textClass!=l.textClass?(l.bgClass=d.bgClass,l.textClass=d.textClass,Yi(a,l)):p&&(l.text.className=p)}function Yi(a,l){ul(a,l),l.line.wrapClass?Gi(l).className=l.line.wrapClass:l.node!=l.text&&(l.node.className="");var p=l.textClass?l.textClass+" "+(l.line.textClass||""):l.line.textClass;l.text.className=p||""}function Xi(a,l,p,d){if(l.gutter&&(l.node.removeChild(l.gutter),l.gutter=null),l.gutterBackground&&(l.node.removeChild(l.gutterBackground),l.gutterBackground=null),l.line.gutterClass){var g=Gi(l);l.gutterBackground=te("div",null,"CodeMirror-gutter-background "+l.line.gutterClass,"left: "+(a.options.fixedGutter?d.fixedPos:-d.gutterTotalWidth)+"px; width: "+d.gutterTotalWidth+"px"),a.display.input.setUneditable(l.gutterBackground),g.insertBefore(l.gutterBackground,l.text)}var b=l.line.gutterMarkers;if(a.options.lineNumbers||b){var S=Gi(l),A=l.gutter=te("div",null,"CodeMirror-gutter-wrapper","left: "+(a.options.fixedGutter?d.fixedPos:-d.gutterTotalWidth)+"px");if(A.setAttribute("aria-hidden","true"),a.display.input.setUneditable(A),S.insertBefore(A,l.text),l.line.gutterClass&&(A.className+=" "+l.line.gutterClass),a.options.lineNumbers&&(!b||!b["CodeMirror-linenumbers"])&&(l.lineNumber=A.appendChild(te("div",Wr(a.options,p),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+d.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+a.display.lineNumInnerWidth+"px"))),b)for(var j=0;j<a.display.gutterSpecs.length;++j){var F=a.display.gutterSpecs[j].className,oe=b.hasOwnProperty(F)&&b[F];oe&&A.appendChild(te("div",[oe],"CodeMirror-gutter-elt","left: "+d.gutterLeft[F]+"px; width: "+d.gutterWidth[F]+"px"))}}}function la(a,l,p){l.alignable&&(l.alignable=null);for(var d=ne("CodeMirror-linewidget"),g=l.node.firstChild,b=void 0;g;g=b)b=g.nextSibling,d.test(g.className)&&l.node.removeChild(g);fi(a,l,p)}function cl(a,l,p,d){var g=bs(a,l);return l.text=l.node=g.pre,g.bgClass&&(l.bgClass=g.bgClass),g.textClass&&(l.textClass=g.textClass),Yi(a,l),Xi(a,l,p,d),fi(a,l,d),l.node}function fi(a,l,p){if(Cs(a,l.line,l,p,!0),l.rest)for(var d=0;d<l.rest.length;d++)Cs(a,l.rest[d],l,p,!1)}function Cs(a,l,p,d,g){if(l.widgets)for(var b=Gi(p),S=0,A=l.widgets;S<A.length;++S){var j=A[S],F=te("div",[j.node],"CodeMirror-linewidget"+(j.className?" "+j.className:""));j.handleMouseEvents||F.setAttribute("cm-ignore-events","true"),fl(j,F,p,d),a.display.input.setUneditable(F),g&&j.above?b.insertBefore(F,p.gutter||p.text):b.appendChild(F),wn(j,"redraw")}}function fl(a,l,p,d){if(a.noHScroll){(p.alignable||(p.alignable=[])).push(l);var g=d.wrapperWidth;l.style.left=d.fixedPos+"px",a.coverGutter||(g-=d.gutterTotalWidth,l.style.paddingLeft=d.gutterTotalWidth+"px"),l.style.width=g+"px"}a.coverGutter&&(l.style.zIndex=5,l.style.position="relative",a.noHScroll||(l.style.marginLeft=-d.gutterTotalWidth+"px"))}function Ti(a){if(a.height!=null)return a.height;var l=a.doc.cm;if(!l)return 0;if(!R(document.body,a.node)){var p="position: relative;";a.coverGutter&&(p+="margin-left: -"+l.display.gutters.offsetWidth+"px;"),a.noHScroll&&(p+="width: "+l.display.wrapper.clientWidth+"px;"),W(l.display.measure,te("div",[a.node],null,p))}return a.height=a.node.parentNode.offsetHeight}function Er(a,l){for(var p=ve(l);p!=a.wrapper;p=p.parentNode)if(!p||p.nodeType==1&&p.getAttribute("cm-ignore-events")=="true"||p.parentNode==a.sizer&&p!=a.mover)return!0}function Nr(a){return a.lineSpace.offsetTop}function qi(a){return a.mover.offsetHeight-a.lineSpace.offsetHeight}function Aa(a){if(a.cachedPaddingH)return a.cachedPaddingH;var l=W(a.measure,te("pre","x","CodeMirror-line-like")),p=window.getComputedStyle?window.getComputedStyle(l):l.currentStyle,d={left:parseInt(p.paddingLeft),right:parseInt(p.paddingRight)};return!isNaN(d.left)&&!isNaN(d.right)&&(a.cachedPaddingH=d),d}function Yr(a){return Te-a.display.nativeBarWidth}function Ei(a){return a.display.scroller.clientWidth-Yr(a)-a.display.barWidth}function I(a){return a.display.scroller.clientHeight-Yr(a)-a.display.barHeight}function $(a,l,p){var d=a.options.lineWrapping,g=d&&Ei(a);if(!l.measure.heights||d&&l.measure.width!=g){var b=l.measure.heights=[];if(d){l.measure.width=g;for(var S=l.text.firstChild.getClientRects(),A=0;A<S.length-1;A++){var j=S[A],F=S[A+1];Math.abs(j.bottom-F.bottom)>2&&b.push((j.bottom+F.top)/2-p.top)}}b.push(p.bottom-p.top)}}function ce(a,l,p){if(a.line==l)return{map:a.measure.map,cache:a.measure.cache};for(var d=0;d<a.rest.length;d++)if(a.rest[d]==l)return{map:a.measure.maps[d],cache:a.measure.caches[d]};for(var g=0;g<a.rest.length;g++)if(qt(a.rest[g])>p)return{map:a.measure.maps[g],cache:a.measure.caches[g],before:!0}}function ye(a,l){l=En(l);var p=qt(l),d=a.display.externalMeasured=new $i(a.doc,l,p);d.lineN=p;var g=d.built=Ea(a,d);return d.text=g.pre,W(a.display.lineMeasure,g.pre),d}function Ae(a,l,p,d){return ft(a,Ge(a,l),p,d)}function Pe(a,l){if(l>=a.display.viewFrom&&l<a.display.viewTo)return a.display.view[Os(a,l)];var p=a.display.externalMeasured;if(p&&l>=p.lineN&&l<p.lineN+p.size)return p}function Ge(a,l){var p=qt(l),d=Pe(a,p);d&&!d.text?d=null:d&&d.changes&&(ci(a,d,p,Xo(a)),a.curOp.forceUpdate=!0),d||(d=ye(a,l));var g=ce(d,l,p);return{line:l,view:d,rect:null,map:g.map,cache:g.cache,before:g.before,hasHeights:!1}}function ft(a,l,p,d,g){l.before&&(p=-1);var b=p+(d||""),S;return l.cache.hasOwnProperty(b)?S=l.cache[b]:(l.rect||(l.rect=l.view.text.getBoundingClientRect()),l.hasHeights||($(a,l.view,l.rect),l.hasHeights=!0),S=O(a,l,p,d),S.bogus||(l.cache[b]=S)),{left:S.left,right:S.right,top:g?S.rtop:S.top,bottom:g?S.rbottom:S.bottom}}var w={left:0,right:0,top:0,bottom:0};function y(a,l,p){for(var d,g,b,S,A,j,F=0;F<a.length;F+=3)if(A=a[F],j=a[F+1],l<A?(g=0,b=1,S="left"):l<j?(g=l-A,b=g+1):(F==a.length-3||l==j&&a[F+3]>l)&&(b=j-A,g=b-1,l>=j&&(S="right")),g!=null){if(d=a[F+2],A==j&&p==(d.insertLeft?"left":"right")&&(S=p),p=="left"&&g==0)for(;F&&a[F-2]==a[F-3]&&a[F-1].insertLeft;)d=a[(F-=3)+2],S="left";if(p=="right"&&g==j-A)for(;F<a.length-3&&a[F+3]==a[F+4]&&!a[F+5].insertLeft;)d=a[(F+=3)+2],S="right";break}return{node:d,start:g,end:b,collapse:S,coverStart:A,coverEnd:j}}function x(a,l){var p=w;if(l=="left")for(var d=0;d<a.length&&(p=a[d]).left==p.right;d++);else for(var g=a.length-1;g>=0&&(p=a[g]).left==p.right;g--);return p}function O(a,l,p,d){var g=y(l.map,p,d),b=g.node,S=g.start,A=g.end,j=g.collapse,F;if(b.nodeType==3){for(var oe=0;oe<4;oe++){for(;S&&se(l.line.text.charAt(g.coverStart+S));)--S;for(;g.coverStart+A<g.coverEnd&&se(l.line.text.charAt(g.coverStart+A));)++A;if(u&&c<9&&S==0&&A==g.coverEnd-g.coverStart?F=b.parentNode.getBoundingClientRect():F=x(ge(b,S,A).getClientRects(),d),F.left||F.right||S==0)break;A=S,S=S-1,j="right"}u&&c<11&&(F=M(a.display.measure,F))}else{S>0&&(j=d="right");var de;a.options.lineWrapping&&(de=b.getClientRects()).length>1?F=de[d=="right"?de.length-1:0]:F=b.getBoundingClientRect()}if(u&&c<9&&!S&&(!F||!F.left&&!F.right)){var Me=b.parentNode.getClientRects()[0];Me?F={left:Me.left,right:Me.left+Pr(a.display),top:Me.top,bottom:Me.bottom}:F=w}for(var Oe=F.top-l.rect.top,ze=F.bottom-l.rect.top,Je=(Oe+ze)/2,lt=l.view.measure.heights,mt=0;mt<lt.length-1&&!(Je<lt[mt]);mt++);var Ct=mt?lt[mt-1]:0,yt=lt[mt],Tt={left:(j=="right"?F.right:F.left)-l.rect.left,right:(j=="left"?F.left:F.right)-l.rect.left,top:Ct,bottom:yt};return!F.left&&!F.right&&(Tt.bogus=!0),a.options.singleCursorHeightPerLine||(Tt.rtop=Oe,Tt.rbottom=ze),Tt}function M(a,l){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!Pn(a))return l;var p=screen.logicalXDPI/screen.deviceXDPI,d=screen.logicalYDPI/screen.deviceYDPI;return{left:l.left*p,right:l.right*p,top:l.top*d,bottom:l.bottom*d}}function N(a){if(a.measure&&(a.measure.cache={},a.measure.heights=null,a.rest))for(var l=0;l<a.rest.length;l++)a.measure.caches[l]={}}function K(a){a.display.externalMeasure=null,Y(a.display.lineMeasure);for(var l=0;l<a.display.view.length;l++)N(a.display.view[l])}function Z(a){K(a),a.display.cachedCharWidth=a.display.cachedTextHeight=a.display.cachedPaddingH=null,a.options.lineWrapping||(a.display.maxLineChanged=!0),a.display.lineNumChars=null}function ie(){return v&&P?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Ce(){return v&&P?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function le(a){var l=0;if(a.widgets)for(var p=0;p<a.widgets.length;++p)a.widgets[p].above&&(l+=Ti(a.widgets[p]));return l}function De(a,l,p,d,g){if(!g){var b=le(l);p.top+=b,p.bottom+=b}if(d=="line")return p;d||(d="local");var S=tr(l);if(d=="local"?S+=Nr(a.display):S-=a.display.viewOffset,d=="page"||d=="window"){var A=a.display.lineSpace.getBoundingClientRect();S+=A.top+(d=="window"?0:Ce());var j=A.left+(d=="window"?0:ie());p.left+=j,p.right+=j}return p.top+=S,p.bottom+=S,p}function Ue(a,l,p){if(p=="div")return l;var d=l.left,g=l.top;if(p=="page")d-=ie(),g-=Ce();else if(p=="local"||!p){var b=a.display.sizer.getBoundingClientRect();d+=b.left,g+=b.top}var S=a.display.lineSpace.getBoundingClientRect();return{left:d-S.left,top:g-S.top}}function at(a,l,p,d,g){return d||(d=xt(a.doc,l.line)),De(a,d,Ae(a,d,l.ch,g),p)}function Qe(a,l,p,d,g,b){d=d||xt(a.doc,l.line),g||(g=Ge(a,d));function S(ze,Je){var lt=ft(a,g,ze,Je?"right":"left",b);return Je?lt.left=lt.right:lt.right=lt.left,De(a,d,lt,p)}var A=z(d,a.doc.direction),j=l.ch,F=l.sticky;if(j>=d.text.length?(j=d.text.length,F="before"):j<=0&&(j=0,F="after"),!A)return S(F=="before"?j-1:j,F=="before");function oe(ze,Je,lt){var mt=A[Je],Ct=mt.level==1;return S(lt?ze-1:ze,Ct!=lt)}var de=X(A,j,F),Me=ot,Oe=oe(j,de,F=="before");return Me!=null&&(Oe.other=oe(j,Me,F!="before")),Oe}function dt(a,l){var p=0;l=it(a.doc,l),a.options.lineWrapping||(p=Pr(a.display)*l.ch);var d=xt(a.doc,l.line),g=tr(d)+Nr(a.display);return{left:p,right:p,top:g,bottom:g+d.height}}function Et(a,l,p,d,g){var b=Ze(a,l,p);return b.xRel=g,d&&(b.outside=d),b}function St(a,l,p){var d=a.doc;if(p+=a.display.viewOffset,p<0)return Et(d.first,0,null,-1,-1);var g=fn(d,p),b=d.first+d.size-1;if(g>b)return Et(d.first+d.size-1,xt(d,b).text.length,null,1,1);l<0&&(l=0);for(var S=xt(d,g);;){var A=Wt(a,S,g,l,p),j=en(S,A.ch+(A.xRel>0||A.outside>0?1:0));if(!j)return A;var F=j.find(1);if(F.line==g)return F;S=xt(d,g=F.line)}}function It(a,l,p,d){d-=le(l);var g=l.text.length,b=et(function(S){return ft(a,p,S-1).bottom<=d},g,0);return g=et(function(S){return ft(a,p,S).top>d},b,g),{begin:b,end:g}}function Xt(a,l,p,d){p||(p=Ge(a,l));var g=De(a,l,ft(a,p,d),"line").top;return It(a,l,p,g)}function nn(a,l,p,d){return a.bottom<=p?!1:a.top>p?!0:(d?a.left:a.right)>l}function Wt(a,l,p,d,g){g-=tr(l);var b=Ge(a,l),S=le(l),A=0,j=l.text.length,F=!0,oe=z(l,a.doc.direction);if(oe){var de=(a.options.lineWrapping?Rr:Zt)(a,l,p,b,oe,d,g);F=de.level!=1,A=F?de.from:de.to-1,j=F?de.to:de.from-1}var Me=null,Oe=null,ze=et(function(zt){var Nt=ft(a,b,zt);return Nt.top+=S,Nt.bottom+=S,nn(Nt,d,g,!1)?(Nt.top<=g&&Nt.left<=d&&(Me=zt,Oe=Nt),!0):!1},A,j),Je,lt,mt=!1;if(Oe){var Ct=d-Oe.left<Oe.right-d,yt=Ct==F;ze=Me+(yt?0:1),lt=yt?"after":"before",Je=Ct?Oe.left:Oe.right}else{!F&&(ze==j||ze==A)&&ze++,lt=ze==0?"after":ze==l.text.length?"before":ft(a,b,ze-(F?1:0)).bottom+S<=g==F?"after":"before";var Tt=Qe(a,Ze(p,ze,lt),"line",l,b);Je=Tt.left,mt=g<Tt.top?-1:g>=Tt.bottom?1:0}return ze=ae(l.text,ze,1),Et(p,ze,lt,mt,d-Je)}function Zt(a,l,p,d,g,b,S){var A=et(function(de){var Me=g[de],Oe=Me.level!=1;return nn(Qe(a,Ze(p,Oe?Me.to:Me.from,Oe?"before":"after"),"line",l,d),b,S,!0)},0,g.length-1),j=g[A];if(A>0){var F=j.level!=1,oe=Qe(a,Ze(p,F?j.from:j.to,F?"after":"before"),"line",l,d);nn(oe,b,S,!0)&&oe.top>S&&(j=g[A-1])}return j}function Rr(a,l,p,d,g,b,S){var A=It(a,l,d,S),j=A.begin,F=A.end;/\s/.test(l.text.charAt(F-1))&&F--;for(var oe=null,de=null,Me=0;Me<g.length;Me++){var Oe=g[Me];if(!(Oe.from>=F||Oe.to<=j)){var ze=Oe.level!=1,Je=ft(a,d,ze?Math.min(F,Oe.to)-1:Math.max(j,Oe.from)).right,lt=Je<b?b-Je+1e9:Je-b;(!oe||de>lt)&&(oe=Oe,de=lt)}}return oe||(oe=g[g.length-1]),oe.from<j&&(oe={from:j,to:oe.to,level:oe.level}),oe.to>F&&(oe={from:oe.from,to:F,level:oe.level}),oe}var dn;function ur(a){if(a.cachedTextHeight!=null)return a.cachedTextHeight;if(dn==null){dn=te("pre",null,"CodeMirror-line-like");for(var l=0;l<49;++l)dn.appendChild(document.createTextNode("x")),dn.appendChild(te("br"));dn.appendChild(document.createTextNode("x"))}W(a.measure,dn);var p=dn.offsetHeight/50;return p>3&&(a.cachedTextHeight=p),Y(a.measure),p||1}function Pr(a){if(a.cachedCharWidth!=null)return a.cachedCharWidth;var l=te("span","xxxxxxxxxx"),p=te("pre",[l],"CodeMirror-line-like");W(a.measure,p);var d=l.getBoundingClientRect(),g=(d.right-d.left)/10;return g>2&&(a.cachedCharWidth=g),g||10}function Xo(a){for(var l=a.display,p={},d={},g=l.gutters.clientLeft,b=l.gutters.firstChild,S=0;b;b=b.nextSibling,++S){var A=a.display.gutterSpecs[S].className;p[A]=b.offsetLeft+b.clientLeft+g,d[A]=b.clientWidth}return{fixedPos:Ma(l),gutterTotalWidth:l.gutters.offsetWidth,gutterLeft:p,gutterWidth:d,wrapperWidth:l.wrapper.clientWidth}}function Ma(a){return a.scroller.getBoundingClientRect().left-a.sizer.getBoundingClientRect().left}function Da(a){var l=ur(a.display),p=a.options.lineWrapping,d=p&&Math.max(5,a.display.scroller.clientWidth/Pr(a.display)-3);return function(g){if(Ir(a.doc,g))return 0;var b=0;if(g.widgets)for(var S=0;S<g.widgets.length;S++)g.widgets[S].height&&(b+=g.widgets[S].height);return p?b+(Math.ceil(g.text.length/d)||1)*l:b+l}}function sh(a){var l=a.doc,p=Da(a);l.iter(function(d){var g=p(d);g!=d.height&&er(d,g)})}function Ss(a,l,p,d){var g=a.display;if(!p&&ve(l).getAttribute("cm-not-content")=="true")return null;var b,S,A=g.lineSpace.getBoundingClientRect();try{b=l.clientX-A.left,S=l.clientY-A.top}catch{return null}var j=St(a,b,S),F;if(d&&j.xRel>0&&(F=xt(a.doc,j.line).text).length==j.ch){var oe=rt(F,F.length,a.options.tabSize)-F.length;j=Ze(j.line,Math.max(0,Math.round((b-Aa(a.display).left)/Pr(a.display))-oe))}return j}function Os(a,l){if(l>=a.display.viewTo||(l-=a.display.viewFrom,l<0))return null;for(var p=a.display.view,d=0;d<p.length;d++)if(l-=p[d].size,l<0)return d}function fo(a,l,p,d){l==null&&(l=a.doc.first),p==null&&(p=a.doc.first+a.doc.size),d||(d=0);var g=a.display;if(d&&p<g.viewTo&&(g.updateLineNumbers==null||g.updateLineNumbers>l)&&(g.updateLineNumbers=l),a.curOp.viewChanged=!0,l>=g.viewTo)qn&&co(a.doc,l)<g.viewTo&&ja(a);else if(p<=g.viewFrom)qn&&gr(a.doc,p+d)>g.viewFrom?ja(a):(g.viewFrom+=d,g.viewTo+=d);else if(l<=g.viewFrom&&p>=g.viewTo)ja(a);else if(l<=g.viewFrom){var b=lf(a,p,p+d,1);b?(g.view=g.view.slice(b.index),g.viewFrom=b.lineN,g.viewTo+=d):ja(a)}else if(p>=g.viewTo){var S=lf(a,l,l,-1);S?(g.view=g.view.slice(0,S.index),g.viewTo=S.lineN):ja(a)}else{var A=lf(a,l,l,-1),j=lf(a,p,p+d,1);A&&j?(g.view=g.view.slice(0,A.index).concat(Mo(a,A.lineN,j.lineN)).concat(g.view.slice(j.index)),g.viewTo+=d):ja(a)}var F=g.externalMeasured;F&&(p<F.lineN?F.lineN+=d:l<F.lineN+F.size&&(g.externalMeasured=null))}function La(a,l,p){a.curOp.viewChanged=!0;var d=a.display,g=a.display.externalMeasured;if(g&&l>=g.lineN&&l<g.lineN+g.size&&(d.externalMeasured=null),!(l<d.viewFrom||l>=d.viewTo)){var b=d.view[Os(a,l)];if(b.node!=null){var S=b.changes||(b.changes=[]);_t(S,p)==-1&&S.push(p)}}}function ja(a){a.display.viewFrom=a.display.viewTo=a.doc.first,a.display.view=[],a.display.viewOffset=0}function lf(a,l,p,d){var g=Os(a,l),b,S=a.display.view;if(!qn||p==a.doc.first+a.doc.size)return{index:g,lineN:p};for(var A=a.display.viewFrom,j=0;j<g;j++)A+=S[j].size;if(A!=l){if(d>0){if(g==S.length-1)return null;b=A+S[g].size-l,g++}else b=A-l;l+=b,p+=b}for(;co(a.doc,p)!=p;){if(g==(d<0?0:S.length-1))return null;p+=d*S[g-(d<0?1:0)].size,g+=d}return{index:g,lineN:p}}function x1(a,l,p){var d=a.display,g=d.view;g.length==0||l>=d.viewTo||p<=d.viewFrom?(d.view=Mo(a,l,p),d.viewFrom=l):(d.viewFrom>l?d.view=Mo(a,l,d.viewFrom).concat(d.view):d.viewFrom<l&&(d.view=d.view.slice(Os(a,l))),d.viewFrom=l,d.viewTo<p?d.view=d.view.concat(Mo(a,d.viewTo,p)):d.viewTo>p&&(d.view=d.view.slice(0,Os(a,p)))),d.viewTo=p}function my(a){for(var l=a.display.view,p=0,d=0;d<l.length;d++){var g=l[d];!g.hidden&&(!g.node||g.changes)&&++p}return p}function xu(a){a.display.input.showSelection(a.display.input.prepareSelection())}function yy(a,l){l===void 0&&(l=!0);for(var p=a.doc,d={},g=d.cursors=document.createDocumentFragment(),b=d.selection=document.createDocumentFragment(),S=0;S<p.sel.ranges.length;S++)if(!(!l&&S==p.sel.primIndex)){var A=p.sel.ranges[S];if(!(A.from().line>=a.display.viewTo||A.to().line<a.display.viewFrom)){var j=A.empty();(j||a.options.showCursorWhenSelecting)&&wy(a,A.head,g),j||C1(a,A,b)}}return d}function wy(a,l,p){var d=Qe(a,l,"div",null,null,!a.options.singleCursorHeightPerLine),g=p.appendChild(te("div"," ","CodeMirror-cursor"));if(g.style.left=d.left+"px",g.style.top=d.top+"px",g.style.height=Math.max(0,d.bottom-d.top)*a.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(a.getWrapperElement().className)){var b=at(a,l,"div",null,null);b.right-b.left>0&&(g.style.width=b.right-b.left+"px")}if(d.other){var S=p.appendChild(te("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));S.style.display="",S.style.left=d.other.left+"px",S.style.top=d.other.top+"px",S.style.height=(d.other.bottom-d.other.top)*.85+"px"}}function uf(a,l){return a.top-l.top||a.left-l.left}function C1(a,l,p){var d=a.display,g=a.doc,b=document.createDocumentFragment(),S=Aa(a.display),A=S.left,j=Math.max(d.sizerWidth,Ei(a)-d.sizer.offsetLeft)-S.right,F=g.direction=="ltr";function oe(yt,Tt,zt,Nt){Tt<0&&(Tt=0),Tt=Math.round(Tt),Nt=Math.round(Nt),b.appendChild(te("div",null,"CodeMirror-selected","position: absolute; left: "+yt+`px;
                             top: `+Tt+"px; width: "+(zt??j-yt)+`px;
                             height: `+(Nt-Tt)+"px"))}function de(yt,Tt,zt){var Nt=xt(g,yt),Qt=Nt.text.length,Sn,wr;function Vn(rr,vo){return at(a,Ze(yt,rr),"div",Nt,vo)}function jo(rr,vo,kr){var cr=Xt(a,Nt,null,rr),or=vo=="ltr"==(kr=="after")?"left":"right",Kn=kr=="after"?cr.begin:cr.end-(/\s/.test(Nt.text.charAt(cr.end-1))?2:1);return Vn(Kn,or)[or]}var ho=z(Nt,g.direction);return ct(ho,Tt||0,zt??Qt,function(rr,vo,kr,cr){var or=kr=="ltr",Kn=Vn(rr,or?"left":"right"),go=Vn(vo-1,or?"right":"left"),Sl=Tt==null&&rr==0,za=zt==null&&vo==Qt,Vr=cr==0,Ji=!ho||cr==ho.length-1;if(go.top-Kn.top<=3){var _r=(F?Sl:za)&&Vr,Lh=(F?za:Sl)&&Ji,ca=_r?A:(or?Kn:go).left,As=Lh?j:(or?go:Kn).right;oe(ca,Kn.top,As-ca,Kn.bottom)}else{var Ms,qr,Ol,jh;or?(Ms=F&&Sl&&Vr?A:Kn.left,qr=F?j:jo(rr,kr,"before"),Ol=F?A:jo(vo,kr,"after"),jh=F&&za&&Ji?j:go.right):(Ms=F?jo(rr,kr,"before"):A,qr=!F&&Sl&&Vr?j:Kn.right,Ol=!F&&za&&Ji?A:go.left,jh=F?jo(vo,kr,"after"):j),oe(Ms,Kn.top,qr-Ms,Kn.bottom),Kn.bottom<go.top&&oe(A,Kn.bottom,null,go.top),oe(Ol,go.top,jh-Ol,go.bottom)}(!Sn||uf(Kn,Sn)<0)&&(Sn=Kn),uf(go,Sn)<0&&(Sn=go),(!wr||uf(Kn,wr)<0)&&(wr=Kn),uf(go,wr)<0&&(wr=go)}),{start:Sn,end:wr}}var Me=l.from(),Oe=l.to();if(Me.line==Oe.line)de(Me.line,Me.ch,Oe.ch);else{var ze=xt(g,Me.line),Je=xt(g,Oe.line),lt=En(ze)==En(Je),mt=de(Me.line,Me.ch,lt?ze.text.length+1:null).end,Ct=de(Oe.line,lt?0:null,Oe.ch).start;lt&&(mt.top<Ct.top-2?(oe(mt.right,mt.top,null,mt.bottom),oe(A,Ct.top,Ct.left,Ct.bottom)):oe(mt.right,mt.top,Ct.left-mt.right,mt.bottom)),mt.bottom<Ct.top&&oe(A,mt.bottom,null,Ct.top)}p.appendChild(b)}function lh(a){if(a.state.focused){var l=a.display;clearInterval(l.blinker);var p=!0;l.cursorDiv.style.visibility="",a.options.cursorBlinkRate>0?l.blinker=setInterval(function(){a.hasFocus()||dl(a),l.cursorDiv.style.visibility=(p=!p)?"":"hidden"},a.options.cursorBlinkRate):a.options.cursorBlinkRate<0&&(l.cursorDiv.style.visibility="hidden")}}function _y(a){a.hasFocus()||(a.display.input.focus(),a.state.focused||ch(a))}function uh(a){a.state.delayingBlurEvent=!0,setTimeout(function(){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=!1,a.state.focused&&dl(a))},100)}function ch(a,l){a.state.delayingBlurEvent&&!a.state.draggingText&&(a.state.delayingBlurEvent=!1),a.options.readOnly!="nocursor"&&(a.state.focused||(st(a,"focus",a,l),a.state.focused=!0,he(a.display.wrapper,"CodeMirror-focused"),!a.curOp&&a.display.selForContextMenu!=a.doc.sel&&(a.display.input.reset(),f&&setTimeout(function(){return a.display.input.reset(!0)},20)),a.display.input.receivedFocus()),lh(a))}function dl(a,l){a.state.delayingBlurEvent||(a.state.focused&&(st(a,"blur",a,l),a.state.focused=!1,me(a.display.wrapper,"CodeMirror-focused")),clearInterval(a.display.blinker),setTimeout(function(){a.state.focused||(a.display.shift=!1)},150))}function cf(a){for(var l=a.display,p=l.lineDiv.offsetTop,d=Math.max(0,l.scroller.getBoundingClientRect().top),g=l.lineDiv.getBoundingClientRect().top,b=0,S=0;S<l.view.length;S++){var A=l.view[S],j=a.options.lineWrapping,F=void 0,oe=0;if(!A.hidden){if(g+=A.line.height,u&&c<8){var de=A.node.offsetTop+A.node.offsetHeight;F=de-p,p=de}else{var Me=A.node.getBoundingClientRect();F=Me.bottom-Me.top,!j&&A.text.firstChild&&(oe=A.text.firstChild.getBoundingClientRect().right-Me.left-1)}var Oe=A.line.height-F;if((Oe>.005||Oe<-.005)&&(g<d&&(b-=Oe),er(A.line,F),by(A.line),A.rest))for(var ze=0;ze<A.rest.length;ze++)by(A.rest[ze]);if(oe>a.display.sizerWidth){var Je=Math.ceil(oe/Pr(a.display));Je>a.display.maxLineLength&&(a.display.maxLineLength=Je,a.display.maxLine=A.line,a.display.maxLineChanged=!0)}}}Math.abs(b)>2&&(l.scroller.scrollTop+=b)}function by(a){if(a.widgets)for(var l=0;l<a.widgets.length;++l){var p=a.widgets[l],d=p.node.parentNode;d&&(p.height=d.offsetHeight)}}function ff(a,l,p){var d=p&&p.top!=null?Math.max(0,p.top):a.scroller.scrollTop;d=Math.floor(d-Nr(a));var g=p&&p.bottom!=null?p.bottom:d+a.wrapper.clientHeight,b=fn(l,d),S=fn(l,g);if(p&&p.ensure){var A=p.ensure.from.line,j=p.ensure.to.line;A<b?(b=A,S=fn(l,tr(xt(l,A))+a.wrapper.clientHeight)):Math.min(j,l.lastLine())>=S&&(b=fn(l,tr(xt(l,j))-a.wrapper.clientHeight),S=j)}return{from:b,to:Math.max(S,b+1)}}function S1(a,l){if(!ut(a,"scrollCursorIntoView")){var p=a.display,d=p.sizer.getBoundingClientRect(),g=null;if(l.top+d.top<0?g=!0:l.bottom+d.top>(window.innerHeight||document.documentElement.clientHeight)&&(g=!1),g!=null&&!T){var b=te("div","​",null,`position: absolute;
                         top: `+(l.top-p.viewOffset-Nr(a.display))+`px;
                         height: `+(l.bottom-l.top+Yr(a)+p.barHeight)+`px;
                         left: `+l.left+"px; width: "+Math.max(2,l.right-l.left)+"px;");a.display.lineSpace.appendChild(b),b.scrollIntoView(g),a.display.lineSpace.removeChild(b)}}}function O1(a,l,p,d){d==null&&(d=0);var g;!a.options.lineWrapping&&l==p&&(p=l.sticky=="before"?Ze(l.line,l.ch+1,"before"):l,l=l.ch?Ze(l.line,l.sticky=="before"?l.ch-1:l.ch,"after"):l);for(var b=0;b<5;b++){var S=!1,A=Qe(a,l),j=!p||p==l?A:Qe(a,p);g={left:Math.min(A.left,j.left),top:Math.min(A.top,j.top)-d,right:Math.max(A.left,j.left),bottom:Math.max(A.bottom,j.bottom)+d};var F=fh(a,g),oe=a.doc.scrollTop,de=a.doc.scrollLeft;if(F.scrollTop!=null&&(Su(a,F.scrollTop),Math.abs(a.doc.scrollTop-oe)>1&&(S=!0)),F.scrollLeft!=null&&(Ts(a,F.scrollLeft),Math.abs(a.doc.scrollLeft-de)>1&&(S=!0)),!S)break}return g}function T1(a,l){var p=fh(a,l);p.scrollTop!=null&&Su(a,p.scrollTop),p.scrollLeft!=null&&Ts(a,p.scrollLeft)}function fh(a,l){var p=a.display,d=ur(a.display);l.top<0&&(l.top=0);var g=a.curOp&&a.curOp.scrollTop!=null?a.curOp.scrollTop:p.scroller.scrollTop,b=I(a),S={};l.bottom-l.top>b&&(l.bottom=l.top+b);var A=a.doc.height+qi(p),j=l.top<d,F=l.bottom>A-d;if(l.top<g)S.scrollTop=j?0:l.top;else if(l.bottom>g+b){var oe=Math.min(l.top,(F?A:l.bottom)-b);oe!=g&&(S.scrollTop=oe)}var de=a.options.fixedGutter?0:p.gutters.offsetWidth,Me=a.curOp&&a.curOp.scrollLeft!=null?a.curOp.scrollLeft:p.scroller.scrollLeft-de,Oe=Ei(a)-p.gutters.offsetWidth,ze=l.right-l.left>Oe;return ze&&(l.right=l.left+Oe),l.left<10?S.scrollLeft=0:l.left<Me?S.scrollLeft=Math.max(0,l.left+de-(ze?0:10)):l.right>Oe+Me-3&&(S.scrollLeft=l.right+(ze?0:10)-Oe),S}function dh(a,l){l!=null&&(df(a),a.curOp.scrollTop=(a.curOp.scrollTop==null?a.doc.scrollTop:a.curOp.scrollTop)+l)}function pl(a){df(a);var l=a.getCursor();a.curOp.scrollToPos={from:l,to:l,margin:a.options.cursorScrollMargin}}function Cu(a,l,p){(l!=null||p!=null)&&df(a),l!=null&&(a.curOp.scrollLeft=l),p!=null&&(a.curOp.scrollTop=p)}function E1(a,l){df(a),a.curOp.scrollToPos=l}function df(a){var l=a.curOp.scrollToPos;if(l){a.curOp.scrollToPos=null;var p=dt(a,l.from),d=dt(a,l.to);xy(a,p,d,l.margin)}}function xy(a,l,p,d){var g=fh(a,{left:Math.min(l.left,p.left),top:Math.min(l.top,p.top)-d,right:Math.max(l.right,p.right),bottom:Math.max(l.bottom,p.bottom)+d});Cu(a,g.scrollLeft,g.scrollTop)}function Su(a,l){Math.abs(a.doc.scrollTop-l)<2||(t||hh(a,{top:l}),Cy(a,l,!0),t&&hh(a),Eu(a,100))}function Cy(a,l,p){l=Math.max(0,Math.min(a.display.scroller.scrollHeight-a.display.scroller.clientHeight,l)),!(a.display.scroller.scrollTop==l&&!p)&&(a.doc.scrollTop=l,a.display.scrollbars.setScrollTop(l),a.display.scroller.scrollTop!=l&&(a.display.scroller.scrollTop=l))}function Ts(a,l,p,d){l=Math.max(0,Math.min(l,a.display.scroller.scrollWidth-a.display.scroller.clientWidth)),!((p?l==a.doc.scrollLeft:Math.abs(a.doc.scrollLeft-l)<2)&&!d)&&(a.doc.scrollLeft=l,Py(a),a.display.scroller.scrollLeft!=l&&(a.display.scroller.scrollLeft=l),a.display.scrollbars.setScrollLeft(l))}function Ou(a){var l=a.display,p=l.gutters.offsetWidth,d=Math.round(a.doc.height+qi(a.display));return{clientHeight:l.scroller.clientHeight,viewHeight:l.wrapper.clientHeight,scrollWidth:l.scroller.scrollWidth,clientWidth:l.scroller.clientWidth,viewWidth:l.wrapper.clientWidth,barLeft:a.options.fixedGutter?p:0,docHeight:d,scrollHeight:d+Yr(a)+l.barHeight,nativeBarWidth:l.nativeBarWidth,gutterWidth:p}}var Es=function(a,l,p){this.cm=p;var d=this.vert=te("div",[te("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),g=this.horiz=te("div",[te("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");d.tabIndex=g.tabIndex=-1,a(d),a(g),Se(d,"scroll",function(){d.clientHeight&&l(d.scrollTop,"vertical")}),Se(g,"scroll",function(){g.clientWidth&&l(g.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,u&&c<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Es.prototype.update=function(a){var l=a.scrollWidth>a.clientWidth+1,p=a.scrollHeight>a.clientHeight+1,d=a.nativeBarWidth;if(p){this.vert.style.display="block",this.vert.style.bottom=l?d+"px":"0";var g=a.viewHeight-(l?d:0);this.vert.firstChild.style.height=Math.max(0,a.scrollHeight-a.clientHeight+g)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(l){this.horiz.style.display="block",this.horiz.style.right=p?d+"px":"0",this.horiz.style.left=a.barLeft+"px";var b=a.viewWidth-a.barLeft-(p?d:0);this.horiz.firstChild.style.width=Math.max(0,a.scrollWidth-a.clientWidth+b)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&a.clientHeight>0&&(d==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:p?d:0,bottom:l?d:0}},Es.prototype.setScrollLeft=function(a){this.horiz.scrollLeft!=a&&(this.horiz.scrollLeft=a),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Es.prototype.setScrollTop=function(a){this.vert.scrollTop!=a&&(this.vert.scrollTop=a),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Es.prototype.zeroWidthHack=function(){var a=D&&!C?"12px":"18px";this.horiz.style.height=this.vert.style.width=a,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new He,this.disableVert=new He},Es.prototype.enableZeroWidthBar=function(a,l,p){a.style.pointerEvents="auto";function d(){var g=a.getBoundingClientRect(),b=p=="vert"?document.elementFromPoint(g.right-1,(g.top+g.bottom)/2):document.elementFromPoint((g.right+g.left)/2,g.bottom-1);b!=a?a.style.pointerEvents="none":l.set(1e3,d)}l.set(1e3,d)},Es.prototype.clear=function(){var a=this.horiz.parentNode;a.removeChild(this.horiz),a.removeChild(this.vert)};var Tu=function(){};Tu.prototype.update=function(){return{bottom:0,right:0}},Tu.prototype.setScrollLeft=function(){},Tu.prototype.setScrollTop=function(){},Tu.prototype.clear=function(){};function hl(a,l){l||(l=Ou(a));var p=a.display.barWidth,d=a.display.barHeight;Sy(a,l);for(var g=0;g<4&&p!=a.display.barWidth||d!=a.display.barHeight;g++)p!=a.display.barWidth&&a.options.lineWrapping&&cf(a),Sy(a,Ou(a)),p=a.display.barWidth,d=a.display.barHeight}function Sy(a,l){var p=a.display,d=p.scrollbars.update(l);p.sizer.style.paddingRight=(p.barWidth=d.right)+"px",p.sizer.style.paddingBottom=(p.barHeight=d.bottom)+"px",p.heightForcer.style.borderBottom=d.bottom+"px solid transparent",d.right&&d.bottom?(p.scrollbarFiller.style.display="block",p.scrollbarFiller.style.height=d.bottom+"px",p.scrollbarFiller.style.width=d.right+"px"):p.scrollbarFiller.style.display="",d.bottom&&a.options.coverGutterNextToScrollbar&&a.options.fixedGutter?(p.gutterFiller.style.display="block",p.gutterFiller.style.height=d.bottom+"px",p.gutterFiller.style.width=l.gutterWidth+"px"):p.gutterFiller.style.display=""}var Oy={native:Es,null:Tu};function Ty(a){a.display.scrollbars&&(a.display.scrollbars.clear(),a.display.scrollbars.addClass&&me(a.display.wrapper,a.display.scrollbars.addClass)),a.display.scrollbars=new Oy[a.options.scrollbarStyle](function(l){a.display.wrapper.insertBefore(l,a.display.scrollbarFiller),Se(l,"mousedown",function(){a.state.focused&&setTimeout(function(){return a.display.input.focus()},0)}),l.setAttribute("cm-not-content","true")},function(l,p){p=="horizontal"?Ts(a,l):Su(a,l)},a),a.display.scrollbars.addClass&&he(a.display.wrapper,a.display.scrollbars.addClass)}var P1=0;function Ps(a){a.curOp={cm:a,viewChanged:!1,startHeight:a.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++P1,markArrays:null},sl(a.curOp)}function ks(a){var l=a.curOp;l&&ka(l,function(p){for(var d=0;d<p.ops.length;d++)p.ops[d].cm.curOp=null;k1(p)})}function k1(a){for(var l=a.ops,p=0;p<l.length;p++)A1(l[p]);for(var d=0;d<l.length;d++)M1(l[d]);for(var g=0;g<l.length;g++)D1(l[g]);for(var b=0;b<l.length;b++)L1(l[b]);for(var S=0;S<l.length;S++)j1(l[S])}function A1(a){var l=a.cm,p=l.display;N1(l),a.updateMaxLine&&Wi(l),a.mustUpdate=a.viewChanged||a.forceUpdate||a.scrollTop!=null||a.scrollToPos&&(a.scrollToPos.from.line<p.viewFrom||a.scrollToPos.to.line>=p.viewTo)||p.maxLineChanged&&l.options.lineWrapping,a.update=a.mustUpdate&&new pf(l,a.mustUpdate&&{top:a.scrollTop,ensure:a.scrollToPos},a.forceUpdate)}function M1(a){a.updatedDisplay=a.mustUpdate&&ph(a.cm,a.update)}function D1(a){var l=a.cm,p=l.display;a.updatedDisplay&&cf(l),a.barMeasure=Ou(l),p.maxLineChanged&&!l.options.lineWrapping&&(a.adjustWidthTo=Ae(l,p.maxLine,p.maxLine.text.length).left+3,l.display.sizerWidth=a.adjustWidthTo,a.barMeasure.scrollWidth=Math.max(p.scroller.clientWidth,p.sizer.offsetLeft+a.adjustWidthTo+Yr(l)+l.display.barWidth),a.maxScrollLeft=Math.max(0,p.sizer.offsetLeft+a.adjustWidthTo-Ei(l))),(a.updatedDisplay||a.selectionChanged)&&(a.preparedSelection=p.input.prepareSelection())}function L1(a){var l=a.cm;a.adjustWidthTo!=null&&(l.display.sizer.style.minWidth=a.adjustWidthTo+"px",a.maxScrollLeft<l.doc.scrollLeft&&Ts(l,Math.min(l.display.scroller.scrollLeft,a.maxScrollLeft),!0),l.display.maxLineChanged=!1);var p=a.focus&&a.focus==ke();a.preparedSelection&&l.display.input.showSelection(a.preparedSelection,p),(a.updatedDisplay||a.startHeight!=l.doc.height)&&hl(l,a.barMeasure),a.updatedDisplay&&gh(l,a.barMeasure),a.selectionChanged&&lh(l),l.state.focused&&a.updateInput&&l.display.input.reset(a.typing),p&&_y(a.cm)}function j1(a){var l=a.cm,p=l.display,d=l.doc;if(a.updatedDisplay&&Ey(l,a.update),p.wheelStartX!=null&&(a.scrollTop!=null||a.scrollLeft!=null||a.scrollToPos)&&(p.wheelStartX=p.wheelStartY=null),a.scrollTop!=null&&Cy(l,a.scrollTop,a.forceScroll),a.scrollLeft!=null&&Ts(l,a.scrollLeft,!0,!0),a.scrollToPos){var g=O1(l,it(d,a.scrollToPos.from),it(d,a.scrollToPos.to),a.scrollToPos.margin);S1(l,g)}var b=a.maybeHiddenMarkers,S=a.maybeUnhiddenMarkers;if(b)for(var A=0;A<b.length;++A)b[A].lines.length||st(b[A],"hide");if(S)for(var j=0;j<S.length;++j)S[j].lines.length&&st(S[j],"unhide");p.wrapper.offsetHeight&&(d.scrollTop=l.display.scroller.scrollTop),a.changeObjs&&st(l,"changes",l,a.changeObjs),a.update&&a.update.finish()}function Lo(a,l){if(a.curOp)return l();Ps(a);try{return l()}finally{ks(a)}}function mr(a,l){return function(){if(a.curOp)return l.apply(a,arguments);Ps(a);try{return l.apply(a,arguments)}finally{ks(a)}}}function Xr(a){return function(){if(this.curOp)return a.apply(this,arguments);Ps(this);try{return a.apply(this,arguments)}finally{ks(this)}}}function yr(a){return function(){var l=this.cm;if(!l||l.curOp)return a.apply(this,arguments);Ps(l);try{return a.apply(this,arguments)}finally{ks(l)}}}function Eu(a,l){a.doc.highlightFrontier<a.display.viewTo&&a.state.highlight.set(l,be(I1,a))}function I1(a){var l=a.doc;if(!(l.highlightFrontier>=a.display.viewTo)){var p=+new Date+a.options.workTime,d=Ko(a,l.highlightFrontier),g=[];l.iter(d.line,Math.min(l.first+l.size,a.display.viewTo+500),function(b){if(d.line>=a.display.viewFrom){var S=b.styles,A=b.text.length>a.options.maxHighlightLength?$n(l.mode,d.state):null,j=hr(a,b,d,!0);A&&(d.state=A),b.styles=j.styles;var F=b.styleClasses,oe=j.classes;oe?b.styleClasses=oe:F&&(b.styleClasses=null);for(var de=!S||S.length!=b.styles.length||F!=oe&&(!F||!oe||F.bgClass!=oe.bgClass||F.textClass!=oe.textClass),Me=0;!de&&Me<S.length;++Me)de=S[Me]!=b.styles[Me];de&&g.push(d.line),b.stateAfter=d.save(),d.nextLine()}else b.text.length<=a.options.maxHighlightLength&&To(a,b.text,d),b.stateAfter=d.line%5==0?d.save():null,d.nextLine();if(+new Date>p)return Eu(a,a.options.workDelay),!0}),l.highlightFrontier=d.line,l.modeFrontier=Math.max(l.modeFrontier,d.line),g.length&&Lo(a,function(){for(var b=0;b<g.length;b++)La(a,g[b],"text")})}}var pf=function(a,l,p){var d=a.display;this.viewport=l,this.visible=ff(d,a.doc,l),this.editorIsHidden=!d.wrapper.offsetWidth,this.wrapperHeight=d.wrapper.clientHeight,this.wrapperWidth=d.wrapper.clientWidth,this.oldDisplayWidth=Ei(a),this.force=p,this.dims=Xo(a),this.events=[]};pf.prototype.signal=function(a,l){Ht(a,l)&&this.events.push(arguments)},pf.prototype.finish=function(){for(var a=0;a<this.events.length;a++)st.apply(null,this.events[a])};function N1(a){var l=a.display;!l.scrollbarsClipped&&l.scroller.offsetWidth&&(l.nativeBarWidth=l.scroller.offsetWidth-l.scroller.clientWidth,l.heightForcer.style.height=Yr(a)+"px",l.sizer.style.marginBottom=-l.nativeBarWidth+"px",l.sizer.style.borderRightWidth=Yr(a)+"px",l.scrollbarsClipped=!0)}function R1(a){if(a.hasFocus())return null;var l=ke();if(!l||!R(a.display.lineDiv,l))return null;var p={activeElt:l};if(window.getSelection){var d=window.getSelection();d.anchorNode&&d.extend&&R(a.display.lineDiv,d.anchorNode)&&(p.anchorNode=d.anchorNode,p.anchorOffset=d.anchorOffset,p.focusNode=d.focusNode,p.focusOffset=d.focusOffset)}return p}function F1(a){if(!(!a||!a.activeElt||a.activeElt==ke())&&(a.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(a.activeElt.nodeName)&&a.anchorNode&&R(document.body,a.anchorNode)&&R(document.body,a.focusNode))){var l=window.getSelection(),p=document.createRange();p.setEnd(a.anchorNode,a.anchorOffset),p.collapse(!1),l.removeAllRanges(),l.addRange(p),l.extend(a.focusNode,a.focusOffset)}}function ph(a,l){var p=a.display,d=a.doc;if(l.editorIsHidden)return ja(a),!1;if(!l.force&&l.visible.from>=p.viewFrom&&l.visible.to<=p.viewTo&&(p.updateLineNumbers==null||p.updateLineNumbers>=p.viewTo)&&p.renderedView==p.view&&my(a)==0)return!1;ky(a)&&(ja(a),l.dims=Xo(a));var g=d.first+d.size,b=Math.max(l.visible.from-a.options.viewportMargin,d.first),S=Math.min(g,l.visible.to+a.options.viewportMargin);p.viewFrom<b&&b-p.viewFrom<20&&(b=Math.max(d.first,p.viewFrom)),p.viewTo>S&&p.viewTo-S<20&&(S=Math.min(g,p.viewTo)),qn&&(b=co(a.doc,b),S=gr(a.doc,S));var A=b!=p.viewFrom||S!=p.viewTo||p.lastWrapHeight!=l.wrapperHeight||p.lastWrapWidth!=l.wrapperWidth;x1(a,b,S),p.viewOffset=tr(xt(a.doc,p.viewFrom)),a.display.mover.style.top=p.viewOffset+"px";var j=my(a);if(!A&&j==0&&!l.force&&p.renderedView==p.view&&(p.updateLineNumbers==null||p.updateLineNumbers>=p.viewTo))return!1;var F=R1(a);return j>4&&(p.lineDiv.style.display="none"),V1(a,p.updateLineNumbers,l.dims),j>4&&(p.lineDiv.style.display=""),p.renderedView=p.view,F1(F),Y(p.cursorDiv),Y(p.selectionDiv),p.gutters.style.height=p.sizer.style.minHeight=0,A&&(p.lastWrapHeight=l.wrapperHeight,p.lastWrapWidth=l.wrapperWidth,Eu(a,400)),p.updateLineNumbers=null,!0}function Ey(a,l){for(var p=l.viewport,d=!0;;d=!1){if(!d||!a.options.lineWrapping||l.oldDisplayWidth==Ei(a)){if(p&&p.top!=null&&(p={top:Math.min(a.doc.height+qi(a.display)-I(a),p.top)}),l.visible=ff(a.display,a.doc,p),l.visible.from>=a.display.viewFrom&&l.visible.to<=a.display.viewTo)break}else d&&(l.visible=ff(a.display,a.doc,p));if(!ph(a,l))break;cf(a);var g=Ou(a);xu(a),hl(a,g),gh(a,g),l.force=!1}l.signal(a,"update",a),(a.display.viewFrom!=a.display.reportedViewFrom||a.display.viewTo!=a.display.reportedViewTo)&&(l.signal(a,"viewportChange",a,a.display.viewFrom,a.display.viewTo),a.display.reportedViewFrom=a.display.viewFrom,a.display.reportedViewTo=a.display.viewTo)}function hh(a,l){var p=new pf(a,l);if(ph(a,p)){cf(a),Ey(a,p);var d=Ou(a);xu(a),hl(a,d),gh(a,d),p.finish()}}function V1(a,l,p){var d=a.display,g=a.options.lineNumbers,b=d.lineDiv,S=b.firstChild;function A(ze){var Je=ze.nextSibling;return f&&D&&a.display.currentWheelTarget==ze?ze.style.display="none":ze.parentNode.removeChild(ze),Je}for(var j=d.view,F=d.viewFrom,oe=0;oe<j.length;oe++){var de=j[oe];if(!de.hidden)if(!de.node||de.node.parentNode!=b){var Me=cl(a,de,F,p);b.insertBefore(Me,S)}else{for(;S!=de.node;)S=A(S);var Oe=g&&l!=null&&l<=F&&de.lineNumber;de.changes&&(_t(de.changes,"gutter")>-1&&(Oe=!1),ci(a,de,F,p)),Oe&&(Y(de.lineNumber),de.lineNumber.appendChild(document.createTextNode(Wr(a.options,F)))),S=de.node.nextSibling}F+=de.size}for(;S;)S=A(S)}function vh(a){var l=a.gutters.offsetWidth;a.sizer.style.marginLeft=l+"px",wn(a,"gutterChanged",a)}function gh(a,l){a.display.sizer.style.minHeight=l.docHeight+"px",a.display.heightForcer.style.top=l.docHeight+"px",a.display.gutters.style.height=l.docHeight+a.display.barHeight+Yr(a)+"px"}function Py(a){var l=a.display,p=l.view;if(!(!l.alignWidgets&&(!l.gutters.firstChild||!a.options.fixedGutter))){for(var d=Ma(l)-l.scroller.scrollLeft+a.doc.scrollLeft,g=l.gutters.offsetWidth,b=d+"px",S=0;S<p.length;S++)if(!p[S].hidden){a.options.fixedGutter&&(p[S].gutter&&(p[S].gutter.style.left=b),p[S].gutterBackground&&(p[S].gutterBackground.style.left=b));var A=p[S].alignable;if(A)for(var j=0;j<A.length;j++)A[j].style.left=b}a.options.fixedGutter&&(l.gutters.style.left=d+g+"px")}}function ky(a){if(!a.options.lineNumbers)return!1;var l=a.doc,p=Wr(a.options,l.first+l.size-1),d=a.display;if(p.length!=d.lineNumChars){var g=d.measure.appendChild(te("div",[te("div",p)],"CodeMirror-linenumber CodeMirror-gutter-elt")),b=g.firstChild.offsetWidth,S=g.offsetWidth-b;return d.lineGutter.style.width="",d.lineNumInnerWidth=Math.max(b,d.lineGutter.offsetWidth-S)+1,d.lineNumWidth=d.lineNumInnerWidth+S,d.lineNumChars=d.lineNumInnerWidth?p.length:-1,d.lineGutter.style.width=d.lineNumWidth+"px",vh(a.display),!0}return!1}function mh(a,l){for(var p=[],d=!1,g=0;g<a.length;g++){var b=a[g],S=null;if(typeof b!="string"&&(S=b.style,b=b.className),b=="CodeMirror-linenumbers")if(l)d=!0;else continue;p.push({className:b,style:S})}return l&&!d&&p.push({className:"CodeMirror-linenumbers",style:null}),p}function Ay(a){var l=a.gutters,p=a.gutterSpecs;Y(l),a.lineGutter=null;for(var d=0;d<p.length;++d){var g=p[d],b=g.className,S=g.style,A=l.appendChild(te("div",null,"CodeMirror-gutter "+b));S&&(A.style.cssText=S),b=="CodeMirror-linenumbers"&&(a.lineGutter=A,A.style.width=(a.lineNumWidth||1)+"px")}l.style.display=p.length?"":"none",vh(a)}function Pu(a){Ay(a.display),fo(a),Py(a)}function z1(a,l,p,d){var g=this;this.input=p,g.scrollbarFiller=te("div",null,"CodeMirror-scrollbar-filler"),g.scrollbarFiller.setAttribute("cm-not-content","true"),g.gutterFiller=te("div",null,"CodeMirror-gutter-filler"),g.gutterFiller.setAttribute("cm-not-content","true"),g.lineDiv=q("div",null,"CodeMirror-code"),g.selectionDiv=te("div",null,null,"position: relative; z-index: 1"),g.cursorDiv=te("div",null,"CodeMirror-cursors"),g.measure=te("div",null,"CodeMirror-measure"),g.lineMeasure=te("div",null,"CodeMirror-measure"),g.lineSpace=q("div",[g.measure,g.lineMeasure,g.selectionDiv,g.cursorDiv,g.lineDiv],null,"position: relative; outline: none");var b=q("div",[g.lineSpace],"CodeMirror-lines");g.mover=te("div",[b],null,"position: relative"),g.sizer=te("div",[g.mover],"CodeMirror-sizer"),g.sizerWidth=null,g.heightForcer=te("div",null,null,"position: absolute; height: "+Te+"px; width: 1px;"),g.gutters=te("div",null,"CodeMirror-gutters"),g.lineGutter=null,g.scroller=te("div",[g.sizer,g.heightForcer,g.gutters],"CodeMirror-scroll"),g.scroller.setAttribute("tabIndex","-1"),g.wrapper=te("div",[g.scrollbarFiller,g.gutterFiller,g.scroller],"CodeMirror"),g.wrapper.setAttribute("translate","no"),u&&c<8&&(g.gutters.style.zIndex=-1,g.scroller.style.paddingRight=0),!f&&!(t&&L)&&(g.scroller.draggable=!0),a&&(a.appendChild?a.appendChild(g.wrapper):a(g.wrapper)),g.viewFrom=g.viewTo=l.first,g.reportedViewFrom=g.reportedViewTo=l.first,g.view=[],g.renderedView=null,g.externalMeasured=null,g.viewOffset=0,g.lastWrapHeight=g.lastWrapWidth=0,g.updateLineNumbers=null,g.nativeBarWidth=g.barHeight=g.barWidth=0,g.scrollbarsClipped=!1,g.lineNumWidth=g.lineNumInnerWidth=g.lineNumChars=null,g.alignWidgets=!1,g.cachedCharWidth=g.cachedTextHeight=g.cachedPaddingH=null,g.maxLine=null,g.maxLineLength=0,g.maxLineChanged=!1,g.wheelDX=g.wheelDY=g.wheelStartX=g.wheelStartY=null,g.shift=!1,g.selForContextMenu=null,g.activeTouch=null,g.gutterSpecs=mh(d.gutters,d.lineNumbers),Ay(g),p.init(g)}var hf=0,qo=null;u?qo=-.53:t?qo=15:v?qo=-.7:_&&(qo=-1/3);function My(a){var l=a.wheelDeltaX,p=a.wheelDeltaY;return l==null&&a.detail&&a.axis==a.HORIZONTAL_AXIS&&(l=a.detail),p==null&&a.detail&&a.axis==a.VERTICAL_AXIS?p=a.detail:p==null&&(p=a.wheelDelta),{x:l,y:p}}function H1(a){var l=My(a);return l.x*=qo,l.y*=qo,l}function Dy(a,l){var p=My(l),d=p.x,g=p.y,b=a.display,S=b.scroller,A=S.scrollWidth>S.clientWidth,j=S.scrollHeight>S.clientHeight;if(d&&A||g&&j){if(g&&D&&f){e:for(var F=l.target,oe=b.view;F!=S;F=F.parentNode)for(var de=0;de<oe.length;de++)if(oe[de].node==F){a.display.currentWheelTarget=F;break e}}if(d&&!t&&!m&&qo!=null){g&&j&&Su(a,Math.max(0,S.scrollTop+g*qo)),Ts(a,Math.max(0,S.scrollLeft+d*qo)),(!g||g&&j)&&Kt(l),b.wheelStartX=null;return}if(g&&qo!=null){var Me=g*qo,Oe=a.doc.scrollTop,ze=Oe+b.wrapper.clientHeight;Me<0?Oe=Math.max(0,Oe+Me-50):ze=Math.min(a.doc.height,ze+Me+50),hh(a,{top:Oe,bottom:ze})}hf<20&&(b.wheelStartX==null?(b.wheelStartX=S.scrollLeft,b.wheelStartY=S.scrollTop,b.wheelDX=d,b.wheelDY=g,setTimeout(function(){if(b.wheelStartX!=null){var Je=S.scrollLeft-b.wheelStartX,lt=S.scrollTop-b.wheelStartY,mt=lt&&b.wheelDY&&lt/b.wheelDY||Je&&b.wheelDX&&Je/b.wheelDX;b.wheelStartX=b.wheelStartY=null,mt&&(qo=(qo*hf+mt)/(hf+1),++hf)}},200)):(b.wheelDX+=d,b.wheelDY+=g))}}var Jo=function(a,l){this.ranges=a,this.primIndex=l};Jo.prototype.primary=function(){return this.ranges[this.primIndex]},Jo.prototype.equals=function(a){if(a==this)return!0;if(a.primIndex!=this.primIndex||a.ranges.length!=this.ranges.length)return!1;for(var l=0;l<this.ranges.length;l++){var p=this.ranges[l],d=a.ranges[l];if(!io(p.anchor,d.anchor)||!io(p.head,d.head))return!1}return!0},Jo.prototype.deepCopy=function(){for(var a=[],l=0;l<this.ranges.length;l++)a[l]=new pn(B(this.ranges[l].anchor),B(this.ranges[l].head));return new Jo(a,this.primIndex)},Jo.prototype.somethingSelected=function(){for(var a=0;a<this.ranges.length;a++)if(!this.ranges[a].empty())return!0;return!1},Jo.prototype.contains=function(a,l){l||(l=a);for(var p=0;p<this.ranges.length;p++){var d=this.ranges[p];if(jt(l,d.from())>=0&&jt(a,d.to())<=0)return p}return-1};var pn=function(a,l){this.anchor=a,this.head=l};pn.prototype.from=function(){return Ve(this.anchor,this.head)},pn.prototype.to=function(){return ue(this.anchor,this.head)},pn.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function Pi(a,l,p){var d=a&&a.options.selectionsMayTouch,g=l[p];l.sort(function(Me,Oe){return jt(Me.from(),Oe.from())}),p=_t(l,g);for(var b=1;b<l.length;b++){var S=l[b],A=l[b-1],j=jt(A.to(),S.from());if(d&&!S.empty()?j>0:j>=0){var F=Ve(A.from(),S.from()),oe=ue(A.to(),S.to()),de=A.empty()?S.from()==S.head:A.from()==A.head;b<=p&&--p,l.splice(--b,2,new pn(de?oe:F,de?F:oe))}}return new Jo(l,p)}function Ia(a,l){return new Jo([new pn(a,l||a)],0)}function Na(a){return a.text?Ze(a.from.line+a.text.length-1,Mt(a.text).length+(a.text.length==1?a.from.ch:0)):a.to}function Ly(a,l){if(jt(a,l.from)<0)return a;if(jt(a,l.to)<=0)return Na(l);var p=a.line+l.text.length-(l.to.line-l.from.line)-1,d=a.ch;return a.line==l.to.line&&(d+=Na(l).ch-l.to.ch),Ze(p,d)}function yh(a,l){for(var p=[],d=0;d<a.sel.ranges.length;d++){var g=a.sel.ranges[d];p.push(new pn(Ly(g.anchor,l),Ly(g.head,l)))}return Pi(a.cm,p,a.sel.primIndex)}function jy(a,l,p){return a.line==l.line?Ze(p.line,a.ch-l.ch+p.ch):Ze(p.line+(a.line-l.line),a.ch)}function U1(a,l,p){for(var d=[],g=Ze(a.first,0),b=g,S=0;S<l.length;S++){var A=l[S],j=jy(A.from,g,b),F=jy(Na(A),g,b);if(g=A.to,b=F,p=="around"){var oe=a.sel.ranges[S],de=jt(oe.head,oe.anchor)<0;d[S]=new pn(de?F:j,de?j:F)}else d[S]=new pn(j,j)}return new Jo(d,a.sel.primIndex)}function wh(a){a.doc.mode=Ft(a.options,a.doc.modeOption),ku(a)}function ku(a){a.doc.iter(function(l){l.stateAfter&&(l.stateAfter=null),l.styles&&(l.styles=null)}),a.doc.modeFrontier=a.doc.highlightFrontier=a.doc.first,Eu(a,100),a.state.modeGen++,a.curOp&&fo(a)}function Iy(a,l){return l.from.ch==0&&l.to.ch==0&&Mt(l.text)==""&&(!a.cm||a.cm.options.wholeLineUpdateBefore)}function _h(a,l,p,d){function g(Ct){return p?p[Ct]:null}function b(Ct,yt,Tt){gs(Ct,yt,Tt,d),wn(Ct,"change",Ct,l)}function S(Ct,yt){for(var Tt=[],zt=Ct;zt<yt;++zt)Tt.push(new nr(F[zt],g(zt),d));return Tt}var A=l.from,j=l.to,F=l.text,oe=xt(a,A.line),de=xt(a,j.line),Me=Mt(F),Oe=g(F.length-1),ze=j.line-A.line;if(l.full)a.insert(0,S(0,F.length)),a.remove(F.length,a.size-F.length);else if(Iy(a,l)){var Je=S(0,F.length-1);b(de,de.text,Oe),ze&&a.remove(A.line,ze),Je.length&&a.insert(A.line,Je)}else if(oe==de)if(F.length==1)b(oe,oe.text.slice(0,A.ch)+Me+oe.text.slice(j.ch),Oe);else{var lt=S(1,F.length-1);lt.push(new nr(Me+oe.text.slice(j.ch),Oe,d)),b(oe,oe.text.slice(0,A.ch)+F[0],g(0)),a.insert(A.line+1,lt)}else if(F.length==1)b(oe,oe.text.slice(0,A.ch)+F[0]+de.text.slice(j.ch),g(0)),a.remove(A.line+1,ze);else{b(oe,oe.text.slice(0,A.ch)+F[0],g(0)),b(de,Me+de.text.slice(j.ch),Oe);var mt=S(1,F.length-1);ze>1&&a.remove(A.line+1,ze-1),a.insert(A.line+1,mt)}wn(a,"change",a,l)}function Ra(a,l,p){function d(g,b,S){if(g.linked)for(var A=0;A<g.linked.length;++A){var j=g.linked[A];if(j.doc!=b){var F=S&&j.sharedHist;p&&!F||(l(j.doc,F),d(j.doc,g,F))}}}d(a,null,!0)}function Ny(a,l){if(l.cm)throw new Error("This document is already in use.");a.doc=l,l.cm=a,sh(a),wh(a),Ry(a),a.options.direction=l.direction,a.options.lineWrapping||Wi(a),a.options.mode=l.modeOption,fo(a)}function Ry(a){(a.doc.direction=="rtl"?he:me)(a.display.lineDiv,"CodeMirror-rtl")}function B1(a){Lo(a,function(){Ry(a),fo(a)})}function vf(a){this.done=[],this.undone=[],this.undoDepth=a?a.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=a?a.maxGeneration:1}function bh(a,l){var p={from:B(l.from),to:Na(l),text:Qn(a,l.from,l.to)};return zy(a,p,l.from.line,l.to.line+1),Ra(a,function(d){return zy(d,p,l.from.line,l.to.line+1)},!0),p}function Fy(a){for(;a.length;){var l=Mt(a);if(l.ranges)a.pop();else break}}function W1(a,l){if(l)return Fy(a.done),Mt(a.done);if(a.done.length&&!Mt(a.done).ranges)return Mt(a.done);if(a.done.length>1&&!a.done[a.done.length-2].ranges)return a.done.pop(),Mt(a.done)}function Vy(a,l,p,d){var g=a.history;g.undone.length=0;var b=+new Date,S,A;if((g.lastOp==d||g.lastOrigin==l.origin&&l.origin&&(l.origin.charAt(0)=="+"&&g.lastModTime>b-(a.cm?a.cm.options.historyEventDelay:500)||l.origin.charAt(0)=="*"))&&(S=W1(g,g.lastOp==d)))A=Mt(S.changes),jt(l.from,l.to)==0&&jt(l.from,A.to)==0?A.to=Na(l):S.changes.push(bh(a,l));else{var j=Mt(g.done);for((!j||!j.ranges)&&gf(a.sel,g.done),S={changes:[bh(a,l)],generation:g.generation},g.done.push(S);g.done.length>g.undoDepth;)g.done.shift(),g.done[0].ranges||g.done.shift()}g.done.push(p),g.generation=++g.maxGeneration,g.lastModTime=g.lastSelTime=b,g.lastOp=g.lastSelOp=d,g.lastOrigin=g.lastSelOrigin=l.origin,A||st(a,"historyAdded")}function $1(a,l,p,d){var g=l.charAt(0);return g=="*"||g=="+"&&p.ranges.length==d.ranges.length&&p.somethingSelected()==d.somethingSelected()&&new Date-a.history.lastSelTime<=(a.cm?a.cm.options.historyEventDelay:500)}function K1(a,l,p,d){var g=a.history,b=d&&d.origin;p==g.lastSelOp||b&&g.lastSelOrigin==b&&(g.lastModTime==g.lastSelTime&&g.lastOrigin==b||$1(a,b,Mt(g.done),l))?g.done[g.done.length-1]=l:gf(l,g.done),g.lastSelTime=+new Date,g.lastSelOrigin=b,g.lastSelOp=p,d&&d.clearRedo!==!1&&Fy(g.undone)}function gf(a,l){var p=Mt(l);p&&p.ranges&&p.equals(a)||l.push(a)}function zy(a,l,p,d){var g=l["spans_"+a.id],b=0;a.iter(Math.max(a.first,p),Math.min(a.first+a.size,d),function(S){S.markedSpans&&((g||(g=l["spans_"+a.id]={}))[b]=S.markedSpans),++b})}function G1(a){if(!a)return null;for(var l,p=0;p<a.length;++p)a[p].marker.explicitlyCleared?l||(l=a.slice(0,p)):l&&l.push(a[p]);return l?l.length?l:null:a}function Y1(a,l){var p=l["spans_"+a.id];if(!p)return null;for(var d=[],g=0;g<l.text.length;++g)d.push(G1(p[g]));return d}function Hy(a,l){var p=Y1(a,l),d=Ao(a,l);if(!p)return d;if(!d)return p;for(var g=0;g<p.length;++g){var b=p[g],S=d[g];if(b&&S)e:for(var A=0;A<S.length;++A){for(var j=S[A],F=0;F<b.length;++F)if(b[F].marker==j.marker)continue e;b.push(j)}else S&&(p[g]=S)}return p}function vl(a,l,p){for(var d=[],g=0;g<a.length;++g){var b=a[g];if(b.ranges){d.push(p?Jo.prototype.deepCopy.call(b):b);continue}var S=b.changes,A=[];d.push({changes:A});for(var j=0;j<S.length;++j){var F=S[j],oe=void 0;if(A.push({from:F.from,to:F.to,text:F.text}),l)for(var de in F)(oe=de.match(/^spans_(\d+)$/))&&_t(l,Number(oe[1]))>-1&&(Mt(A)[de]=F[de],delete F[de])}}return d}function xh(a,l,p,d){if(d){var g=a.anchor;if(p){var b=jt(l,g)<0;b!=jt(p,g)<0?(g=l,l=p):b!=jt(l,p)<0&&(l=p)}return new pn(g,l)}else return new pn(p||l,l)}function mf(a,l,p,d,g){g==null&&(g=a.cm&&(a.cm.display.shift||a.extend)),Fr(a,new Jo([xh(a.sel.primary(),l,p,g)],0),d)}function Uy(a,l,p){for(var d=[],g=a.cm&&(a.cm.display.shift||a.extend),b=0;b<a.sel.ranges.length;b++)d[b]=xh(a.sel.ranges[b],l[b],null,g);var S=Pi(a.cm,d,a.sel.primIndex);Fr(a,S,p)}function Ch(a,l,p,d){var g=a.sel.ranges.slice(0);g[l]=p,Fr(a,Pi(a.cm,g,a.sel.primIndex),d)}function By(a,l,p,d){Fr(a,Ia(l,p),d)}function X1(a,l,p){var d={ranges:l.ranges,update:function(g){this.ranges=[];for(var b=0;b<g.length;b++)this.ranges[b]=new pn(it(a,g[b].anchor),it(a,g[b].head))},origin:p&&p.origin};return st(a,"beforeSelectionChange",a,d),a.cm&&st(a.cm,"beforeSelectionChange",a.cm,d),d.ranges!=l.ranges?Pi(a.cm,d.ranges,d.ranges.length-1):l}function Wy(a,l,p){var d=a.history.done,g=Mt(d);g&&g.ranges?(d[d.length-1]=l,yf(a,l,p)):Fr(a,l,p)}function Fr(a,l,p){yf(a,l,p),K1(a,a.sel,a.cm?a.cm.curOp.id:NaN,p)}function yf(a,l,p){(Ht(a,"beforeSelectionChange")||a.cm&&Ht(a.cm,"beforeSelectionChange"))&&(l=X1(a,l,p));var d=p&&p.bias||(jt(l.primary().head,a.sel.primary().head)<0?-1:1);$y(a,Gy(a,l,d,!0)),!(p&&p.scroll===!1)&&a.cm&&a.cm.getOption("readOnly")!="nocursor"&&pl(a.cm)}function $y(a,l){l.equals(a.sel)||(a.sel=l,a.cm&&(a.cm.curOp.updateInput=1,a.cm.curOp.selectionChanged=!0,Ot(a.cm)),wn(a,"cursorActivity",a))}function Ky(a){$y(a,Gy(a,a.sel,null,!1))}function Gy(a,l,p,d){for(var g,b=0;b<l.ranges.length;b++){var S=l.ranges[b],A=l.ranges.length==a.sel.ranges.length&&a.sel.ranges[b],j=wf(a,S.anchor,A&&A.anchor,p,d),F=wf(a,S.head,A&&A.head,p,d);(g||j!=S.anchor||F!=S.head)&&(g||(g=l.ranges.slice(0,b)),g[b]=new pn(j,F))}return g?Pi(a.cm,g,l.primIndex):l}function gl(a,l,p,d,g){var b=xt(a,l.line);if(b.markedSpans)for(var S=0;S<b.markedSpans.length;++S){var A=b.markedSpans[S],j=A.marker,F="selectLeft"in j?!j.selectLeft:j.inclusiveLeft,oe="selectRight"in j?!j.selectRight:j.inclusiveRight;if((A.from==null||(F?A.from<=l.ch:A.from<l.ch))&&(A.to==null||(oe?A.to>=l.ch:A.to>l.ch))){if(g&&(st(j,"beforeCursorEnter"),j.explicitlyCleared))if(b.markedSpans){--S;continue}else break;if(!j.atomic)continue;if(p){var de=j.find(d<0?1:-1),Me=void 0;if((d<0?oe:F)&&(de=Yy(a,de,-d,de&&de.line==l.line?b:null)),de&&de.line==l.line&&(Me=jt(de,p))&&(d<0?Me<0:Me>0))return gl(a,de,l,d,g)}var Oe=j.find(d<0?-1:1);return(d<0?F:oe)&&(Oe=Yy(a,Oe,d,Oe.line==l.line?b:null)),Oe?gl(a,Oe,l,d,g):null}}return l}function wf(a,l,p,d,g){var b=d||1,S=gl(a,l,p,b,g)||!g&&gl(a,l,p,b,!0)||gl(a,l,p,-b,g)||!g&&gl(a,l,p,-b,!0);return S||(a.cantEdit=!0,Ze(a.first,0))}function Yy(a,l,p,d){return p<0&&l.ch==0?l.line>a.first?it(a,Ze(l.line-1)):null:p>0&&l.ch==(d||xt(a,l.line)).text.length?l.line<a.first+a.size-1?Ze(l.line+1,0):null:new Ze(l.line,l.ch+p)}function Xy(a){a.setSelection(Ze(a.firstLine(),0),Ze(a.lastLine()),Ye)}function qy(a,l,p){var d={canceled:!1,from:l.from,to:l.to,text:l.text,origin:l.origin,cancel:function(){return d.canceled=!0}};return p&&(d.update=function(g,b,S,A){g&&(d.from=it(a,g)),b&&(d.to=it(a,b)),S&&(d.text=S),A!==void 0&&(d.origin=A)}),st(a,"beforeChange",a,d),a.cm&&st(a.cm,"beforeChange",a.cm,d),d.canceled?(a.cm&&(a.cm.curOp.updateInput=2),null):{from:d.from,to:d.to,text:d.text,origin:d.origin}}function ml(a,l,p){if(a.cm){if(!a.cm.curOp)return mr(a.cm,ml)(a,l,p);if(a.cm.state.suppressEdits)return}if(!((Ht(a,"beforeChange")||a.cm&&Ht(a.cm,"beforeChange"))&&(l=qy(a,l,!0),!l))){var d=Rn&&!p&&Kr(a,l.from,l.to);if(d)for(var g=d.length-1;g>=0;--g)Jy(a,{from:d[g].from,to:d[g].to,text:g?[""]:l.text,origin:l.origin});else Jy(a,l)}}function Jy(a,l){if(!(l.text.length==1&&l.text[0]==""&&jt(l.from,l.to)==0)){var p=yh(a,l);Vy(a,l,p,a.cm?a.cm.curOp.id:NaN),Au(a,l,p,Ao(a,l));var d=[];Ra(a,function(g,b){!b&&_t(d,g.history)==-1&&(t0(g.history,l),d.push(g.history)),Au(g,l,null,Ao(g,l))})}}function _f(a,l,p){var d=a.cm&&a.cm.state.suppressEdits;if(!(d&&!p)){for(var g=a.history,b,S=a.sel,A=l=="undo"?g.done:g.undone,j=l=="undo"?g.undone:g.done,F=0;F<A.length&&(b=A[F],!(p?b.ranges&&!b.equals(a.sel):!b.ranges));F++);if(F!=A.length){for(g.lastOrigin=g.lastSelOrigin=null;;)if(b=A.pop(),b.ranges){if(gf(b,j),p&&!b.equals(a.sel)){Fr(a,b,{clearRedo:!1});return}S=b}else if(d){A.push(b);return}else break;var oe=[];gf(S,j),j.push({changes:oe,generation:g.generation}),g.generation=b.generation||++g.maxGeneration;for(var de=Ht(a,"beforeChange")||a.cm&&Ht(a.cm,"beforeChange"),Me=function(Je){var lt=b.changes[Je];if(lt.origin=l,de&&!qy(a,lt,!1))return A.length=0,{};oe.push(bh(a,lt));var mt=Je?yh(a,lt):Mt(A);Au(a,lt,mt,Hy(a,lt)),!Je&&a.cm&&a.cm.scrollIntoView({from:lt.from,to:Na(lt)});var Ct=[];Ra(a,function(yt,Tt){!Tt&&_t(Ct,yt.history)==-1&&(t0(yt.history,lt),Ct.push(yt.history)),Au(yt,lt,null,Hy(yt,lt))})},Oe=b.changes.length-1;Oe>=0;--Oe){var ze=Me(Oe);if(ze)return ze.v}}}}function Zy(a,l){if(l!=0&&(a.first+=l,a.sel=new Jo(un(a.sel.ranges,function(g){return new pn(Ze(g.anchor.line+l,g.anchor.ch),Ze(g.head.line+l,g.head.ch))}),a.sel.primIndex),a.cm)){fo(a.cm,a.first,a.first-l,l);for(var p=a.cm.display,d=p.viewFrom;d<p.viewTo;d++)La(a.cm,d,"gutter")}}function Au(a,l,p,d){if(a.cm&&!a.cm.curOp)return mr(a.cm,Au)(a,l,p,d);if(l.to.line<a.first){Zy(a,l.text.length-1-(l.to.line-l.from.line));return}if(!(l.from.line>a.lastLine())){if(l.from.line<a.first){var g=l.text.length-1-(a.first-l.from.line);Zy(a,g),l={from:Ze(a.first,0),to:Ze(l.to.line+g,l.to.ch),text:[Mt(l.text)],origin:l.origin}}var b=a.lastLine();l.to.line>b&&(l={from:l.from,to:Ze(b,xt(a,b).text.length),text:[l.text[0]],origin:l.origin}),l.removed=Qn(a,l.from,l.to),p||(p=yh(a,l)),a.cm?q1(a.cm,l,d):_h(a,l,d),yf(a,p,Ye),a.cantEdit&&wf(a,Ze(a.firstLine(),0))&&(a.cantEdit=!1)}}function q1(a,l,p){var d=a.doc,g=a.display,b=l.from,S=l.to,A=!1,j=b.line;a.options.lineWrapping||(j=qt(En(xt(d,b.line))),d.iter(j,S.line+1,function(Oe){if(Oe==g.maxLine)return A=!0,!0})),d.sel.contains(l.from,l.to)>-1&&Ot(a),_h(d,l,p,Da(a)),a.options.lineWrapping||(d.iter(j,b.line+l.text.length,function(Oe){var ze=Si(Oe);ze>g.maxLineLength&&(g.maxLine=Oe,g.maxLineLength=ze,g.maxLineChanged=!0,A=!1)}),A&&(a.curOp.updateMaxLine=!0)),Hi(d,b.line),Eu(a,400);var F=l.text.length-(S.line-b.line)-1;l.full?fo(a):b.line==S.line&&l.text.length==1&&!Iy(a.doc,l)?La(a,b.line,"text"):fo(a,b.line,S.line+1,F);var oe=Ht(a,"changes"),de=Ht(a,"change");if(de||oe){var Me={from:b,to:S,text:l.text,removed:l.removed,origin:l.origin};de&&wn(a,"change",a,Me),oe&&(a.curOp.changeObjs||(a.curOp.changeObjs=[])).push(Me)}a.display.selForContextMenu=null}function yl(a,l,p,d,g){var b;d||(d=p),jt(d,p)<0&&(b=[d,p],p=b[0],d=b[1]),typeof l=="string"&&(l=a.splitLines(l)),ml(a,{from:p,to:d,text:l,origin:g})}function Qy(a,l,p,d){p<a.line?a.line+=d:l<a.line&&(a.line=l,a.ch=0)}function e0(a,l,p,d){for(var g=0;g<a.length;++g){var b=a[g],S=!0;if(b.ranges){b.copied||(b=a[g]=b.deepCopy(),b.copied=!0);for(var A=0;A<b.ranges.length;A++)Qy(b.ranges[A].anchor,l,p,d),Qy(b.ranges[A].head,l,p,d);continue}for(var j=0;j<b.changes.length;++j){var F=b.changes[j];if(p<F.from.line)F.from=Ze(F.from.line+d,F.from.ch),F.to=Ze(F.to.line+d,F.to.ch);else if(l<=F.to.line){S=!1;break}}S||(a.splice(0,g+1),g=0)}}function t0(a,l){var p=l.from.line,d=l.to.line,g=l.text.length-(d-p)-1;e0(a.done,p,d,g),e0(a.undone,p,d,g)}function Mu(a,l,p,d){var g=l,b=l;return typeof l=="number"?b=xt(a,tt(a,l)):g=qt(l),g==null?null:(d(b,g)&&a.cm&&La(a.cm,g,p),b)}function Du(a){this.lines=a,this.parent=null;for(var l=0,p=0;p<a.length;++p)a[p].parent=this,l+=a[p].height;this.height=l}Du.prototype={chunkSize:function(){return this.lines.length},removeInner:function(a,l){for(var p=a,d=a+l;p<d;++p){var g=this.lines[p];this.height-=g.height,sa(g),wn(g,"delete")}this.lines.splice(a,l)},collapse:function(a){a.push.apply(a,this.lines)},insertInner:function(a,l,p){this.height+=p,this.lines=this.lines.slice(0,a).concat(l).concat(this.lines.slice(a));for(var d=0;d<l.length;++d)l[d].parent=this},iterN:function(a,l,p){for(var d=a+l;a<d;++a)if(p(this.lines[a]))return!0}};function Lu(a){this.children=a;for(var l=0,p=0,d=0;d<a.length;++d){var g=a[d];l+=g.chunkSize(),p+=g.height,g.parent=this}this.size=l,this.height=p,this.parent=null}Lu.prototype={chunkSize:function(){return this.size},removeInner:function(a,l){this.size-=l;for(var p=0;p<this.children.length;++p){var d=this.children[p],g=d.chunkSize();if(a<g){var b=Math.min(l,g-a),S=d.height;if(d.removeInner(a,b),this.height-=S-d.height,g==b&&(this.children.splice(p--,1),d.parent=null),(l-=b)==0)break;a=0}else a-=g}if(this.size-l<25&&(this.children.length>1||!(this.children[0]instanceof Du))){var A=[];this.collapse(A),this.children=[new Du(A)],this.children[0].parent=this}},collapse:function(a){for(var l=0;l<this.children.length;++l)this.children[l].collapse(a)},insertInner:function(a,l,p){this.size+=l.length,this.height+=p;for(var d=0;d<this.children.length;++d){var g=this.children[d],b=g.chunkSize();if(a<=b){if(g.insertInner(a,l,p),g.lines&&g.lines.length>50){for(var S=g.lines.length%25+25,A=S;A<g.lines.length;){var j=new Du(g.lines.slice(A,A+=25));g.height-=j.height,this.children.splice(++d,0,j),j.parent=this}g.lines=g.lines.slice(0,S),this.maybeSpill()}break}a-=b}},maybeSpill:function(){if(!(this.children.length<=10)){var a=this;do{var l=a.children.splice(a.children.length-5,5),p=new Lu(l);if(a.parent){a.size-=p.size,a.height-=p.height;var g=_t(a.parent.children,a);a.parent.children.splice(g+1,0,p)}else{var d=new Lu(a.children);d.parent=a,a.children=[d,p],a=d}p.parent=a.parent}while(a.children.length>10);a.parent.maybeSpill()}},iterN:function(a,l,p){for(var d=0;d<this.children.length;++d){var g=this.children[d],b=g.chunkSize();if(a<b){var S=Math.min(l,b-a);if(g.iterN(a,S,p))return!0;if((l-=S)==0)break;a=0}else a-=b}}};var ju=function(a,l,p){if(p)for(var d in p)p.hasOwnProperty(d)&&(this[d]=p[d]);this.doc=a,this.node=l};ju.prototype.clear=function(){var a=this.doc.cm,l=this.line.widgets,p=this.line,d=qt(p);if(!(d==null||!l)){for(var g=0;g<l.length;++g)l[g]==this&&l.splice(g--,1);l.length||(p.widgets=null);var b=Ti(this);er(p,Math.max(0,p.height-b)),a&&(Lo(a,function(){n0(a,p,-b),La(a,d,"widget")}),wn(a,"lineWidgetCleared",a,this,d))}},ju.prototype.changed=function(){var a=this,l=this.height,p=this.doc.cm,d=this.line;this.height=null;var g=Ti(this)-l;g&&(Ir(this.doc,d)||er(d,d.height+g),p&&Lo(p,function(){p.curOp.forceUpdate=!0,n0(p,d,g),wn(p,"lineWidgetChanged",p,a,qt(d))}))},Bt(ju);function n0(a,l,p){tr(l)<(a.curOp&&a.curOp.scrollTop||a.doc.scrollTop)&&dh(a,p)}function J1(a,l,p,d){var g=new ju(a,p,d),b=a.cm;return b&&g.noHScroll&&(b.display.alignWidgets=!0),Mu(a,l,"widget",function(S){var A=S.widgets||(S.widgets=[]);if(g.insertAt==null?A.push(g):A.splice(Math.min(A.length,Math.max(0,g.insertAt)),0,g),g.line=S,b&&!Ir(a,S)){var j=tr(S)<a.scrollTop;er(S,S.height+Ti(g)),j&&dh(b,g.height),b.curOp.forceUpdate=!0}return!0}),b&&wn(b,"lineWidgetAdded",b,g,typeof l=="number"?l:qt(l)),g}var r0=0,Fa=function(a,l){this.lines=[],this.type=l,this.doc=a,this.id=++r0};Fa.prototype.clear=function(){if(!this.explicitlyCleared){var a=this.doc.cm,l=a&&!a.curOp;if(l&&Ps(a),Ht(this,"clear")){var p=this.find();p&&wn(this,"clear",p.from,p.to)}for(var d=null,g=null,b=0;b<this.lines.length;++b){var S=this.lines[b],A=Tr(S.markedSpans,this);a&&!this.collapsed?La(a,qt(S),"text"):a&&(A.to!=null&&(g=qt(S)),A.from!=null&&(d=qt(S))),S.markedSpans=Fn(S.markedSpans,A),A.from==null&&this.collapsed&&!Ir(this.doc,S)&&a&&er(S,ur(a.display))}if(a&&this.collapsed&&!a.options.lineWrapping)for(var j=0;j<this.lines.length;++j){var F=En(this.lines[j]),oe=Si(F);oe>a.display.maxLineLength&&(a.display.maxLine=F,a.display.maxLineLength=oe,a.display.maxLineChanged=!0)}d!=null&&a&&this.collapsed&&fo(a,d,g+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,a&&Ky(a.doc)),a&&wn(a,"markerCleared",a,this,d,g),l&&ks(a),this.parent&&this.parent.clear()}},Fa.prototype.find=function(a,l){a==null&&this.type=="bookmark"&&(a=1);for(var p,d,g=0;g<this.lines.length;++g){var b=this.lines[g],S=Tr(b.markedSpans,this);if(S.from!=null&&(p=Ze(l?b:qt(b),S.from),a==-1))return p;if(S.to!=null&&(d=Ze(l?b:qt(b),S.to),a==1))return d}return p&&{from:p,to:d}},Fa.prototype.changed=function(){var a=this,l=this.find(-1,!0),p=this,d=this.doc.cm;!l||!d||Lo(d,function(){var g=l.line,b=qt(l.line),S=Pe(d,b);if(S&&(N(S),d.curOp.selectionChanged=d.curOp.forceUpdate=!0),d.curOp.updateMaxLine=!0,!Ir(p.doc,g)&&p.height!=null){var A=p.height;p.height=null;var j=Ti(p)-A;j&&er(g,g.height+j)}wn(d,"markerChanged",d,a)})},Fa.prototype.attachLine=function(a){if(!this.lines.length&&this.doc.cm){var l=this.doc.cm.curOp;(!l.maybeHiddenMarkers||_t(l.maybeHiddenMarkers,this)==-1)&&(l.maybeUnhiddenMarkers||(l.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(a)},Fa.prototype.detachLine=function(a){if(this.lines.splice(_t(this.lines,a),1),!this.lines.length&&this.doc.cm){var l=this.doc.cm.curOp;(l.maybeHiddenMarkers||(l.maybeHiddenMarkers=[])).push(this)}},Bt(Fa);function wl(a,l,p,d,g){if(d&&d.shared)return Z1(a,l,p,d,g);if(a.cm&&!a.cm.curOp)return mr(a.cm,wl)(a,l,p,d,g);var b=new Fa(a,g),S=jt(l,p);if(d&&Re(d,b,!1),S>0||S==0&&b.clearWhenEmpty!==!1)return b;if(b.replacedWith&&(b.collapsed=!0,b.widgetNode=q("span",[b.replacedWith],"CodeMirror-widget"),d.handleMouseEvents||b.widgetNode.setAttribute("cm-ignore-events","true"),d.insertLeft&&(b.widgetNode.insertLeft=!0)),b.collapsed){if(Vt(a,l.line,l,p,b)||l.line!=p.line&&Vt(a,p.line,l,p,b))throw new Error("Inserting collapsed marker partially overlapping an existing one");$r()}b.addToHistory&&Vy(a,{from:l,to:p,origin:"markText"},a.sel,NaN);var A=l.line,j=a.cm,F;if(a.iter(A,p.line+1,function(de){j&&b.collapsed&&!j.options.lineWrapping&&En(de)==j.display.maxLine&&(F=!0),b.collapsed&&A!=l.line&&er(de,0),Ta(de,new Po(b,A==l.line?l.ch:null,A==p.line?p.ch:null),a.cm&&a.cm.curOp),++A}),b.collapsed&&a.iter(l.line,p.line+1,function(de){Ir(a,de)&&er(de,0)}),b.clearOnEnter&&Se(b,"beforeCursorEnter",function(){return b.clear()}),b.readOnly&&(aa(),(a.history.done.length||a.history.undone.length)&&a.clearHistory()),b.collapsed&&(b.id=++r0,b.atomic=!0),j){if(F&&(j.curOp.updateMaxLine=!0),b.collapsed)fo(j,l.line,p.line+1);else if(b.className||b.startStyle||b.endStyle||b.css||b.attributes||b.title)for(var oe=l.line;oe<=p.line;oe++)La(j,oe,"text");b.atomic&&Ky(j.doc),wn(j,"markerAdded",j,b)}return b}var Iu=function(a,l){this.markers=a,this.primary=l;for(var p=0;p<a.length;++p)a[p].parent=this};Iu.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var a=0;a<this.markers.length;++a)this.markers[a].clear();wn(this,"clear")}},Iu.prototype.find=function(a,l){return this.primary.find(a,l)},Bt(Iu);function Z1(a,l,p,d,g){d=Re(d),d.shared=!1;var b=[wl(a,l,p,d,g)],S=b[0],A=d.widgetNode;return Ra(a,function(j){A&&(d.widgetNode=A.cloneNode(!0)),b.push(wl(j,it(j,l),it(j,p),d,g));for(var F=0;F<j.linked.length;++F)if(j.linked[F].isParent)return;S=Mt(b)}),new Iu(b,S)}function o0(a){return a.findMarks(Ze(a.first,0),a.clipPos(Ze(a.lastLine())),function(l){return l.parent})}function Q1(a,l){for(var p=0;p<l.length;p++){var d=l[p],g=d.find(),b=a.clipPos(g.from),S=a.clipPos(g.to);if(jt(b,S)){var A=wl(a,b,S,d.primary,d.primary.type);d.markers.push(A),A.parent=d}}}function eO(a){for(var l=function(d){var g=a[d],b=[g.primary.doc];Ra(g.primary.doc,function(j){return b.push(j)});for(var S=0;S<g.markers.length;S++){var A=g.markers[S];_t(b,A.doc)==-1&&(A.parent=null,g.markers.splice(S--,1))}},p=0;p<a.length;p++)l(p)}var tO=0,po=function(a,l,p,d,g){if(!(this instanceof po))return new po(a,l,p,d,g);p==null&&(p=0),Lu.call(this,[new Du([new nr("",null)])]),this.first=p,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=p;var b=Ze(p,0);this.sel=Ia(b),this.history=new vf(null),this.id=++tO,this.modeOption=l,this.lineSep=d,this.direction=g=="rtl"?"rtl":"ltr",this.extend=!1,typeof a=="string"&&(a=this.splitLines(a)),_h(this,{from:b,to:b,text:a}),Fr(this,Ia(b),Ye)};po.prototype=E(Lu.prototype,{constructor:po,iter:function(a,l,p){p?this.iterN(a-this.first,l-a,p):this.iterN(this.first,this.first+this.size,a)},insert:function(a,l){for(var p=0,d=0;d<l.length;++d)p+=l[d].height;this.insertInner(a-this.first,l,p)},remove:function(a,l){this.removeInner(a-this.first,l)},getValue:function(a){var l=xn(this,this.first,this.first+this.size);return a===!1?l:l.join(a||this.lineSeparator())},setValue:yr(function(a){var l=Ze(this.first,0),p=this.first+this.size-1;ml(this,{from:l,to:Ze(p,xt(this,p).text.length),text:this.splitLines(a),origin:"setValue",full:!0},!0),this.cm&&Cu(this.cm,0,0),Fr(this,Ia(l),Ye)}),replaceRange:function(a,l,p,d){l=it(this,l),p=p?it(this,p):l,yl(this,a,l,p,d)},getRange:function(a,l,p){var d=Qn(this,it(this,a),it(this,l));return p===!1?d:p===""?d.join(""):d.join(p||this.lineSeparator())},getLine:function(a){var l=this.getLineHandle(a);return l&&l.text},getLineHandle:function(a){if(pr(this,a))return xt(this,a)},getLineNumber:function(a){return qt(a)},getLineHandleVisualStart:function(a){return typeof a=="number"&&(a=xt(this,a)),En(a)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(a){return it(this,a)},getCursor:function(a){var l=this.sel.primary(),p;return a==null||a=="head"?p=l.head:a=="anchor"?p=l.anchor:a=="end"||a=="to"||a===!1?p=l.to():p=l.from(),p},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:yr(function(a,l,p){By(this,it(this,typeof a=="number"?Ze(a,l||0):a),null,p)}),setSelection:yr(function(a,l,p){By(this,it(this,a),it(this,l||a),p)}),extendSelection:yr(function(a,l,p){mf(this,it(this,a),l&&it(this,l),p)}),extendSelections:yr(function(a,l){Uy(this,Jt(this,a),l)}),extendSelectionsBy:yr(function(a,l){var p=un(this.sel.ranges,a);Uy(this,Jt(this,p),l)}),setSelections:yr(function(a,l,p){if(a.length){for(var d=[],g=0;g<a.length;g++)d[g]=new pn(it(this,a[g].anchor),it(this,a[g].head||a[g].anchor));l==null&&(l=Math.min(a.length-1,this.sel.primIndex)),Fr(this,Pi(this.cm,d,l),p)}}),addSelection:yr(function(a,l,p){var d=this.sel.ranges.slice(0);d.push(new pn(it(this,a),it(this,l||a))),Fr(this,Pi(this.cm,d,d.length-1),p)}),getSelection:function(a){for(var l=this.sel.ranges,p,d=0;d<l.length;d++){var g=Qn(this,l[d].from(),l[d].to());p=p?p.concat(g):g}return a===!1?p:p.join(a||this.lineSeparator())},getSelections:function(a){for(var l=[],p=this.sel.ranges,d=0;d<p.length;d++){var g=Qn(this,p[d].from(),p[d].to());a!==!1&&(g=g.join(a||this.lineSeparator())),l[d]=g}return l},replaceSelection:function(a,l,p){for(var d=[],g=0;g<this.sel.ranges.length;g++)d[g]=a;this.replaceSelections(d,l,p||"+input")},replaceSelections:yr(function(a,l,p){for(var d=[],g=this.sel,b=0;b<g.ranges.length;b++){var S=g.ranges[b];d[b]={from:S.from(),to:S.to(),text:this.splitLines(a[b]),origin:p}}for(var A=l&&l!="end"&&U1(this,d,l),j=d.length-1;j>=0;j--)ml(this,d[j]);A?Wy(this,A):this.cm&&pl(this.cm)}),undo:yr(function(){_f(this,"undo")}),redo:yr(function(){_f(this,"redo")}),undoSelection:yr(function(){_f(this,"undo",!0)}),redoSelection:yr(function(){_f(this,"redo",!0)}),setExtending:function(a){this.extend=a},getExtending:function(){return this.extend},historySize:function(){for(var a=this.history,l=0,p=0,d=0;d<a.done.length;d++)a.done[d].ranges||++l;for(var g=0;g<a.undone.length;g++)a.undone[g].ranges||++p;return{undo:l,redo:p}},clearHistory:function(){var a=this;this.history=new vf(this.history),Ra(this,function(l){return l.history=a.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(a){return a&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(a){return this.history.generation==(a||this.cleanGeneration)},getHistory:function(){return{done:vl(this.history.done),undone:vl(this.history.undone)}},setHistory:function(a){var l=this.history=new vf(this.history);l.done=vl(a.done.slice(0),null,!0),l.undone=vl(a.undone.slice(0),null,!0)},setGutterMarker:yr(function(a,l,p){return Mu(this,a,"gutter",function(d){var g=d.gutterMarkers||(d.gutterMarkers={});return g[l]=p,!p&&xe(g)&&(d.gutterMarkers=null),!0})}),clearGutter:yr(function(a){var l=this;this.iter(function(p){p.gutterMarkers&&p.gutterMarkers[a]&&Mu(l,p,"gutter",function(){return p.gutterMarkers[a]=null,xe(p.gutterMarkers)&&(p.gutterMarkers=null),!0})})}),lineInfo:function(a){var l;if(typeof a=="number"){if(!pr(this,a)||(l=a,a=xt(this,a),!a))return null}else if(l=qt(a),l==null)return null;return{line:l,handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,bgClass:a.bgClass,wrapClass:a.wrapClass,widgets:a.widgets}},addLineClass:yr(function(a,l,p){return Mu(this,a,l=="gutter"?"gutter":"class",function(d){var g=l=="text"?"textClass":l=="background"?"bgClass":l=="gutter"?"gutterClass":"wrapClass";if(!d[g])d[g]=p;else{if(ne(p).test(d[g]))return!1;d[g]+=" "+p}return!0})}),removeLineClass:yr(function(a,l,p){return Mu(this,a,l=="gutter"?"gutter":"class",function(d){var g=l=="text"?"textClass":l=="background"?"bgClass":l=="gutter"?"gutterClass":"wrapClass",b=d[g];if(b)if(p==null)d[g]=null;else{var S=b.match(ne(p));if(!S)return!1;var A=S.index+S[0].length;d[g]=b.slice(0,S.index)+(!S.index||A==b.length?"":" ")+b.slice(A)||null}else return!1;return!0})}),addLineWidget:yr(function(a,l,p){return J1(this,a,l,p)}),removeLineWidget:function(a){a.clear()},markText:function(a,l,p){return wl(this,it(this,a),it(this,l),p,p&&p.type||"range")},setBookmark:function(a,l){var p={replacedWith:l&&(l.nodeType==null?l.widget:l),insertLeft:l&&l.insertLeft,clearWhenEmpty:!1,shared:l&&l.shared,handleMouseEvents:l&&l.handleMouseEvents};return a=it(this,a),wl(this,a,a,p,"bookmark")},findMarksAt:function(a){a=it(this,a);var l=[],p=xt(this,a.line).markedSpans;if(p)for(var d=0;d<p.length;++d){var g=p[d];(g.from==null||g.from<=a.ch)&&(g.to==null||g.to>=a.ch)&&l.push(g.marker.parent||g.marker)}return l},findMarks:function(a,l,p){a=it(this,a),l=it(this,l);var d=[],g=a.line;return this.iter(a.line,l.line+1,function(b){var S=b.markedSpans;if(S)for(var A=0;A<S.length;A++){var j=S[A];!(j.to!=null&&g==a.line&&a.ch>=j.to||j.from==null&&g!=a.line||j.from!=null&&g==l.line&&j.from>=l.ch)&&(!p||p(j.marker))&&d.push(j.marker.parent||j.marker)}++g}),d},getAllMarks:function(){var a=[];return this.iter(function(l){var p=l.markedSpans;if(p)for(var d=0;d<p.length;++d)p[d].from!=null&&a.push(p[d].marker)}),a},posFromIndex:function(a){var l,p=this.first,d=this.lineSeparator().length;return this.iter(function(g){var b=g.text.length+d;if(b>a)return l=a,!0;a-=b,++p}),it(this,Ze(p,l))},indexFromPos:function(a){a=it(this,a);var l=a.ch;if(a.line<this.first||a.ch<0)return 0;var p=this.lineSeparator().length;return this.iter(this.first,a.line,function(d){l+=d.text.length+p}),l},copy:function(a){var l=new po(xn(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return l.scrollTop=this.scrollTop,l.scrollLeft=this.scrollLeft,l.sel=this.sel,l.extend=!1,a&&(l.history.undoDepth=this.history.undoDepth,l.setHistory(this.getHistory())),l},linkedDoc:function(a){a||(a={});var l=this.first,p=this.first+this.size;a.from!=null&&a.from>l&&(l=a.from),a.to!=null&&a.to<p&&(p=a.to);var d=new po(xn(this,l,p),a.mode||this.modeOption,l,this.lineSep,this.direction);return a.sharedHist&&(d.history=this.history),(this.linked||(this.linked=[])).push({doc:d,sharedHist:a.sharedHist}),d.linked=[{doc:this,isParent:!0,sharedHist:a.sharedHist}],Q1(d,o0(this)),d},unlinkDoc:function(a){if(a instanceof Dn&&(a=a.doc),this.linked)for(var l=0;l<this.linked.length;++l){var p=this.linked[l];if(p.doc==a){this.linked.splice(l,1),a.unlinkDoc(this),eO(o0(this));break}}if(a.history==this.history){var d=[a.id];Ra(a,function(g){return d.push(g.id)},!0),a.history=new vf(null),a.history.done=vl(this.history.done,d),a.history.undone=vl(this.history.undone,d)}},iterLinkedDocs:function(a){Ra(this,a)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(a){return this.lineSep?a.split(this.lineSep):Nn(a)},lineSeparator:function(){return this.lineSep||`
`},setDirection:yr(function(a){a!="rtl"&&(a="ltr"),a!=this.direction&&(this.direction=a,this.iter(function(l){return l.order=null}),this.cm&&B1(this.cm))})}),po.prototype.eachLine=po.prototype.iter;var i0=0;function nO(a){var l=this;if(a0(l),!(ut(l,a)||Er(l.display,a))){Kt(a),u&&(i0=+new Date);var p=Ss(l,a,!0),d=a.dataTransfer.files;if(!(!p||l.isReadOnly()))if(d&&d.length&&window.FileReader&&window.File)for(var g=d.length,b=Array(g),S=0,A=function(){++S==g&&mr(l,function(){p=it(l.doc,p);var Oe={from:p,to:p,text:l.doc.splitLines(b.filter(function(ze){return ze!=null}).join(l.doc.lineSeparator())),origin:"paste"};ml(l.doc,Oe),Wy(l.doc,Ia(it(l.doc,p),it(l.doc,Na(Oe))))})()},j=function(Oe,ze){if(l.options.allowDropFileTypes&&_t(l.options.allowDropFileTypes,Oe.type)==-1){A();return}var Je=new FileReader;Je.onerror=function(){return A()},Je.onload=function(){var lt=Je.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(lt)){A();return}b[ze]=lt,A()},Je.readAsText(Oe)},F=0;F<d.length;F++)j(d[F],F);else{if(l.state.draggingText&&l.doc.sel.contains(p)>-1){l.state.draggingText(a),setTimeout(function(){return l.display.input.focus()},20);return}try{var oe=a.dataTransfer.getData("Text");if(oe){var de;if(l.state.draggingText&&!l.state.draggingText.copy&&(de=l.listSelections()),yf(l.doc,Ia(p,p)),de)for(var Me=0;Me<de.length;++Me)yl(l.doc,"",de[Me].anchor,de[Me].head,"drag");l.replaceSelection(oe,"around","paste"),l.display.input.focus()}}catch{}}}}function rO(a,l){if(u&&(!a.state.draggingText||+new Date-i0<100)){G(l);return}if(!(ut(a,l)||Er(a.display,l))&&(l.dataTransfer.setData("Text",a.getSelection()),l.dataTransfer.effectAllowed="copyMove",l.dataTransfer.setDragImage&&!_)){var p=te("img",null,null,"position: fixed; left: 0; top: 0;");p.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",m&&(p.width=p.height=1,a.display.wrapper.appendChild(p),p._top=p.offsetTop),l.dataTransfer.setDragImage(p,0,0),m&&p.parentNode.removeChild(p)}}function oO(a,l){var p=Ss(a,l);if(p){var d=document.createDocumentFragment();wy(a,p,d),a.display.dragCursor||(a.display.dragCursor=te("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),a.display.lineSpace.insertBefore(a.display.dragCursor,a.display.cursorDiv)),W(a.display.dragCursor,d)}}function a0(a){a.display.dragCursor&&(a.display.lineSpace.removeChild(a.display.dragCursor),a.display.dragCursor=null)}function s0(a){if(document.getElementsByClassName){for(var l=document.getElementsByClassName("CodeMirror"),p=[],d=0;d<l.length;d++){var g=l[d].CodeMirror;g&&p.push(g)}p.length&&p[0].operation(function(){for(var b=0;b<p.length;b++)a(p[b])})}}var l0=!1;function iO(){l0||(aO(),l0=!0)}function aO(){var a;Se(window,"resize",function(){a==null&&(a=setTimeout(function(){a=null,s0(sO)},100))}),Se(window,"blur",function(){return s0(dl)})}function sO(a){var l=a.display;l.cachedCharWidth=l.cachedTextHeight=l.cachedPaddingH=null,l.scrollbarsClipped=!1,a.setSize()}for(var Va={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Nu=0;Nu<10;Nu++)Va[Nu+48]=Va[Nu+96]=String(Nu);for(var bf=65;bf<=90;bf++)Va[bf]=String.fromCharCode(bf);for(var Ru=1;Ru<=12;Ru++)Va[Ru+111]=Va[Ru+63235]="F"+Ru;var ua={};ua.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},ua.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},ua.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},ua.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},ua.default=D?ua.macDefault:ua.pcDefault;function lO(a){var l=a.split(/-(?!$)/);a=l[l.length-1];for(var p,d,g,b,S=0;S<l.length-1;S++){var A=l[S];if(/^(cmd|meta|m)$/i.test(A))b=!0;else if(/^a(lt)?$/i.test(A))p=!0;else if(/^(c|ctrl|control)$/i.test(A))d=!0;else if(/^s(hift)?$/i.test(A))g=!0;else throw new Error("Unrecognized modifier name: "+A)}return p&&(a="Alt-"+a),d&&(a="Ctrl-"+a),b&&(a="Cmd-"+a),g&&(a="Shift-"+a),a}function uO(a){var l={};for(var p in a)if(a.hasOwnProperty(p)){var d=a[p];if(/^(name|fallthrough|(de|at)tach)$/.test(p))continue;if(d=="..."){delete a[p];continue}for(var g=un(p.split(" "),lO),b=0;b<g.length;b++){var S=void 0,A=void 0;b==g.length-1?(A=g.join(" "),S=d):(A=g.slice(0,b+1).join(" "),S="...");var j=l[A];if(!j)l[A]=S;else if(j!=S)throw new Error("Inconsistent bindings for "+A)}delete a[p]}for(var F in l)a[F]=l[F];return a}function _l(a,l,p,d){l=xf(l);var g=l.call?l.call(a,d):l[a];if(g===!1)return"nothing";if(g==="...")return"multi";if(g!=null&&p(g))return"handled";if(l.fallthrough){if(Object.prototype.toString.call(l.fallthrough)!="[object Array]")return _l(a,l.fallthrough,p,d);for(var b=0;b<l.fallthrough.length;b++){var S=_l(a,l.fallthrough[b],p,d);if(S)return S}}}function u0(a){var l=typeof a=="string"?a:Va[a.keyCode];return l=="Ctrl"||l=="Alt"||l=="Shift"||l=="Mod"}function c0(a,l,p){var d=a;return l.altKey&&d!="Alt"&&(a="Alt-"+a),(Q?l.metaKey:l.ctrlKey)&&d!="Ctrl"&&(a="Ctrl-"+a),(Q?l.ctrlKey:l.metaKey)&&d!="Mod"&&(a="Cmd-"+a),!p&&l.shiftKey&&d!="Shift"&&(a="Shift-"+a),a}function f0(a,l){if(m&&a.keyCode==34&&a.char)return!1;var p=Va[a.keyCode];return p==null||a.altGraphKey?!1:(a.keyCode==3&&a.code&&(p=a.code),c0(p,a,l))}function xf(a){return typeof a=="string"?ua[a]:a}function bl(a,l){for(var p=a.doc.sel.ranges,d=[],g=0;g<p.length;g++){for(var b=l(p[g]);d.length&&jt(b.from,Mt(d).to)<=0;){var S=d.pop();if(jt(S.from,b.from)<0){b.from=S.from;break}}d.push(b)}Lo(a,function(){for(var A=d.length-1;A>=0;A--)yl(a.doc,"",d[A].from,d[A].to,"+delete");pl(a)})}function Sh(a,l,p){var d=ae(a.text,l+p,p);return d<0||d>a.text.length?null:d}function Oh(a,l,p){var d=Sh(a,l.ch,p);return d==null?null:new Ze(l.line,d,p<0?"after":"before")}function Th(a,l,p,d,g){if(a){l.doc.direction=="rtl"&&(g=-g);var b=z(p,l.doc.direction);if(b){var S=g<0?Mt(b):b[0],A=g<0==(S.level==1),j=A?"after":"before",F;if(S.level>0||l.doc.direction=="rtl"){var oe=Ge(l,p);F=g<0?p.text.length-1:0;var de=ft(l,oe,F).top;F=et(function(Me){return ft(l,oe,Me).top==de},g<0==(S.level==1)?S.from:S.to-1,F),j=="before"&&(F=Sh(p,F,1))}else F=g<0?S.to:S.from;return new Ze(d,F,j)}}return new Ze(d,g<0?p.text.length:0,g<0?"before":"after")}function cO(a,l,p,d){var g=z(l,a.doc.direction);if(!g)return Oh(l,p,d);p.ch>=l.text.length?(p.ch=l.text.length,p.sticky="before"):p.ch<=0&&(p.ch=0,p.sticky="after");var b=X(g,p.ch,p.sticky),S=g[b];if(a.doc.direction=="ltr"&&S.level%2==0&&(d>0?S.to>p.ch:S.from<p.ch))return Oh(l,p,d);var A=function(mt,Ct){return Sh(l,mt instanceof Ze?mt.ch:mt,Ct)},j,F=function(mt){return a.options.lineWrapping?(j=j||Ge(a,l),Xt(a,l,j,mt)):{begin:0,end:l.text.length}},oe=F(p.sticky=="before"?A(p,-1):p.ch);if(a.doc.direction=="rtl"||S.level==1){var de=S.level==1==d<0,Me=A(p,de?1:-1);if(Me!=null&&(de?Me<=S.to&&Me<=oe.end:Me>=S.from&&Me>=oe.begin)){var Oe=de?"before":"after";return new Ze(p.line,Me,Oe)}}var ze=function(mt,Ct,yt){for(var Tt=function(Sn,wr){return wr?new Ze(p.line,A(Sn,1),"before"):new Ze(p.line,Sn,"after")};mt>=0&&mt<g.length;mt+=Ct){var zt=g[mt],Nt=Ct>0==(zt.level!=1),Qt=Nt?yt.begin:A(yt.end,-1);if(zt.from<=Qt&&Qt<zt.to||(Qt=Nt?zt.from:A(zt.to,-1),yt.begin<=Qt&&Qt<yt.end))return Tt(Qt,Nt)}},Je=ze(b+d,d,oe);if(Je)return Je;var lt=d>0?oe.end:A(oe.begin,-1);return lt!=null&&!(d>0&&lt==l.text.length)&&(Je=ze(d>0?0:g.length-1,d,F(lt)),Je)?Je:null}var Fu={selectAll:Xy,singleSelection:function(a){return a.setSelection(a.getCursor("anchor"),a.getCursor("head"),Ye)},killLine:function(a){return bl(a,function(l){if(l.empty()){var p=xt(a.doc,l.head.line).text.length;return l.head.ch==p&&l.head.line<a.lastLine()?{from:l.head,to:Ze(l.head.line+1,0)}:{from:l.head,to:Ze(l.head.line,p)}}else return{from:l.from(),to:l.to()}})},deleteLine:function(a){return bl(a,function(l){return{from:Ze(l.from().line,0),to:it(a.doc,Ze(l.to().line+1,0))}})},delLineLeft:function(a){return bl(a,function(l){return{from:Ze(l.from().line,0),to:l.from()}})},delWrappedLineLeft:function(a){return bl(a,function(l){var p=a.charCoords(l.head,"div").top+5,d=a.coordsChar({left:0,top:p},"div");return{from:d,to:l.from()}})},delWrappedLineRight:function(a){return bl(a,function(l){var p=a.charCoords(l.head,"div").top+5,d=a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:p},"div");return{from:l.from(),to:d}})},undo:function(a){return a.undo()},redo:function(a){return a.redo()},undoSelection:function(a){return a.undoSelection()},redoSelection:function(a){return a.redoSelection()},goDocStart:function(a){return a.extendSelection(Ze(a.firstLine(),0))},goDocEnd:function(a){return a.extendSelection(Ze(a.lastLine()))},goLineStart:function(a){return a.extendSelectionsBy(function(l){return d0(a,l.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(a){return a.extendSelectionsBy(function(l){return p0(a,l.head)},{origin:"+move",bias:1})},goLineEnd:function(a){return a.extendSelectionsBy(function(l){return fO(a,l.head.line)},{origin:"+move",bias:-1})},goLineRight:function(a){return a.extendSelectionsBy(function(l){var p=a.cursorCoords(l.head,"div").top+5;return a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:p},"div")},vt)},goLineLeft:function(a){return a.extendSelectionsBy(function(l){var p=a.cursorCoords(l.head,"div").top+5;return a.coordsChar({left:0,top:p},"div")},vt)},goLineLeftSmart:function(a){return a.extendSelectionsBy(function(l){var p=a.cursorCoords(l.head,"div").top+5,d=a.coordsChar({left:0,top:p},"div");return d.ch<a.getLine(d.line).search(/\S/)?p0(a,l.head):d},vt)},goLineUp:function(a){return a.moveV(-1,"line")},goLineDown:function(a){return a.moveV(1,"line")},goPageUp:function(a){return a.moveV(-1,"page")},goPageDown:function(a){return a.moveV(1,"page")},goCharLeft:function(a){return a.moveH(-1,"char")},goCharRight:function(a){return a.moveH(1,"char")},goColumnLeft:function(a){return a.moveH(-1,"column")},goColumnRight:function(a){return a.moveH(1,"column")},goWordLeft:function(a){return a.moveH(-1,"word")},goGroupRight:function(a){return a.moveH(1,"group")},goGroupLeft:function(a){return a.moveH(-1,"group")},goWordRight:function(a){return a.moveH(1,"word")},delCharBefore:function(a){return a.deleteH(-1,"codepoint")},delCharAfter:function(a){return a.deleteH(1,"char")},delWordBefore:function(a){return a.deleteH(-1,"word")},delWordAfter:function(a){return a.deleteH(1,"word")},delGroupBefore:function(a){return a.deleteH(-1,"group")},delGroupAfter:function(a){return a.deleteH(1,"group")},indentAuto:function(a){return a.indentSelection("smart")},indentMore:function(a){return a.indentSelection("add")},indentLess:function(a){return a.indentSelection("subtract")},insertTab:function(a){return a.replaceSelection("	")},insertSoftTab:function(a){for(var l=[],p=a.listSelections(),d=a.options.tabSize,g=0;g<p.length;g++){var b=p[g].from(),S=rt(a.getLine(b.line),b.ch,d);l.push(Yt(d-S%d))}a.replaceSelections(l)},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.execCommand("insertTab")},transposeChars:function(a){return Lo(a,function(){for(var l=a.listSelections(),p=[],d=0;d<l.length;d++)if(l[d].empty()){var g=l[d].head,b=xt(a.doc,g.line).text;if(b){if(g.ch==b.length&&(g=new Ze(g.line,g.ch-1)),g.ch>0)g=new Ze(g.line,g.ch+1),a.replaceRange(b.charAt(g.ch-1)+b.charAt(g.ch-2),Ze(g.line,g.ch-2),g,"+transpose");else if(g.line>a.doc.first){var S=xt(a.doc,g.line-1).text;S&&(g=new Ze(g.line,1),a.replaceRange(b.charAt(0)+a.doc.lineSeparator()+S.charAt(S.length-1),Ze(g.line-1,S.length-1),g,"+transpose"))}}p.push(new pn(g,g))}a.setSelections(p)})},newlineAndIndent:function(a){return Lo(a,function(){for(var l=a.listSelections(),p=l.length-1;p>=0;p--)a.replaceRange(a.doc.lineSeparator(),l[p].anchor,l[p].head,"+input");l=a.listSelections();for(var d=0;d<l.length;d++)a.indentLine(l[d].from().line,null,!0);pl(a)})},openLine:function(a){return a.replaceSelection(`
`,"start")},toggleOverwrite:function(a){return a.toggleOverwrite()}};function d0(a,l){var p=xt(a.doc,l),d=En(p);return d!=p&&(l=qt(d)),Th(!0,a,d,l,1)}function fO(a,l){var p=xt(a.doc,l),d=Mn(p);return d!=p&&(l=qt(d)),Th(!0,a,p,l,-1)}function p0(a,l){var p=d0(a,l.line),d=xt(a.doc,p.line),g=z(d,a.doc.direction);if(!g||g[0].level==0){var b=Math.max(p.ch,d.text.search(/\S/)),S=l.line==p.line&&l.ch<=b&&l.ch;return Ze(p.line,S?0:b,p.sticky)}return p}function Cf(a,l,p){if(typeof l=="string"&&(l=Fu[l],!l))return!1;a.display.input.ensurePolled();var d=a.display.shift,g=!1;try{a.isReadOnly()&&(a.state.suppressEdits=!0),p&&(a.display.shift=!1),g=l(a)!=Ne}finally{a.display.shift=d,a.state.suppressEdits=!1}return g}function dO(a,l,p){for(var d=0;d<a.state.keyMaps.length;d++){var g=_l(l,a.state.keyMaps[d],p,a);if(g)return g}return a.options.extraKeys&&_l(l,a.options.extraKeys,p,a)||_l(l,a.options.keyMap,p,a)}var pO=new He;function Vu(a,l,p,d){var g=a.state.keySeq;if(g){if(u0(l))return"handled";if(/\'$/.test(l)?a.state.keySeq=null:pO.set(50,function(){a.state.keySeq==g&&(a.state.keySeq=null,a.display.input.reset())}),h0(a,g+" "+l,p,d))return!0}return h0(a,l,p,d)}function h0(a,l,p,d){var g=dO(a,l,d);return g=="multi"&&(a.state.keySeq=l),g=="handled"&&wn(a,"keyHandled",a,l,p),(g=="handled"||g=="multi")&&(Kt(p),lh(a)),!!g}function v0(a,l){var p=f0(l,!0);return p?l.shiftKey&&!a.state.keySeq?Vu(a,"Shift-"+p,l,function(d){return Cf(a,d,!0)})||Vu(a,p,l,function(d){if(typeof d=="string"?/^go[A-Z]/.test(d):d.motion)return Cf(a,d)}):Vu(a,p,l,function(d){return Cf(a,d)}):!1}function hO(a,l,p){return Vu(a,"'"+p+"'",l,function(d){return Cf(a,d,!0)})}var Eh=null;function g0(a){var l=this;if(!(a.target&&a.target!=l.display.input.getField())&&(l.curOp.focus=ke(),!ut(l,a))){u&&c<11&&a.keyCode==27&&(a.returnValue=!1);var p=a.keyCode;l.display.shift=p==16||a.shiftKey;var d=v0(l,a);m&&(Eh=d?p:null,!d&&p==88&&!Wn&&(D?a.metaKey:a.ctrlKey)&&l.replaceSelection("",null,"cut")),t&&!D&&!d&&p==46&&a.shiftKey&&!a.ctrlKey&&document.execCommand&&document.execCommand("cut"),p==18&&!/\bCodeMirror-crosshair\b/.test(l.display.lineDiv.className)&&vO(l)}}function vO(a){var l=a.display.lineDiv;he(l,"CodeMirror-crosshair");function p(d){(d.keyCode==18||!d.altKey)&&(me(l,"CodeMirror-crosshair"),qe(document,"keyup",p),qe(document,"mouseover",p))}Se(document,"keyup",p),Se(document,"mouseover",p)}function m0(a){a.keyCode==16&&(this.doc.sel.shift=!1),ut(this,a)}function y0(a){var l=this;if(!(a.target&&a.target!=l.display.input.getField())&&!(Er(l.display,a)||ut(l,a)||a.ctrlKey&&!a.altKey||D&&a.metaKey)){var p=a.keyCode,d=a.charCode;if(m&&p==Eh){Eh=null,Kt(a);return}if(!(m&&(!a.which||a.which<10)&&v0(l,a))){var g=String.fromCharCode(d??p);g!="\b"&&(hO(l,a,g)||l.display.input.onKeyPress(a))}}}var gO=400,Ph=function(a,l,p){this.time=a,this.pos=l,this.button=p};Ph.prototype.compare=function(a,l,p){return this.time+gO>a&&jt(l,this.pos)==0&&p==this.button};var zu,Hu;function mO(a,l){var p=+new Date;return Hu&&Hu.compare(p,a,l)?(zu=Hu=null,"triple"):zu&&zu.compare(p,a,l)?(Hu=new Ph(p,a,l),zu=null,"double"):(zu=new Ph(p,a,l),Hu=null,"single")}function w0(a){var l=this,p=l.display;if(!(ut(l,a)||p.activeTouch&&p.input.supportsTouch())){if(p.input.ensurePolled(),p.shift=a.shiftKey,Er(p,a)){f||(p.scroller.draggable=!1,setTimeout(function(){return p.scroller.draggable=!0},100));return}if(!kh(l,a)){var d=Ss(l,a),g=Ee(a),b=d?mO(d,g):"single";window.focus(),g==1&&l.state.selectingText&&l.state.selectingText(a),!(d&&yO(l,g,d,b,a))&&(g==1?d?_O(l,d,b,a):ve(a)==p.scroller&&Kt(a):g==2?(d&&mf(l.doc,d),setTimeout(function(){return p.input.focus()},20)):g==3&&(pe?l.display.input.onContextMenu(a):uh(l)))}}}function yO(a,l,p,d,g){var b="Click";return d=="double"?b="Double"+b:d=="triple"&&(b="Triple"+b),b=(l==1?"Left":l==2?"Middle":"Right")+b,Vu(a,c0(b,g),g,function(S){if(typeof S=="string"&&(S=Fu[S]),!S)return!1;var A=!1;try{a.isReadOnly()&&(a.state.suppressEdits=!0),A=S(a,p)!=Ne}finally{a.state.suppressEdits=!1}return A})}function wO(a,l,p){var d=a.getOption("configureMouse"),g=d?d(a,l,p):{};if(g.unit==null){var b=V?p.shiftKey&&p.metaKey:p.altKey;g.unit=b?"rectangle":l=="single"?"char":l=="double"?"word":"line"}return(g.extend==null||a.doc.extend)&&(g.extend=a.doc.extend||p.shiftKey),g.addNew==null&&(g.addNew=D?p.metaKey:p.ctrlKey),g.moveOnDrag==null&&(g.moveOnDrag=!(D?p.altKey:p.ctrlKey)),g}function _O(a,l,p,d){u?setTimeout(be(_y,a),0):a.curOp.focus=ke();var g=wO(a,p,d),b=a.doc.sel,S;a.options.dragDrop&&Ke&&!a.isReadOnly()&&p=="single"&&(S=b.contains(l))>-1&&(jt((S=b.ranges[S]).from(),l)<0||l.xRel>0)&&(jt(S.to(),l)>0||l.xRel<0)?bO(a,d,l,g):xO(a,d,l,g)}function bO(a,l,p,d){var g=a.display,b=!1,S=mr(a,function(F){f&&(g.scroller.draggable=!1),a.state.draggingText=!1,a.state.delayingBlurEvent&&(a.hasFocus()?a.state.delayingBlurEvent=!1:uh(a)),qe(g.wrapper.ownerDocument,"mouseup",S),qe(g.wrapper.ownerDocument,"mousemove",A),qe(g.scroller,"dragstart",j),qe(g.scroller,"drop",S),b||(Kt(F),d.addNew||mf(a.doc,p,null,null,d.extend),f&&!_||u&&c==9?setTimeout(function(){g.wrapper.ownerDocument.body.focus({preventScroll:!0}),g.input.focus()},20):g.input.focus())}),A=function(F){b=b||Math.abs(l.clientX-F.clientX)+Math.abs(l.clientY-F.clientY)>=10},j=function(){return b=!0};f&&(g.scroller.draggable=!0),a.state.draggingText=S,S.copy=!d.moveOnDrag,Se(g.wrapper.ownerDocument,"mouseup",S),Se(g.wrapper.ownerDocument,"mousemove",A),Se(g.scroller,"dragstart",j),Se(g.scroller,"drop",S),a.state.delayingBlurEvent=!0,setTimeout(function(){return g.input.focus()},20),g.scroller.dragDrop&&g.scroller.dragDrop()}function _0(a,l,p){if(p=="char")return new pn(l,l);if(p=="word")return a.findWordAt(l);if(p=="line")return new pn(Ze(l.line,0),it(a.doc,Ze(l.line+1,0)));var d=p(a,l);return new pn(d.from,d.to)}function xO(a,l,p,d){u&&uh(a);var g=a.display,b=a.doc;Kt(l);var S,A,j=b.sel,F=j.ranges;if(d.addNew&&!d.extend?(A=b.sel.contains(p),A>-1?S=F[A]:S=new pn(p,p)):(S=b.sel.primary(),A=b.sel.primIndex),d.unit=="rectangle")d.addNew||(S=new pn(p,p)),p=Ss(a,l,!0,!0),A=-1;else{var oe=_0(a,p,d.unit);d.extend?S=xh(S,oe.anchor,oe.head,d.extend):S=oe}d.addNew?A==-1?(A=F.length,Fr(b,Pi(a,F.concat([S]),A),{scroll:!1,origin:"*mouse"})):F.length>1&&F[A].empty()&&d.unit=="char"&&!d.extend?(Fr(b,Pi(a,F.slice(0,A).concat(F.slice(A+1)),0),{scroll:!1,origin:"*mouse"}),j=b.sel):Ch(b,A,S,Fe):(A=0,Fr(b,new Jo([S],0),Fe),j=b.sel);var de=p;function Me(yt){if(jt(de,yt)!=0)if(de=yt,d.unit=="rectangle"){for(var Tt=[],zt=a.options.tabSize,Nt=rt(xt(b,p.line).text,p.ch,zt),Qt=rt(xt(b,yt.line).text,yt.ch,zt),Sn=Math.min(Nt,Qt),wr=Math.max(Nt,Qt),Vn=Math.min(p.line,yt.line),jo=Math.min(a.lastLine(),Math.max(p.line,yt.line));Vn<=jo;Vn++){var ho=xt(b,Vn).text,rr=nt(ho,Sn,zt);Sn==wr?Tt.push(new pn(Ze(Vn,rr),Ze(Vn,rr))):ho.length>rr&&Tt.push(new pn(Ze(Vn,rr),Ze(Vn,nt(ho,wr,zt))))}Tt.length||Tt.push(new pn(p,p)),Fr(b,Pi(a,j.ranges.slice(0,A).concat(Tt),A),{origin:"*mouse",scroll:!1}),a.scrollIntoView(yt)}else{var vo=S,kr=_0(a,yt,d.unit),cr=vo.anchor,or;jt(kr.anchor,cr)>0?(or=kr.head,cr=Ve(vo.from(),kr.anchor)):(or=kr.anchor,cr=ue(vo.to(),kr.head));var Kn=j.ranges.slice(0);Kn[A]=CO(a,new pn(it(b,cr),or)),Fr(b,Pi(a,Kn,A),Fe)}}var Oe=g.wrapper.getBoundingClientRect(),ze=0;function Je(yt){var Tt=++ze,zt=Ss(a,yt,!0,d.unit=="rectangle");if(zt)if(jt(zt,de)!=0){a.curOp.focus=ke(),Me(zt);var Nt=ff(g,b);(zt.line>=Nt.to||zt.line<Nt.from)&&setTimeout(mr(a,function(){ze==Tt&&Je(yt)}),150)}else{var Qt=yt.clientY<Oe.top?-20:yt.clientY>Oe.bottom?20:0;Qt&&setTimeout(mr(a,function(){ze==Tt&&(g.scroller.scrollTop+=Qt,Je(yt))}),50)}}function lt(yt){a.state.selectingText=!1,ze=1/0,yt&&(Kt(yt),g.input.focus()),qe(g.wrapper.ownerDocument,"mousemove",mt),qe(g.wrapper.ownerDocument,"mouseup",Ct),b.history.lastSelOrigin=null}var mt=mr(a,function(yt){yt.buttons===0||!Ee(yt)?lt(yt):Je(yt)}),Ct=mr(a,lt);a.state.selectingText=Ct,Se(g.wrapper.ownerDocument,"mousemove",mt),Se(g.wrapper.ownerDocument,"mouseup",Ct)}function CO(a,l){var p=l.anchor,d=l.head,g=xt(a.doc,p.line);if(jt(p,d)==0&&p.sticky==d.sticky)return l;var b=z(g);if(!b)return l;var S=X(b,p.ch,p.sticky),A=b[S];if(A.from!=p.ch&&A.to!=p.ch)return l;var j=S+(A.from==p.ch==(A.level!=1)?0:1);if(j==0||j==b.length)return l;var F;if(d.line!=p.line)F=(d.line-p.line)*(a.doc.direction=="ltr"?1:-1)>0;else{var oe=X(b,d.ch,d.sticky),de=oe-S||(d.ch-p.ch)*(A.level==1?-1:1);oe==j-1||oe==j?F=de<0:F=de>0}var Me=b[j+(F?-1:0)],Oe=F==(Me.level==1),ze=Oe?Me.from:Me.to,Je=Oe?"after":"before";return p.ch==ze&&p.sticky==Je?l:new pn(new Ze(p.line,ze,Je),d)}function b0(a,l,p,d){var g,b;if(l.touches)g=l.touches[0].clientX,b=l.touches[0].clientY;else try{g=l.clientX,b=l.clientY}catch{return!1}if(g>=Math.floor(a.display.gutters.getBoundingClientRect().right))return!1;d&&Kt(l);var S=a.display,A=S.lineDiv.getBoundingClientRect();if(b>A.bottom||!Ht(a,p))return Bn(l);b-=A.top-S.viewOffset;for(var j=0;j<a.display.gutterSpecs.length;++j){var F=S.gutters.childNodes[j];if(F&&F.getBoundingClientRect().right>=g){var oe=fn(a.doc,b),de=a.display.gutterSpecs[j];return st(a,p,a,oe,de.className,l),Bn(l)}}}function kh(a,l){return b0(a,l,"gutterClick",!0)}function x0(a,l){Er(a.display,l)||SO(a,l)||ut(a,l,"contextmenu")||pe||a.display.input.onContextMenu(l)}function SO(a,l){return Ht(a,"gutterContextMenu")?b0(a,l,"gutterContextMenu",!1):!1}function C0(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Z(a)}var xl={toString:function(){return"CodeMirror.Init"}},S0={},Sf={};function OO(a){var l=a.optionHandlers;function p(d,g,b,S){a.defaults[d]=g,b&&(l[d]=S?function(A,j,F){F!=xl&&b(A,j,F)}:b)}a.defineOption=p,a.Init=xl,p("value","",function(d,g){return d.setValue(g)},!0),p("mode",null,function(d,g){d.doc.modeOption=g,wh(d)},!0),p("indentUnit",2,wh,!0),p("indentWithTabs",!1),p("smartIndent",!0),p("tabSize",4,function(d){ku(d),Z(d),fo(d)},!0),p("lineSeparator",null,function(d,g){if(d.doc.lineSep=g,!!g){var b=[],S=d.doc.first;d.doc.iter(function(j){for(var F=0;;){var oe=j.text.indexOf(g,F);if(oe==-1)break;F=oe+g.length,b.push(Ze(S,oe))}S++});for(var A=b.length-1;A>=0;A--)yl(d.doc,g,b[A],Ze(b[A].line,b[A].ch+g.length))}}),p("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(d,g,b){d.state.specialChars=new RegExp(g.source+(g.test("	")?"":"|	"),"g"),b!=xl&&d.refresh()}),p("specialCharPlaceholder",ol,function(d){return d.refresh()},!0),p("electricChars",!0),p("inputStyle",L?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),p("spellcheck",!1,function(d,g){return d.getInputField().spellcheck=g},!0),p("autocorrect",!1,function(d,g){return d.getInputField().autocorrect=g},!0),p("autocapitalize",!1,function(d,g){return d.getInputField().autocapitalize=g},!0),p("rtlMoveVisually",!re),p("wholeLineUpdateBefore",!0),p("theme","default",function(d){C0(d),Pu(d)},!0),p("keyMap","default",function(d,g,b){var S=xf(g),A=b!=xl&&xf(b);A&&A.detach&&A.detach(d,S),S.attach&&S.attach(d,A||null)}),p("extraKeys",null),p("configureMouse",null),p("lineWrapping",!1,EO,!0),p("gutters",[],function(d,g){d.display.gutterSpecs=mh(g,d.options.lineNumbers),Pu(d)},!0),p("fixedGutter",!0,function(d,g){d.display.gutters.style.left=g?Ma(d.display)+"px":"0",d.refresh()},!0),p("coverGutterNextToScrollbar",!1,function(d){return hl(d)},!0),p("scrollbarStyle","native",function(d){Ty(d),hl(d),d.display.scrollbars.setScrollTop(d.doc.scrollTop),d.display.scrollbars.setScrollLeft(d.doc.scrollLeft)},!0),p("lineNumbers",!1,function(d,g){d.display.gutterSpecs=mh(d.options.gutters,g),Pu(d)},!0),p("firstLineNumber",1,Pu,!0),p("lineNumberFormatter",function(d){return d},Pu,!0),p("showCursorWhenSelecting",!1,xu,!0),p("resetSelectionOnContextMenu",!0),p("lineWiseCopyCut",!0),p("pasteLinesPerSelection",!0),p("selectionsMayTouch",!1),p("readOnly",!1,function(d,g){g=="nocursor"&&(dl(d),d.display.input.blur()),d.display.input.readOnlyChanged(g)}),p("screenReaderLabel",null,function(d,g){g=g===""?null:g,d.display.input.screenReaderLabelChanged(g)}),p("disableInput",!1,function(d,g){g||d.display.input.reset()},!0),p("dragDrop",!0,TO),p("allowDropFileTypes",null),p("cursorBlinkRate",530),p("cursorScrollMargin",0),p("cursorHeight",1,xu,!0),p("singleCursorHeightPerLine",!0,xu,!0),p("workTime",100),p("workDelay",100),p("flattenSpans",!0,ku,!0),p("addModeClass",!1,ku,!0),p("pollInterval",100),p("undoDepth",200,function(d,g){return d.doc.history.undoDepth=g}),p("historyEventDelay",1250),p("viewportMargin",10,function(d){return d.refresh()},!0),p("maxHighlightLength",1e4,ku,!0),p("moveInputWithCursor",!0,function(d,g){g||d.display.input.resetPosition()}),p("tabindex",null,function(d,g){return d.display.input.getField().tabIndex=g||""}),p("autofocus",null),p("direction","ltr",function(d,g){return d.doc.setDirection(g)},!0),p("phrases",null)}function TO(a,l,p){var d=p&&p!=xl;if(!l!=!d){var g=a.display.dragFunctions,b=l?Se:qe;b(a.display.scroller,"dragstart",g.start),b(a.display.scroller,"dragenter",g.enter),b(a.display.scroller,"dragover",g.over),b(a.display.scroller,"dragleave",g.leave),b(a.display.scroller,"drop",g.drop)}}function EO(a){a.options.lineWrapping?(he(a.display.wrapper,"CodeMirror-wrap"),a.display.sizer.style.minWidth="",a.display.sizerWidth=null):(me(a.display.wrapper,"CodeMirror-wrap"),Wi(a)),sh(a),fo(a),Z(a),setTimeout(function(){return hl(a)},100)}function Dn(a,l){var p=this;if(!(this instanceof Dn))return new Dn(a,l);this.options=l=l?Re(l):{},Re(S0,l,!1);var d=l.value;typeof d=="string"?d=new po(d,l.mode,null,l.lineSeparator,l.direction):l.mode&&(d.modeOption=l.mode),this.doc=d;var g=new Dn.inputStyles[l.inputStyle](this),b=this.display=new z1(a,d,g,l);b.wrapper.CodeMirror=this,C0(this),l.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Ty(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new He,keySeq:null,specialChars:null},l.autofocus&&!L&&b.input.focus(),u&&c<11&&setTimeout(function(){return p.display.input.reset(!0)},20),PO(this),iO(),Ps(this),this.curOp.forceUpdate=!0,Ny(this,d),l.autofocus&&!L||this.hasFocus()?setTimeout(function(){p.hasFocus()&&!p.state.focused&&ch(p)},20):dl(this);for(var S in Sf)Sf.hasOwnProperty(S)&&Sf[S](this,l[S],xl);ky(this),l.finishInit&&l.finishInit(this);for(var A=0;A<Ah.length;++A)Ah[A](this);ks(this),f&&l.lineWrapping&&getComputedStyle(b.lineDiv).textRendering=="optimizelegibility"&&(b.lineDiv.style.textRendering="auto")}Dn.defaults=S0,Dn.optionHandlers=Sf;function PO(a){var l=a.display;Se(l.scroller,"mousedown",mr(a,w0)),u&&c<11?Se(l.scroller,"dblclick",mr(a,function(j){if(!ut(a,j)){var F=Ss(a,j);if(!(!F||kh(a,j)||Er(a.display,j))){Kt(j);var oe=a.findWordAt(F);mf(a.doc,oe.anchor,oe.head)}}})):Se(l.scroller,"dblclick",function(j){return ut(a,j)||Kt(j)}),Se(l.scroller,"contextmenu",function(j){return x0(a,j)}),Se(l.input.getField(),"contextmenu",function(j){l.scroller.contains(j.target)||x0(a,j)});var p,d={end:0};function g(){l.activeTouch&&(p=setTimeout(function(){return l.activeTouch=null},1e3),d=l.activeTouch,d.end=+new Date)}function b(j){if(j.touches.length!=1)return!1;var F=j.touches[0];return F.radiusX<=1&&F.radiusY<=1}function S(j,F){if(F.left==null)return!0;var oe=F.left-j.left,de=F.top-j.top;return oe*oe+de*de>20*20}Se(l.scroller,"touchstart",function(j){if(!ut(a,j)&&!b(j)&&!kh(a,j)){l.input.ensurePolled(),clearTimeout(p);var F=+new Date;l.activeTouch={start:F,moved:!1,prev:F-d.end<=300?d:null},j.touches.length==1&&(l.activeTouch.left=j.touches[0].pageX,l.activeTouch.top=j.touches[0].pageY)}}),Se(l.scroller,"touchmove",function(){l.activeTouch&&(l.activeTouch.moved=!0)}),Se(l.scroller,"touchend",function(j){var F=l.activeTouch;if(F&&!Er(l,j)&&F.left!=null&&!F.moved&&new Date-F.start<300){var oe=a.coordsChar(l.activeTouch,"page"),de;!F.prev||S(F,F.prev)?de=new pn(oe,oe):!F.prev.prev||S(F,F.prev.prev)?de=a.findWordAt(oe):de=new pn(Ze(oe.line,0),it(a.doc,Ze(oe.line+1,0))),a.setSelection(de.anchor,de.head),a.focus(),Kt(j)}g()}),Se(l.scroller,"touchcancel",g),Se(l.scroller,"scroll",function(){l.scroller.clientHeight&&(Su(a,l.scroller.scrollTop),Ts(a,l.scroller.scrollLeft,!0),st(a,"scroll",a))}),Se(l.scroller,"mousewheel",function(j){return Dy(a,j)}),Se(l.scroller,"DOMMouseScroll",function(j){return Dy(a,j)}),Se(l.wrapper,"scroll",function(){return l.wrapper.scrollTop=l.wrapper.scrollLeft=0}),l.dragFunctions={enter:function(j){ut(a,j)||G(j)},over:function(j){ut(a,j)||(oO(a,j),G(j))},start:function(j){return rO(a,j)},drop:mr(a,nO),leave:function(j){ut(a,j)||a0(a)}};var A=l.input.getField();Se(A,"keyup",function(j){return m0.call(a,j)}),Se(A,"keydown",mr(a,g0)),Se(A,"keypress",mr(a,y0)),Se(A,"focus",function(j){return ch(a,j)}),Se(A,"blur",function(j){return dl(a,j)})}var Ah=[];Dn.defineInitHook=function(a){return Ah.push(a)};function Uu(a,l,p,d){var g=a.doc,b;p==null&&(p="add"),p=="smart"&&(g.mode.indent?b=Ko(a,l).state:p="prev");var S=a.options.tabSize,A=xt(g,l),j=rt(A.text,null,S);A.stateAfter&&(A.stateAfter=null);var F=A.text.match(/^\s*/)[0],oe;if(!d&&!/\S/.test(A.text))oe=0,p="not";else if(p=="smart"&&(oe=g.mode.indent(b,A.text.slice(F.length),A.text),oe==Ne||oe>150)){if(!d)return;p="prev"}p=="prev"?l>g.first?oe=rt(xt(g,l-1).text,null,S):oe=0:p=="add"?oe=j+a.options.indentUnit:p=="subtract"?oe=j-a.options.indentUnit:typeof p=="number"&&(oe=j+p),oe=Math.max(0,oe);var de="",Me=0;if(a.options.indentWithTabs)for(var Oe=Math.floor(oe/S);Oe;--Oe)Me+=S,de+="	";if(Me<oe&&(de+=Yt(oe-Me)),de!=F)return yl(g,de,Ze(l,0),Ze(l,F.length),"+input"),A.stateAfter=null,!0;for(var ze=0;ze<g.sel.ranges.length;ze++){var Je=g.sel.ranges[ze];if(Je.head.line==l&&Je.head.ch<F.length){var lt=Ze(l,F.length);Ch(g,ze,new pn(lt,lt));break}}}var ki=null;function Of(a){ki=a}function Mh(a,l,p,d,g){var b=a.doc;a.display.shift=!1,d||(d=b.sel);var S=+new Date-200,A=g=="paste"||a.state.pasteIncoming>S,j=Nn(l),F=null;if(A&&d.ranges.length>1)if(ki&&ki.text.join(`
`)==l){if(d.ranges.length%ki.text.length==0){F=[];for(var oe=0;oe<ki.text.length;oe++)F.push(b.splitLines(ki.text[oe]))}}else j.length==d.ranges.length&&a.options.pasteLinesPerSelection&&(F=un(j,function(mt){return[mt]}));for(var de=a.curOp.updateInput,Me=d.ranges.length-1;Me>=0;Me--){var Oe=d.ranges[Me],ze=Oe.from(),Je=Oe.to();Oe.empty()&&(p&&p>0?ze=Ze(ze.line,ze.ch-p):a.state.overwrite&&!A?Je=Ze(Je.line,Math.min(xt(b,Je.line).text.length,Je.ch+Mt(j).length)):A&&ki&&ki.lineWise&&ki.text.join(`
`)==j.join(`
`)&&(ze=Je=Ze(ze.line,0)));var lt={from:ze,to:Je,text:F?F[Me%F.length]:j,origin:g||(A?"paste":a.state.cutIncoming>S?"cut":"+input")};ml(a.doc,lt),wn(a,"inputRead",a,lt)}l&&!A&&T0(a,l),pl(a),a.curOp.updateInput<2&&(a.curOp.updateInput=de),a.curOp.typing=!0,a.state.pasteIncoming=a.state.cutIncoming=-1}function O0(a,l){var p=a.clipboardData&&a.clipboardData.getData("Text");if(p)return a.preventDefault(),!l.isReadOnly()&&!l.options.disableInput&&Lo(l,function(){return Mh(l,p,0,null,"paste")}),!0}function T0(a,l){if(!(!a.options.electricChars||!a.options.smartIndent))for(var p=a.doc.sel,d=p.ranges.length-1;d>=0;d--){var g=p.ranges[d];if(!(g.head.ch>100||d&&p.ranges[d-1].head.line==g.head.line)){var b=a.getModeAt(g.head),S=!1;if(b.electricChars){for(var A=0;A<b.electricChars.length;A++)if(l.indexOf(b.electricChars.charAt(A))>-1){S=Uu(a,g.head.line,"smart");break}}else b.electricInput&&b.electricInput.test(xt(a.doc,g.head.line).text.slice(0,g.head.ch))&&(S=Uu(a,g.head.line,"smart"));S&&wn(a,"electricInput",a,g.head.line)}}}function E0(a){for(var l=[],p=[],d=0;d<a.doc.sel.ranges.length;d++){var g=a.doc.sel.ranges[d].head.line,b={anchor:Ze(g,0),head:Ze(g+1,0)};p.push(b),l.push(a.getRange(b.anchor,b.head))}return{text:l,ranges:p}}function P0(a,l,p,d){a.setAttribute("autocorrect",p?"":"off"),a.setAttribute("autocapitalize",d?"":"off"),a.setAttribute("spellcheck",!!l)}function k0(){var a=te("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),l=te("div",[a],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return f?a.style.width="1000px":a.setAttribute("wrap","off"),k&&(a.style.border="1px solid black"),P0(a),l}function kO(a){var l=a.optionHandlers,p=a.helpers={};a.prototype={constructor:a,focus:function(){window.focus(),this.display.input.focus()},setOption:function(d,g){var b=this.options,S=b[d];b[d]==g&&d!="mode"||(b[d]=g,l.hasOwnProperty(d)&&mr(this,l[d])(this,g,S),st(this,"optionChange",this,d))},getOption:function(d){return this.options[d]},getDoc:function(){return this.doc},addKeyMap:function(d,g){this.state.keyMaps[g?"push":"unshift"](xf(d))},removeKeyMap:function(d){for(var g=this.state.keyMaps,b=0;b<g.length;++b)if(g[b]==d||g[b].name==d)return g.splice(b,1),!0},addOverlay:Xr(function(d,g){var b=d.token?d:a.getMode(this.options,d);if(b.startState)throw new Error("Overlays may not be stateful.");tn(this.state.overlays,{mode:b,modeSpec:d,opaque:g&&g.opaque,priority:g&&g.priority||0},function(S){return S.priority}),this.state.modeGen++,fo(this)}),removeOverlay:Xr(function(d){for(var g=this.state.overlays,b=0;b<g.length;++b){var S=g[b].modeSpec;if(S==d||typeof d=="string"&&S.name==d){g.splice(b,1),this.state.modeGen++,fo(this);return}}}),indentLine:Xr(function(d,g,b){typeof g!="string"&&typeof g!="number"&&(g==null?g=this.options.smartIndent?"smart":"prev":g=g?"add":"subtract"),pr(this.doc,d)&&Uu(this,d,g,b)}),indentSelection:Xr(function(d){for(var g=this.doc.sel.ranges,b=-1,S=0;S<g.length;S++){var A=g[S];if(A.empty())A.head.line>b&&(Uu(this,A.head.line,d,!0),b=A.head.line,S==this.doc.sel.primIndex&&pl(this));else{var j=A.from(),F=A.to(),oe=Math.max(b,j.line);b=Math.min(this.lastLine(),F.line-(F.ch?0:1))+1;for(var de=oe;de<b;++de)Uu(this,de,d);var Me=this.doc.sel.ranges;j.ch==0&&g.length==Me.length&&Me[S].from().ch>0&&Ch(this.doc,S,new pn(j,Me[S].to()),Ye)}}}),getTokenAt:function(d,g){return xi(this,d,g)},getLineTokens:function(d,g){return xi(this,Ze(d),g,!0)},getTokenTypeAt:function(d){d=it(this.doc,d);var g=ao(this,xt(this.doc,d.line)),b=0,S=(g.length-1)/2,A=d.ch,j;if(A==0)j=g[2];else for(;;){var F=b+S>>1;if((F?g[F*2-1]:0)>=A)S=F;else if(g[F*2+1]<A)b=F+1;else{j=g[F*2+2];break}}var oe=j?j.indexOf("overlay "):-1;return oe<0?j:oe==0?null:j.slice(0,oe-1)},getModeAt:function(d){var g=this.doc.mode;return g.innerMode?a.innerMode(g,this.getTokenAt(d).state).mode:g},getHelper:function(d,g){return this.getHelpers(d,g)[0]},getHelpers:function(d,g){var b=[];if(!p.hasOwnProperty(g))return b;var S=p[g],A=this.getModeAt(d);if(typeof A[g]=="string")S[A[g]]&&b.push(S[A[g]]);else if(A[g])for(var j=0;j<A[g].length;j++){var F=S[A[g][j]];F&&b.push(F)}else A.helperType&&S[A.helperType]?b.push(S[A.helperType]):S[A.name]&&b.push(S[A.name]);for(var oe=0;oe<S._global.length;oe++){var de=S._global[oe];de.pred(A,this)&&_t(b,de.val)==-1&&b.push(de.val)}return b},getStateAfter:function(d,g){var b=this.doc;return d=tt(b,d??b.first+b.size-1),Ko(this,d+1,g).state},cursorCoords:function(d,g){var b,S=this.doc.sel.primary();return d==null?b=S.head:typeof d=="object"?b=it(this.doc,d):b=d?S.from():S.to(),Qe(this,b,g||"page")},charCoords:function(d,g){return at(this,it(this.doc,d),g||"page")},coordsChar:function(d,g){return d=Ue(this,d,g||"page"),St(this,d.left,d.top)},lineAtHeight:function(d,g){return d=Ue(this,{top:d,left:0},g||"page").top,fn(this.doc,d+this.display.viewOffset)},heightAtLine:function(d,g,b){var S=!1,A;if(typeof d=="number"){var j=this.doc.first+this.doc.size-1;d<this.doc.first?d=this.doc.first:d>j&&(d=j,S=!0),A=xt(this.doc,d)}else A=d;return De(this,A,{top:0,left:0},g||"page",b||S).top+(S?this.doc.height-tr(A):0)},defaultTextHeight:function(){return ur(this.display)},defaultCharWidth:function(){return Pr(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(d,g,b,S,A){var j=this.display;d=Qe(this,it(this.doc,d));var F=d.bottom,oe=d.left;if(g.style.position="absolute",g.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(g),j.sizer.appendChild(g),S=="over")F=d.top;else if(S=="above"||S=="near"){var de=Math.max(j.wrapper.clientHeight,this.doc.height),Me=Math.max(j.sizer.clientWidth,j.lineSpace.clientWidth);(S=="above"||d.bottom+g.offsetHeight>de)&&d.top>g.offsetHeight?F=d.top-g.offsetHeight:d.bottom+g.offsetHeight<=de&&(F=d.bottom),oe+g.offsetWidth>Me&&(oe=Me-g.offsetWidth)}g.style.top=F+"px",g.style.left=g.style.right="",A=="right"?(oe=j.sizer.clientWidth-g.offsetWidth,g.style.right="0px"):(A=="left"?oe=0:A=="middle"&&(oe=(j.sizer.clientWidth-g.offsetWidth)/2),g.style.left=oe+"px"),b&&T1(this,{left:oe,top:F,right:oe+g.offsetWidth,bottom:F+g.offsetHeight})},triggerOnKeyDown:Xr(g0),triggerOnKeyPress:Xr(y0),triggerOnKeyUp:m0,triggerOnMouseDown:Xr(w0),execCommand:function(d){if(Fu.hasOwnProperty(d))return Fu[d].call(null,this)},triggerElectric:Xr(function(d){T0(this,d)}),findPosH:function(d,g,b,S){var A=1;g<0&&(A=-1,g=-g);for(var j=it(this.doc,d),F=0;F<g&&(j=Dh(this.doc,j,A,b,S),!j.hitSide);++F);return j},moveH:Xr(function(d,g){var b=this;this.extendSelectionsBy(function(S){return b.display.shift||b.doc.extend||S.empty()?Dh(b.doc,S.head,d,g,b.options.rtlMoveVisually):d<0?S.from():S.to()},vt)}),deleteH:Xr(function(d,g){var b=this.doc.sel,S=this.doc;b.somethingSelected()?S.replaceSelection("",null,"+delete"):bl(this,function(A){var j=Dh(S,A.head,d,g,!1);return d<0?{from:j,to:A.head}:{from:A.head,to:j}})}),findPosV:function(d,g,b,S){var A=1,j=S;g<0&&(A=-1,g=-g);for(var F=it(this.doc,d),oe=0;oe<g;++oe){var de=Qe(this,F,"div");if(j==null?j=de.left:de.left=j,F=A0(this,de,A,b),F.hitSide)break}return F},moveV:Xr(function(d,g){var b=this,S=this.doc,A=[],j=!this.display.shift&&!S.extend&&S.sel.somethingSelected();if(S.extendSelectionsBy(function(oe){if(j)return d<0?oe.from():oe.to();var de=Qe(b,oe.head,"div");oe.goalColumn!=null&&(de.left=oe.goalColumn),A.push(de.left);var Me=A0(b,de,d,g);return g=="page"&&oe==S.sel.primary()&&dh(b,at(b,Me,"div").top-de.top),Me},vt),A.length)for(var F=0;F<S.sel.ranges.length;F++)S.sel.ranges[F].goalColumn=A[F]}),findWordAt:function(d){var g=this.doc,b=xt(g,d.line).text,S=d.ch,A=d.ch;if(b){var j=this.getHelper(d,"wordChars");(d.sticky=="before"||A==b.length)&&S?--S:++A;for(var F=b.charAt(S),oe=we(F,j)?function(de){return we(de,j)}:/\s/.test(F)?function(de){return/\s/.test(de)}:function(de){return!/\s/.test(de)&&!we(de)};S>0&&oe(b.charAt(S-1));)--S;for(;A<b.length&&oe(b.charAt(A));)++A}return new pn(Ze(d.line,S),Ze(d.line,A))},toggleOverwrite:function(d){d!=null&&d==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?he(this.display.cursorDiv,"CodeMirror-overwrite"):me(this.display.cursorDiv,"CodeMirror-overwrite"),st(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==ke()},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:Xr(function(d,g){Cu(this,d,g)}),getScrollInfo:function(){var d=this.display.scroller;return{left:d.scrollLeft,top:d.scrollTop,height:d.scrollHeight-Yr(this)-this.display.barHeight,width:d.scrollWidth-Yr(this)-this.display.barWidth,clientHeight:I(this),clientWidth:Ei(this)}},scrollIntoView:Xr(function(d,g){d==null?(d={from:this.doc.sel.primary().head,to:null},g==null&&(g=this.options.cursorScrollMargin)):typeof d=="number"?d={from:Ze(d,0),to:null}:d.from==null&&(d={from:d,to:null}),d.to||(d.to=d.from),d.margin=g||0,d.from.line!=null?E1(this,d):xy(this,d.from,d.to,d.margin)}),setSize:Xr(function(d,g){var b=this,S=function(j){return typeof j=="number"||/^\d+$/.test(String(j))?j+"px":j};d!=null&&(this.display.wrapper.style.width=S(d)),g!=null&&(this.display.wrapper.style.height=S(g)),this.options.lineWrapping&&K(this);var A=this.display.viewFrom;this.doc.iter(A,this.display.viewTo,function(j){if(j.widgets){for(var F=0;F<j.widgets.length;F++)if(j.widgets[F].noHScroll){La(b,A,"widget");break}}++A}),this.curOp.forceUpdate=!0,st(this,"refresh",this)}),operation:function(d){return Lo(this,d)},startOperation:function(){return Ps(this)},endOperation:function(){return ks(this)},refresh:Xr(function(){var d=this.display.cachedTextHeight;fo(this),this.curOp.forceUpdate=!0,Z(this),Cu(this,this.doc.scrollLeft,this.doc.scrollTop),vh(this.display),(d==null||Math.abs(d-ur(this.display))>.5||this.options.lineWrapping)&&sh(this),st(this,"refresh",this)}),swapDoc:Xr(function(d){var g=this.doc;return g.cm=null,this.state.selectingText&&this.state.selectingText(),Ny(this,d),Z(this),this.display.input.reset(),Cu(this,d.scrollLeft,d.scrollTop),this.curOp.forceScroll=!0,wn(this,"swapDoc",this,g),g}),phrase:function(d){var g=this.options.phrases;return g&&Object.prototype.hasOwnProperty.call(g,d)?g[d]:d},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Bt(a),a.registerHelper=function(d,g,b){p.hasOwnProperty(d)||(p[d]=a[d]={_global:[]}),p[d][g]=b},a.registerGlobalHelper=function(d,g,b,S){a.registerHelper(d,g,S),p[d]._global.push({pred:b,val:S})}}function Dh(a,l,p,d,g){var b=l,S=p,A=xt(a,l.line),j=g&&a.direction=="rtl"?-p:p;function F(){var Ct=l.line+j;return Ct<a.first||Ct>=a.first+a.size?!1:(l=new Ze(Ct,l.ch,l.sticky),A=xt(a,Ct))}function oe(Ct){var yt;if(d=="codepoint"){var Tt=A.text.charCodeAt(l.ch+(p>0?0:-1));if(isNaN(Tt))yt=null;else{var zt=p>0?Tt>=55296&&Tt<56320:Tt>=56320&&Tt<57343;yt=new Ze(l.line,Math.max(0,Math.min(A.text.length,l.ch+p*(zt?2:1))),-p)}}else g?yt=cO(a.cm,A,l,p):yt=Oh(A,l,p);if(yt==null)if(!Ct&&F())l=Th(g,a.cm,A,l.line,j);else return!1;else l=yt;return!0}if(d=="char"||d=="codepoint")oe();else if(d=="column")oe(!0);else if(d=="word"||d=="group")for(var de=null,Me=d=="group",Oe=a.cm&&a.cm.getHelper(l,"wordChars"),ze=!0;!(p<0&&!oe(!ze));ze=!1){var Je=A.text.charAt(l.ch)||`
`,lt=we(Je,Oe)?"w":Me&&Je==`
`?"n":!Me||/\s/.test(Je)?null:"p";if(Me&&!ze&&!lt&&(lt="s"),de&&de!=lt){p<0&&(p=1,oe(),l.sticky="after");break}if(lt&&(de=lt),p>0&&!oe(!ze))break}var mt=wf(a,l,b,S,!0);return io(b,mt)&&(mt.hitSide=!0),mt}function A0(a,l,p,d){var g=a.doc,b=l.left,S;if(d=="page"){var A=Math.min(a.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),j=Math.max(A-.5*ur(a.display),3);S=(p>0?l.bottom:l.top)+p*j}else d=="line"&&(S=p>0?l.bottom+3:l.top-3);for(var F;F=St(a,b,S),!!F.outside;){if(p<0?S<=0:S>=g.height){F.hitSide=!0;break}S+=p*5}return F}var gn=function(a){this.cm=a,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new He,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};gn.prototype.init=function(a){var l=this,p=this,d=p.cm,g=p.div=a.lineDiv;g.contentEditable=!0,P0(g,d.options.spellcheck,d.options.autocorrect,d.options.autocapitalize);function b(A){for(var j=A.target;j;j=j.parentNode){if(j==g)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(j.className))break}return!1}Se(g,"paste",function(A){!b(A)||ut(d,A)||O0(A,d)||c<=11&&setTimeout(mr(d,function(){return l.updateFromDOM()}),20)}),Se(g,"compositionstart",function(A){l.composing={data:A.data,done:!1}}),Se(g,"compositionupdate",function(A){l.composing||(l.composing={data:A.data,done:!1})}),Se(g,"compositionend",function(A){l.composing&&(A.data!=l.composing.data&&l.readFromDOMSoon(),l.composing.done=!0)}),Se(g,"touchstart",function(){return p.forceCompositionEnd()}),Se(g,"input",function(){l.composing||l.readFromDOMSoon()});function S(A){if(!(!b(A)||ut(d,A))){if(d.somethingSelected())Of({lineWise:!1,text:d.getSelections()}),A.type=="cut"&&d.replaceSelection("",null,"cut");else if(d.options.lineWiseCopyCut){var j=E0(d);Of({lineWise:!0,text:j.text}),A.type=="cut"&&d.operation(function(){d.setSelections(j.ranges,0,Ye),d.replaceSelection("",null,"cut")})}else return;if(A.clipboardData){A.clipboardData.clearData();var F=ki.text.join(`
`);if(A.clipboardData.setData("Text",F),A.clipboardData.getData("Text")==F){A.preventDefault();return}}var oe=k0(),de=oe.firstChild;d.display.lineSpace.insertBefore(oe,d.display.lineSpace.firstChild),de.value=ki.text.join(`
`);var Me=ke();$e(de),setTimeout(function(){d.display.lineSpace.removeChild(oe),Me.focus(),Me==g&&p.showPrimarySelection()},50)}}Se(g,"copy",S),Se(g,"cut",S)},gn.prototype.screenReaderLabelChanged=function(a){a?this.div.setAttribute("aria-label",a):this.div.removeAttribute("aria-label")},gn.prototype.prepareSelection=function(){var a=yy(this.cm,!1);return a.focus=ke()==this.div,a},gn.prototype.showSelection=function(a,l){!a||!this.cm.display.view.length||((a.focus||l)&&this.showPrimarySelection(),this.showMultipleSelections(a))},gn.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},gn.prototype.showPrimarySelection=function(){var a=this.getSelection(),l=this.cm,p=l.doc.sel.primary(),d=p.from(),g=p.to();if(l.display.viewTo==l.display.viewFrom||d.line>=l.display.viewTo||g.line<l.display.viewFrom){a.removeAllRanges();return}var b=Tf(l,a.anchorNode,a.anchorOffset),S=Tf(l,a.focusNode,a.focusOffset);if(!(b&&!b.bad&&S&&!S.bad&&jt(Ve(b,S),d)==0&&jt(ue(b,S),g)==0)){var A=l.display.view,j=d.line>=l.display.viewFrom&&M0(l,d)||{node:A[0].measure.map[2],offset:0},F=g.line<l.display.viewTo&&M0(l,g);if(!F){var oe=A[A.length-1].measure,de=oe.maps?oe.maps[oe.maps.length-1]:oe.map;F={node:de[de.length-1],offset:de[de.length-2]-de[de.length-3]}}if(!j||!F){a.removeAllRanges();return}var Me=a.rangeCount&&a.getRangeAt(0),Oe;try{Oe=ge(j.node,j.offset,F.offset,F.node)}catch{}Oe&&(!t&&l.state.focused?(a.collapse(j.node,j.offset),Oe.collapsed||(a.removeAllRanges(),a.addRange(Oe))):(a.removeAllRanges(),a.addRange(Oe)),Me&&a.anchorNode==null?a.addRange(Me):t&&this.startGracePeriod()),this.rememberSelection()}},gn.prototype.startGracePeriod=function(){var a=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){a.gracePeriod=!1,a.selectionChanged()&&a.cm.operation(function(){return a.cm.curOp.selectionChanged=!0})},20)},gn.prototype.showMultipleSelections=function(a){W(this.cm.display.cursorDiv,a.cursors),W(this.cm.display.selectionDiv,a.selection)},gn.prototype.rememberSelection=function(){var a=this.getSelection();this.lastAnchorNode=a.anchorNode,this.lastAnchorOffset=a.anchorOffset,this.lastFocusNode=a.focusNode,this.lastFocusOffset=a.focusOffset},gn.prototype.selectionInEditor=function(){var a=this.getSelection();if(!a.rangeCount)return!1;var l=a.getRangeAt(0).commonAncestorContainer;return R(this.div,l)},gn.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||ke()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},gn.prototype.blur=function(){this.div.blur()},gn.prototype.getField=function(){return this.div},gn.prototype.supportsTouch=function(){return!0},gn.prototype.receivedFocus=function(){var a=this,l=this;this.selectionInEditor()?setTimeout(function(){return a.pollSelection()},20):Lo(this.cm,function(){return l.cm.curOp.selectionChanged=!0});function p(){l.cm.state.focused&&(l.pollSelection(),l.polling.set(l.cm.options.pollInterval,p))}this.polling.set(this.cm.options.pollInterval,p)},gn.prototype.selectionChanged=function(){var a=this.getSelection();return a.anchorNode!=this.lastAnchorNode||a.anchorOffset!=this.lastAnchorOffset||a.focusNode!=this.lastFocusNode||a.focusOffset!=this.lastFocusOffset},gn.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var a=this.getSelection(),l=this.cm;if(P&&v&&this.cm.display.gutterSpecs.length&&AO(a.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var p=Tf(l,a.anchorNode,a.anchorOffset),d=Tf(l,a.focusNode,a.focusOffset);p&&d&&Lo(l,function(){Fr(l.doc,Ia(p,d),Ye),(p.bad||d.bad)&&(l.curOp.selectionChanged=!0)})}}},gn.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var a=this.cm,l=a.display,p=a.doc.sel.primary(),d=p.from(),g=p.to();if(d.ch==0&&d.line>a.firstLine()&&(d=Ze(d.line-1,xt(a.doc,d.line-1).length)),g.ch==xt(a.doc,g.line).text.length&&g.line<a.lastLine()&&(g=Ze(g.line+1,0)),d.line<l.viewFrom||g.line>l.viewTo-1)return!1;var b,S,A;d.line==l.viewFrom||(b=Os(a,d.line))==0?(S=qt(l.view[0].line),A=l.view[0].node):(S=qt(l.view[b].line),A=l.view[b-1].node.nextSibling);var j=Os(a,g.line),F,oe;if(j==l.view.length-1?(F=l.viewTo-1,oe=l.lineDiv.lastChild):(F=qt(l.view[j+1].line)-1,oe=l.view[j+1].node.previousSibling),!A)return!1;for(var de=a.doc.splitLines(MO(a,A,oe,S,F)),Me=Qn(a.doc,Ze(S,0),Ze(F,xt(a.doc,F).text.length));de.length>1&&Me.length>1;)if(Mt(de)==Mt(Me))de.pop(),Me.pop(),F--;else if(de[0]==Me[0])de.shift(),Me.shift(),S++;else break;for(var Oe=0,ze=0,Je=de[0],lt=Me[0],mt=Math.min(Je.length,lt.length);Oe<mt&&Je.charCodeAt(Oe)==lt.charCodeAt(Oe);)++Oe;for(var Ct=Mt(de),yt=Mt(Me),Tt=Math.min(Ct.length-(de.length==1?Oe:0),yt.length-(Me.length==1?Oe:0));ze<Tt&&Ct.charCodeAt(Ct.length-ze-1)==yt.charCodeAt(yt.length-ze-1);)++ze;if(de.length==1&&Me.length==1&&S==d.line)for(;Oe&&Oe>d.ch&&Ct.charCodeAt(Ct.length-ze-1)==yt.charCodeAt(yt.length-ze-1);)Oe--,ze++;de[de.length-1]=Ct.slice(0,Ct.length-ze).replace(/^\u200b+/,""),de[0]=de[0].slice(Oe).replace(/\u200b+$/,"");var zt=Ze(S,Oe),Nt=Ze(F,Me.length?Mt(Me).length-ze:0);if(de.length>1||de[0]||jt(zt,Nt))return yl(a.doc,de,zt,Nt,"+input"),!0},gn.prototype.ensurePolled=function(){this.forceCompositionEnd()},gn.prototype.reset=function(){this.forceCompositionEnd()},gn.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},gn.prototype.readFromDOMSoon=function(){var a=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(a.readDOMTimeout=null,a.composing)if(a.composing.done)a.composing=null;else return;a.updateFromDOM()},80))},gn.prototype.updateFromDOM=function(){var a=this;(this.cm.isReadOnly()||!this.pollContent())&&Lo(this.cm,function(){return fo(a.cm)})},gn.prototype.setUneditable=function(a){a.contentEditable="false"},gn.prototype.onKeyPress=function(a){a.charCode==0||this.composing||(a.preventDefault(),this.cm.isReadOnly()||mr(this.cm,Mh)(this.cm,String.fromCharCode(a.charCode==null?a.keyCode:a.charCode),0))},gn.prototype.readOnlyChanged=function(a){this.div.contentEditable=String(a!="nocursor")},gn.prototype.onContextMenu=function(){},gn.prototype.resetPosition=function(){},gn.prototype.needsContentAttribute=!0;function M0(a,l){var p=Pe(a,l.line);if(!p||p.hidden)return null;var d=xt(a.doc,l.line),g=ce(p,d,l.line),b=z(d,a.doc.direction),S="left";if(b){var A=X(b,l.ch);S=A%2?"right":"left"}var j=y(g.map,l.ch,S);return j.offset=j.collapse=="right"?j.end:j.start,j}function AO(a){for(var l=a;l;l=l.parentNode)if(/CodeMirror-gutter-wrapper/.test(l.className))return!0;return!1}function Cl(a,l){return l&&(a.bad=!0),a}function MO(a,l,p,d,g){var b="",S=!1,A=a.doc.lineSeparator(),j=!1;function F(Oe){return function(ze){return ze.id==Oe}}function oe(){S&&(b+=A,j&&(b+=A),S=j=!1)}function de(Oe){Oe&&(oe(),b+=Oe)}function Me(Oe){if(Oe.nodeType==1){var ze=Oe.getAttribute("cm-text");if(ze){de(ze);return}var Je=Oe.getAttribute("cm-marker"),lt;if(Je){var mt=a.findMarks(Ze(d,0),Ze(g+1,0),F(+Je));mt.length&&(lt=mt[0].find(0))&&de(Qn(a.doc,lt.from,lt.to).join(A));return}if(Oe.getAttribute("contenteditable")=="false")return;var Ct=/^(pre|div|p|li|table|br)$/i.test(Oe.nodeName);if(!/^br$/i.test(Oe.nodeName)&&Oe.textContent.length==0)return;Ct&&oe();for(var yt=0;yt<Oe.childNodes.length;yt++)Me(Oe.childNodes[yt]);/^(pre|p)$/i.test(Oe.nodeName)&&(j=!0),Ct&&(S=!0)}else Oe.nodeType==3&&de(Oe.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;Me(l),l!=p;)l=l.nextSibling,j=!1;return b}function Tf(a,l,p){var d;if(l==a.display.lineDiv){if(d=a.display.lineDiv.childNodes[p],!d)return Cl(a.clipPos(Ze(a.display.viewTo-1)),!0);l=null,p=0}else for(d=l;;d=d.parentNode){if(!d||d==a.display.lineDiv)return null;if(d.parentNode&&d.parentNode==a.display.lineDiv)break}for(var g=0;g<a.display.view.length;g++){var b=a.display.view[g];if(b.node==d)return DO(b,l,p)}}function DO(a,l,p){var d=a.text.firstChild,g=!1;if(!l||!R(d,l))return Cl(Ze(qt(a.line),0),!0);if(l==d&&(g=!0,l=d.childNodes[p],p=0,!l)){var b=a.rest?Mt(a.rest):a.line;return Cl(Ze(qt(b),b.text.length),g)}var S=l.nodeType==3?l:null,A=l;for(!S&&l.childNodes.length==1&&l.firstChild.nodeType==3&&(S=l.firstChild,p&&(p=S.nodeValue.length));A.parentNode!=d;)A=A.parentNode;var j=a.measure,F=j.maps;function oe(lt,mt,Ct){for(var yt=-1;yt<(F?F.length:0);yt++)for(var Tt=yt<0?j.map:F[yt],zt=0;zt<Tt.length;zt+=3){var Nt=Tt[zt+2];if(Nt==lt||Nt==mt){var Qt=qt(yt<0?a.line:a.rest[yt]),Sn=Tt[zt]+Ct;return(Ct<0||Nt!=lt)&&(Sn=Tt[zt+(Ct?1:0)]),Ze(Qt,Sn)}}}var de=oe(S,A,p);if(de)return Cl(de,g);for(var Me=A.nextSibling,Oe=S?S.nodeValue.length-p:0;Me;Me=Me.nextSibling){if(de=oe(Me,Me.firstChild,0),de)return Cl(Ze(de.line,de.ch-Oe),g);Oe+=Me.textContent.length}for(var ze=A.previousSibling,Je=p;ze;ze=ze.previousSibling){if(de=oe(ze,ze.firstChild,-1),de)return Cl(Ze(de.line,de.ch+Je),g);Je+=ze.textContent.length}}var Jn=function(a){this.cm=a,this.prevInput="",this.pollingFast=!1,this.polling=new He,this.hasSelection=!1,this.composing=null};Jn.prototype.init=function(a){var l=this,p=this,d=this.cm;this.createField(a);var g=this.textarea;a.wrapper.insertBefore(this.wrapper,a.wrapper.firstChild),k&&(g.style.width="0px"),Se(g,"input",function(){u&&c>=9&&l.hasSelection&&(l.hasSelection=null),p.poll()}),Se(g,"paste",function(S){ut(d,S)||O0(S,d)||(d.state.pasteIncoming=+new Date,p.fastPoll())});function b(S){if(!ut(d,S)){if(d.somethingSelected())Of({lineWise:!1,text:d.getSelections()});else if(d.options.lineWiseCopyCut){var A=E0(d);Of({lineWise:!0,text:A.text}),S.type=="cut"?d.setSelections(A.ranges,null,Ye):(p.prevInput="",g.value=A.text.join(`
`),$e(g))}else return;S.type=="cut"&&(d.state.cutIncoming=+new Date)}}Se(g,"cut",b),Se(g,"copy",b),Se(a.scroller,"paste",function(S){if(!(Er(a,S)||ut(d,S))){if(!g.dispatchEvent){d.state.pasteIncoming=+new Date,p.focus();return}var A=new Event("paste");A.clipboardData=S.clipboardData,g.dispatchEvent(A)}}),Se(a.lineSpace,"selectstart",function(S){Er(a,S)||Kt(S)}),Se(g,"compositionstart",function(){var S=d.getCursor("from");p.composing&&p.composing.range.clear(),p.composing={start:S,range:d.markText(S,d.getCursor("to"),{className:"CodeMirror-composing"})}}),Se(g,"compositionend",function(){p.composing&&(p.poll(),p.composing.range.clear(),p.composing=null)})},Jn.prototype.createField=function(a){this.wrapper=k0(),this.textarea=this.wrapper.firstChild},Jn.prototype.screenReaderLabelChanged=function(a){a?this.textarea.setAttribute("aria-label",a):this.textarea.removeAttribute("aria-label")},Jn.prototype.prepareSelection=function(){var a=this.cm,l=a.display,p=a.doc,d=yy(a);if(a.options.moveInputWithCursor){var g=Qe(a,p.sel.primary().head,"div"),b=l.wrapper.getBoundingClientRect(),S=l.lineDiv.getBoundingClientRect();d.teTop=Math.max(0,Math.min(l.wrapper.clientHeight-10,g.top+S.top-b.top)),d.teLeft=Math.max(0,Math.min(l.wrapper.clientWidth-10,g.left+S.left-b.left))}return d},Jn.prototype.showSelection=function(a){var l=this.cm,p=l.display;W(p.cursorDiv,a.cursors),W(p.selectionDiv,a.selection),a.teTop!=null&&(this.wrapper.style.top=a.teTop+"px",this.wrapper.style.left=a.teLeft+"px")},Jn.prototype.reset=function(a){if(!(this.contextMenuPending||this.composing)){var l=this.cm;if(l.somethingSelected()){this.prevInput="";var p=l.getSelection();this.textarea.value=p,l.state.focused&&$e(this.textarea),u&&c>=9&&(this.hasSelection=p)}else a||(this.prevInput=this.textarea.value="",u&&c>=9&&(this.hasSelection=null))}},Jn.prototype.getField=function(){return this.textarea},Jn.prototype.supportsTouch=function(){return!1},Jn.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!L||ke()!=this.textarea))try{this.textarea.focus()}catch{}},Jn.prototype.blur=function(){this.textarea.blur()},Jn.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Jn.prototype.receivedFocus=function(){this.slowPoll()},Jn.prototype.slowPoll=function(){var a=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){a.poll(),a.cm.state.focused&&a.slowPoll()})},Jn.prototype.fastPoll=function(){var a=!1,l=this;l.pollingFast=!0;function p(){var d=l.poll();!d&&!a?(a=!0,l.polling.set(60,p)):(l.pollingFast=!1,l.slowPoll())}l.polling.set(20,p)},Jn.prototype.poll=function(){var a=this,l=this.cm,p=this.textarea,d=this.prevInput;if(this.contextMenuPending||!l.state.focused||yn(p)&&!d&&!this.composing||l.isReadOnly()||l.options.disableInput||l.state.keySeq)return!1;var g=p.value;if(g==d&&!l.somethingSelected())return!1;if(u&&c>=9&&this.hasSelection===g||D&&/[\uf700-\uf7ff]/.test(g))return l.display.input.reset(),!1;if(l.doc.sel==l.display.selForContextMenu){var b=g.charCodeAt(0);if(b==8203&&!d&&(d="​"),b==8666)return this.reset(),this.cm.execCommand("undo")}for(var S=0,A=Math.min(d.length,g.length);S<A&&d.charCodeAt(S)==g.charCodeAt(S);)++S;return Lo(l,function(){Mh(l,g.slice(S),d.length-S,null,a.composing?"*compose":null),g.length>1e3||g.indexOf(`
`)>-1?p.value=a.prevInput="":a.prevInput=g,a.composing&&(a.composing.range.clear(),a.composing.range=l.markText(a.composing.start,l.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Jn.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Jn.prototype.onKeyPress=function(){u&&c>=9&&(this.hasSelection=null),this.fastPoll()},Jn.prototype.onContextMenu=function(a){var l=this,p=l.cm,d=p.display,g=l.textarea;l.contextMenuPending&&l.contextMenuPending();var b=Ss(p,a),S=d.scroller.scrollTop;if(!b||m)return;var A=p.options.resetSelectionOnContextMenu;A&&p.doc.sel.contains(b)==-1&&mr(p,Fr)(p.doc,Ia(b),Ye);var j=g.style.cssText,F=l.wrapper.style.cssText,oe=l.wrapper.offsetParent.getBoundingClientRect();l.wrapper.style.cssText="position: static",g.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(a.clientY-oe.top-5)+"px; left: "+(a.clientX-oe.left-5)+`px;
      z-index: 1000; background: `+(u?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var de;f&&(de=window.scrollY),d.input.focus(),f&&window.scrollTo(null,de),d.input.reset(),p.somethingSelected()||(g.value=l.prevInput=" "),l.contextMenuPending=Oe,d.selForContextMenu=p.doc.sel,clearTimeout(d.detectingSelectAll);function Me(){if(g.selectionStart!=null){var Je=p.somethingSelected(),lt="​"+(Je?g.value:"");g.value="⇚",g.value=lt,l.prevInput=Je?"":"​",g.selectionStart=1,g.selectionEnd=lt.length,d.selForContextMenu=p.doc.sel}}function Oe(){if(l.contextMenuPending==Oe&&(l.contextMenuPending=!1,l.wrapper.style.cssText=F,g.style.cssText=j,u&&c<9&&d.scrollbars.setScrollTop(d.scroller.scrollTop=S),g.selectionStart!=null)){(!u||u&&c<9)&&Me();var Je=0,lt=function(){d.selForContextMenu==p.doc.sel&&g.selectionStart==0&&g.selectionEnd>0&&l.prevInput=="​"?mr(p,Xy)(p):Je++<10?d.detectingSelectAll=setTimeout(lt,500):(d.selForContextMenu=null,d.input.reset())};d.detectingSelectAll=setTimeout(lt,200)}}if(u&&c>=9&&Me(),pe){G(a);var ze=function(){qe(window,"mouseup",ze),setTimeout(Oe,20)};Se(window,"mouseup",ze)}else setTimeout(Oe,50)},Jn.prototype.readOnlyChanged=function(a){a||this.reset(),this.textarea.disabled=a=="nocursor",this.textarea.readOnly=!!a},Jn.prototype.setUneditable=function(){},Jn.prototype.needsContentAttribute=!1;function LO(a,l){if(l=l?Re(l):{},l.value=a.value,!l.tabindex&&a.tabIndex&&(l.tabindex=a.tabIndex),!l.placeholder&&a.placeholder&&(l.placeholder=a.placeholder),l.autofocus==null){var p=ke();l.autofocus=p==a||a.getAttribute("autofocus")!=null&&p==document.body}function d(){a.value=A.getValue()}var g;if(a.form&&(Se(a.form,"submit",d),!l.leaveSubmitMethodAlone)){var b=a.form;g=b.submit;try{var S=b.submit=function(){d(),b.submit=g,b.submit(),b.submit=S}}catch{}}l.finishInit=function(j){j.save=d,j.getTextArea=function(){return a},j.toTextArea=function(){j.toTextArea=isNaN,d(),a.parentNode.removeChild(j.getWrapperElement()),a.style.display="",a.form&&(qe(a.form,"submit",d),!l.leaveSubmitMethodAlone&&typeof a.form.submit=="function"&&(a.form.submit=g))}},a.style.display="none";var A=Dn(function(j){return a.parentNode.insertBefore(j,a.nextSibling)},l);return A}function jO(a){a.off=qe,a.on=Se,a.wheelEventPixels=H1,a.Doc=po,a.splitLines=Nn,a.countColumn=rt,a.findColumn=nt,a.isWordChar=J,a.Pass=Ne,a.signal=st,a.Line=nr,a.changeEnd=Na,a.scrollbarModel=Oy,a.Pos=Ze,a.cmpPos=jt,a.modes=Br,a.mimeModes=on,a.resolveMode=At,a.getMode=Ft,a.modeExtensions=Dr,a.extendMode=Lr,a.copyState=$n,a.startState=sr,a.innerMode=Tn,a.commands=Fu,a.keyMap=ua,a.keyName=f0,a.isModifierKey=u0,a.lookupKey=_l,a.normalizeKeyMap=uO,a.StringStream=an,a.SharedTextMarker=Iu,a.TextMarker=Fa,a.LineWidget=ju,a.e_preventDefault=Kt,a.e_stopPropagation=hn,a.e_stop=G,a.addClass=he,a.contains=R,a.rmClass=me,a.keyNames=Va}OO(Dn),kO(Dn);var IO="iter insert remove copy getEditor constructor".split(" ");for(var Ef in po.prototype)po.prototype.hasOwnProperty(Ef)&&_t(IO,Ef)<0&&(Dn.prototype[Ef]=function(a){return function(){return a.apply(this.doc,arguments)}}(po.prototype[Ef]));return Bt(po),Dn.inputStyles={textarea:Jn,contenteditable:gn},Dn.defineMode=function(a){!Dn.defaults.mode&&a!="null"&&(Dn.defaults.mode=a),An.apply(this,arguments)},Dn.defineMIME=$t,Dn.defineMode("null",function(){return{token:function(a){return a.skipToEnd()}}}),Dn.defineMIME("text/plain","null"),Dn.defineExtension=function(a,l){Dn.prototype[a]=l},Dn.defineDocExtension=function(a,l){po.prototype[a]=l},Dn.fromTextArea=LO,jO(Dn),Dn.version="5.63.0",Dn})},656:(o,n,e)=>{(function(t){t(e(237))})(function(t){t.defineMode("css",function(Y,W){var te=W.inline;W.propertyKeywords||(W=t.resolveMode("text/css"));var q=Y.indentUnit,ge=W.tokenHooks,R=W.documentTypes||{},ke=W.mediaTypes||{},he=W.mediaFeatures||{},Le=W.mediaValueKeywords||{},$e=W.propertyKeywords||{},be=W.nonStandardPropertyKeywords||{},Re=W.fontProperties||{},rt=W.counterDescriptors||{},He=W.colorKeywords||{},_t=W.valueKeywords||{},Te=W.allowNested,Ne=W.lineComment,Ye=W.supportsAtComponent===!0,Fe=Y.highlightNonStandardPropertyKeywords!==!1,vt,nt;function bt(ee,se){return vt=se,ee}function Yt(ee,se){var ae=ee.next();if(ge[ae]){var et=ge[ae](ee,se);if(et!==!1)return et}if(ae=="@")return ee.eatWhile(/[\w\\\-]/),bt("def",ee.current());if(ae=="="||(ae=="~"||ae=="|")&&ee.eat("="))return bt(null,"compare");if(ae=='"'||ae=="'")return se.tokenize=Mt(ae),se.tokenize(ee,se);if(ae=="#")return ee.eatWhile(/[\w\\\-]/),bt("atom","hash");if(ae=="!")return ee.match(/^\s*\w*/),bt("keyword","important");if(/\d/.test(ae)||ae=="."&&ee.eat(/\d/))return ee.eatWhile(/[\w.%]/),bt("number","unit");if(ae==="-"){if(/[\d.]/.test(ee.peek()))return ee.eatWhile(/[\w.%]/),bt("number","unit");if(ee.match(/^-[\w\\\-]*/))return ee.eatWhile(/[\w\\\-]/),ee.match(/^\s*:/,!1)?bt("variable-2","variable-definition"):bt("variable-2","variable");if(ee.match(/^\w+-/))return bt("meta","meta")}else return/[,+>*\/]/.test(ae)?bt(null,"select-op"):ae=="."&&ee.match(/^-?[_a-z][_a-z0-9-]*/i)?bt("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(ae)?bt(null,ae):ee.match(/^[\w-.]+(?=\()/)?(/^(url(-prefix)?|domain|regexp)$/i.test(ee.current())&&(se.tokenize=un),bt("variable callee","variable")):/[\w\\\-]/.test(ae)?(ee.eatWhile(/[\w\\\-]/),bt("property","word")):bt(null,null)}function Mt(ee){return function(se,ae){for(var et=!1,ct;(ct=se.next())!=null;){if(ct==ee&&!et){ee==")"&&se.backUp(1);break}et=!et&&ct=="\\"}return(ct==ee||!et&&ee!=")")&&(ae.tokenize=null),bt("string","string")}}function un(ee,se){return ee.next(),ee.match(/^\s*[\"\')]/,!1)?se.tokenize=null:se.tokenize=Mt(")"),bt(null,"(")}function tn(ee,se,ae){this.type=ee,this.indent=se,this.prev=ae}function Rt(ee,se,ae,et){return ee.context=new tn(ae,se.indentation()+(et===!1?0:q),ee.context),ae}function E(ee){return ee.context.prev&&(ee.context=ee.context.prev),ee.context.type}function H(ee,se,ae){return xe[ae.context.type](ee,se,ae)}function J(ee,se,ae,et){for(var ct=et||1;ct>0;ct--)ae.context=ae.context.prev;return H(ee,se,ae)}function we(ee){var se=ee.current().toLowerCase();_t.hasOwnProperty(se)?nt="atom":He.hasOwnProperty(se)?nt="keyword":nt="variable"}var xe={};return xe.top=function(ee,se,ae){if(ee=="{")return Rt(ae,se,"block");if(ee=="}"&&ae.context.prev)return E(ae);if(Ye&&/@component/i.test(ee))return Rt(ae,se,"atComponentBlock");if(/^@(-moz-)?document$/i.test(ee))return Rt(ae,se,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/i.test(ee))return Rt(ae,se,"atBlock");if(/^@(font-face|counter-style)/i.test(ee))return ae.stateArg=ee,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(ee))return"keyframes";if(ee&&ee.charAt(0)=="@")return Rt(ae,se,"at");if(ee=="hash")nt="builtin";else if(ee=="word")nt="tag";else{if(ee=="variable-definition")return"maybeprop";if(ee=="interpolation")return Rt(ae,se,"interpolation");if(ee==":")return"pseudo";if(Te&&ee=="(")return Rt(ae,se,"parens")}return ae.context.type},xe.block=function(ee,se,ae){if(ee=="word"){var et=se.current().toLowerCase();return $e.hasOwnProperty(et)?(nt="property","maybeprop"):be.hasOwnProperty(et)?(nt=Fe?"string-2":"property","maybeprop"):Te?(nt=se.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(nt+=" error","maybeprop")}else return ee=="meta"?"block":!Te&&(ee=="hash"||ee=="qualifier")?(nt="error","block"):xe.top(ee,se,ae)},xe.maybeprop=function(ee,se,ae){return ee==":"?Rt(ae,se,"prop"):H(ee,se,ae)},xe.prop=function(ee,se,ae){if(ee==";")return E(ae);if(ee=="{"&&Te)return Rt(ae,se,"propBlock");if(ee=="}"||ee=="{")return J(ee,se,ae);if(ee=="(")return Rt(ae,se,"parens");if(ee=="hash"&&!/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(se.current()))nt+=" error";else if(ee=="word")we(se);else if(ee=="interpolation")return Rt(ae,se,"interpolation");return"prop"},xe.propBlock=function(ee,se,ae){return ee=="}"?E(ae):ee=="word"?(nt="property","maybeprop"):ae.context.type},xe.parens=function(ee,se,ae){return ee=="{"||ee=="}"?J(ee,se,ae):ee==")"?E(ae):ee=="("?Rt(ae,se,"parens"):ee=="interpolation"?Rt(ae,se,"interpolation"):(ee=="word"&&we(se),"parens")},xe.pseudo=function(ee,se,ae){return ee=="meta"?"pseudo":ee=="word"?(nt="variable-3",ae.context.type):H(ee,se,ae)},xe.documentTypes=function(ee,se,ae){return ee=="word"&&R.hasOwnProperty(se.current())?(nt="tag",ae.context.type):xe.atBlock(ee,se,ae)},xe.atBlock=function(ee,se,ae){if(ee=="(")return Rt(ae,se,"atBlock_parens");if(ee=="}"||ee==";")return J(ee,se,ae);if(ee=="{")return E(ae)&&Rt(ae,se,Te?"block":"top");if(ee=="interpolation")return Rt(ae,se,"interpolation");if(ee=="word"){var et=se.current().toLowerCase();et=="only"||et=="not"||et=="and"||et=="or"?nt="keyword":ke.hasOwnProperty(et)?nt="attribute":he.hasOwnProperty(et)?nt="property":Le.hasOwnProperty(et)?nt="keyword":$e.hasOwnProperty(et)?nt="property":be.hasOwnProperty(et)?nt=Fe?"string-2":"property":_t.hasOwnProperty(et)?nt="atom":He.hasOwnProperty(et)?nt="keyword":nt="error"}return ae.context.type},xe.atComponentBlock=function(ee,se,ae){return ee=="}"?J(ee,se,ae):ee=="{"?E(ae)&&Rt(ae,se,Te?"block":"top",!1):(ee=="word"&&(nt="error"),ae.context.type)},xe.atBlock_parens=function(ee,se,ae){return ee==")"?E(ae):ee=="{"||ee=="}"?J(ee,se,ae,2):xe.atBlock(ee,se,ae)},xe.restricted_atBlock_before=function(ee,se,ae){return ee=="{"?Rt(ae,se,"restricted_atBlock"):ee=="word"&&ae.stateArg=="@counter-style"?(nt="variable","restricted_atBlock_before"):H(ee,se,ae)},xe.restricted_atBlock=function(ee,se,ae){return ee=="}"?(ae.stateArg=null,E(ae)):ee=="word"?(ae.stateArg=="@font-face"&&!Re.hasOwnProperty(se.current().toLowerCase())||ae.stateArg=="@counter-style"&&!rt.hasOwnProperty(se.current().toLowerCase())?nt="error":nt="property","maybeprop"):"restricted_atBlock"},xe.keyframes=function(ee,se,ae){return ee=="word"?(nt="variable","keyframes"):ee=="{"?Rt(ae,se,"top"):H(ee,se,ae)},xe.at=function(ee,se,ae){return ee==";"?E(ae):ee=="{"||ee=="}"?J(ee,se,ae):(ee=="word"?nt="tag":ee=="hash"&&(nt="builtin"),"at")},xe.interpolation=function(ee,se,ae){return ee=="}"?E(ae):ee=="{"||ee==";"?J(ee,se,ae):(ee=="word"?nt="variable":ee!="variable"&&ee!="("&&ee!=")"&&(nt="error"),"interpolation")},{startState:function(ee){return{tokenize:null,state:te?"block":"top",stateArg:null,context:new tn(te?"block":"top",ee||0,null)}},token:function(ee,se){if(!se.tokenize&&ee.eatSpace())return null;var ae=(se.tokenize||Yt)(ee,se);return ae&&typeof ae=="object"&&(vt=ae[1],ae=ae[0]),nt=ae,vt!="comment"&&(se.state=xe[se.state](vt,ee,se)),nt},indent:function(ee,se){var ae=ee.context,et=se&&se.charAt(0),ct=ae.indent;return ae.type=="prop"&&(et=="}"||et==")")&&(ae=ae.prev),ae.prev&&(et=="}"&&(ae.type=="block"||ae.type=="top"||ae.type=="interpolation"||ae.type=="restricted_atBlock")?(ae=ae.prev,ct=ae.indent):(et==")"&&(ae.type=="parens"||ae.type=="atBlock_parens")||et=="{"&&(ae.type=="at"||ae.type=="atBlock"))&&(ct=Math.max(0,ae.indent-q))),ct},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:Ne,fold:"brace"}});function r(Y){for(var W={},te=0;te<Y.length;++te)W[Y[te].toLowerCase()]=!0;return W}var i=["domain","regexp","url","url-prefix"],s=r(i),u=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],c=r(u),f=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover","prefers-color-scheme"],h=r(f),v=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive","dark","light"],m=r(v),_=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","all","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","binding","bleed","block-size","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-content","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-height-step","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotate","rotation","rotation-point","row-gap","ruby-align","ruby-overhang","ruby-position","ruby-span","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-type","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-orientation","text-outline","text-overflow","text-rendering","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","touch-action","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","paint-order","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],C=r(_),T=["accent-color","aspect-ratio","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","content-visibility","margin-block","margin-block-end","margin-block-start","margin-inline","margin-inline-end","margin-inline-start","overflow-anchor","overscroll-behavior","padding-block","padding-block-end","padding-block-start","padding-inline","padding-inline-end","padding-inline-start","scroll-snap-stop","scrollbar-3d-light-color","scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-track-color","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","shape-inside","zoom"],k=r(T),P=["font-display","font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],L=r(P),D=["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"],V=r(D),re=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],_e=r(re),Q=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","blur","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","brightness","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","contrast","copy","counter","counters","cover","crop","cross","crosshair","cubic-bezier","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","drop-shadow","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","grayscale","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","hue-rotate","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","manipulation","match","matrix","matrix3d","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiple_mask_images","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturate","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","sepia","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],pe=r(Q),ne=i.concat(u).concat(f).concat(v).concat(_).concat(T).concat(re).concat(Q);t.registerHelper("hintWords","css",ne);function me(Y,W){for(var te=!1,q;(q=Y.next())!=null;){if(te&&q=="/"){W.tokenize=null;break}te=q=="*"}return["comment","comment"]}t.defineMIME("text/css",{documentTypes:s,mediaTypes:c,mediaFeatures:h,mediaValueKeywords:m,propertyKeywords:C,nonStandardPropertyKeywords:k,fontProperties:L,counterDescriptors:V,colorKeywords:_e,valueKeywords:pe,tokenHooks:{"/":function(Y,W){return Y.eat("*")?(W.tokenize=me,me(Y,W)):!1}},name:"css"}),t.defineMIME("text/x-scss",{mediaTypes:c,mediaFeatures:h,mediaValueKeywords:m,propertyKeywords:C,nonStandardPropertyKeywords:k,colorKeywords:_e,valueKeywords:pe,fontProperties:L,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(Y,W){return Y.eat("/")?(Y.skipToEnd(),["comment","comment"]):Y.eat("*")?(W.tokenize=me,me(Y,W)):["operator","operator"]},":":function(Y){return Y.match(/^\s*\{/,!1)?[null,null]:!1},$:function(Y){return Y.match(/^[\w-]+/),Y.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(Y){return Y.eat("{")?[null,"interpolation"]:!1}},name:"css",helperType:"scss"}),t.defineMIME("text/x-less",{mediaTypes:c,mediaFeatures:h,mediaValueKeywords:m,propertyKeywords:C,nonStandardPropertyKeywords:k,colorKeywords:_e,valueKeywords:pe,fontProperties:L,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(Y,W){return Y.eat("/")?(Y.skipToEnd(),["comment","comment"]):Y.eat("*")?(W.tokenize=me,me(Y,W)):["operator","operator"]},"@":function(Y){return Y.eat("{")?[null,"interpolation"]:Y.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i,!1)?!1:(Y.eatWhile(/[\w\\\-]/),Y.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),t.defineMIME("text/x-gss",{documentTypes:s,mediaTypes:c,mediaFeatures:h,propertyKeywords:C,nonStandardPropertyKeywords:k,fontProperties:L,counterDescriptors:V,colorKeywords:_e,valueKeywords:pe,supportsAtComponent:!0,tokenHooks:{"/":function(Y,W){return Y.eat("*")?(W.tokenize=me,me(Y,W)):!1}},name:"css",helperType:"gss"})})},520:(o,n,e)=>{(function(t){t(e(237),e(576),e(792),e(656))})(function(t){var r={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]};function i(m,_,C){var T=m.current(),k=T.search(_);return k>-1?m.backUp(T.length-k):T.match(/<\/?$/)&&(m.backUp(T.length),m.match(_,!1)||m.match(T)),C}var s={};function u(m){var _=s[m];return _||(s[m]=new RegExp("\\s+"+m+`\\s*=\\s*('|")?([^'"]+)('|")?\\s*`))}function c(m,_){var C=m.match(u(_));return C?/^\s*(.*?)\s*$/.exec(C[2])[1]:""}function f(m,_){return new RegExp((_?"^":"")+"</s*"+m+"s*>","i")}function h(m,_){for(var C in m)for(var T=_[C]||(_[C]=[]),k=m[C],P=k.length-1;P>=0;P--)T.unshift(k[P])}function v(m,_){for(var C=0;C<m.length;C++){var T=m[C];if(!T[0]||T[1].test(c(_,T[0])))return T[2]}}t.defineMode("htmlmixed",function(m,_){var C=t.getMode(m,{name:"xml",htmlMode:!0,multilineTagIndentFactor:_.multilineTagIndentFactor,multilineTagIndentPastTag:_.multilineTagIndentPastTag,allowMissingTagName:_.allowMissingTagName}),T={},k=_&&_.tags,P=_&&_.scriptTypes;if(h(r,T),k&&h(k,T),P)for(var L=P.length-1;L>=0;L--)T.script.unshift(["type",P[L].matches,P[L].mode]);function D(V,re){var _e=C.token(V,re.htmlState),Q=/\btag\b/.test(_e),pe;if(Q&&!/[<>\s\/]/.test(V.current())&&(pe=re.htmlState.tagName&&re.htmlState.tagName.toLowerCase())&&T.hasOwnProperty(pe))re.inTag=pe+" ";else if(re.inTag&&Q&&/>$/.test(V.current())){var ne=/^([\S]+) (.*)/.exec(re.inTag);re.inTag=null;var me=V.current()==">"&&v(T[ne[1]],ne[2]),Y=t.getMode(m,me),W=f(ne[1],!0),te=f(ne[1],!1);re.token=function(q,ge){return q.match(W,!1)?(ge.token=D,ge.localState=ge.localMode=null,null):i(q,te,ge.localMode.token(q,ge.localState))},re.localMode=Y,re.localState=t.startState(Y,C.indent(re.htmlState,"",""))}else re.inTag&&(re.inTag+=V.current(),V.eol()&&(re.inTag+=" "));return _e}return{startState:function(){var V=t.startState(C);return{token:D,inTag:null,localMode:null,localState:null,htmlState:V}},copyState:function(V){var re;return V.localState&&(re=t.copyState(V.localMode,V.localState)),{token:V.token,inTag:V.inTag,localMode:V.localMode,localState:re,htmlState:t.copyState(C,V.htmlState)}},token:function(V,re){return re.token(V,re)},indent:function(V,re,_e){return!V.localMode||/^\s*<\//.test(re)?C.indent(V.htmlState,re,_e):V.localMode.indent?V.localMode.indent(V.localState,re,_e):t.Pass},innerMode:function(V){return{state:V.localState||V.htmlState,mode:V.localMode||C}}}},"xml","javascript","css"),t.defineMIME("text/html","htmlmixed")})},792:(o,n,e)=>{(function(t){t(e(237))})(function(t){t.defineMode("javascript",function(r,i){var s=r.indentUnit,u=i.statementIndent,c=i.jsonld,f=i.json||c,h=i.trackScope!==!1,v=i.typescript,m=i.wordCharacters||/[\w$\xa1-\uffff]/,_=function(){function B(Cn){return{type:Cn,style:"keyword"}}var ue=B("keyword a"),Ve=B("keyword b"),tt=B("keyword c"),it=B("keyword d"),Gt=B("operator"),Jt={type:"atom",style:"atom"};return{if:B("if"),while:ue,with:ue,else:Ve,do:Ve,try:Ve,finally:Ve,return:it,break:it,continue:it,new:B("new"),delete:tt,void:tt,throw:tt,debugger:B("debugger"),var:B("var"),const:B("var"),let:B("var"),function:B("function"),catch:B("catch"),for:B("for"),switch:B("switch"),case:B("case"),default:B("default"),in:Gt,typeof:Gt,instanceof:Gt,true:Jt,false:Jt,null:Jt,undefined:Jt,NaN:Jt,Infinity:Jt,this:B("this"),class:B("class"),super:B("atom"),yield:tt,export:B("export"),import:B("import"),extends:tt,await:tt}}(),C=/[+\-*&%=<>!?|~^@]/,T=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function k(B){for(var ue=!1,Ve,tt=!1;(Ve=B.next())!=null;){if(!ue){if(Ve=="/"&&!tt)return;Ve=="["?tt=!0:tt&&Ve=="]"&&(tt=!1)}ue=!ue&&Ve=="\\"}}var P,L;function D(B,ue,Ve){return P=B,L=Ve,ue}function V(B,ue){var Ve=B.next();if(Ve=='"'||Ve=="'")return ue.tokenize=re(Ve),ue.tokenize(B,ue);if(Ve=="."&&B.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return D("number","number");if(Ve=="."&&B.match(".."))return D("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(Ve))return D(Ve);if(Ve=="="&&B.eat(">"))return D("=>","operator");if(Ve=="0"&&B.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return D("number","number");if(/\d/.test(Ve))return B.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),D("number","number");if(Ve=="/")return B.eat("*")?(ue.tokenize=_e,_e(B,ue)):B.eat("/")?(B.skipToEnd(),D("comment","comment")):io(B,ue,1)?(k(B),B.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),D("regexp","string-2")):(B.eat("="),D("operator","operator",B.current()));if(Ve=="`")return ue.tokenize=Q,Q(B,ue);if(Ve=="#"&&B.peek()=="!")return B.skipToEnd(),D("meta","meta");if(Ve=="#"&&B.eatWhile(m))return D("variable","property");if(Ve=="<"&&B.match("!--")||Ve=="-"&&B.match("->")&&!/\S/.test(B.string.slice(0,B.start)))return B.skipToEnd(),D("comment","comment");if(C.test(Ve))return(Ve!=">"||!ue.lexical||ue.lexical.type!=">")&&(B.eat("=")?(Ve=="!"||Ve=="=")&&B.eat("="):/[<>*+\-|&?]/.test(Ve)&&(B.eat(Ve),Ve==">"&&B.eat(Ve))),Ve=="?"&&B.eat(".")?D("."):D("operator","operator",B.current());if(m.test(Ve)){B.eatWhile(m);var tt=B.current();if(ue.lastType!="."){if(_.propertyIsEnumerable(tt)){var it=_[tt];return D(it.type,it.style,tt)}if(tt=="async"&&B.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return D("async","keyword",tt)}return D("variable","variable",tt)}}function re(B){return function(ue,Ve){var tt=!1,it;if(c&&ue.peek()=="@"&&ue.match(T))return Ve.tokenize=V,D("jsonld-keyword","meta");for(;(it=ue.next())!=null&&!(it==B&&!tt);)tt=!tt&&it=="\\";return tt||(Ve.tokenize=V),D("string","string")}}function _e(B,ue){for(var Ve=!1,tt;tt=B.next();){if(tt=="/"&&Ve){ue.tokenize=V;break}Ve=tt=="*"}return D("comment","comment")}function Q(B,ue){for(var Ve=!1,tt;(tt=B.next())!=null;){if(!Ve&&(tt=="`"||tt=="$"&&B.eat("{"))){ue.tokenize=V;break}Ve=!Ve&&tt=="\\"}return D("quasi","string-2",B.current())}var pe="([{}])";function ne(B,ue){ue.fatArrowAt&&(ue.fatArrowAt=null);var Ve=B.string.indexOf("=>",B.start);if(!(Ve<0)){if(v){var tt=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(B.string.slice(B.start,Ve));tt&&(Ve=tt.index)}for(var it=0,Gt=!1,Jt=Ve-1;Jt>=0;--Jt){var Cn=B.string.charAt(Jt),sn=pe.indexOf(Cn);if(sn>=0&&sn<3){if(!it){++Jt;break}if(--it==0){Cn=="("&&(Gt=!0);break}}else if(sn>=3&&sn<6)++it;else if(m.test(Cn))Gt=!0;else if(/["'\/`]/.test(Cn))for(;;--Jt){if(Jt==0)return;var hr=B.string.charAt(Jt-1);if(hr==Cn&&B.string.charAt(Jt-2)!="\\"){Jt--;break}}else if(Gt&&!it){++Jt;break}}Gt&&!it&&(ue.fatArrowAt=Jt)}}var me={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function Y(B,ue,Ve,tt,it,Gt){this.indented=B,this.column=ue,this.type=Ve,this.prev=it,this.info=Gt,tt!=null&&(this.align=tt)}function W(B,ue){if(!h)return!1;for(var Ve=B.localVars;Ve;Ve=Ve.next)if(Ve.name==ue)return!0;for(var tt=B.context;tt;tt=tt.prev)for(var Ve=tt.vars;Ve;Ve=Ve.next)if(Ve.name==ue)return!0}function te(B,ue,Ve,tt,it){var Gt=B.cc;for(q.state=B,q.stream=it,q.marked=null,q.cc=Gt,q.style=ue,B.lexical.hasOwnProperty("align")||(B.lexical.align=!0);;){var Jt=Gt.length?Gt.pop():f?bt:vt;if(Jt(Ve,tt)){for(;Gt.length&&Gt[Gt.length-1].lex;)Gt.pop()();return q.marked?q.marked:Ve=="variable"&&W(B,tt)?"variable-2":ue}}}var q={state:null,column:null,marked:null,cc:null};function ge(){for(var B=arguments.length-1;B>=0;B--)q.cc.push(arguments[B])}function R(){return ge.apply(null,arguments),!0}function ke(B,ue){for(var Ve=ue;Ve;Ve=Ve.next)if(Ve.name==B)return!0;return!1}function he(B){var ue=q.state;if(q.marked="def",!!h){if(ue.context){if(ue.lexical.info=="var"&&ue.context&&ue.context.block){var Ve=Le(B,ue.context);if(Ve!=null){ue.context=Ve;return}}else if(!ke(B,ue.localVars)){ue.localVars=new Re(B,ue.localVars);return}}i.globalVars&&!ke(B,ue.globalVars)&&(ue.globalVars=new Re(B,ue.globalVars))}}function Le(B,ue){if(ue)if(ue.block){var Ve=Le(B,ue.prev);return Ve?Ve==ue.prev?ue:new be(Ve,ue.vars,!0):null}else return ke(B,ue.vars)?ue:new be(ue.prev,new Re(B,ue.vars),!1);else return null}function $e(B){return B=="public"||B=="private"||B=="protected"||B=="abstract"||B=="readonly"}function be(B,ue,Ve){this.prev=B,this.vars=ue,this.block=Ve}function Re(B,ue){this.name=B,this.next=ue}var rt=new Re("this",new Re("arguments",null));function He(){q.state.context=new be(q.state.context,q.state.localVars,!1),q.state.localVars=rt}function _t(){q.state.context=new be(q.state.context,q.state.localVars,!0),q.state.localVars=null}function Te(){q.state.localVars=q.state.context.vars,q.state.context=q.state.context.prev}Te.lex=!0;function Ne(B,ue){var Ve=function(){var tt=q.state,it=tt.indented;if(tt.lexical.type=="stat")it=tt.lexical.indented;else for(var Gt=tt.lexical;Gt&&Gt.type==")"&&Gt.align;Gt=Gt.prev)it=Gt.indented;tt.lexical=new Y(it,q.stream.column(),B,null,tt.lexical,ue)};return Ve.lex=!0,Ve}function Ye(){var B=q.state;B.lexical.prev&&(B.lexical.type==")"&&(B.indented=B.lexical.indented),B.lexical=B.lexical.prev)}Ye.lex=!0;function Fe(B){function ue(Ve){return Ve==B?R():B==";"||Ve=="}"||Ve==")"||Ve=="]"?ge():R(ue)}return ue}function vt(B,ue){return B=="var"?R(Ne("vardef",ue),Dt,Fe(";"),Ye):B=="keyword a"?R(Ne("form"),Mt,vt,Ye):B=="keyword b"?R(Ne("form"),vt,Ye):B=="keyword d"?q.stream.match(/^\s*$/,!1)?R():R(Ne("stat"),tn,Fe(";"),Ye):B=="debugger"?R(Fe(";")):B=="{"?R(Ne("}"),_t,Se,Ye,Te):B==";"?R():B=="if"?(q.state.lexical.info=="else"&&q.state.cc[q.state.cc.length-1]==Ye&&q.state.cc.pop()(),R(Ne("form"),Mt,vt,Ye,ln)):B=="function"?R(An):B=="for"?R(Ne("form"),_t,Pn,vt,Te,Ye):B=="class"||v&&ue=="interface"?(q.marked="keyword",R(Ne("form",B=="class"?B:ue),Lr,Ye)):B=="variable"?v&&ue=="declare"?(q.marked="keyword",R(vt)):v&&(ue=="module"||ue=="enum"||ue=="type")&&q.stream.match(/^\s*\w/,!1)?(q.marked="keyword",ue=="enum"?R(Wr):ue=="type"?R(At,Fe("operator"),Ot,Fe(";")):R(Ne("form"),Ut,Fe("{"),Ne("}"),Se,Ye,Ye)):v&&ue=="namespace"?(q.marked="keyword",R(Ne("form"),bt,vt,Ye)):v&&ue=="abstract"?(q.marked="keyword",R(vt)):R(Ne("stat"),et):B=="switch"?R(Ne("form"),Mt,Fe("{"),Ne("}","switch"),_t,Se,Ye,Ye,Te):B=="case"?R(bt,Fe(":")):B=="default"?R(Fe(":")):B=="catch"?R(Ne("form"),He,nt,vt,Ye,Te):B=="export"?R(Ne("stat"),an,Ye):B=="import"?R(Ne("stat"),Qn,Ye):B=="async"?R(vt):ue=="@"?R(bt,vt):ge(Ne("stat"),bt,Fe(";"),Ye)}function nt(B){if(B=="(")return R(Ft,Fe(")"))}function bt(B,ue){return un(B,ue,!1)}function Yt(B,ue){return un(B,ue,!0)}function Mt(B){return B!="("?ge():R(Ne(")"),tn,Fe(")"),Ye)}function un(B,ue,Ve){if(q.state.fatArrowAt==q.stream.start){var tt=Ve?xe:we;if(B=="(")return R(He,Ne(")"),z(Ft,")"),Ye,Fe("=>"),tt,Te);if(B=="variable")return ge(He,Ut,Fe("=>"),tt,Te)}var it=Ve?E:Rt;return me.hasOwnProperty(B)?R(it):B=="function"?R(An,it):B=="class"||v&&ue=="interface"?(q.marked="keyword",R(Ne("form"),Dr,Ye)):B=="keyword c"||B=="async"?R(Ve?Yt:bt):B=="("?R(Ne(")"),tn,Fe(")"),Ye,it):B=="operator"||B=="spread"?R(Ve?Yt:bt):B=="["?R(Ne("]"),pr,Ye,it):B=="{"?je(ot,"}",null,it):B=="quasi"?ge(H,it):B=="new"?R(ee(Ve)):R()}function tn(B){return B.match(/[;\}\)\],]/)?ge():ge(bt)}function Rt(B,ue){return B==","?R(tn):E(B,ue,!1)}function E(B,ue,Ve){var tt=Ve==!1?Rt:E,it=Ve==!1?bt:Yt;if(B=="=>")return R(He,Ve?xe:we,Te);if(B=="operator")return/\+\+|--/.test(ue)||v&&ue=="!"?R(tt):v&&ue=="<"&&q.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?R(Ne(">"),z(Ot,">"),Ye,tt):ue=="?"?R(bt,Fe(":"),it):R(it);if(B=="quasi")return ge(H,tt);if(B!=";"){if(B=="(")return je(Yt,")","call",tt);if(B==".")return R(ct,tt);if(B=="[")return R(Ne("]"),tn,Fe("]"),Ye,tt);if(v&&ue=="as")return q.marked="keyword",R(Ot,tt);if(B=="regexp")return q.state.lastType=q.marked="operator",q.stream.backUp(q.stream.pos-q.stream.start-1),R(it)}}function H(B,ue){return B!="quasi"?ge():ue.slice(ue.length-2)!="${"?R(H):R(tn,J)}function J(B){if(B=="}")return q.marked="string-2",q.state.tokenize=Q,R(H)}function we(B){return ne(q.stream,q.state),ge(B=="{"?vt:bt)}function xe(B){return ne(q.stream,q.state),ge(B=="{"?vt:Yt)}function ee(B){return function(ue){return ue=="."?R(B?ae:se):ue=="variable"&&v?R(Ee,B?E:Rt):ge(B?Yt:bt)}}function se(B,ue){if(ue=="target")return q.marked="keyword",R(Rt)}function ae(B,ue){if(ue=="target")return q.marked="keyword",R(E)}function et(B){return B==":"?R(Ye,vt):ge(Rt,Fe(";"),Ye)}function ct(B){if(B=="variable")return q.marked="property",R()}function ot(B,ue){if(B=="async")return q.marked="property",R(ot);if(B=="variable"||q.style=="keyword"){if(q.marked="property",ue=="get"||ue=="set")return R(X);var Ve;return v&&q.state.fatArrowAt==q.stream.start&&(Ve=q.stream.match(/^\s*:\s*/,!1))&&(q.state.fatArrowAt=q.stream.pos+Ve[0].length),R(fe)}else{if(B=="number"||B=="string")return q.marked=c?"property":q.style+" property",R(fe);if(B=="jsonld-keyword")return R(fe);if(v&&$e(ue))return q.marked="keyword",R(ot);if(B=="[")return R(bt,Be,Fe("]"),fe);if(B=="spread")return R(Yt,fe);if(ue=="*")return q.marked="keyword",R(ot);if(B==":")return ge(fe)}}function X(B){return B!="variable"?ge(fe):(q.marked="property",R(An))}function fe(B){if(B==":")return R(Yt);if(B=="(")return ge(An)}function z(B,ue,Ve){function tt(it,Gt){if(Ve?Ve.indexOf(it)>-1:it==","){var Jt=q.state.lexical;return Jt.info=="call"&&(Jt.pos=(Jt.pos||0)+1),R(function(Cn,sn){return Cn==ue||sn==ue?ge():ge(B)},tt)}return it==ue||Gt==ue?R():Ve&&Ve.indexOf(";")>-1?ge(B):R(Fe(ue))}return function(it,Gt){return it==ue||Gt==ue?R():ge(B,tt)}}function je(B,ue,Ve){for(var tt=3;tt<arguments.length;tt++)q.cc.push(arguments[tt]);return R(Ne(ue,Ve),z(B,ue),Ye)}function Se(B){return B=="}"?R():ge(vt,Se)}function Be(B,ue){if(v){if(B==":")return R(Ot);if(ue=="?")return R(Be)}}function qe(B,ue){if(v&&(B==":"||ue=="in"))return R(Ot)}function st(B){if(v&&B==":")return q.stream.match(/^\s*\w+\s+is\b/,!1)?R(bt,ut,Ot):R(Ot)}function ut(B,ue){if(ue=="is")return q.marked="keyword",R()}function Ot(B,ue){if(ue=="keyof"||ue=="typeof"||ue=="infer"||ue=="readonly")return q.marked="keyword",R(ue=="typeof"?Yt:Ot);if(B=="variable"||ue=="void")return q.marked="type",R(ve);if(ue=="|"||ue=="&")return R(Ot);if(B=="string"||B=="number"||B=="atom")return R(ve);if(B=="[")return R(Ne("]"),z(Ot,"]",","),Ye,ve);if(B=="{")return R(Ne("}"),Bt,Ye,ve);if(B=="(")return R(z(G,")"),Ht,ve);if(B=="<")return R(z(Ot,">"),Ot);if(B=="quasi")return ge(hn,ve)}function Ht(B){if(B=="=>")return R(Ot)}function Bt(B){return B.match(/[\}\)\]]/)?R():B==","||B==";"?R(Bt):ge(Kt,Bt)}function Kt(B,ue){if(B=="variable"||q.style=="keyword")return q.marked="property",R(Kt);if(ue=="?"||B=="number"||B=="string")return R(Kt);if(B==":")return R(Ot);if(B=="[")return R(Fe("variable"),qe,Fe("]"),Kt);if(B=="(")return ge($t,Kt);if(!B.match(/[;\}\)\],]/))return R()}function hn(B,ue){return B!="quasi"?ge():ue.slice(ue.length-2)!="${"?R(hn):R(Ot,Bn)}function Bn(B){if(B=="}")return q.marked="string-2",q.state.tokenize=Q,R(hn)}function G(B,ue){return B=="variable"&&q.stream.match(/^\s*[?:]/,!1)||ue=="?"?R(G):B==":"?R(Ot):B=="spread"?R(G):ge(Ot)}function ve(B,ue){if(ue=="<")return R(Ne(">"),z(Ot,">"),Ye,ve);if(ue=="|"||B=="."||ue=="&")return R(Ot);if(B=="[")return R(Ot,Fe("]"),ve);if(ue=="extends"||ue=="implements")return q.marked="keyword",R(Ot);if(ue=="?")return R(Ot,Fe(":"),Ot)}function Ee(B,ue){if(ue=="<")return R(Ne(">"),z(Ot,">"),Ye,ve)}function Ke(){return ge(Ot,pt)}function pt(B,ue){if(ue=="=")return R(Ot)}function Dt(B,ue){return ue=="enum"?(q.marked="keyword",R(Wr)):ge(Ut,Be,yn,Wn)}function Ut(B,ue){if(v&&$e(ue))return q.marked="keyword",R(Ut);if(B=="variable")return he(ue),R();if(B=="spread")return R(Ut);if(B=="[")return je(Nn,"]");if(B=="{")return je(bn,"}")}function bn(B,ue){return B=="variable"&&!q.stream.match(/^\s*:/,!1)?(he(ue),R(yn)):(B=="variable"&&(q.marked="property"),B=="spread"?R(Ut):B=="}"?ge():B=="["?R(bt,Fe("]"),Fe(":"),bn):R(Fe(":"),Ut,yn))}function Nn(){return ge(Ut,yn)}function yn(B,ue){if(ue=="=")return R(Yt)}function Wn(B){if(B==",")return R(Dt)}function ln(B,ue){if(B=="keyword b"&&ue=="else")return R(Ne("form","else"),vt,Ye)}function Pn(B,ue){if(ue=="await")return R(Pn);if(B=="(")return R(Ne(")"),Br,Ye)}function Br(B){return B=="var"?R(Dt,on):B=="variable"?R(on):ge(on)}function on(B,ue){return B==")"?R():B==";"?R(on):ue=="in"||ue=="of"?(q.marked="keyword",R(bt,on)):ge(bt,on)}function An(B,ue){if(ue=="*")return q.marked="keyword",R(An);if(B=="variable")return he(ue),R(An);if(B=="(")return R(He,Ne(")"),z(Ft,")"),Ye,st,vt,Te);if(v&&ue=="<")return R(Ne(">"),z(Ke,">"),Ye,An)}function $t(B,ue){if(ue=="*")return q.marked="keyword",R($t);if(B=="variable")return he(ue),R($t);if(B=="(")return R(He,Ne(")"),z(Ft,")"),Ye,st,Te);if(v&&ue=="<")return R(Ne(">"),z(Ke,">"),Ye,$t)}function At(B,ue){if(B=="keyword"||B=="variable")return q.marked="type",R(At);if(ue=="<")return R(Ne(">"),z(Ke,">"),Ye)}function Ft(B,ue){return ue=="@"&&R(bt,Ft),B=="spread"?R(Ft):v&&$e(ue)?(q.marked="keyword",R(Ft)):v&&B=="this"?R(Be,yn):ge(Ut,Be,yn)}function Dr(B,ue){return B=="variable"?Lr(B,ue):$n(B,ue)}function Lr(B,ue){if(B=="variable")return he(ue),R($n)}function $n(B,ue){if(ue=="<")return R(Ne(">"),z(Ke,">"),Ye,$n);if(ue=="extends"||ue=="implements"||v&&B==",")return ue=="implements"&&(q.marked="keyword"),R(v?Ot:bt,$n);if(B=="{")return R(Ne("}"),Tn,Ye)}function Tn(B,ue){if(B=="async"||B=="variable"&&(ue=="static"||ue=="get"||ue=="set"||v&&$e(ue))&&q.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return q.marked="keyword",R(Tn);if(B=="variable"||q.style=="keyword")return q.marked="property",R(sr,Tn);if(B=="number"||B=="string")return R(sr,Tn);if(B=="[")return R(bt,Be,Fe("]"),sr,Tn);if(ue=="*")return q.marked="keyword",R(Tn);if(v&&B=="(")return ge($t,Tn);if(B==";"||B==",")return R(Tn);if(B=="}")return R();if(ue=="@")return R(bt,Tn)}function sr(B,ue){if(ue=="!"||ue=="?")return R(sr);if(B==":")return R(Ot,yn);if(ue=="=")return R(Yt);var Ve=q.state.lexical.prev,tt=Ve&&Ve.info=="interface";return ge(tt?$t:An)}function an(B,ue){return ue=="*"?(q.marked="keyword",R(fn,Fe(";"))):ue=="default"?(q.marked="keyword",R(bt,Fe(";"))):B=="{"?R(z(xt,"}"),fn,Fe(";")):ge(vt)}function xt(B,ue){if(ue=="as")return q.marked="keyword",R(Fe("variable"));if(B=="variable")return ge(Yt,xt)}function Qn(B){return B=="string"?R():B=="("?ge(bt):B=="."?ge(Rt):ge(xn,er,fn)}function xn(B,ue){return B=="{"?je(xn,"}"):(B=="variable"&&he(ue),ue=="*"&&(q.marked="keyword"),R(qt))}function er(B){if(B==",")return R(xn,er)}function qt(B,ue){if(ue=="as")return q.marked="keyword",R(xn)}function fn(B,ue){if(ue=="from")return q.marked="keyword",R(bt)}function pr(B){return B=="]"?R():ge(z(Yt,"]"))}function Wr(){return ge(Ne("form"),Ut,Fe("{"),Ne("}"),z(Ze,"}"),Ye,Ye)}function Ze(){return ge(Ut,yn)}function jt(B,ue){return B.lastType=="operator"||B.lastType==","||C.test(ue.charAt(0))||/[,.]/.test(ue.charAt(0))}function io(B,ue,Ve){return ue.tokenize==V&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(ue.lastType)||ue.lastType=="quasi"&&/\{\s*$/.test(B.string.slice(0,B.pos-(Ve||0)))}return{startState:function(B){var ue={tokenize:V,lastType:"sof",cc:[],lexical:new Y((B||0)-s,0,"block",!1),localVars:i.localVars,context:i.localVars&&new be(null,null,!1),indented:B||0};return i.globalVars&&typeof i.globalVars=="object"&&(ue.globalVars=i.globalVars),ue},token:function(B,ue){if(B.sol()&&(ue.lexical.hasOwnProperty("align")||(ue.lexical.align=!1),ue.indented=B.indentation(),ne(B,ue)),ue.tokenize!=_e&&B.eatSpace())return null;var Ve=ue.tokenize(B,ue);return P=="comment"?Ve:(ue.lastType=P=="operator"&&(L=="++"||L=="--")?"incdec":P,te(ue,Ve,P,L,B))},indent:function(B,ue){if(B.tokenize==_e||B.tokenize==Q)return t.Pass;if(B.tokenize!=V)return 0;var Ve=ue&&ue.charAt(0),tt=B.lexical,it;if(!/^\s*else\b/.test(ue))for(var Gt=B.cc.length-1;Gt>=0;--Gt){var Jt=B.cc[Gt];if(Jt==Ye)tt=tt.prev;else if(Jt!=ln&&Jt!=Te)break}for(;(tt.type=="stat"||tt.type=="form")&&(Ve=="}"||(it=B.cc[B.cc.length-1])&&(it==Rt||it==E)&&!/^[,\.=+\-*:?[\(]/.test(ue));)tt=tt.prev;u&&tt.type==")"&&tt.prev.type=="stat"&&(tt=tt.prev);var Cn=tt.type,sn=Ve==Cn;return Cn=="vardef"?tt.indented+(B.lastType=="operator"||B.lastType==","?tt.info.length+1:0):Cn=="form"&&Ve=="{"?tt.indented:Cn=="form"?tt.indented+s:Cn=="stat"?tt.indented+(jt(B,ue)?u||s:0):tt.info=="switch"&&!sn&&i.doubleIndentSwitch!=!1?tt.indented+(/^(?:case|default)\b/.test(ue)?s:2*s):tt.align?tt.column+(sn?0:1):tt.indented+(sn?0:s)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:f?null:"/*",blockCommentEnd:f?null:"*/",blockCommentContinue:f?null:" * ",lineComment:f?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:f?"json":"javascript",jsonldMode:c,jsonMode:f,expressionAllowed:io,skipExpression:function(B){te(B,"atom","atom","true",new t.StringStream("",2,null))}}}),t.registerHelper("wordChars","javascript",/[\w$]/),t.defineMIME("text/javascript","javascript"),t.defineMIME("text/ecmascript","javascript"),t.defineMIME("application/javascript","javascript"),t.defineMIME("application/x-javascript","javascript"),t.defineMIME("application/ecmascript","javascript"),t.defineMIME("application/json",{name:"javascript",json:!0}),t.defineMIME("application/x-json",{name:"javascript",json:!0}),t.defineMIME("application/manifest+json",{name:"javascript",json:!0}),t.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),t.defineMIME("text/typescript",{name:"javascript",typescript:!0}),t.defineMIME("application/typescript",{name:"javascript",typescript:!0})})},576:(o,n,e)=>{(function(t){t(e(237))})(function(t){var r={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},i={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};t.defineMode("xml",function(s,u){var c=s.indentUnit,f={},h=u.htmlMode?r:i;for(var v in h)f[v]=h[v];for(var v in u)f[v]=u[v];var m,_;function C(R,ke){function he(be){return ke.tokenize=be,be(R,ke)}var Le=R.next();if(Le=="<")return R.eat("!")?R.eat("[")?R.match("CDATA[")?he(P("atom","]]>")):null:R.match("--")?he(P("comment","-->")):R.match("DOCTYPE",!0,!0)?(R.eatWhile(/[\w\._\-]/),he(L(1))):null:R.eat("?")?(R.eatWhile(/[\w\._\-]/),ke.tokenize=P("meta","?>"),"meta"):(m=R.eat("/")?"closeTag":"openTag",ke.tokenize=T,"tag bracket");if(Le=="&"){var $e;return R.eat("#")?R.eat("x")?$e=R.eatWhile(/[a-fA-F\d]/)&&R.eat(";"):$e=R.eatWhile(/[\d]/)&&R.eat(";"):$e=R.eatWhile(/[\w\.\-:]/)&&R.eat(";"),$e?"atom":"error"}else return R.eatWhile(/[^&<]/),null}C.isInText=!0;function T(R,ke){var he=R.next();if(he==">"||he=="/"&&R.eat(">"))return ke.tokenize=C,m=he==">"?"endTag":"selfcloseTag","tag bracket";if(he=="=")return m="equals",null;if(he=="<"){ke.tokenize=C,ke.state=Q,ke.tagName=ke.tagStart=null;var Le=ke.tokenize(R,ke);return Le?Le+" tag error":"tag error"}else return/[\'\"]/.test(he)?(ke.tokenize=k(he),ke.stringStartCol=R.column(),ke.tokenize(R,ke)):(R.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function k(R){var ke=function(he,Le){for(;!he.eol();)if(he.next()==R){Le.tokenize=T;break}return"string"};return ke.isInAttribute=!0,ke}function P(R,ke){return function(he,Le){for(;!he.eol();){if(he.match(ke)){Le.tokenize=C;break}he.next()}return R}}function L(R){return function(ke,he){for(var Le;(Le=ke.next())!=null;){if(Le=="<")return he.tokenize=L(R+1),he.tokenize(ke,he);if(Le==">")if(R==1){he.tokenize=C;break}else return he.tokenize=L(R-1),he.tokenize(ke,he)}return"meta"}}function D(R){return R&&R.toLowerCase()}function V(R,ke,he){this.prev=R.context,this.tagName=ke||"",this.indent=R.indented,this.startOfLine=he,(f.doNotIndent.hasOwnProperty(ke)||R.context&&R.context.noIndent)&&(this.noIndent=!0)}function re(R){R.context&&(R.context=R.context.prev)}function _e(R,ke){for(var he;;){if(!R.context||(he=R.context.tagName,!f.contextGrabbers.hasOwnProperty(D(he))||!f.contextGrabbers[D(he)].hasOwnProperty(D(ke))))return;re(R)}}function Q(R,ke,he){return R=="openTag"?(he.tagStart=ke.column(),pe):R=="closeTag"?ne:Q}function pe(R,ke,he){return R=="word"?(he.tagName=ke.current(),_="tag",W):f.allowMissingTagName&&R=="endTag"?(_="tag bracket",W(R,ke,he)):(_="error",pe)}function ne(R,ke,he){if(R=="word"){var Le=ke.current();return he.context&&he.context.tagName!=Le&&f.implicitlyClosed.hasOwnProperty(D(he.context.tagName))&&re(he),he.context&&he.context.tagName==Le||f.matchClosing===!1?(_="tag",me):(_="tag error",Y)}else return f.allowMissingTagName&&R=="endTag"?(_="tag bracket",me(R,ke,he)):(_="error",Y)}function me(R,ke,he){return R!="endTag"?(_="error",me):(re(he),Q)}function Y(R,ke,he){return _="error",me(R,ke,he)}function W(R,ke,he){if(R=="word")return _="attribute",te;if(R=="endTag"||R=="selfcloseTag"){var Le=he.tagName,$e=he.tagStart;return he.tagName=he.tagStart=null,R=="selfcloseTag"||f.autoSelfClosers.hasOwnProperty(D(Le))?_e(he,Le):(_e(he,Le),he.context=new V(he,Le,$e==he.indented)),Q}return _="error",W}function te(R,ke,he){return R=="equals"?q:(f.allowMissing||(_="error"),W(R,ke,he))}function q(R,ke,he){return R=="string"?ge:R=="word"&&f.allowUnquoted?(_="string",W):(_="error",W(R,ke,he))}function ge(R,ke,he){return R=="string"?ge:W(R,ke,he)}return{startState:function(R){var ke={tokenize:C,state:Q,indented:R||0,tagName:null,tagStart:null,context:null};return R!=null&&(ke.baseIndent=R),ke},token:function(R,ke){if(!ke.tagName&&R.sol()&&(ke.indented=R.indentation()),R.eatSpace())return null;m=null;var he=ke.tokenize(R,ke);return(he||m)&&he!="comment"&&(_=null,ke.state=ke.state(m||he,R,ke),_&&(he=_=="error"?he+" error":_)),he},indent:function(R,ke,he){var Le=R.context;if(R.tokenize.isInAttribute)return R.tagStart==R.indented?R.stringStartCol+1:R.indented+c;if(Le&&Le.noIndent)return t.Pass;if(R.tokenize!=T&&R.tokenize!=C)return he?he.match(/^(\s*)/)[0].length:0;if(R.tagName)return f.multilineTagIndentPastTag!==!1?R.tagStart+R.tagName.length+2:R.tagStart+c*(f.multilineTagIndentFactor||1);if(f.alignCDATA&&/<!\[CDATA\[/.test(ke))return 0;var $e=ke&&/^<(\/)?([\w_:\.-]*)/.exec(ke);if($e&&$e[1])for(;Le;)if(Le.tagName==$e[2]){Le=Le.prev;break}else if(f.implicitlyClosed.hasOwnProperty(D(Le.tagName)))Le=Le.prev;else break;else if($e)for(;Le;){var be=f.contextGrabbers[D(Le.tagName)];if(be&&be.hasOwnProperty(D($e[2])))Le=Le.prev;else break}for(;Le&&Le.prev&&!Le.startOfLine;)Le=Le.prev;return Le?Le.indent+c:R.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:f.htmlMode?"html":"xml",helperType:f.htmlMode?"html":"xml",skipAttribute:function(R){R.state==q&&(R.state=W)},xmlCurrentTag:function(R){return R.tagName?{name:R.tagName,close:R.type=="closeTag"}:null},xmlCurrentContext:function(R){for(var ke=[],he=R.context;he;he=he.prev)ke.push(he.tagName);return ke.reverse()}}}),t.defineMIME("text/xml","xml"),t.defineMIME("application/xml","xml"),t.mimeModes.hasOwnProperty("text/html")||t.defineMIME("text/html",{name:"xml",htmlMode:!0})})},578:(o,n,e)=>{e.d(n,{A:()=>s});var t=e(268),r=function(){var u=function(c,f){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var m in v)Object.prototype.hasOwnProperty.call(v,m)&&(h[m]=v[m])},u(c,f)};return function(c,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");u(c,f);function h(){this.constructor=c}c.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)}}(),i=function(u){r(c,u);function c(f,h,v){var m=u.call(this,h,v)||this;return m._module=f,m}return Object.defineProperty(c.prototype,"module",{get:function(){return this._module},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"config",{get:function(){return this._module.config},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"em",{get:function(){return this._module.em},enumerable:!1,configurable:!0}),c}(t.Kx);const s=i},683:(o,n,e)=>{e.d(n,{A:()=>u,F:()=>i});var t=e(578),r=function(){var c=function(f,h){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,m){v.__proto__=m}||function(v,m){for(var _ in m)Object.prototype.hasOwnProperty.call(m,_)&&(v[_]=m[_])},c(f,h)};return function(f,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");c(f,h);function v(){this.constructor=f}f.prototype=h===null?Object.create(h):(v.prototype=h.prototype,new v)}}(),i;(function(c){c.Select="select",c.Hover="hover",c.Spacing="spacing",c.Target="target",c.Resize="resize"})(i||(i={}));var s=function(c){r(f,c);function f(){return c!==null&&c.apply(this,arguments)||this}return f.prototype.defaults=function(){return{id:"",type:""}},Object.defineProperty(f.prototype,"type",{get:function(){return this.get("type")||""},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"component",{get:function(){var h,v=this.get("component");return v||((h=this.get("componentView"))===null||h===void 0?void 0:h.model)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"componentView",{get:function(){var h,v=this.get("componentView");return v||((h=this.get("component"))===null||h===void 0?void 0:h.getView())},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"el",{get:function(){var h;return(h=this.componentView)===null||h===void 0?void 0:h.el},enumerable:!1,configurable:!0}),f.prototype.getBoxRect=function(h){var v=this,m=v.el,_=v.em,C=_.Canvas.getCanvasView(),T=this.get("boxRect");return T||(m&&C?C.getElBoxRect(m,h):{x:0,y:0,width:0,height:0})},f.prototype.getStyle=function(h){h===void 0&&(h={});var v=h.boxRect||this.getBoxRect(h),m=v.width,_=v.height,C=v.x,T=v.y;return{width:"".concat(m,"px"),height:"".concat(_,"px"),top:"0",left:"0",position:"absolute",translate:"".concat(C,"px ").concat(T,"px")}},f.prototype.isType=function(h){return this.type===h},f}(t.A);const u=s},242:(o,n,e)=>{e.d(n,{A:()=>r});var t;(function(i){i.run="command:run",i._run="run",i.runCommand="command:run:",i._runCommand="run:",i.runBeforeCommand="command:run:before:",i.abort="command:abort:",i._abort="abort:",i.stop="command:stop",i._stop="stop",i.stopCommand="command:stop:",i._stopCommand="stop:",i.stopBeforeCommand="command:stop:before:"})(t||(t={}));const r=t},404:(o,n,e)=>{e.r(n),e.d(n,{default:()=>t});const t={run:function(r){r.Components.clear(),r.Css.clear()}}},228:(o,n,e)=>{e.r(n),e.d(n,{default:()=>s});var t=e(523),r=e(14),i=e(926);const s={run:function(u){(0,t.bindAll)(this,"onKeyUp","enableDragger","disableDragger"),this.editor=u,this.canvasModel=this.canvas.getCanvasView().model,this.toggleMove(1)},stop:function(u){this.toggleMove(),this.disableDragger()},onKeyUp:function(u){(0,i.Ch)(u)===" "&&this.editor.stopCommand(this.id)},enableDragger:function(u){this.toggleDragger(1,u)},disableDragger:function(u){this.toggleDragger(0,u)},toggleDragger:function(u,c){var f=this,h=f.canvasModel,v=f.em,m=this.dragger,_=u?"add":"remove";this.getCanvas().classList[_]("".concat(this.ppfx,"is__grabbing")),m||(m=new r.A({getPosition:function(){return{x:h.get("x"),y:h.get("y")}},setPosition:function(C){var T=C.x,k=C.y;h.set({x:T,y:k})},onStart:function(C,T){v.trigger("canvas:move:start",T)},onDrag:function(C,T){v.trigger("canvas:move",T)},onEnd:function(C,T){v.trigger("canvas:move:end",T)}}),this.dragger=m),u?m.start(c):m.stop()},toggleMove:function(u){var c=this.ppfx,f=u?"add":"remove",h=u?"on":"off",v={on:i.on,off:i.AU},m=this.getCanvas(),_=["".concat(c,"is__grab")];!u&&_.push("".concat(c,"is__grabbing")),_.forEach(function(C){return m.classList[f](C)}),v[h](document,"keyup",this.onKeyUp),v[h](m,"mousedown",this.enableDragger),v[h](document,"mouseup",this.disableDragger)}}},570:(o,n,e)=>{e.r(n),e.d(n,{default:()=>c,defineCommand:()=>s});var t=e(268),r=e(242),i=function(){var f=function(h,v){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,_){m.__proto__=_}||function(m,_){for(var C in _)Object.prototype.hasOwnProperty.call(_,C)&&(m[C]=_[C])},f(h,v)};return function(h,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");f(h,v);function m(){this.constructor=h}h.prototype=v===null?Object.create(v):(m.prototype=v.prototype,new m)}}();function s(f){return f}var u=function(f){i(h,f);function h(v){var m=f.call(this,0)||this;m.config=v||{},m.em=m.config.em||{};var _=m.config.stylePrefix;return m.pfx=_,m.ppfx=m.config.pStylePrefix,m.hoverClass="".concat(_,"hover"),m.badgeClass="".concat(_,"badge"),m.plhClass="".concat(_,"placeholder"),m.freezClass="".concat(m.ppfx,"freezed"),m.canvas=m.em.Canvas,m.init(m.config),m}return h.prototype.onFrameScroll=function(v){},h.prototype.getCanvas=function(){return this.canvas.getElement()},h.prototype.getCanvasBody=function(){return this.canvas.getBody()},h.prototype.getCanvasTools=function(){return this.canvas.getToolsEl()},h.prototype.offset=function(v){var m=v.getBoundingClientRect();return{top:m.top+v.ownerDocument.body.scrollTop,left:m.left+v.ownerDocument.body.scrollLeft}},h.prototype.init=function(v){},h.prototype.callRun=function(v,m){m===void 0&&(m={});var _=this.id;if(v.trigger("".concat(r.A.runBeforeCommand).concat(_),{options:m}),v.trigger("".concat(r.A._runCommand).concat(_,":before"),m),m.abort){v.trigger("".concat(r.A.abort).concat(_),{options:m}),v.trigger("".concat(r.A._abort).concat(_),m);return}var C=m.sender||v,T=this.run(v,C,m),k={id:_,result:T,options:m};return v.trigger("".concat(r.A.runCommand).concat(_),k),v.trigger(r.A.run,k),v.trigger("".concat(r.A._runCommand).concat(_),T,m),v.trigger(r.A._run,_,T,m),T},h.prototype.callStop=function(v,m){m===void 0&&(m={});var _=this.id,C=m.sender||v;v.trigger("".concat(r.A.stopBeforeCommand).concat(_),{options:m}),v.trigger("".concat(r.A._stopCommand).concat(_,":before"),m);var T=this.stop(v,C,m),k={id:_,result:T,options:m};return v.trigger("".concat(r.A.stopCommand).concat(_),k),v.trigger(r.A.stop,k),v.trigger("".concat(r.A._stopCommand).concat(_),T,m),v.trigger(r.A._stop,_,T,m),T},h.prototype.stopCommand=function(v){this.em.Commands.stop(this.id,v)},h.prototype.run=function(v,m,_){},h.prototype.stop=function(v,m,_){},h}(t.Kx);const c=u},377:(o,n,e)=>{e.r(n),e.d(n,{default:()=>s});var t=e(523),r=function(u,c,f){if(f||arguments.length===2)for(var h=0,v=c.length,m;h<v;h++)(m||!(h in c))&&(m||(m=Array.prototype.slice.call(c,0,h)),m[h]=c[h]);return u.concat(m||Array.prototype.slice.call(c))},i={run:function(u,c,f){var h=this;f===void 0&&(f={});var v=[],m=f.component||u.getSelectedAll();return m=(0,t.isArray)(m)?r([],m,!0):[m],m.filter(Boolean).forEach(function(_){var C,T;if(!_.get("removable"))return h.em.logWarning("The element is not removable",{component:_});v.push(_);var k=((T=(C=_.delegate)===null||C===void 0?void 0:C.remove)===null||T===void 0?void 0:T.call(C,_))||_;k.remove()}),u.selectRemove(v),v}};const s=i},728:(o,n,e)=>{e.r(n),e.d(n,{default:()=>u});var t=e(523),r=e(14),i=function(){return i=Object.assign||function(c){for(var f,h=1,v=arguments.length;h<v;h++){f=arguments[h];for(var m in f)Object.prototype.hasOwnProperty.call(f,m)&&(c[m]=f[m])}return c},i.apply(this,arguments)},s="dmode";const u={run:function(c,f,h){var v=this;h===void 0&&(h={}),(0,t.bindAll)(this,"setPosition","onStart","onDrag","onEnd","getPosition","getGuidesStatic","renderGuide","getGuidesTarget");var m=h.target,_=h.event,C=h.mode,T=h.dragger,k=T===void 0?{}:T,P=m.getEl(),L=i({doc:P.ownerDocument,onStart:this.onStart,onEnd:this.onEnd,onDrag:this.onDrag,getPosition:this.getPosition,setPosition:this.setPosition,guidesStatic:function(){return v.guidesStatic},guidesTarget:function(){return v.guidesTarget}},k);this.setupGuides(),this.opts=h,this.editor=c,this.em=c.getModel(),this.target=m,this.isTran=C=="translate",this.guidesContainer=this.getGuidesContainer(),this.guidesTarget=this.getGuidesTarget(),this.guidesStatic=this.getGuidesStatic();var D=this.dragger;return D?D.setOptions(L):(D=new r.A(L),this.dragger=D),_&&D.start(_),this.toggleDrag(1),this.em.trigger("".concat(s,":start"),this.getEventOpts()),D},getEventOpts:function(){return{mode:this.opts.mode,target:this.target,guidesTarget:this.guidesTarget,guidesStatic:this.guidesStatic}},stop:function(){this.toggleDrag()},setupGuides:function(){(this.guides||[]).forEach(function(c){var f=c.guide;f&&f.parentNode.removeChild(f)}),this.guides=[]},getGuidesContainer:function(){var c=this,f=this.guidesEl;if(!f){var h=this,v=h.editor,m=h.em,_=h.opts,C=v.getConfig().stylePrefix,T=document.createElement("div"),k=document.createElement("div"),P='<div class="'.concat(C,"guide-info__line ").concat(C,`danger-bg">
        <div class="`).concat(C,"guide-info__content ").concat(C,`danger-color"></div>
      </div>`);f=document.createElement("div"),f.className="".concat(C,"guides"),T.className="".concat(C,"guide-info ").concat(C,"guide-info__x"),k.className="".concat(C,"guide-info ").concat(C,"guide-info__y"),T.innerHTML=P,k.innerHTML=P,f.appendChild(T),f.appendChild(k),v.Canvas.getGlobalToolsEl().appendChild(f),this.guidesEl=f,this.elGuideInfoX=T,this.elGuideInfoY=k,this.elGuideInfoContentX=T.querySelector(".".concat(C,"guide-info__content")),this.elGuideInfoContentY=k.querySelector(".".concat(C,"guide-info__content")),m.on("canvas:update frame:scroll",(0,t.debounce)(function(){var L;c.updateGuides(),_.debug&&((L=c.guides)===null||L===void 0||L.forEach(function(D){return c.renderGuide(D)}))},200))}return f},getGuidesStatic:function(){var c=this,f=[],h=this.target.getEl(),v=h.parentNode,m=v===void 0?{}:v;return(0,t.each)(m.children,function(_){return f=f.concat(h!==_?c.getElementGuides(_):[])}),f.concat(this.getElementGuides(m))},getGuidesTarget:function(){return this.getElementGuides(this.target.getEl())},updateGuides:function(c){var f=this,h,v;(c||this.guides).forEach(function(m){var _=m.origin,C=h===_?v:f.getElementPos(_);h=_,v=C,(0,t.each)(f.getGuidePosUpdate(m,C),function(T,k){return m[k]=T}),m.originRect=C})},getGuidePosUpdate:function(c,f){var h={},v=f.top,m=f.height,_=f.left,C=f.width;switch(c.type){case"t":h.y=v;break;case"b":h.y=v+m;break;case"l":h.x=_;break;case"r":h.x=_+C;break;case"x":h.x=_+C/2;break;case"y":h.y=v+m/2;break}return h},renderGuide:function(c){c===void 0&&(c={});var f=c.guide||document.createElement("div"),h="px",v=c.active?2:1,m=f.children[0];return f.style="position: absolute; background-color: ".concat(c.active?"green":"red",";"),f.children.length||(m=document.createElement("div"),m.style="position: absolute; color: red; padding: 5px; top: 0; left: 0;",f.appendChild(m)),c.y?(f.style.width="100%",f.style.height="".concat(v).concat(h),f.style.top="".concat(c.y).concat(h),f.style.left=0):(f.style.width="".concat(v).concat(h),f.style.height="100%",f.style.left="".concat(c.x).concat(h),f.style.top="0".concat(h)),!c.guide&&this.guidesContainer.appendChild(f),f},getElementPos:function(c){return this.editor.Canvas.getElementPos(c,{noScroll:1})},getElementGuides:function(c){var f=this,h=this.opts,v=this.getElementPos(c),m=v.top,_=v.height,C=v.left,T=v.width,k=[{type:"t",y:m},{type:"b",y:m+_},{type:"l",x:C},{type:"r",x:C+T},{type:"x",x:C+T/2},{type:"y",y:m+_/2}].map(function(P){return i(i({},P),{origin:c,originRect:v,guide:h.debug&&f.renderGuide(P)})});return k.forEach(function(P){var L;return(L=f.guides)===null||L===void 0?void 0:L.push(P)}),k},getTranslate:function(c,f){f===void 0&&(f="x");var h=0;return(c||"").split(" ").forEach(function(v){var m=v.trim(),_="translate".concat(f.toUpperCase(),"(");m.indexOf(_)===0&&(h=parseFloat(m.replace(_,"")))}),h},setTranslate:function(c,f,h){var v="translate".concat(f.toUpperCase(),"("),m="".concat(v).concat(h,")"),_=(c||"").split(" ").map(function(C){var T=C.trim();return T.indexOf(v)===0&&(C=m),C}).join(" ");return _.indexOf(v)<0&&(_+=" ".concat(m)),_},getPosition:function(){var c=this,f=c.target,h=c.isTran,v=f.getStyle(),m=v.left,_=v.top,C=v.transform,T=0,k=0;return h?(T=this.getTranslate(C),k=this.getTranslate(C,"y")):(T=parseFloat(m||0),k=parseFloat(_||0)),{x:T,y:k}},setPosition:function(c){var f=c.x,h=c.y,v=c.end,m=c.position,_=c.width,C=c.height,T=this,k=T.target,P=T.isTran,L=T.em,D="px",V=!v,re="".concat(parseInt(f,10)).concat(D),_e="".concat(parseInt(h,10)).concat(D),Q={};if(P){var pe=k.getStyle().transform||"";pe=this.setTranslate(pe,"x",re),pe=this.setTranslate(pe,"y",_e),Q={transform:pe,__p:V},k.addStyle(Q,{avoidStore:!v})}else{var ne={position:m,width:_,height:C},me={left:re,top:_e,__p:V};(0,t.keys)(ne).forEach(function(Y){var W=ne[Y];W&&(me[Y]=W)}),Q=me,k.addStyle(Q,{avoidStore:!v})}L==null||L.Styles.__emitCmpStyleUpdate(Q,{components:L.getSelected()})},_getDragData:function(){var c=this.target;return{target:c,parent:c.parent(),index:c.index()}},onStart:function(c){var f=this,h=f.target,v=f.editor,m=f.isTran,_=f.opts,C=_.center,T=_.onStart,k=v.Canvas,P=h.getStyle(),L="absolute",D=[L,"relative"];if(T&&T(this._getDragData()),!m&&P.position!==L){var V=k.offset(h.getEl()),re=V.left,_e=V.top,Q=V.width,pe=V.height,ne=h.parent(),me=void 0;do{var Y=ne.getStyle();me=D.indexOf(Y.position)>=0?ne:null,ne=ne.parent()}while(ne&&!me);if(C){var W=k.getMouseRelativeCanvas(c),te=W.x,q=W.y;re=te,_e=q}else if(me){var ge=k.offset(me.getEl());re=re-ge.left,_e=_e-ge.top}this.setPosition({x:re,y:_e,width:"".concat(Q,"px"),height:"".concat(pe,"px"),position:L})}},onDrag:function(){var c=this,f=this,h=f.guidesTarget,v=f.opts,m=v.onDrag;this.updateGuides(h),v.debug&&h.forEach(function(_){return c.renderGuide(_)}),v.guidesInfo&&this.renderGuideInfo(h.filter(function(_){return _.active})),m&&m(this._getDragData())},onEnd:function(c,f,h){h===void 0&&(h={});var v=this,m=v.editor,_=v.opts,C=v.id,T=_.onEnd;T&&T(c,h,i(i({event:c},h),this._getDragData())),m.stopCommand(C),this.hideGuidesInfo(),this.em.trigger("".concat(s,":end"),this.getEventOpts())},hideGuidesInfo:function(){var c=this;["X","Y"].forEach(function(f){var h=c["elGuideInfo".concat(f)];h&&(h.style.display="none")})},renderGuideInfo:function(c){var f=this;c===void 0&&(c=[]);var h=this.guidesStatic;this.hideGuidesInfo(),c.forEach(function(v){var m=v.origin,_=v.x,C=f.getElementPos(m),T=(0,t.isUndefined)(_)?"y":"x",k=T==="y",P=C[k?"left":"top"],L=C.rect[k?"left":"top"],D=k?P+C.width:P+C.height,V=k?L+C.rect.width:L+C.rect.height,re=f["elGuideInfo".concat(T.toUpperCase())],_e=f["elGuideInfoContent".concat(T.toUpperCase())],Q=re.style,pe=h==null?void 0:h.filter(function(_t){return _t.type===v.type}).map(function(_t){var Te=_t.originRect,Ne=Te.left,Ye=Te.width,Fe=Te.top,vt=Te.height,nt=k?Ne:Fe,bt=k?Ne+Ye:Fe+vt;return{gap:bt<P?P-bt:nt-D,guide:_t}}).filter(function(_t){return _t.gap>0}).sort(function(_t,Te){return _t.gap-Te.gap}).map(function(_t){return _t.guide})[0];if(pe){var ne=pe.originRect,me=ne.left,Y=ne.width,W=ne.top,te=ne.height,q=ne.rect,ge=k?me<C.left:W<C.top,R=k?me:W,ke=k?q.left:q.top,he=k?me+Y:W+te,Le=k?q.left+q.width:q.top+q.height,$e=k?v.y:v.x,be=ge?he:D,Re="".concat($e,"px"),rt=ge?P-he:R-D,He=ge?L-Le:ke-V;Q.display="",Q[k?"top":"left"]=Re,Q[k?"left":"top"]="".concat(be,"px"),Q[k?"width":"height"]="".concat(rt,"px"),_e.innerHTML="".concat(Math.round(He),"px"),f.em.trigger("".concat(s,":active"),i(i({},f.getEventOpts()),{guide:v,guidesStatic:h,matched:pe,posFirst:$e,posSecond:be,size:rt,sizeRaw:He,elGuideInfo:re,elGuideInfoCnt:_e}))}})},toggleDrag:function(c){var f=this,h=f.ppfx,v=f.editor,m=c?"add":"remove",_=["".concat(h,"is__grabbing")],C=v.Canvas,T=C.getBody();_.forEach(function(k){return T.classList[m](k)}),C[c?"startAutoscroll":"stopAutoscroll"]()}}},462:(o,n,e)=>{e.r(n),e.d(n,{default:()=>t});const t={run:function(r){if(r.Canvas.hasFocus()){var i=[];r.getSelectedAll().forEach(function(s){var u=s.components(),c=u&&u.filter(function(f){return f.get("selectable")})[0];c&&i.push(c)}),i.length&&r.select(i)}}}},658:(o,n,e)=>{e.r(n),e.d(n,{default:()=>t});const t={run:function(r,i,s){if(s===void 0&&(s={}),!(!r.Canvas.hasFocus()&&!s.force)){var u=[];r.getSelectedAll().forEach(function(c){for(var f=c.parent();f&&!f.get("selectable");)f=f.parent();f&&u.push(f)}),u.length&&r.select(u)}}}},619:(o,n,e)=>{e.r(n),e.d(n,{default:()=>t});const t={run:function(r){if(r.Canvas.hasFocus()){var i=[];r.getSelectedAll().forEach(function(s){var u=s.parent();if(u){var c=u.components().length,f=0,h=0,v;do f++,h=s.index()+f,v=h<=c?u.getChildAt(h):null;while(v&&!v.get("selectable"));i.push(v||s)}}),i.length&&r.select(i)}}}},935:(o,n,e)=>{e.r(n),e.d(n,{default:()=>t});const t={run:function(r){if(r.Canvas.hasFocus()){var i=[];r.getSelectedAll().forEach(function(s){var u=s.parent();if(u){var c=0,f=0,h;do c++,f=s.index()-c,h=f>=0?u.getChildAt(f):null;while(h&&!h.get("selectable"));i.push(h||s)}}),i.length&&r.select(i)}}}},536:(o,n,e)=>{e.r(n),e.d(n,{default:()=>r});var t=e(523);const r={run:function(i,s,u){u===void 0&&(u={});var c=u.target,f=[];if(!c.get("styles"))return f;var h=c.get("type"),v=i.Pages.getAllWrappers(),m=(0,t.flatten)(v.map(function(C){return C.findType(h)})).length;if(!m){var _=i.CssComposer.getAll();f=_.filter(function(C){return C.get("group")==="cmp:".concat(h)}),_.remove(f)}return f}}},957:(o,n,e)=>{e.r(n),e.d(n,{default:()=>r});var t=function(i,s,u){if(u||arguments.length===2)for(var c=0,f=s.length,h;c<f;c++)(h||!(c in s))&&(h||(h=Array.prototype.slice.call(s,0,c)),h[c]=s[c]);return i.concat(h||Array.prototype.slice.call(s))};const r={run:function(i){var s=i.getModel(),u=t([],i.getSelectedAll(),!0).map(function(c){var f,h;return((h=(f=c.delegate)===null||f===void 0?void 0:f.copy)===null||h===void 0?void 0:h.call(f,c))||c}).filter(Boolean);u.length&&s.set("clipboard",u)}}},413:(o,n,e)=>{e.r(n),e.d(n,{default:()=>r});var t=e(926);const r={run:function(i,s,u){var c=this;u===void 0&&(u={}),s&&s.set&&s.set("active",0);var f=i.getConfig(),h=i.Modal,v=f.stylePrefix;if(this.cm=i.CodeManager||null,!this.editors){var m=this.buildEditor("htmlmixed","hopscotch","HTML"),_=this.buildEditor("css","hopscotch","CSS");this.htmlEditor=m.model,this.cssEditor=_.model;var C=(0,t.a_)("div",{class:"".concat(v,"export-dl")});C.appendChild(m.el),C.appendChild(_.el),this.editors=C}h.open({title:f.textViewCode,content:this.editors}).getModel().once("change:open",function(){return i.stopCommand("".concat(c.id))}),this.htmlEditor.setContent(i.getHtml(u.optsHtml)),this.cssEditor.setContent(i.getCss(u.optsCss))},stop:function(i){var s=i.Modal;s&&s.close()},buildEditor:function(i,s,u){var c=this.em.CodeManager,f=c.createViewer({label:u,codeName:i,theme:s}),h=new c.EditorView({model:f,config:c.getConfig()}).render().el;return{model:f,el:h}}}},516:(o,n,e)=>{e.r(n),e.d(n,{default:()=>r});var t=e(523);const r={isEnabled:function(){var i=document;return!!(i.fullscreenElement||i.webkitFullscreenElement||i.mozFullScreenElement)},enable:function(i){var s="";return i.requestFullscreen?i.requestFullscreen():i.webkitRequestFullscreen?(s="webkit",i.webkitRequestFullscreen()):i.mozRequestFullScreen?(s="moz",i.mozRequestFullScreen()):i.msRequestFullscreen&&i.msRequestFullscreen(),s},disable:function(){var i=document;this.isEnabled()&&(i.exitFullscreen?i.exitFullscreen():i.webkitExitFullscreen?i.webkitExitFullscreen():i.mozCancelFullScreen?i.mozCancelFullScreen():i.msExitFullscreen&&i.msExitFullscreen())},fsChanged:function(i){this.isEnabled()||(this.stopCommand({sender:this.sender}),document.removeEventListener("".concat(i||"","fullscreenchange"),this.fsChanged))},run:function(i,s,u){u===void 0&&(u={}),this.sender=s;var c=u.target,f=(0,t.isElement)(c)?c:document.querySelector(c),h=this.enable(f||i.getContainer());this.fsChanged=this.fsChanged.bind(this,h),document.addEventListener(h+"fullscreenchange",this.fsChanged)},stop:function(i,s){s&&s.set&&s.set("active",!1),this.disable()}}},13:(o,n,e)=>{e.r(n),e.d(n,{default:()=>c});var t=e(523),r=e(694),i=e(926),s=e(194),u=e(582);const c=(0,t.extend)({},u.default,s.default,{init:function(f){s.default.init.apply(this,arguments),(0,t.bindAll)(this,"initSorter","rollback","onEndMove"),this.opt=f,this.hoverClass=this.ppfx+"highlighter-warning",this.badgeClass=this.ppfx+"badge-warning",this.noSelClass=this.ppfx+"no-select"},enable:function(){for(var f=[],h=0;h<arguments.length;h++)f[h]=arguments[h];s.default.enable.apply(this,f),this.getBadgeEl().addClass(this.badgeClass),this.getHighlighterEl().addClass(this.hoverClass);var v=this.$wrapper;v.css("cursor","move"),v.on("mousedown",this.initSorter),v.addClass(this.noSelClass)},toggleClipboard:function(){},initSorter:function(f){var h=(0,r.default)(f.target).data("model"),v=h.get("draggable");v&&(this.cacheEl=null,this.startSelectPosition(f.target,this.frameEl.contentDocument),this.sorter.draggable=v,this.sorter.onEndMove=this.onEndMove.bind(this),this.stopSelectComponent(),this.$wrapper.off("mousedown",this.initSorter),(0,i.on)(this.getContentWindow(),"keydown",this.rollback))},initSorterFromModel:function(f){var h=f.get("draggable");if(h){this.cacheEl=null;var v=f.view.el;this.startSelectPosition(v,this.frameEl.contentDocument),this.sorter.draggable=h,this.sorter.onEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),(0,i.on)(this.getContentWindow(),"keydown",this.rollback)}},initSorterFromModels:function(f){this.cacheEl=null;var h=f[f.length-1],v=this.em.getCurrentFrame(),m=h.getEl(v==null?void 0:v.model),_=m.ownerDocument;this.startSelectPosition(m,_,{onStart:this.onStart}),this.sorter.draggable=h.get("draggable"),this.sorter.toMove=f,this.sorter.onMoveClb=this.onDrag,this.sorter.onEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),(0,i.on)(this.getContentWindow(),"keydown",this.rollback)},onEndMoveFromModel:function(){(0,i.AU)(this.getContentWindow(),"keydown",this.rollback)},onEndMove:function(){this.enable(),(0,i.AU)(this.getContentWindow(),"keydown",this.rollback)},onSelect:function(f,h){},rollback:function(f,h){var v=f.which||f.keyCode;(v==27||h)&&(this.sorter.moved=!1,this.sorter.endMove())},getBadgeEl:function(){return this.$badge||(this.$badge=(0,r.default)(this.getBadge())),this.$badge},getHighlighterEl:function(){return this.$hl||(this.$hl=(0,r.default)(this.canvas.getHighlighter())),this.$hl},stop:function(){for(var f=[],h=0;h<arguments.length;h++)f[h]=arguments[h];s.default.stop.apply(this,f),this.getBadgeEl().removeClass(this.badgeClass),this.getHighlighterEl().removeClass(this.hoverClass);var v=this.$wrapper;v.css("cursor","").unbind().removeClass(this.noSelClass)}})},204:(o,n,e)=>{e.r(n),e.d(n,{default:()=>i});var t=e(523),r=e(926);const i={open:function(s){var u=this,c=this,f=c.editor,h=c.title,v=c.config,m=c.am,_=v.custom;if((0,t.isFunction)(_.open))return _.open(m.__customData());var C=f.Modal;C.open({title:h,content:s}).onceClose(function(){return f.stopCommand(u.id)})},close:function(){var s=this.config.custom;if((0,t.isFunction)(s.close))return s.close(this.am.__customData());var u=this.editor.Modal;u&&u.close()},run:function(s,u,c){c===void 0&&(c={});var f=s.AssetManager,h=f.getConfig(),v=c.types,m=v===void 0?[]:v,_=c.accept,C=c.select;if(this.title=c.modalTitle||s.t("assetManager.modalTitle")||"",this.editor=s,this.config=h,this.am=f,f.setTarget(c.target),f.onClick(c.onClick),f.onDblClick(c.onDblClick),f.onSelect(c.onSelect),f.__behaviour({select:C,types:m,options:c}),h.custom)this.rendered=this.rendered||(0,r.a_)("div"),this.rendered.className="".concat(h.stylePrefix,"custom-wrp"),f.__behaviour({container:this.rendered}),f.__trgCustom();else{if(!this.rendered||m){var T=f.getAll().filter(function(P){return P});m&&m.length&&(T=T.filter(function(P){return m.indexOf(P.get("type"))!==-1})),f.render(T),this.rendered=f.getContainer()}if(_){var k=this.rendered.querySelector("input#".concat(h.stylePrefix,"uploadFile"));k&&k.setAttribute("accept",_)}}return this.open(this.rendered),this},stop:function(s){this.editor=s,this.close(this.rendered)}}},195:(o,n,e)=>{e.r(n),e.d(n,{default:()=>i});var t=e(523),r=e(926);const i={open:function(){var s=this,u=s.container,c=s.editor,f=s.bm,h=s.config,v=h.custom,m=h.appendTo;if((0,t.isFunction)(v.open))return v.open(f.__customData());if(this.firstRender&&!m){var _="views-container",C=c.Panels,T=C.getPanel(_)||C.addPanel({id:_});T.set("appendContent",u).trigger("change:appendContent"),v||u.appendChild(f.render())}u&&(u.style.display="block")},close:function(){var s=this,u=s.container,c=s.config,f=c.custom;if((0,t.isFunction)(f.close))return f.close(this.bm.__customData());u&&(u.style.display="none")},run:function(s){var u=s.Blocks;this.config=u.getConfig(),this.firstRender=!this.container,this.container=this.container||(0,r.a_)("div"),this.editor=s,this.bm=u;var c=this.container;u.__behaviour({container:c}),this.config.custom&&u.__trgCustom(),this.open()},stop:function(){this.close()}}},671:(o,n,e)=>{e.r(n),e.d(n,{default:()=>t});const t={run:function(r){var i=r.LayerManager,s=r.Panels,u=i.getConfig();if(!u.appendTo){if(!this.layers){var c="views-container",f=document.createElement("div"),h=s.getPanel(c)||s.addPanel({id:c});u.custom?i.__trgCustom({container:f}):f.appendChild(i.render()),h.set("appendContent",f).trigger("change:appendContent"),this.layers=f}this.layers.style.display="block"}},stop:function(){var r=this.layers;r&&(r.style.display="none")}}},49:(o,n,e)=>{e.r(n),e.d(n,{default:()=>r});var t=e(694);const r={run:function(i,s){if(this.sender=s,!this.$cnt){var u=i.getConfig(),c=i.Panels,f=i.DeviceManager,h=i.SelectorManager,v=i.StyleManager,m="change:appendContent",_=(0,t.default)("<div></div>"),C=(0,t.default)("<div></div>"),T=(0,t.default)("<div></div>"),k=(0,t.default)("<div></div>");if(this.$cnt=_,this.$cntInner=C,C.append(T),C.append(k),_.append(C),f&&u.showDevices){var P=c.addPanel({id:"devices-c"}),L=f.render();P.set("appendContent",L).trigger(m)}var D=h.getConfig();D.custom?h.__trgCustom({container:T.get(0)}):D.appendTo||T.append(h.render([])),this.sm=v;var V=v.getConfig(),re=V.stylePrefix;this.$header=(0,t.default)('<div class="'.concat(re,'header">').concat(i.t("styleManager.empty"),"</div>")),_.append(this.$header),V.custom?v.__trgCustom({container:k.get(0)}):V.appendTo||k.append(v.render());var _e="views-container",Q=c.getPanel(_e)||c.addPanel({id:_e});Q.set("appendContent",_).trigger(m);var pe=i.getModel();this.listenTo(pe,v.events.target,this.toggleSm)}this.toggleSm()},toggleSm:function(){var i=this,s=i.sender,u=i.sm,c=i.$cntInner,f=i.$header;s&&s.get&&!s.get("active")||!u||(u.getSelected()?(c==null||c.show(),f==null||f.hide()):(c==null||c.hide(),f==null||f.show()))},stop:function(){var i,s;(i=this.$cntInner)===null||i===void 0||i.hide(),(s=this.$header)===null||s===void 0||s.hide()}}},590:(o,n,e)=>{e.r(n),e.d(n,{default:()=>r});var t=e(694);const r={run:function(i,s){this.sender=s;var u=i.getModel(),c=i.Config,f=c.stylePrefix,h=i.TraitManager,v=h.getConfig(),m;if(!v.appendTo){if(!this.$cn){this.$cn=(0,t.default)("<div></div>"),this.$cn2=(0,t.default)("<div></div>"),this.$cn.append(this.$cn2),this.$header=(0,t.default)("<div>").append('<div class="'.concat(v.stylePrefix,'header">').concat(u.t("traitManager.empty"),"</div>")),this.$cn.append(this.$header),v.custom?h.__trgCustom({container:this.$cn2.get(0)}):(this.$cn2.append('<div class="'.concat(f,'traits-label">').concat(u.t("traitManager.label"),"</div>")),this.$cn2.append(h.render()));var _=i.Panels;_.getPanel("views-container")?m=_.getPanel("views-container"):m=_.addPanel({id:"views-container"}),m==null||m.set("appendContent",this.$cn.get(0)).trigger("change:appendContent"),this.target=i.getModel(),this.listenTo(this.target,"component:toggled",this.toggleTm)}this.toggleTm()}},toggleTm:function(){var i=this.sender;i&&i.get&&!i.get("active")||(this.target.getSelectedAll().length===1?(this.$cn2.show(),this.$header.hide()):(this.$cn2.hide(),this.$header.show()))},stop:function(){this.$cn2&&this.$cn2.hide(),this.$header&&this.$header.hide()}}},483:(o,n,e)=>{e.r(n),e.d(n,{default:()=>r});var t=e(523);const r={run:function(s,u,c){c===void 0&&(c={});var f=s.getModel(),h=f.get("clipboard"),v=s.getSelected();h!=null&&h.length&&v&&(s.getSelectedAll().forEach(function(m){var _,C,T,k=((C=(_=m.delegate)===null||_===void 0?void 0:_.copy)===null||C===void 0?void 0:C.call(_,m))||m,P=k.collection,L;if(P){var D=k.index()+1,V={at:D,action:c.action||"paste-component"};(0,t.contains)(h,k)&&k.get("copyable")?L=P.add(k.clone(),V):L=i(s,h,k.parent(),V)}else{var re=(T=f.Pages.getSelected())===null||T===void 0?void 0:T.getMainComponent(),V={at:(re==null?void 0:re.components().length)||0,action:c.action||"paste-component"};L=i(s,h,re,V)}L=(0,t.isArray)(L)?L:[L],L.forEach(function(_e){return s.trigger("component:paste",_e)})}),v.emitUpdate())}};function i(s,u,c,f){var h=u.filter(function(m){return m.get("copyable")}),v=h.filter(function(m){return s.Components.canMove(c,m).result});return c.components().add(v.map(function(m){return m.clone()}),f)}},857:(o,n,e)=>{e.r(n),e.d(n,{default:()=>s});var t=e(523),r=function(u,c,f){if(f||arguments.length===2)for(var h=0,v=c.length,m;h<v;h++)(m||!(h in c))&&(m||(m=Array.prototype.slice.call(c,0,h)),m[h]=c[h]);return u.concat(m||Array.prototype.slice.call(c))},i="core:component-outline";const s={getPanels:function(u){return this.panels||(this.panels=u.Panels.getPanels()),this.panels},preventDrag:function(u){u.abort=1},tglEffects:function(u){var c=this.em,f=u?"on":"off";if(c){var h=c.Canvas,v=h.getBody(),m=h.getToolbarEl();m&&(m.style.display=u?"none":"");var _=v.querySelectorAll(".".concat(this.ppfx,"no-pointer"));(0,t.each)(_,function(C){return C.style.pointerEvents=u?"all":""}),c[f]("run:tlb-move:before",this.preventDrag)}},run:function(u,c){var f=this;this.sender=c,this.selected=r([],u.getSelectedAll(),!0),u.select(),this.shouldRunSwVisibility||(this.shouldRunSwVisibility=u.Commands.isActive(i)),this.shouldRunSwVisibility&&u.stopCommand(i),u.getModel().stopDefault();var h=this.getPanels(u),v=u.Canvas.getElement(),m=u.getEl(),_=u.Config.stylePrefix;if(!this.helper){var C=document.createElement("span");C.className="".concat(_,"off-prv fa fa-eye-slash"),m.appendChild(C),C.onclick=function(){return f.stopCommand()},this.helper=C}this.helper.style.display="inline-block",h.forEach(function(k){return k.set("visible",!1)});var T=v.style;T.width="100%",T.height="100%",T.top="0",T.left="0",T.padding="0",T.margin="0",u.refresh(),this.tglEffects(1)},stop:function(u){var c=this,f=c.sender,h=f===void 0?{}:f,v=c.selected;h.set&&h.set("active",0);var m=this.getPanels(u);this.shouldRunSwVisibility&&(u.runCommand(i),this.shouldRunSwVisibility=!1),u.getModel().runDefault(),m.forEach(function(C){return C.set("visible",!0)});var _=u.Canvas.getElement();_.setAttribute("style",""),v&&u.select(v),delete this.selected,this.helper&&(this.helper.style.display="none"),u.refresh(),this.tglEffects()}}},869:(o,n,e)=>{e.r(n),e.d(n,{default:()=>r});var t=function(){return t=Object.assign||function(i){for(var s,u=1,c=arguments.length;u<c;u++){s=arguments[u];for(var f in s)Object.prototype.hasOwnProperty.call(s,f)&&(i[f]=s[f])}return i},t.apply(this,arguments)};const r={run:function(i,s,u){var c=u||{},f=i.Canvas,h=f.getCanvasView(),v=t({appendTo:f.getResizerEl(),prefix:i.getConfig().stylePrefix,posFetcher:h.getElementPos.bind(h),mousePosFetcher:f.getMouseRelativePos.bind(f)},c.options||{}),m=this.canvasResizer;return(!m||c.forceNew)&&(this.canvasResizer=new i.Utils.Resizer(v),m=this.canvasResizer),m.setOptions(v,!0),m.blur(),m.focus(c.el),m},stop:function(){var i;(i=this.canvasResizer)===null||i===void 0||i.blur()}}},194:(o,n,e)=>{e.r(n),e.d(n,{default:()=>me});var t=e(523),r=e(268),i=function(){var Y=function(W,te){return Y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,ge){q.__proto__=ge}||function(q,ge){for(var R in ge)Object.prototype.hasOwnProperty.call(ge,R)&&(q[R]=ge[R])},Y(W,te)};return function(W,te){if(typeof te!="function"&&te!==null)throw new TypeError("Class extends value "+String(te)+" is not a constructor or null");Y(W,te);function q(){this.constructor=W}W.prototype=te===null?Object.create(te):(q.prototype=te.prototype,new q)}}(),s=function(Y){i(W,Y);function W(){return Y!==null&&Y.apply(this,arguments)||this}return W.prototype.defaults=function(){return{command:"",attributes:{}}},W}(r.Kx);const u=s;var c=function(){var Y=function(W,te){return Y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,ge){q.__proto__=ge}||function(q,ge){for(var R in ge)Object.prototype.hasOwnProperty.call(ge,R)&&(q[R]=ge[R])},Y(W,te)};return function(W,te){if(typeof te!="function"&&te!==null)throw new TypeError("Class extends value "+String(te)+" is not a constructor or null");Y(W,te);function q(){this.constructor=W}W.prototype=te===null?Object.create(te):(q.prototype=te.prototype,new q)}}(),f=function(Y){c(W,Y);function W(){return Y!==null&&Y.apply(this,arguments)||this}return W}(r.pM);const h=f;f.prototype.model=u;var v=e(754),m=function(){var Y=function(W,te){return Y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,ge){q.__proto__=ge}||function(q,ge){for(var R in ge)Object.prototype.hasOwnProperty.call(ge,R)&&(q[R]=ge[R])},Y(W,te)};return function(W,te){if(typeof te!="function"&&te!==null)throw new TypeError("Class extends value "+String(te)+" is not a constructor or null");Y(W,te);function q(){this.constructor=W}W.prototype=te===null?Object.create(te):(q.prototype=te.prototype,new q)}}(),_=function(){return _=Object.assign||function(Y){for(var W,te=1,q=arguments.length;te<q;te++){W=arguments[te];for(var ge in W)Object.prototype.hasOwnProperty.call(W,ge)&&(Y[ge]=W[ge])}return Y},_.apply(this,arguments)},C=function(Y){m(W,Y);function W(te){var q=Y.call(this,te)||this;return q.em=te.config.em,q}return W.prototype.events=function(){return this.model.get("events")||{mousedown:"handleClick"}},W.prototype.attributes=function(){return this.model.get("attributes")},W.prototype.handleClick=function(te){te.preventDefault(),te.stopPropagation();var q=this.em,ge=q.Canvas.getFrameEl().getBoundingClientRect(),R=ge.left,ke=ge.top,he=_(_({},te),{clientX:te.clientX-R,clientY:te.clientY-ke});q.trigger("toolbar:run:before",{event:he}),this.execCommand(he)},W.prototype.execCommand=function(te){var q=this,ge=q.em,R=q.model,ke={event:te},he=R.get("command"),Le=ge.Editor;(0,t.isFunction)(he)&&he(Le,null,ke),(0,t.isString)(he)&&Le.runCommand(he,ke)},W.prototype.render=function(){var te=this,q=te.em,ge=te.$el,R=te.model,ke=R.get("id"),he=R.get("label"),Le=q.getConfig().stylePrefix;return ge.addClass("".concat(Le,"toolbar-item")),ke&&ge.addClass("".concat(Le,"toolbar-item__").concat(ke)),he&&ge.append(he),this},W}(r.Ss);const T=C;var k=function(){var Y=function(W,te){return Y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,ge){q.__proto__=ge}||function(q,ge){for(var R in ge)Object.prototype.hasOwnProperty.call(ge,R)&&(q[R]=ge[R])},Y(W,te)};return function(W,te){if(typeof te!="function"&&te!==null)throw new TypeError("Class extends value "+String(te)+" is not a constructor or null");Y(W,te);function q(){this.constructor=W}W.prototype=te===null?Object.create(te):(q.prototype=te.prototype,new q)}}(),P=function(Y){k(W,Y);function W(te){var q=Y.call(this,te)||this,ge=te.em;return q.em=ge,q.config={em:ge},q.listenTo(q.collection,"reset",q.render),q}return W.prototype.onRender=function(){var te=this.em.config.stylePrefix;this.el.className="".concat(te,"toolbar-items")},W}(v.A);const L=P;P.prototype.itemView=T;var D=e(926),V=e(342),re=e(683),_e=e(249),Q=function(){return Q=Object.assign||function(Y){for(var W,te=1,q=arguments.length;te<q;te++){W=arguments[te];for(var ge in W)Object.prototype.hasOwnProperty.call(W,ge)&&(Y[ge]=W[ge])}return Y},Q.apply(this,arguments)},pe=function(Y,W){var te={};for(var q in Y)Object.prototype.hasOwnProperty.call(Y,q)&&W.indexOf(q)<0&&(te[q]=Y[q]);if(Y!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ge=0,q=Object.getOwnPropertySymbols(Y);ge<q.length;ge++)W.indexOf(q[ge])<0&&Object.prototype.propertyIsEnumerable.call(Y,q[ge])&&(te[q[ge]]=Y[q[ge]]);return te},ne;const me={activeResizer:!1,init:function(){this.onSelect=(0,t.debounce)(this.onSelect,0),(0,t.bindAll)(this,"onHover","onOut","onClick","onFrameScroll","onFrameResize","onFrameUpdated","onContainerChange")},enable:function(){this.frameOff=this.canvasOff=this.adjScroll=null,this.startSelectComponent(),ne=!0},startSelectComponent:function(){this.toggleSelectComponent(1),this.em.getSelected()&&this.onSelect()},stopSelectComponent:function(){this.toggleSelectComponent()},toggleSelectComponent:function(Y){var W=this,te=this.em,q=te.getConfig().listenToEl,ge=te.getContainer().parentNode,R=Y?"on":"off",ke={on:D.on,off:D.AU},he=_e.I.update;!q.length&&ge&&q.push(ge);var Le=function($e,be){ke[R](be,"mouseover",W.onHover),ke[R](be,"mouseleave",W.onOut),ke[R](be,"click",W.onClick),ke[R]($e,"scroll",W.onFrameScroll,!0),ke[R]($e,"resize",W.onFrameResize)};ke[R](window,"resize",this.onFrameUpdated),ke[R](q,"scroll",this.onContainerChange),te[R]("component:toggled ".concat(he," undo redo"),this.onSelect,this),te[R]("change:componentHovered",this.onHovered,this),te[R]("component:resize styleable:change component:input",this.updateGlobalPos,this),te[R]("".concat(he,":toolbar"),this._upToolbar,this),te[R]("frame:updated",this.onFrameUpdated,this),te[R]("canvas:updateTools",this.onFrameUpdated,this),te[R](te.Canvas.events.refresh,this.updateAttached,this),te.Canvas.getFrames().forEach(function($e){var be=$e.view,Re=be==null?void 0:be.getWindow();Re&&Le(Re,be==null?void 0:be.getBody())})},onHover:function(Y){Y.stopPropagation();var W=this.em,te=Y.target,q=(0,V.getComponentView)(te),ge=q==null?void 0:q.frameView,R=q==null?void 0:q.model;if(!R)for(var ke=te.parentNode;!R&&ke&&!(0,D.ZQ)(ke);)R=(0,V.getComponentModel)(ke),ke=ke.parentNode;this.currentDoc=te.ownerDocument,W.setHovered(R,{useValid:!0}),ge&&W.setCurrentFrame(ge)},onFrameUpdated:function(){this.updateLocalPos(),this.updateGlobalPos()},onHovered:function(Y,W){var te=this,q,ge={};W?(q=W.views)===null||q===void 0||q.forEach(function(R){var ke=R.el,he=te.getElementPos(ke);ge={el:ke,pos:he,component:W,view:(0,V.getViewEl)(ke)},ke.ownerDocument===te.currentDoc&&(te.elHovered=ge),te.updateToolsLocal(ge)}):(this.currentDoc=null,this.elHovered=0,this.updateToolsLocal(),this.canvas.getFrames().forEach(function(R){var ke=R.view,he=ke&&ke.getToolsEl();he&&te.toggleToolsEl(0,0,{el:he})}))},onSelect:function(){var Y=this.em,W=Y.getSelected(),te=Y.getCurrentFrame(),q=W&&W.getView(te==null?void 0:te.model),ge=q&&q.el,R={};if(ge&&(0,D.zN)(ge)){var ke=this.getElementPos(ge);R={el:ge,pos:ke,component:W,view:(0,V.getViewEl)(ge)}}this.elSelected=R,this.updateToolsGlobal(),this.updateLocalPos(R),this.initResize(W)},updateGlobalPos:function(){var Y=this.getElSelected();Y.el&&(Y.pos=this.getElementPos(Y.el),this.updateToolsGlobal())},updateLocalPos:function(Y){var W=this.getElHovered();W.el&&(W.pos=this.getElementPos(W.el),this.updateToolsLocal(Y))},getElHovered:function(){return this.elHovered||{}},getElSelected:function(){return this.elSelected||{}},onOut:function(){this.em.setHovered()},toggleToolsEl:function(Y,W,te){te===void 0&&(te={});var q=te.el||this.canvas.getToolsEl(W);return q&&(q.style.display=Y?"":"none"),q||{}},showElementOffset:function(Y,W,te){te===void 0&&(te={}),ne&&this.editor.runCommand("show-offset",{el:Y,elPos:W,view:te.view,force:1,top:0,left:0})},hideElementOffset:function(Y){this.editor.stopCommand("show-offset",{view:Y})},showFixedElementOffset:function(Y,W){this.editor.runCommand("show-offset",{el:Y,elPos:W,state:"Fixed"})},hideFixedElementOffset:function(){this.editor&&this.editor.stopCommand("show-offset",{state:"Fixed"})},hideHighlighter:function(Y){this.canvas.getHighlighter(Y).style.opacity=0},onClick:function(Y){Y.stopPropagation(),Y.preventDefault();var W=this.em;if(W.get("_cmpDrag"))return W.set("_cmpDrag");var te=Y.target,q=(0,V.getComponentModel)(te);if(!q)for(var ge=te.parentNode;!q&&ge&&!(0,D.ZQ)(ge);)q=(0,V.getComponentModel)(ge),ge=ge.parentNode;if(q){if(W.isEditing()&&(!q.get("textable")&&q.isChildOf("text")||W.getEditing()!==q))return;this.select(q,Y)}},select:function(Y,W){W===void 0&&(W={}),Y&&(this.editor.select(Y,{event:W,useValid:!0}),this.initResize(Y))},updateBadge:function(Y,W,te){te===void 0&&(te={});var q=this.canvas,ge=(0,V.getComponentModel)(Y),R=this.getBadge(te),ke=R.style;if(!ge||!ge.get("badgable")){ke.display="none";return}if(!te.posOnly){var he=this.canvas.getConfig(),Le=ge.getIcon(),$e=he.pStylePrefix||"",be="".concat($e,"badge"),Re=he.customBadgeLabel,rt="".concat(Le?'<div class="'.concat(be,'__icon">').concat(Le,"</div>"):"",`
        <div class="`).concat(be,'__name">').concat(ge.getName(),"</div>");R.innerHTML=Re?Re(ge):rt}var He="px";ke.display="block";var _t=q.getTargetToElementFixed(Y,R,{pos:W}),Te=_t.top,Ne=te.leftOff<0?-te.leftOff:0;ke.top=Te+He,ke.left=Ne+He},showHighlighter:function(Y){this.canvas.getHighlighter(Y).style.opacity=""},initResize:function(Y){var W=this,te=W.em,q=W.canvas,ge=te.Editor,R=!(0,t.isElement)(Y)&&(0,D.GW)(Y)?Y:te.getSelected(),ke=R==null?void 0:R.get("resizable"),he=re.F.Resize,Le=q.hasCustomSpot(he);if(q.removeSpots({type:he}),R&&ke){q.addSpot({type:he,component:R});var $e=(0,t.isElement)(Y)?Y:R.getEl(),be=(0,V.isObject)(ke)?ke:{},Re=be.onStart,rt=Re===void 0?function(){}:Re,He=be.onMove,_t=He===void 0?function(){}:He,Te=be.onEnd,Ne=Te===void 0?function(){}:Te,Ye=be.updateTarget,Fe=Ye===void 0?function(){}:Ye,vt=pe(be,["onStart","onMove","onEnd","updateTarget"]);if(Le||!$e||this.activeResizer)return;var nt,bt=te.config,Yt=bt.stylePrefix||"",Mt="".concat(Yt,"resizing"),un=this,tn={component:R,el:$e},Rt=function(H,J,we){var xe=we.docs;xe&&xe.forEach(function(ee){var se=ee.body,ae=se.className||"";se.className=(H=="add"?"".concat(ae," ").concat(Mt):ae.replace(Mt,"")).trim()})},E=Q({onStart:function(H,J){rt(H,J);var we=J.el,xe=J.config,ee=J.resizer,se=xe.keyHeight,ae=xe.keyWidth,et=xe.currentUnit,ct=xe.keepAutoHeight,ot=xe.keepAutoWidth;Rt("add",H,J),nt=te.Styles.getModelToStyle(R),q.toggleFramesEvents(!1);var X=getComputedStyle(we),fe=nt.getStyle(),z=fe[ae];xe.autoWidth=ot&&z==="auto",isNaN(parseFloat(z))&&(z=X[ae]);var je=fe[se];xe.autoHeight=ct&&je==="auto",isNaN(parseFloat(je))&&(je=X[se]),ee.startDim.w=parseFloat(z),ee.startDim.h=parseFloat(je),ne=!1,et&&(xe.unitHeight=(0,V.getUnitFromValue)(je),xe.unitWidth=(0,V.getUnitFromValue)(z)),un.activeResizer=!0,ge.trigger("component:resize",Q(Q({},tn),{type:"start"}))},onMove:function(H){_t(H),ge.trigger("component:resize",Q(Q({},tn),{type:"move"}))},onEnd:function(H,J){Ne(H,J),Rt("remove",H,J),ge.trigger("component:resize",Q(Q({},tn),{type:"end"})),q.toggleFramesEvents(!0),ne=!0,un.activeResizer=!1},updateTarget:function(H,J,we){if(Fe(H,J,we),!!nt){var xe=we.store,ee=we.selectedHandler,se=we.config,ae=se.keyHeight,et=se.keyWidth,ct=se.autoHeight,ot=se.autoWidth,X=se.unitWidth,fe=se.unitHeight,z=["tc","bc"].indexOf(ee)>=0,je=["cl","cr"].indexOf(ee)>=0,Se={};if(!z){var Be=q.getBody().offsetWidth,qe=J.w<Be?J.w:Be;Se[et]=ot?"auto":"".concat(qe).concat(X)}je||(Se[ae]=ct?"auto":"".concat(J.h).concat(fe)),te.getDragMode(R)&&(Se.top="".concat(J.t).concat(fe),Se.left="".concat(J.l).concat(X));var st=Q(Q({},Se),{__p:!xe});nt.addStyle(st,{avoidStore:!xe}),te.Styles.__emitCmpStyleUpdate(st,{components:te.getSelected()})}}},vt);this.resizer=ge.runCommand("resize",{el:$e,options:E,force:1})}else{if(Le)return;ge.stopCommand("resize"),this.resizer=null}},updateToolbar:function(Y){var W=this.canvas,te=this.config.em,q=Y===te?te.getSelected():Y,ge=W.getToolbarEl(),R=ge.style,ke=q.get("toolbar"),he=te.config.showToolbar,Le=!W.hasCustomSpot(re.F.Select);if(q&&he&&ke&&ke.length&&Le){if(R.display="",!this.toolbar){ge.innerHTML="",this.toolbar=new h(ke);var $e=new L({collection:this.toolbar,em:te});ge.appendChild($e.render().el)}this.toolbar.reset(ke),R.top="-100px",R.left="0"}else R.display="none"},updateToolbarPos:function(Y){var W="px",te=this.canvas.getToolbarEl().style;te.top="".concat(Y.top).concat(W),te.left="".concat(Y.left).concat(W),te.opacity=""},getCanvasPosition:function(){return this.canvas.getCanvasView().getPosition()},getBadge:function(Y){return Y===void 0&&(Y={}),this.canvas.getBadgeEl(Y.view)},onFrameScroll:function(){this.updateTools(),this.canvas.refreshSpots()},onFrameResize:function(){this.canvas.refresh({all:!0})},updateTools:function(){this.updateLocalPos(),this.updateGlobalPos()},isCompSelected:function(Y){return Y&&Y.get("status")==="selected"},updateToolsLocal:function(Y){var W=this.em.getConfig(),te=Y||this.getElHovered(),q=te.el,ge=te.pos,R=te.view,ke=te.component;if(!q){this.lastHovered=0;return}var he=ke.get("hoverable"),Le=this.lastHovered!==q,$e=Le?{}:{posOnly:1},be=this.canvas.hasCustomSpot(re.F.Hover);Le&&he&&(this.lastHovered=q,be?this.hideHighlighter(R):this.showHighlighter(R),this.showElementOffset(q,ge,{view:R})),this.isCompSelected(ke)&&(this.hideHighlighter(R),!W.showOffsetsSelected&&this.hideElementOffset(R));var Re="px",rt=this.toggleToolsEl(1,R),He=rt.style,_t=this.canvas.canvasRectOffset(q,ge),Te=_t.top,Ne=_t.left;!be&&this.updateBadge(q,ge,Q(Q({},$e),{view:R,topOff:Te,leftOff:Ne})),He.top=Te+Re,He.left=Ne+Re,He.width=ge.width+Re,He.height=ge.height+Re,this._trgToolUp("local",{component:ke,el:rt,top:Te,left:Ne,width:ge.width,height:ge.height})},_upToolbar:(0,t.debounce)(function(){this.updateToolsGlobal({force:1})},0),_trgToolUp:function(Y,W){W===void 0&&(W={}),this.em.trigger("canvas:tools:update",Q({type:Y},W))},updateToolsGlobal:function(Y){Y===void 0&&(Y={});var W=this.getElSelected(),te=W.el,q=W.pos,ge=W.component;if(!te){this.toggleToolsEl(),this.lastSelected=0;return}var R=this.canvas,ke=this.lastSelected!==te;(ke||Y.force)&&(this.lastSelected=te,this.updateToolbar(ge));var he="px",Le=this.toggleToolsEl(1),$e=Le.style,be=R.getTargetToElementFixed(te,R.getToolbarEl(),{pos:q}),Re=be.canvasOffsetTop,rt=be.canvasOffsetLeft;$e.top=Re+he,$e.left=rt+he,$e.width=q.width+he,$e.height=q.height+he,this.updateToolbarPos({top:be.top,left:be.left}),this._trgToolUp("global",{component:ge,el:Le,top:Re,left:rt,width:q.width,height:q.height})},updateAttached:(0,t.debounce)(function(){this.updateGlobalPos()},0),onContainerChange:(0,t.debounce)(function(){this.em.refreshCanvas()},150),getElementPos:function(Y){return this.canvas.getCanvasView().getElementPos(Y,{noScroll:!0})},hideBadge:function(){this.getBadge().style.display="none"},cleanPrevious:function(Y){Y&&Y.set({status:"",state:""})},getContentWindow:function(){return this.canvas.getWindow()},run:function(Y){(0,V.hasWin)()&&(this.editor=Y&&Y.get("Editor"),this.enable())},stop:function(Y,W,te){if(te===void 0&&(te={}),!!(0,V.hasWin)()){var q=this,ge=q.em,R=q.editor;this.onHovered(),this.stopSelectComponent(),!te.preserveSelected&&ge.setSelected(),this.toggleToolsEl(),R&&R.stopCommand("resize")}}}},582:(o,n,e)=>{e.r(n),e.d(n,{default:()=>r});var t=e(694);const r={startSelectPosition:function(i,s,u){var c=this;u===void 0&&(u={}),this.isPointed=!1;var f=this.em.Utils,h=i.ownerDocument.body;f&&!this.sorter&&(this.sorter=new f.Sorter({container:h,placer:this.canvas.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:this.ppfx,direction:"a",document:s,wmargin:1,nested:1,em:this.em,canvasRelative:1,scale:function(){return c.em.getZoomDecimal()}})),u.onStart&&(this.sorter.onStart=u.onStart),i&&this.sorter.startSort(i,{container:h})},getOffsetDim:function(){var i=this.offset(this.canvas.getFrameEl()),s=this.offset(this.canvas.getElement()),u=i.top-s.top,c=i.left-s.left;return{top:u,left:c}},stopSelectPosition:function(){this.posTargetCollection=null,this.posIndex=this.posMethod=="after"&&this.cDim.length!==0?this.posIndex+1:this.posIndex,this.sorter&&(this.sorter.moved=0,this.sorter.endMove()),this.cDim&&(this.posIsLastEl=this.cDim.length!==0&&this.posMethod=="after"&&this.posIndex==this.cDim.length,this.posTargetEl=this.cDim.length===0?(0,t.default)(this.outsideElem):!this.posIsLastEl&&this.cDim[this.posIndex]?(0,t.default)(this.cDim[this.posIndex][5]).parent():(0,t.default)(this.outsideElem),this.posTargetModel=this.posTargetEl.data("model"),this.posTargetCollection=this.posTargetEl.data("model-comp"))},enable:function(){this.startSelectPosition()},nearFloat:function(i,s,u){var c=i||0,f=s||"before",h=u.length,v=h!==0&&f=="after"&&c==h;return h!==0&&(!v&&!u[c][4]||u[c-1]&&!u[c-1][4]||v&&!u[c-1][4])?1:0},run:function(){this.enable()},stop:function(){this.stopSelectPosition(),this.$wrapper.css("cursor",""),this.$wrapper.unbind()}}},131:(o,n,e)=>{e.r(n),e.d(n,{default:()=>u});var t=e(523),r=e(683),i=e(694),s=function(){return s=Object.assign||function(c){for(var f,h=1,v=arguments.length;h<v;h++){f=arguments[h];for(var m in f)Object.prototype.hasOwnProperty.call(f,m)&&(c[m]=f[m])}return c},s.apply(this,arguments)};const u={getOffsetMethod:function(c){var f=c||"";return"get"+f+"OffsetViewerEl"},run:function(c,f,h){var v=this.canvas,m=h||{},_=m.state||"",C=c.getConfig(),T=this.em.getZoomDecimal(),k=m.el;if(!C.showOffsets||!(k instanceof HTMLElement)||!C.showOffsetsSelected&&_=="Fixed"){c.stopCommand("".concat(this.id),h);return}if(!v.hasCustomSpot(r.F.Spacing)){var P=s({},m.elPos||v.getElementPos(k));(0,t.isUndefined)(m.top)||(P.top=m.top),(0,t.isUndefined)(m.left)||(P.left=m.left);var L=window.getComputedStyle(k),D=this.ppfx,V=_+"State",re=this.getOffsetMethod(_),_e=v[re](h.view);_e.style.opacity="";var Q=this["marginT"+_],pe=this["marginB"+_],ne=this["marginL"+_],me=this["marginR"+_],Y=this["padT"+_],W=this["padB"+_],te=this["padL"+_],q=this["padR"+_];if(_e.childNodes.length&&(this[V]="1",Q=_e.querySelector("[data-offset-m-t]"),pe=_e.querySelector("[data-offset-m-b]"),ne=_e.querySelector("[data-offset-m-l]"),me=_e.querySelector("[data-offset-m-r]"),Y=_e.querySelector("[data-offset-p-t]"),W=_e.querySelector("[data-offset-p-b]"),te=_e.querySelector("[data-offset-p-l]"),q=_e.querySelector("[data-offset-p-r]")),!this[V]){var ge=_.toLowerCase(),R=ge+"margin-v",ke=ge+"padding-v",he=(0,i.default)('<div class="'.concat(D,'marginName">')).get(0),Le=(0,i.default)('<div class="'.concat(D,'paddingName">')).get(0),$e=D+R+"-el",be=D+ke+"-el",Re="".concat($e," ").concat(D+R),rt="".concat(be," ").concat(D+ke);Q=(0,i.default)('<div class="'.concat(Re,'-top"></div>')).get(0),pe=(0,i.default)('<div class="'.concat(Re,'-bottom"></div>')).get(0),ne=(0,i.default)('<div class="'.concat(Re,'-left"></div>')).get(0),me=(0,i.default)('<div class="'.concat(Re,'-right"></div>')).get(0),Y=(0,i.default)('<div class="'.concat(rt,'-top"></div>')).get(0),W=(0,i.default)('<div class="'.concat(rt,'-bottom"></div>')).get(0),te=(0,i.default)('<div class="'.concat(rt,'-left"></div>')).get(0),q=(0,i.default)('<div class="'.concat(rt,'-right"></div>')).get(0),this["marginT"+_]=Q,this["marginB"+_]=pe,this["marginL"+_]=ne,this["marginR"+_]=me,this["padT"+_]=Y,this["padB"+_]=W,this["padL"+_]=te,this["padR"+_]=q,he.appendChild(Q),he.appendChild(pe),he.appendChild(ne),he.appendChild(me),Le.appendChild(Y),Le.appendChild(W),Le.appendChild(te),Le.appendChild(q),_e.appendChild(he),_e.appendChild(Le),this[V]="1"}var He="px",_t=parseFloat(L.marginLeft.replace(He,""))*T,Te=parseFloat(L.marginRight.replace(He,""))*T,Ne=parseFloat(L.marginTop.replace(He,""))*T,Ye=parseFloat(L.marginBottom.replace(He,""))*T,Fe=Q.style,vt=pe.style,nt=ne.style,bt=me.style,Yt=Y.style,Mt=W.style,un=te.style,tn=q.style,Rt=parseFloat(P.left),E=parseFloat(L.width)*T+He;Fe.height=Ne+He,Fe.width=E,Fe.top=P.top-Ne+He,Fe.left=Rt+He,vt.height=Ye+He,vt.width=E,vt.top=P.top+P.height+He,vt.left=Rt+He;var H=P.height+Ne+Ye+He,J=P.top-Ne+He;nt.height=H,nt.width=_t+He,nt.top=J,nt.left=Rt-_t+He,bt.height=H,bt.width=Te+He,bt.top=J,bt.left=Rt+P.width+He;var we=parseFloat(L.paddingTop)*T;Yt.height=we+He;var xe=parseFloat(L.paddingBottom)*T;Mt.height=xe+He;var ee=P.height-xe-we+He,se=P.top+we+He;un.height=ee,un.width=parseFloat(L.paddingLeft)*T+He,un.top=se;var ae=parseFloat(L.paddingRight)*T;tn.height=ee,tn.width=ae+He,tn.top=se}},stop:function(c,f,h){h===void 0&&(h={});var v=h||{},m=v.state||"",_=this.getOffsetMethod(m),C=h.view,T=this.canvas,k=T[_](C);k.style.opacity=0}}},229:(o,n,e)=>{e.r(n),e.d(n,{default:()=>i});var t=e(523),r=e(342);const i={init:function(){(0,t.bindAll)(this,"_onFramesChange")},run:function(s){this.toggleVis(s,!0)},stop:function(s){this.toggleVis(s,!1)},toggleVis:function(s,u){if(u===void 0&&(u=!0),!s.Commands.isActive("preview")){var c=s.Canvas,f=u?"on":"off",h=c.getModel();h[f]("change:frames",this._onFramesChange),this.handleFrames(c.getFrames(),u)}},handleFrames:function(s,u){var c=this;s.forEach(function(f){var h;!((h=f.view)===null||h===void 0)&&h.loaded&&c._upFrame(f,u),f.__ol||(f.on("loaded",function(){return c._upFrame(f)}),f.__ol=!0)})},_onFramesChange:function(s,u){this.handleFrames(u)},_upFrame:function(s,u){var c,f=this,h=f.ppfx,v=f.em,m=f.id,_=(0,r.isDef)(u)?u:v.Commands.isActive(m),C=_?"add":"remove",T="".concat(h,"dashed");(c=s.view)===null||c===void 0||c.getBody().classList[C](T)}}},268:(o,n,e)=>{e.d(n,{Kx:()=>u,Ss:()=>f,lK:()=>v,pM:()=>c,x2:()=>h});var t=e(391),r=e.n(t),i=function(){var m=function(_,C){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,k){T.__proto__=k}||function(T,k){for(var P in k)Object.prototype.hasOwnProperty.call(k,P)&&(T[P]=k[P])},m(_,C)};return function(_,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");m(_,C);function T(){this.constructor=_}_.prototype=C===null?Object.create(C):(T.prototype=C.prototype,new T)}}(),s=function(){return s=Object.assign||function(m){for(var _,C=1,T=arguments.length;C<T;C++){_=arguments[C];for(var k in _)Object.prototype.hasOwnProperty.call(_,k)&&(m[k]=_[k])}return m},s.apply(this,arguments)},u=function(m){i(_,m);function _(){return m!==null&&m.apply(this,arguments)||this}return _}(r().Model),c=function(m){i(_,m);function _(){return m!==null&&m.apply(this,arguments)||this}return _}(r().Collection),f=function(m){i(_,m);function _(){return m!==null&&m.apply(this,arguments)||this}return _}(r().View),h;(function(m){m.Screen="screen",m.World="world"})(h||(h={}));var v={x:0,y:0};s(s({},v),{width:0,height:0})},249:(o,n,e)=>{e.d(n,{I:()=>r,t:()=>t});var t;(function(i){i.remove="component:remove",i.add="component:add",i.move="component:move"})(t||(t={}));var r;(function(i){i.add="component:add",i.remove="component:remove",i.removeBefore="component:remove:before",i.create="component:create",i.update="component:update",i.updateInside="component:update-inside",i.symbolMainAdd="symbol:main:add",i.symbolMainUpdate="symbol:main:update",i.symbolMainUpdateDeep="symbol:main:update-deep",i.symbolMainRemove="symbol:main:remove",i.symbolMain="symbol:main",i.symbolInstanceAdd="symbol:instance:add",i.symbolInstanceRemove="symbol:instance:remove",i.symbolInstance="symbol:instance",i.symbol="symbol"})(r||(r={}))},754:(o,n,e)=>{e.d(n,{A:()=>u});var t=e(523),r=e(268),i=function(){var c=function(f,h){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,m){v.__proto__=m}||function(v,m){for(var _ in m)Object.prototype.hasOwnProperty.call(m,_)&&(v[_]=m[_])},c(f,h)};return function(f,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");c(f,h);function v(){this.constructor=f}f.prototype=h===null?Object.create(h):(v.prototype=h.prototype,new v)}}(),s=function(c){i(f,c);function f(h,v,m){h===void 0&&(h={}),m===void 0&&(m=!1);var _=c.call(this,h)||this;return _.itemsView="",_.itemType="type",_.reuseView=!1,_.config=v||h.config||{},m&&_.listenTo(_.collection,"add",_.addTo),_.items=[],_}return f.prototype.addTo=function(h){this.add(h)},f.prototype.itemViewNotFound=function(h){var v=this,m=v.config,_=v.ns,C=m.em,T="".concat(_?"[".concat(_,"]: "):"","'").concat(h,"' type not found");C&&C.logWarning(T)},f.prototype.add=function(h,v){var m=this,_=m.config,C=m.reuseView,T=m.items,k=this.itemsView||{},P=["button","checkbox","color","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"],L=v||null,D=this.itemView,V=h.get(this.itemType),re;k[V]?D=k[V]:V&&!k[V]&&!(0,t.includes)(P,V)&&this.itemViewNotFound(V),h.view&&C?re=h.view:re=new D({model:h,config:_},_),T&&T.push(re);var _e=re.render().el;L?L.appendChild(_e):this.$el.append(_e)},f.prototype.render=function(){var h=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each(function(v){this.add(v,h)},this),this.$el.append(h),this.onRender(),this},f.prototype.onRender=function(){},f.prototype.onRemoveBefore=function(h,v){},f.prototype.onRemove=function(h,v){},f.prototype.remove=function(h){h===void 0&&(h={});var v=this.items;return this.onRemoveBefore(v,h),this.clearItems(),c.prototype.remove.call(this),this.onRemove(v,h),this},f.prototype.clearItems=function(){this.items},f}(r.Ss);const u=s;s.prototype.itemView=""},14:(o,n,e)=>{e.d(n,{A:()=>f});var t=e(523),r=e(926),i=function(){return i=Object.assign||function(h){for(var v,m=1,_=arguments.length;m<_;m++){v=arguments[m];for(var C in v)Object.prototype.hasOwnProperty.call(v,C)&&(h[C]=v[C])}return h},i.apply(this,arguments)},s=function(){return{x:0,y:0}},u=["x","y"],c=function(){function h(v){return v===void 0&&(v={}),this.opts={snapOffset:5,scale:1},(0,t.bindAll)(this,"drag","stop","keyHandle","handleScroll"),this.setOptions(v),this.delta=s(),this.lastScroll=s(),this.lastScrollDiff=s(),this.startPointer=s(),this.startPosition=s(),this.globScrollDiff=s(),this.currentPointer=s(),this.position=s(),this.guidesStatic=[],this.guidesTarget=[],this.docs=[],this}return h.prototype.setOptions=function(v){v===void 0&&(v={}),this.opts=i(i({},this.opts),v)},h.prototype.toggleDrag=function(v){var m=this.getDocumentEl(),_=this.getContainerEl(),C=this.getWindowEl(),T=v?"on":"off",k={on:r.on,off:r.AU};k[T](_,"mousemove dragover",this.drag),k[T](m,"mouseup dragend touchend",this.stop),k[T](m,"keydown",this.keyHandle),k[T](C,"scroll",this.handleScroll)},h.prototype.handleScroll=function(){var v=this,m=v.lastScroll,_=v.delta,C=this.getScrollInfo(),T={x:C.x-m.x,y:C.y-m.y};this.move(_.x+T.x,_.y+T.y),this.lastScrollDiff=T},h.prototype.start=function(v){var m=this.opts,_=m.onStart;this.toggleDrag(!0),this.startPointer=this.getPointerPos(v),this.guidesStatic=(0,t.result)(m,"guidesStatic")||[],this.guidesTarget=(0,t.result)(m,"guidesTarget")||[],(0,t.isFunction)(_)&&_(v,this),this.startPosition=this.getStartPosition(),this.lastScrollDiff=s(),this.globScrollDiff=s(),this.drag(v)},h.prototype.drag=function(v){var m=this,_=this,C=_.opts,T=_.lastScrollDiff,k=_.globScrollDiff,P=C.onDrag,L=this.startPointer,D=this.getPointerPos(v),V={x:k.x+T.x,y:k.y+T.y};this.globScrollDiff=V;var re={x:D.x-L.x+V.x,y:D.y-L.y+V.y};this.lastScrollDiff=s();var _e=this.lockedAxis;v.shiftKey?_e=!_e&&this.detectAxisLock(re.x,re.y):_e=null,_e==="x"?re.x=L.x:_e==="y"&&(re.y=L.y);var Q=function(te){u.forEach(function(q){return te[q]=te[q]*(0,t.result)(C,"scale")}),m.delta=te,m.move(te.x,te.y),(0,t.isFunction)(P)&&P(v,m)},pe=i({},re);if(this.currentPointer=D,this.lockedAxis=_e,this.lastScroll=this.getScrollInfo(),Q(re),this.guidesTarget.length){var ne=this.snapGuides(pe),me=ne.newDelta,Y=ne.trgX,W=ne.trgY;(Y||W)&&Q(me)}v.which===0&&this.stop(v)},h.prototype.snapGuides=function(v){var m=this,_=v,C=this,T=C.trgX,k=C.trgY;return this.guidesTarget.forEach(function(P){P.x&&m.trgX||P.y&&m.trgY||(P.active=!1,m.guidesStatic.forEach(function(L){if(!(P.y&&L.x||P.x&&L.y)){var D=P.y&&L.y,V=D?"y":"x",re=P[V],_e=L[V],Q=v[V],pe=D?k:T;if(m.isPointIn(re,_e)&&(0,t.isUndefined)(pe)){var ne=Q-(re-_e);m.setGuideLock(P,ne)}}}))}),T=this.trgX,k=this.trgY,u.forEach(function(P){var L=P.toUpperCase(),D=m["trg".concat(L)];D&&!m.isPointIn(v[P],D.lock)&&(m.setGuideLock(D,null),D=null),D&&!(0,t.isUndefined)(D.lock)&&(_[P]=D.lock)}),{newDelta:_,trgX:this.trgX,trgY:this.trgY}},h.prototype.isPointIn=function(v,m,_){var C=_===void 0?{}:_,T=C.offset,k=T||this.opts.snapOffset||0;return v>=m&&v<=m+k||v<=m&&v>=m-k},h.prototype.setGuideLock=function(v,m){var _=(0,t.isUndefined)(v.x)?"Y":"X",C="trg".concat(_);return m!==null?(v.active=!0,v.lock=m,this[C]=v):(delete v.active,delete v.lock,delete this[C]),v},h.prototype.stop=function(v,m){m===void 0&&(m={});var _=this.delta,C=!!m.cancel,T=C?0:_.x,k=C?0:_.y;this.toggleDrag(),this.lockedAxis=null,this.move(T,k,!0);var P=this.opts.onEnd;(0,t.isFunction)(P)&&P(v,this,{cancelled:C})},h.prototype.keyHandle=function(v){(0,r.v$)(v)&&this.stop(v,{cancel:!0})},h.prototype.move=function(v,m,_){var C=this,T=C.el,k=C.opts,P=this.startPosition;if(P){var L=k.setPosition,D=P.x+v,V=P.y+m;this.position={x:D,y:V,end:_},(0,t.isFunction)(L)&&L(this.position),T&&(T.style.left="".concat(D,"px"),T.style.top="".concat(V,"px"))}},h.prototype.getContainerEl=function(){var v=this.opts.container;return v?[v]:this.getDocumentEl()},h.prototype.getWindowEl=function(){var v=this.getContainerEl();return v.map(function(m){var _=m.ownerDocument||m;return _.defaultView||_.parentWindow})},h.prototype.getDocumentEl=function(v){var m=this.opts.doc;if(v=v||this.el,!this.docs.length){var _=[document];v&&_.push(v.ownerDocument),m&&_.push(m),this.docs=_}return this.docs},h.prototype.getPointerPos=function(v){var m=this.opts.getPointerPosition,_=(0,r.G2)(v);return m?m(v):{x:_.clientX,y:_.clientY}},h.prototype.getStartPosition=function(){var v=this,m=v.el,_=v.opts,C=_.getPosition,T=s();return(0,t.isFunction)(C)?T=C():m&&(T={x:parseFloat(m.style.left),y:parseFloat(m.style.top)}),T},h.prototype.getScrollInfo=function(){var v=this.opts.doc,m=v&&v.body;return{y:m?m.scrollTop:0,x:m?m.scrollLeft:0}},h.prototype.detectAxisLock=function(v,m){var _=v,C=m,T=Math.abs(_),k=Math.abs(C);if(C>=T||C<=-T)return"x";if(_>k||_<-k)return"y"},h}();const f=c},694:(o,n,e)=>{e.r(n),e.d(n,{default:()=>Bn});var t=typeof document<"u"?document:null,r=typeof window<"u"?window:null,i=Array.prototype,s=i.filter,u=i.indexOf,c=i.map,f=i.push,h=i.reverse,v=i.slice,m=i.splice,_=/^#[\w-]*$/,C=/^\.[\w-]*$/,T=/<.+>/,k=/^\w+$/;function P(G,ve){return ve===void 0&&(ve=t),C.test(G)?ve.getElementsByClassName(G.slice(1)):k.test(G)?ve.getElementsByTagName(G):ve.querySelectorAll(G)}function L(G,ve){if(ve===void 0&&(ve=t),!!G){if(G.__cash)return G;var Ee=G;if(te(G)){if(ve.__cash&&(ve=ve[0]),Ee=_.test(G)?ve.getElementById(G.slice(1)):T.test(G)?Ht(G):P(G,ve),!Ee)return}else if(W(G))return this.ready(G);(Ee.nodeType||Ee===r)&&(Ee=[Ee]),this.length=Ee.length;for(var Ke=0,pt=this.length;Ke<pt;Ke++)this[Ke]=Ee[Ke]}}function D(G,ve){return new L(G,ve)}var V=D.fn=D.prototype=L.prototype={constructor:D,__cash:!0,length:0,splice:m};V.get=function(G){return G===void 0?v.call(this):this[G<0?G+this.length:G]},V.eq=function(G){return D(this.get(G))},V.first=function(){return this.eq(0)},V.last=function(){return this.eq(-1)},V.map=function(G){return D(c.call(this,function(ve,Ee){return G.call(ve,Ee,ve)}))},V.slice=function(){return D(v.apply(this,arguments))};var re=/(?:^\w|[A-Z]|\b\w)/g,_e=/[\s-_]+/g;function Q(G){return G.replace(re,function(ve,Ee){return ve[Ee?"toUpperCase":"toLowerCase"]()}).replace(_e,"")}D.camelCase=Q;function pe(G,ve){for(var Ee=0,Ke=G.length;Ee<Ke&&ve.call(G[Ee],G[Ee],Ee,G)!==!1;Ee++);}D.each=pe,V.each=function(G){return pe(this,function(ve,Ee){return G.call(ve,Ee,ve)}),this},V.removeProp=function(G){return this.each(function(ve,Ee){delete Ee[G]})};function ne(G){G===void 0&&(G=this);for(var ve=arguments,Ee=ve.length,Ke=Ee<2?0:1;Ke<Ee;Ke++)for(var pt in ve[Ke])G[pt]=ve[Ke][pt];return G}D.extend=V.extend=ne;var me=1;D.guid=me;function Y(G,ve){var Ee=G&&(G.matches||G.webkitMatchesSelector||G.mozMatchesSelector||G.msMatchesSelector||G.oMatchesSelector);return!!Ee&&Ee.call(G,ve)}D.matches=Y;function W(G){return typeof G=="function"}D.isFunction=W;function te(G){return typeof G=="string"}D.isString=te;function q(G){return!isNaN(parseFloat(G))&&isFinite(G)}D.isNumeric=q;var ge=Array.isArray;D.isArray=ge,V.prop=function(G,ve){if(G){if(te(G))return arguments.length<2?this[0]&&this[0][G]:this.each(function(Ke,pt){pt[G]=ve});for(var Ee in G)this.prop(Ee,G[Ee]);return this}};function R(G){return te(G)?function(ve,Ee){return Y(Ee,G)}:G.__cash?function(ve,Ee){return G.is(Ee)}:function(ve,Ee,Ke){return Ee===Ke}}V.filter=function(G){if(!G)return D();var ve=W(G)?G:R(G);return D(s.call(this,function(Ee,Ke){return ve.call(Ee,Ke,Ee,G)}))};var ke=/\S+/g;function he(G){return te(G)?G.match(ke)||[]:[]}V.hasClass=function(G){var ve=he(G),Ee=!1;return ve.length&&this.each(function(Ke,pt){return Ee=pt.classList.contains(ve[0]),!Ee}),Ee},V.removeAttr=function(G){var ve=he(G);return ve.length?this.each(function(Ee,Ke){pe(ve,function(pt){Ke.removeAttribute(pt)})}):this},V.attr=function(G,ve){if(G){if(te(G)){if(arguments.length<2){if(!this[0])return;var Ee=this[0].getAttribute(G);return Ee===null?void 0:Ee}return ve===null?this.removeAttr(G):this.each(function(pt,Dt){Dt.setAttribute(G,ve)})}for(var Ke in G)this.attr(Ke,G[Ke]);return this}},V.toggleClass=function(G,ve){var Ee=he(G),Ke=ve!==void 0;return Ee.length?this.each(function(pt,Dt){pe(Ee,function(Ut){Ke?ve?Dt.classList.add(Ut):Dt.classList.remove(Ut):Dt.classList.toggle(Ut)})}):this},V.addClass=function(G){return this.toggleClass(G,!0)},V.removeClass=function(G){return arguments.length?this.toggleClass(G,!1):this.attr("class","")};function Le(G){return G.filter(function(ve,Ee,Ke){return Ke.indexOf(ve)===Ee})}D.unique=Le,V.add=function(G,ve){return D(Le(this.get().concat(D(G,ve).get())))};function $e(G,ve,Ee){if(G.nodeType===1){var Ke=r.getComputedStyle(G,null);return ve?Ee?Ke.getPropertyValue(ve):Ke[ve]:Ke}}function be(G,ve){return parseInt($e(G,ve),10)||0}var Re=/^--/;function rt(G){return Re.test(G)}var He={},_t=t&&t.createElement("div"),Te=_t?_t.style:{},Ne=["webkit","moz","ms","o"];function Ye(G,ve){if(ve===void 0&&(ve=rt(G)),ve)return G;if(!He[G]){var Ee=Q(G),Ke=""+Ee.charAt(0).toUpperCase()+Ee.slice(1),pt=(Ee+" "+Ne.join(Ke+" ")+Ke).split(" ");pe(pt,function(Dt){if(Dt in Te)return He[G]=Dt,!1})}return He[G]}D.prefixedProp=Ye;var Fe={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function vt(G,ve,Ee){return Ee===void 0&&(Ee=rt(G)),!Ee&&!Fe[G]&&q(ve)?ve+"px":ve}V.css=function(G,ve){if(te(G)){var Ee=rt(G);return G=Ye(G,Ee),arguments.length<2?this[0]&&$e(this[0],G,Ee):G?(ve=vt(G,ve,Ee),this.each(function(pt,Dt){Dt.nodeType===1&&(Ee?Dt.style.setProperty(G,ve):Dt.style[G]=ve)})):this}for(var Ke in G)this.css(Ke,G[Ke]);return this};var nt="__cashData",bt=/^data-(.*)/;D.hasData=function(G){return nt in G};function Yt(G){return G[nt]=G[nt]||{}}function Mt(G,ve){var Ee=Yt(G);if(ve){if(!(ve in Ee)){var Ke=G.dataset?G.dataset[ve]||G.dataset[Q(ve)]:D(G).attr("data-"+ve);if(Ke!==void 0){try{Ke=JSON.parse(Ke)}catch{}Ee[ve]=Ke}}return Ee[ve]}return Ee}function un(G,ve){ve===void 0?delete G[nt]:delete Yt(G)[ve]}function tn(G,ve,Ee){Yt(G)[ve]=Ee}V.data=function(G,ve){var Ee=this;if(!G)return this[0]?(pe(this[0].attributes,function(pt){var Dt=pt.name.match(bt);Dt&&Ee.data(Dt[1])}),Mt(this[0])):void 0;if(te(G))return ve===void 0?this[0]&&Mt(this[0],G):this.each(function(pt,Dt){return tn(Dt,G,ve)});for(var Ke in G)this.data(Ke,G[Ke]);return this},V.removeData=function(G){return this.each(function(ve,Ee){return un(Ee,G)})};function Rt(G,ve){return be(G,"border"+(ve?"Left":"Top")+"Width")+be(G,"padding"+(ve?"Left":"Top"))+be(G,"padding"+(ve?"Right":"Bottom"))+be(G,"border"+(ve?"Right":"Bottom")+"Width")}pe(["Width","Height"],function(G){V["inner"+G]=function(){if(this[0])return this[0]===r?r["inner"+G]:this[0]["client"+G]}}),pe(["width","height"],function(G,ve){V[G]=function(Ee){return this[0]?arguments.length?(Ee=parseInt(Ee,10),this.each(function(Ke,pt){if(pt.nodeType===1){var Dt=$e(pt,"boxSizing");pt.style[G]=vt(G,Ee+(Dt==="border-box"?Rt(pt,!ve):0))}})):this[0]===r?this[0][Q("outer-"+G)]:this[0].getBoundingClientRect()[G]-Rt(this[0],!ve):Ee===void 0?void 0:this}}),pe(["Width","Height"],function(G,ve){V["outer"+G]=function(Ee){if(this[0])return this[0]===r?r["outer"+G]:this[0]["offset"+G]+(Ee?be(this[0],"margin"+(ve?"Top":"Left"))+be(this[0],"margin"+(ve?"Bottom":"Right")):0)}});function E(G,ve){for(var Ee=0,Ke=ve.length;Ee<Ke;Ee++)if(G.indexOf(ve[Ee])<0)return!1;return!0}function H(G,ve,Ee){pe(G[Ee],function(Ke){Ke[0];var pt=Ke[1];ve.removeEventListener(Ee,pt)}),delete G[Ee]}var J="__cashEvents",we=".";function xe(G){return G[J]=G[J]||{}}function ee(G,ve,Ee,Ke){Ke.guid=Ke.guid||me++;var pt=xe(G);pt[ve]=pt[ve]||[],pt[ve].push([Ee,Ke]),G.addEventListener(ve,Ke)}function se(G){var ve=G.split(we);return[ve[0],ve.slice(1).sort()]}function ae(G,ve,Ee,Ke){var pt=xe(G);if(ve){var Dt=pt[ve];if(!Dt)return;Ke&&(Ke.guid=Ke.guid||me++),pt[ve]=Dt.filter(function(Ut){var bn=Ut[0],Nn=Ut[1];if(Ke&&Nn.guid!==Ke.guid||!E(bn,Ee))return!0;G.removeEventListener(ve,Nn)})}else if(!Ee||!Ee.length)for(ve in pt)H(pt,G,ve);else for(ve in pt)ae(G,ve,Ee,Ke)}V.off=function(G,ve){var Ee=this;return G===void 0?this.each(function(Ke,pt){return ae(pt)}):pe(he(G),function(Ke){var pt=se(Ke),Dt=pt[0],Ut=pt[1];Ee.each(function(bn,Nn){return ae(Nn,Dt,Ut,ve)})}),this},V.on=function(G,ve,Ee,Ke){var pt=this;if(!te(G)){for(var Dt in G)this.on(Dt,ve,G[Dt]);return this}return W(ve)&&(Ee=ve,ve=!1),pe(he(G),function(Ut){var bn=se(Ut),Nn=bn[0],yn=bn[1];pt.each(function(Wn,ln){var Pn=function Br(on){if(!(on.namespace&&!E(yn,on.namespace.split(we)))){var An=ln;if(ve){for(var $t=on.target;!Y($t,ve);)if($t===ln||($t=$t.parentNode,!$t))return;An=$t}on.namespace=on.namespace||"";var At=Ee.call(An,on,on.data);Ke&&ae(ln,Nn,yn,Br),At===!1&&(on.preventDefault(),on.stopPropagation())}};Pn.guid=Ee.guid=Ee.guid||me++,ee(ln,Nn,yn,Pn)})}),this},V.one=function(G,ve,Ee){return this.on(G,ve,Ee,!0)},V.ready=function(G){var ve=function(){return G(D)};return t.readyState!=="loading"?setTimeout(ve):t.addEventListener("DOMContentLoaded",ve),this},V.trigger=function(G,ve){var Ee=G;if(te(G)){var Ke=se(G),pt=Ke[0],Dt=Ke[1];Ee=t.createEvent("HTMLEvents"),Ee.initEvent(pt,!0,!0),Ee.namespace=Dt.join(we)}return Ee.data=ve,this.each(function(Ut,bn){bn.dispatchEvent(Ee)})};function et(G){var ve=[];return pe(G.options,function(Ee){Ee.selected&&!Ee.disabled&&!Ee.parentNode.disabled&&ve.push(Ee.value)}),ve}function ct(G){return G.selectedIndex<0?null:G.options[G.selectedIndex].value}var ot=/select-one/i,X=/select-multiple/i;function fe(G){var ve=G.type;return ot.test(ve)?ct(G):X.test(ve)?et(G):G.value}var z=/%20/g;function je(G,ve){return"&"+encodeURIComponent(G)+"="+encodeURIComponent(ve).replace(z,"+")}var Se=/file|reset|submit|button|image/i,Be=/radio|checkbox/i;V.serialize=function(){var G="";return this.each(function(ve,Ee){pe(Ee.elements||[Ee],function(Ke){if(!(Ke.disabled||!Ke.name||Ke.tagName==="FIELDSET")&&!Se.test(Ke.type)&&!(Be.test(Ke.type)&&!Ke.checked)){var pt=fe(Ke);if(pt!==void 0){var Dt=ge(pt)?pt:[pt];pe(Dt,function(Ut){G+=je(Ke.name,Ut)})}}})}),G.substr(1)},V.val=function(G){return G===void 0?this[0]&&fe(this[0]):this.each(function(ve,Ee){var Ke=X.test(Ee.type),pt=G===null?Ke?[]:"":G;Ke&&ge(pt)?pe(Ee.options,function(Dt){Dt.selected=pt.indexOf(Dt.value)>=0}):Ee.value=pt})},V.clone=function(){return this.map(function(G,ve){return ve.cloneNode(!0)})},V.detach=function(){return this.each(function(G,ve){ve.parentNode&&ve.parentNode.removeChild(ve)})};var qe=/^\s*<(\w+)[^>]*>/,st=/^\s*<(\w+)\s*\/?>(?:<\/\1>)?\s*$/,ut;function Ot(){if(!ut){var G=t.createElement("table"),ve=t.createElement("tr");ut={"*":t.createElement("div"),tr:t.createElement("tbody"),td:ve,th:ve,thead:G,tbody:G,tfoot:G}}}function Ht(G){if(Ot(),!te(G))return[];if(st.test(G))return[t.createElement(RegExp.$1)];var ve=qe.test(G)&&RegExp.$1,Ee=ut[ve]||ut["*"];return Ee.innerHTML=G,D(Ee.childNodes).detach().get()}D.parseHTML=Ht,V.empty=function(){var G=this[0];if(G)for(;G.firstChild;)G.removeChild(G.firstChild);return this};function Bt(G,ve,Ee){Ee?G.insertBefore(ve,G.childNodes[0]):G.appendChild(ve)}function Kt(G,ve,Ee){if(ve!==void 0){var Ke=te(ve);!Ke&&ve.length?pe(ve,function(pt){return Kt(G,pt,Ee)}):pe(G,Ke?function(pt){pt.insertAdjacentHTML(Ee?"afterbegin":"beforeend",ve)}:function(pt,Dt){return Bt(pt,Dt?ve.cloneNode(!0):ve,Ee)})}}V.append=function(){var G=this;return pe(arguments,function(ve){Kt(G,ve)}),this},V.appendTo=function(G){return Kt(D(G),this),this},V.html=function(G){if(G===void 0)return this[0]&&this[0].innerHTML;var ve=G.nodeType?G[0].outerHTML:G;return this.each(function(Ee,Ke){Ke.innerHTML=ve})},V.insertAfter=function(G){var ve=this;return D(G).each(function(Ee,Ke){var pt=Ke.parentNode;ve.each(function(Dt,Ut){pt.insertBefore(Ee?Ut.cloneNode(!0):Ut,Ke.nextSibling)})}),this},V.after=function(){var G=this;return pe(h.apply(arguments),function(ve){h.apply(D(ve).slice()).insertAfter(G)}),this},V.insertBefore=function(G){var ve=this;return D(G).each(function(Ee,Ke){var pt=Ke.parentNode;ve.each(function(Dt,Ut){pt.insertBefore(Ee?Ut.cloneNode(!0):Ut,Ke)})}),this},V.before=function(){var G=this;return pe(arguments,function(ve){D(ve).insertBefore(G)}),this},V.prepend=function(){var G=this;return pe(arguments,function(ve){Kt(G,ve,!0)}),this},V.prependTo=function(G){return Kt(D(G),h.apply(this.slice()),!0),this},V.remove=function(){return this.detach().off()},V.replaceWith=function(G){var ve=this;return this.each(function(Ee,Ke){var pt=Ke.parentNode;if(pt){var Dt=Ee?D(G).clone():D(G);if(!Dt[0])return ve.remove(),!1;pt.replaceChild(Dt[0],Ke),D(Dt[0]).after(Dt.slice(1))}})},V.replaceAll=function(G){return D(G).replaceWith(this),this},V.text=function(G){return G===void 0?this[0]?this[0].textContent:"":this.each(function(ve,Ee){Ee.textContent=G})};var hn=t&&t.documentElement;V.offset=function(){var G=this[0];if(G){var ve=G.getBoundingClientRect();return{top:ve.top+r.pageYOffset-hn.clientTop,left:ve.left+r.pageXOffset-hn.clientLeft}}},V.offsetParent=function(){return D(this[0]&&this[0].offsetParent)},V.position=function(){var G=this[0];if(G)return{left:G.offsetLeft,top:G.offsetTop}},V.children=function(G){var ve=[];return this.each(function(Ee,Ke){f.apply(ve,Ke.children)}),ve=D(Le(ve)),G?ve.filter(function(Ee,Ke){return Y(Ke,G)}):ve},V.contents=function(){var G=[];return this.each(function(ve,Ee){f.apply(G,Ee.tagName==="IFRAME"?[Ee.contentDocument]:Ee.childNodes)}),D(G.length&&Le(G))},V.find=function(G){for(var ve=[],Ee=0,Ke=this.length;Ee<Ke;Ee++){var pt=P(G,this[Ee]);pt.length&&f.apply(ve,pt)}return D(ve.length&&Le(ve))},V.has=function(G){var ve=te(G)?function(Ee,Ke){return!!P(G,Ke).length}:function(Ee,Ke){return Ke.contains(G)};return this.filter(ve)},V.is=function(G){if(!G||!this[0])return!1;var ve=R(G),Ee=!1;return this.each(function(Ke,pt){return Ee=ve(Ke,pt,G),!Ee}),Ee},V.next=function(){return D(this[0]&&this[0].nextElementSibling)},V.not=function(G){if(!G||!this[0])return this;var ve=R(G);return this.filter(function(Ee,Ke){return!ve(Ee,Ke,G)})},V.parent=function(){var G=[];return this.each(function(ve,Ee){Ee&&Ee.parentNode&&G.push(Ee.parentNode)}),D(Le(G))},V.index=function(G){var ve=G?D(G)[0]:this[0],Ee=G?this:D(ve).parent().children();return u.call(Ee,ve)},V.closest=function(G){return!G||!this[0]?D():this.is(G)?this.filter(G):this.parent().closest(G)},V.parents=function(G){var ve=[],Ee;return this.each(function(Ke,pt){for(Ee=pt;Ee&&Ee.parentNode&&Ee!==t.body.parentNode;)Ee=Ee.parentNode,(!G||G&&Y(Ee,G))&&ve.push(Ee)}),D(Le(ve))},V.prev=function(){return D(this[0]&&this[0].previousElementSibling)},V.siblings=function(){var G=this[0];return this.parent().children().filter(function(ve,Ee){return Ee!==G})};const Bn=D},926:(o,n,e)=>{e.d(n,{AU:()=>$e,BC:()=>k,C8:()=>pe,Ch:()=>Y,Ci:()=>q,D8:()=>u,G2:()=>W,GW:()=>Q,GZ:()=>L,I6:()=>v,LJ:()=>ke,Sc:()=>T,X6:()=>m,Xy:()=>ne,YZ:()=>f,ZQ:()=>c,a_:()=>P,af:()=>V,bG:()=>C,cx:()=>h,ir:()=>re,kk:()=>he,on:()=>Le,rp:()=>R,v$:()=>te,yL:()=>D,zN:()=>_});var t=e(523),r=function(be,Re,rt){if(rt||arguments.length===2)for(var He=0,_t=Re.length,Te;He<_t;He++)(Te||!(He in Re))&&(Te||(Te=Array.prototype.slice.call(Re,0,He)),Te[He]=Re[He]);return be.concat(Te||Array.prototype.slice.call(Re))},i="tag",s="attributes",u="transitionend oTransitionEnd transitionend webkitTransitionEnd",c=function(be){return(be==null?void 0:be.nodeType)===Node.DOCUMENT_NODE},f=function(be){var Re=be&&be.parentNode;Re&&Re.removeChild(be)};function h(){for(var be=[],Re=0;Re<arguments.length;Re++)be[Re]=arguments[Re];var rt=Array.isArray(be[0])?be[0]:r([],be,!0);return rt.filter(Boolean).join(" ")}var v=function(be,Re){return be.querySelectorAll(Re)},m=function(be,Re){return Re===void 0&&(Re={}),be&&be.setAttribute&&(0,t.each)(Re,function(rt,He){return be.setAttribute(He,rt)})},_=function(be){var Re;return be&&!!(be.offsetWidth||be.offsetHeight||!((Re=be.getClientRects)===null||Re===void 0)&&Re.call(be).length)},C=function(be,Re){var rt;(rt=be.parentNode)===null||rt===void 0||rt.replaceChild(Re,be)},T=function(be,Re,rt){var He=be.childNodes,_t=He.length,Te=(0,t.isUndefined)(rt)?_t:rt;(0,t.isString)(Re)&&(be.insertAdjacentHTML("beforeEnd",Re),Re=be.lastChild,be.removeChild(Re)),Te>=_t?be.appendChild(Re):be.insertBefore(Re,He[Te])},k=function(be,Re){return T(be,Re)},P=function(be,Re,rt){Re===void 0&&(Re={});var He=document.createElement(be);return Re&&(0,t.each)(Re,function(_t,Te){return He.setAttribute(Te,_t)}),rt&&((0,t.isString)(rt)?He.innerHTML=rt:He.appendChild(rt)),He},L=function(be){return document.createTextNode(be)},D=function(be,Re){var rt,He=be.type;try{rt=new window[Re](He,be)}catch{rt=document.createEvent(Re),rt.initEvent(He,!0,!0)}return rt._parentEvent=be,He.indexOf("key")===0&&(rt.keyCodeVal=be.keyCode,["keyCode","which"].forEach(function(_t){Object.defineProperty(rt,_t,{get:function(){return this.keyCodeVal}})})),rt},V=function(be,Re){Re===void 0&&(Re=[]);var rt=Array.isArray(Re)?Re:[Re];rt.forEach(function(He){var _t=He[i]||"div",Te=He[s]||{},Ne=document.createElement(_t);(0,t.each)(Te,function(Ye,Fe){Ne.setAttribute(Fe,Ye)}),be.appendChild(Ne)})},re=function(be){return(be==null?void 0:be.nodeType)===Node.TEXT_NODE},_e=function(be){return(be==null?void 0:be.nodeType)===Node.COMMENT_NODE},Q=function(be){return be&&!re(be)&&!_e(be)},pe=function(be){var Re={top:0,left:0,width:0,height:0};if(!be)return Re;var rt;if(re(be)){var He=document.createRange();He.selectNode(be),rt=He.getBoundingClientRect(),He.detach()}return rt||(be.getBoundingClientRect?be.getBoundingClientRect():Re)},ne=function(be){var Re=(be==null?void 0:be.ownerDocument)||document,rt=Re.documentElement,He=Re.defaultView||window;return{x:(He.pageXOffset||rt.scrollLeft||0)-(rt.clientLeft||0),y:(He.pageYOffset||rt.scrollTop||0)-(rt.clientTop||0)}},me=function(be){return be.which||be.keyCode},Y=function(be){return String.fromCharCode(me(be))},W=function(be){return be.touches&&be.touches[0]?be.touches[0]:be},te=function(be){return me(be)===27},q=function(be){return me(be)===13},ge=function(be){return be.ctrlKey},R=function(be){return ge(be)||be.metaKey},ke=function(be){if(!be)return"";var Re=be.name,rt=be.publicId,He=be.systemId,_t=rt?' PUBLIC "'.concat(rt,'"'):"",Te=!rt&&He?' SYSTEM "'.concat(He,'"'):"";return"<!DOCTYPE ".concat(Re).concat(_t).concat(Te,">")},he=function(be){be===void 0&&(be={});var Re=[];return(0,t.each)(be,function(rt,He){return Re.push("".concat(He,'="').concat(rt,'"'))}),Re.join(" ")},Le=function(be,Re,rt,He){var _t=Re.split(/\s+/),Te=(0,t.isArray)(be)?be:[be];_t.forEach(function(Ne){Te.forEach(function(Ye){return Ye==null?void 0:Ye.addEventListener(Ne,rt,He)})})},$e=function(be,Re,rt,He){var _t=Re.split(/\s+/),Te=(0,t.isArray)(be)?be:[be];_t.forEach(function(Ne){Te.forEach(function(Ye){return Ye==null?void 0:Ye.removeEventListener(Ne,rt,He)})})}},342:(o,n,e)=>{e.r(n),e.d(n,{appendStyles:()=>L,buildBase64UrlFromSvg:()=>_t,camelCase:()=>_e,capitalize:()=>ke,createId:()=>He,deepMerge:()=>te,escape:()=>Y,escapeNodeContent:()=>W,find:()=>me,getComponentModel:()=>Re,getComponentView:()=>be,getElement:()=>ne,getGlobal:()=>_,getModel:()=>q,getUiClass:()=>P,getUnitFromValue:()=>V,getViewEl:()=>Le,hasDnd:()=>pe,hasWin:()=>m,isBultInMethod:()=>c,isComponent:()=>$e,isDef:()=>v,isEmptyObj:()=>R,isObject:()=>ge,isRule:()=>he,matches:()=>k,normalizeFloat:()=>Q,normalizeKey:()=>f,setViewEl:()=>rt,shallowDiff:()=>D,toLowerCase:()=>C,upFirst:()=>re,wait:()=>h});var t=e(523),r=e(926),i=function(){return i=Object.assign||function(Te){for(var Ne,Ye=1,Fe=arguments.length;Ye<Fe;Ye++){Ne=arguments[Ye];for(var vt in Ne)Object.prototype.hasOwnProperty.call(Ne,vt)&&(Te[vt]=Ne[vt])}return Te},i.apply(this,arguments)},s=function(Te,Ne,Ye){if(Ye||arguments.length===2)for(var Fe=0,vt=Ne.length,nt;Fe<vt;Fe++)(nt||!(Fe in Ne))&&(nt||(nt=Array.prototype.slice.call(Ne,0,Fe)),nt[Fe]=Ne[Fe]);return Te.concat(nt||Array.prototype.slice.call(Ne))},u={},c=function(Te){return(0,t.isFunction)(u[Te])},f=function(Te){return c(Te)?"_".concat(Te):Te},h=function(Te){return Te===void 0&&(Te=0),new Promise(function(Ne){return setTimeout(Ne,Te)})},v=function(Te){return typeof Te<"u"},m=function(){return typeof window<"u"},_=function(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:e.g},C=function(Te){return(Te||"").toLowerCase()},T=m()?window.Element.prototype:{},k=T.matches||T.webkitMatchesSelector||T.mozMatchesSelector||T.msMatchesSelector,P=function(Te,Ne){var Ye=Te.getConfig(),Fe=Ye.stylePrefix,vt=Ye.customUI;return[vt&&"".concat(Fe,"cui"),Ne].filter(function(nt){return nt}).join(" ")},L=function(Te,Ne){Ne===void 0&&(Ne={});var Ye=(0,t.isArray)(Te)?s([],Te,!0):[Te];if(Ye.length){var Fe=Ye.shift();if(Fe&&(!Ne.unique||!document.querySelector('link[href="'.concat(Fe,'"]')))){var vt=document.head,nt=document.createElement("link");nt.href=Fe,nt.rel="stylesheet",Ne.prepand?vt.insertBefore(nt,vt.firstChild):vt.appendChild(nt)}L(Ye)}},D=function(Te,Ne){var Ye={},Fe=(0,t.keys)(Ne);for(var vt in Te)if(Te.hasOwnProperty(vt)){var nt=Te[vt],bt=Ne[vt];Fe.indexOf(vt)>=0?nt!==bt&&(Ye[vt]=bt):Ye[vt]=null}for(var vt in Ne)Ne.hasOwnProperty(vt)&&(0,t.isUndefined)(Te[vt])&&(Ye[vt]=Ne[vt]);return Ye},V=function(Te){return Te.replace(parseFloat(Te),"")},re=function(Te){return Te[0].toUpperCase()+Te.toLowerCase().slice(1)},_e=function(Te){return Te.replace(/-./g,function(Ne){return Ne[1].toUpperCase()})},Q=function(Te,Ne,Ye){Ne===void 0&&(Ne=1),Ye===void 0&&(Ye=0);var Fe=0;if(isNaN(Te))return Ye;if(Te=parseFloat(Te),Math.floor(Te)!==Te){var vt=Ne.toString().split(".")[1];Fe=vt?vt.length:0}return Fe?parseFloat(Te.toFixed(Fe)):Te},pe=function(Te){return"draggable"in document.createElement("i")&&(Te?Te.config.nativeDnD:!0)},ne=function(Te){if((0,t.isElement)(Te)||(0,r.ir)(Te))return Te;if(Te&&Te.getEl)return Te.getEl()},me=function(Te,Ne){var Ye=null;return Te.some(function(Fe,vt){return Ne(Fe,vt,Te)?(Ye=Fe,1):0}),Ye},Y=function(Te){return Te===void 0&&(Te=""),"".concat(Te).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/`/g,"&#96;")},W=function(Te){return Te===void 0&&(Te=""),"".concat(Te).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},te=function(){for(var Te=[],Ne=0;Ne<arguments.length;Ne++)Te[Ne]=arguments[Ne];for(var Ye=i({},Te[0]),Fe=1;Fe<Te.length;Fe++){var vt=i({},Te[Fe]);for(var nt in vt){var bt=Ye[nt],Yt=vt[nt];ge(bt)&&ge(Yt)?Ye[nt]=te(bt,Yt):Ye[nt]=Yt}}return Ye},q=function(Te,Ne){var Ye;return!Ne&&Te&&Te.__cashData?Ye=Te.__cashData.model:Ne&&(0,t.isElement)(Te)&&(Ye=Ne(Te).data("model")),Ye},ge=function(Te){return Te&&!Array.isArray(Te)&&typeof Te=="object"},R=function(Te){return Object.keys(Te).length<=0},ke=function(Te){return Te===void 0&&(Te=""),Te&&Te.charAt(0).toUpperCase()+Te.substring(1)},he=function(Te){return Te&&Te.toCSS},Le=function(Te){return Te==null?void 0:Te.__gjsv},$e=function(Te){return!!(Te!=null&&Te.toHTML)},be=function(Te){return Le(Te)},Re=function(Te){var Ne;return(Ne=be(Te))===null||Ne===void 0?void 0:Ne.model},rt=function(Te,Ne){Te.__gjsv=Ne},He=function(Te){Te===void 0&&(Te=16);for(var Ne="",Ye="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",Fe=Ye.length,vt=0;vt<Te;vt++)Ne+=Ye.charAt(Math.floor(Math.random()*Fe));return Ne},_t=function(Te){if(Te&&Te.substr(0,4)==="<svg"){var Ne="";return m()?Ne=window.btoa(Te):typeof Buffer<"u"&&(Ne=Buffer.from(Te,"utf8").toString("base64")),Ne?"data:image/svg+xml;base64,".concat(Ne):Te}return Te}},585:(o,n,e)=>{var t={"./CanvasClear":404,"./CanvasClear.ts":404,"./CanvasMove":228,"./CanvasMove.ts":228,"./CommandAbstract":570,"./CommandAbstract.ts":570,"./ComponentDelete":377,"./ComponentDelete.ts":377,"./ComponentDrag":728,"./ComponentDrag.ts":728,"./ComponentEnter":462,"./ComponentEnter.ts":462,"./ComponentExit":658,"./ComponentExit.ts":658,"./ComponentNext":619,"./ComponentNext.ts":619,"./ComponentPrev":935,"./ComponentPrev.ts":935,"./ComponentStyleClear":536,"./ComponentStyleClear.ts":536,"./CopyComponent":957,"./CopyComponent.ts":957,"./ExportTemplate":413,"./ExportTemplate.ts":413,"./Fullscreen":516,"./Fullscreen.ts":516,"./MoveComponent":13,"./MoveComponent.ts":13,"./OpenAssets":204,"./OpenAssets.ts":204,"./OpenBlocks":195,"./OpenBlocks.ts":195,"./OpenLayers":671,"./OpenLayers.ts":671,"./OpenStyleManager":49,"./OpenStyleManager.ts":49,"./OpenTraitManager":590,"./OpenTraitManager.ts":590,"./PasteComponent":483,"./PasteComponent.ts":483,"./Preview":857,"./Preview.ts":857,"./Resize":869,"./Resize.ts":869,"./SelectComponent":194,"./SelectComponent.ts":194,"./SelectPosition":582,"./SelectPosition.ts":582,"./ShowOffset":131,"./ShowOffset.ts":131,"./SwitchVisibility":229,"./SwitchVisibility.ts":229};function r(s){var u=i(s);return e(u)}function i(s){if(!e.o(t,s)){var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}return t[s]}r.keys=function(){return Object.keys(t)},r.resolve=i,o.exports=r,r.id=585},523:(o,n,e)=>{e.r(n),e.d(n,{VERSION:()=>r,after:()=>lo,all:()=>Si,allKeys:()=>ut,any:()=>Wi,assign:()=>Pn,before:()=>Kr,bind:()=>Hi,bindAll:()=>aa,chain:()=>xi,chunk:()=>Er,clone:()=>At,collect:()=>vr,compact:()=>ul,compose:()=>Ao,constant:()=>Rt,contains:()=>nr,countBy:()=>_s,create:()=>$t,debounce:()=>Ta,default:()=>Ei,defaults:()=>Br,defer:()=>Tr,delay:()=>Po,detect:()=>Vt,difference:()=>xs,drop:()=>ci,each:()=>Mn,escape:()=>tt,every:()=>Si,extend:()=>ln,extendOwn:()=>Pn,filter:()=>Gr,find:()=>Vt,findIndex:()=>uo,findKey:()=>Bi,findLastIndex:()=>Ci,findWhere:()=>En,first:()=>Ki,flatten:()=>bs,foldl:()=>gr,foldr:()=>Ir,forEach:()=>Mn,functions:()=>yn,get:()=>Tn,groupBy:()=>al,has:()=>sr,head:()=>Ki,identity:()=>an,include:()=>nr,includes:()=>nr,indexBy:()=>ws,indexOf:()=>Lt,initial:()=>wn,inject:()=>gr,intersection:()=>cl,invert:()=>Nn,invoke:()=>gs,isArguments:()=>Mt,isArray:()=>nt,isArrayBuffer:()=>be,isBoolean:()=>W,isDataView:()=>vt,isDate:()=>ke,isElement:()=>te,isEmpty:()=>X,isEqual:()=>st,isError:()=>Le,isFinite:()=>un,isFunction:()=>He,isMap:()=>Ee,isMatch:()=>fe,isNaN:()=>tn,isNull:()=>me,isNumber:()=>R,isObject:()=>ne,isRegExp:()=>he,isSet:()=>pt,isString:()=>ge,isSymbol:()=>$e,isTypedArray:()=>se,isUndefined:()=>Y,isWeakMap:()=>Ke,isWeakSet:()=>Dt,iteratee:()=>qt,keys:()=>ot,last:()=>Gi,lastIndexOf:()=>en,map:()=>vr,mapObject:()=>pr,matcher:()=>xt,matches:()=>xt,max:()=>ms,memoize:()=>$r,methods:()=>yn,min:()=>ys,mixin:()=>qi,negate:()=>so,noop:()=>Wr,now:()=>B,object:()=>fl,omit:()=>Oi,once:()=>Ui,pairs:()=>bn,partial:()=>Yo,partition:()=>$i,pick:()=>ka,pluck:()=>sa,property:()=>Qn,propertyOf:()=>Ze,random:()=>io,range:()=>Ti,reduce:()=>gr,reduceRight:()=>Ir,reject:()=>tr,rest:()=>ci,restArguments:()=>pe,result:()=>Or,sample:()=>Ea,select:()=>Gr,shuffle:()=>ol,size:()=>sl,some:()=>Wi,sortBy:()=>il,sortedIndex:()=>jr,tail:()=>ci,take:()=>Ki,tap:()=>Ft,template:()=>To,templateSettings:()=>Jt,throttle:()=>Fn,times:()=>jt,toArray:()=>Do,toPath:()=>Dr,transpose:()=>fi,unescape:()=>Gt,union:()=>la,uniq:()=>Xi,unique:()=>Xi,uniqueId:()=>zi,unzip:()=>fi,values:()=>Ut,where:()=>lr,without:()=>Yi,wrap:()=>ko,zip:()=>Cs});var t={};e.r(t),e.d(t,{VERSION:()=>r,after:()=>lo,all:()=>Si,allKeys:()=>ut,any:()=>Wi,assign:()=>Pn,before:()=>Kr,bind:()=>Hi,bindAll:()=>aa,chain:()=>xi,chunk:()=>Er,clone:()=>At,collect:()=>vr,compact:()=>ul,compose:()=>Ao,constant:()=>Rt,contains:()=>nr,countBy:()=>_s,create:()=>$t,debounce:()=>Ta,default:()=>Aa,defaults:()=>Br,defer:()=>Tr,delay:()=>Po,detect:()=>Vt,difference:()=>xs,drop:()=>ci,each:()=>Mn,escape:()=>tt,every:()=>Si,extend:()=>ln,extendOwn:()=>Pn,filter:()=>Gr,find:()=>Vt,findIndex:()=>uo,findKey:()=>Bi,findLastIndex:()=>Ci,findWhere:()=>En,first:()=>Ki,flatten:()=>bs,foldl:()=>gr,foldr:()=>Ir,forEach:()=>Mn,functions:()=>yn,get:()=>Tn,groupBy:()=>al,has:()=>sr,head:()=>Ki,identity:()=>an,include:()=>nr,includes:()=>nr,indexBy:()=>ws,indexOf:()=>Lt,initial:()=>wn,inject:()=>gr,intersection:()=>cl,invert:()=>Nn,invoke:()=>gs,isArguments:()=>Mt,isArray:()=>nt,isArrayBuffer:()=>be,isBoolean:()=>W,isDataView:()=>vt,isDate:()=>ke,isElement:()=>te,isEmpty:()=>X,isEqual:()=>st,isError:()=>Le,isFinite:()=>un,isFunction:()=>He,isMap:()=>Ee,isMatch:()=>fe,isNaN:()=>tn,isNull:()=>me,isNumber:()=>R,isObject:()=>ne,isRegExp:()=>he,isSet:()=>pt,isString:()=>ge,isSymbol:()=>$e,isTypedArray:()=>se,isUndefined:()=>Y,isWeakMap:()=>Ke,isWeakSet:()=>Dt,iteratee:()=>qt,keys:()=>ot,last:()=>Gi,lastIndexOf:()=>en,map:()=>vr,mapObject:()=>pr,matcher:()=>xt,matches:()=>xt,max:()=>ms,memoize:()=>$r,methods:()=>yn,min:()=>ys,mixin:()=>qi,negate:()=>so,noop:()=>Wr,now:()=>B,object:()=>fl,omit:()=>Oi,once:()=>Ui,pairs:()=>bn,partial:()=>Yo,partition:()=>$i,pick:()=>ka,pluck:()=>sa,property:()=>Qn,propertyOf:()=>Ze,random:()=>io,range:()=>Ti,reduce:()=>gr,reduceRight:()=>Ir,reject:()=>tr,rest:()=>ci,restArguments:()=>pe,result:()=>Or,sample:()=>Ea,select:()=>Gr,shuffle:()=>ol,size:()=>sl,some:()=>Wi,sortBy:()=>il,sortedIndex:()=>jr,tail:()=>ci,take:()=>Ki,tap:()=>Ft,template:()=>To,templateSettings:()=>Jt,throttle:()=>Fn,times:()=>jt,toArray:()=>Do,toPath:()=>Dr,transpose:()=>fi,unescape:()=>Gt,union:()=>la,uniq:()=>Xi,unique:()=>Xi,uniqueId:()=>zi,unzip:()=>fi,values:()=>Ut,where:()=>lr,without:()=>Yi,wrap:()=>ko,zip:()=>Cs});var r="1.13.1",i=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},s=Array.prototype,u=Object.prototype,c=typeof Symbol<"u"?Symbol.prototype:null,f=s.push,h=s.slice,v=u.toString,m=u.hasOwnProperty,_=typeof ArrayBuffer<"u",C=typeof DataView<"u",T=Array.isArray,k=Object.keys,P=Object.create,L=_&&ArrayBuffer.isView,D=isNaN,V=isFinite,re=!{toString:null}.propertyIsEnumerable("toString"),_e=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Q=Math.pow(2,53)-1;function pe(I,$){return $=$==null?I.length-1:+$,function(){for(var ce=Math.max(arguments.length-$,0),ye=Array(ce),Ae=0;Ae<ce;Ae++)ye[Ae]=arguments[Ae+$];switch($){case 0:return I.call(this,ye);case 1:return I.call(this,arguments[0],ye);case 2:return I.call(this,arguments[0],arguments[1],ye)}var Pe=Array($+1);for(Ae=0;Ae<$;Ae++)Pe[Ae]=arguments[Ae];return Pe[$]=ye,I.apply(this,Pe)}}function ne(I){var $=typeof I;return $==="function"||$==="object"&&!!I}function me(I){return I===null}function Y(I){return I===void 0}function W(I){return I===!0||I===!1||v.call(I)==="[object Boolean]"}function te(I){return!!(I&&I.nodeType===1)}function q(I){var $="[object "+I+"]";return function(ce){return v.call(ce)===$}}const ge=q("String"),R=q("Number"),ke=q("Date"),he=q("RegExp"),Le=q("Error"),$e=q("Symbol"),be=q("ArrayBuffer");var Re=q("Function"),rt=i.document&&i.document.childNodes;typeof Int8Array!="object"&&typeof rt!="function"&&(Re=function(I){return typeof I=="function"||!1});const He=Re,_t=q("Object");var Te=C&&_t(new DataView(new ArrayBuffer(8))),Ne=typeof Map<"u"&&_t(new Map),Ye=q("DataView");function Fe(I){return I!=null&&He(I.getInt8)&&be(I.buffer)}const vt=Te?Fe:Ye,nt=T||q("Array");function bt(I,$){return I!=null&&m.call(I,$)}var Yt=q("Arguments");(function(){Yt(arguments)||(Yt=function(I){return bt(I,"callee")})})();const Mt=Yt;function un(I){return!$e(I)&&V(I)&&!isNaN(parseFloat(I))}function tn(I){return R(I)&&D(I)}function Rt(I){return function(){return I}}function E(I){return function($){var ce=I($);return typeof ce=="number"&&ce>=0&&ce<=Q}}function H(I){return function($){return $==null?void 0:$[I]}}const J=H("byteLength"),we=E(J);var xe=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function ee(I){return L?L(I)&&!vt(I):we(I)&&xe.test(v.call(I))}const se=_?ee:Rt(!1),ae=H("length");function et(I){for(var $={},ce=I.length,ye=0;ye<ce;++ye)$[I[ye]]=!0;return{contains:function(Ae){return $[Ae]},push:function(Ae){return $[Ae]=!0,I.push(Ae)}}}function ct(I,$){$=et($);var ce=_e.length,ye=I.constructor,Ae=He(ye)&&ye.prototype||u,Pe="constructor";for(bt(I,Pe)&&!$.contains(Pe)&&$.push(Pe);ce--;)Pe=_e[ce],Pe in I&&I[Pe]!==Ae[Pe]&&!$.contains(Pe)&&$.push(Pe)}function ot(I){if(!ne(I))return[];if(k)return k(I);var $=[];for(var ce in I)bt(I,ce)&&$.push(ce);return re&&ct(I,$),$}function X(I){if(I==null)return!0;var $=ae(I);return typeof $=="number"&&(nt(I)||ge(I)||Mt(I))?$===0:ae(ot(I))===0}function fe(I,$){var ce=ot($),ye=ce.length;if(I==null)return!ye;for(var Ae=Object(I),Pe=0;Pe<ye;Pe++){var Ge=ce[Pe];if($[Ge]!==Ae[Ge]||!(Ge in Ae))return!1}return!0}function z(I){if(I instanceof z)return I;if(!(this instanceof z))return new z(I);this._wrapped=I}z.VERSION=r,z.prototype.value=function(){return this._wrapped},z.prototype.valueOf=z.prototype.toJSON=z.prototype.value,z.prototype.toString=function(){return String(this._wrapped)};function je(I){return new Uint8Array(I.buffer||I,I.byteOffset||0,J(I))}var Se="[object DataView]";function Be(I,$,ce,ye){if(I===$)return I!==0||1/I===1/$;if(I==null||$==null)return!1;if(I!==I)return $!==$;var Ae=typeof I;return Ae!=="function"&&Ae!=="object"&&typeof $!="object"?!1:qe(I,$,ce,ye)}function qe(I,$,ce,ye){I instanceof z&&(I=I._wrapped),$ instanceof z&&($=$._wrapped);var Ae=v.call(I);if(Ae!==v.call($))return!1;if(Te&&Ae=="[object Object]"&&vt(I)){if(!vt($))return!1;Ae=Se}switch(Ae){case"[object RegExp]":case"[object String]":return""+I==""+$;case"[object Number]":return+I!=+I?+$!=+$:+I==0?1/+I===1/$:+I==+$;case"[object Date]":case"[object Boolean]":return+I==+$;case"[object Symbol]":return c.valueOf.call(I)===c.valueOf.call($);case"[object ArrayBuffer]":case Se:return qe(je(I),je($),ce,ye)}var Pe=Ae==="[object Array]";if(!Pe&&se(I)){var Ge=J(I);if(Ge!==J($))return!1;if(I.buffer===$.buffer&&I.byteOffset===$.byteOffset)return!0;Pe=!0}if(!Pe){if(typeof I!="object"||typeof $!="object")return!1;var ft=I.constructor,w=$.constructor;if(ft!==w&&!(He(ft)&&ft instanceof ft&&He(w)&&w instanceof w)&&"constructor"in I&&"constructor"in $)return!1}ce=ce||[],ye=ye||[];for(var y=ce.length;y--;)if(ce[y]===I)return ye[y]===$;if(ce.push(I),ye.push($),Pe){if(y=I.length,y!==$.length)return!1;for(;y--;)if(!Be(I[y],$[y],ce,ye))return!1}else{var x=ot(I),O;if(y=x.length,ot($).length!==y)return!1;for(;y--;)if(O=x[y],!(bt($,O)&&Be(I[O],$[O],ce,ye)))return!1}return ce.pop(),ye.pop(),!0}function st(I,$){return Be(I,$)}function ut(I){if(!ne(I))return[];var $=[];for(var ce in I)$.push(ce);return re&&ct(I,$),$}function Ot(I){var $=ae(I);return function(ce){if(ce==null)return!1;var ye=ut(ce);if(ae(ye))return!1;for(var Ae=0;Ae<$;Ae++)if(!He(ce[I[Ae]]))return!1;return I!==G||!He(ce[Ht])}}var Ht="forEach",Bt="has",Kt=["clear","delete"],hn=["get",Bt,"set"],Bn=Kt.concat(Ht,hn),G=Kt.concat(hn),ve=["add"].concat(Kt,Ht,Bt);const Ee=Ne?Ot(Bn):q("Map"),Ke=Ne?Ot(G):q("WeakMap"),pt=Ne?Ot(ve):q("Set"),Dt=q("WeakSet");function Ut(I){for(var $=ot(I),ce=$.length,ye=Array(ce),Ae=0;Ae<ce;Ae++)ye[Ae]=I[$[Ae]];return ye}function bn(I){for(var $=ot(I),ce=$.length,ye=Array(ce),Ae=0;Ae<ce;Ae++)ye[Ae]=[$[Ae],I[$[Ae]]];return ye}function Nn(I){for(var $={},ce=ot(I),ye=0,Ae=ce.length;ye<Ae;ye++)$[I[ce[ye]]]=ce[ye];return $}function yn(I){var $=[];for(var ce in I)He(I[ce])&&$.push(ce);return $.sort()}function Wn(I,$){return function(ce){var ye=arguments.length;if($&&(ce=Object(ce)),ye<2||ce==null)return ce;for(var Ae=1;Ae<ye;Ae++)for(var Pe=arguments[Ae],Ge=I(Pe),ft=Ge.length,w=0;w<ft;w++){var y=Ge[w];(!$||ce[y]===void 0)&&(ce[y]=Pe[y])}return ce}}const ln=Wn(ut),Pn=Wn(ot),Br=Wn(ut,!0);function on(){return function(){}}function An(I){if(!ne(I))return{};if(P)return P(I);var $=on();$.prototype=I;var ce=new $;return $.prototype=null,ce}function $t(I,$){var ce=An(I);return $&&Pn(ce,$),ce}function At(I){return ne(I)?nt(I)?I.slice():ln({},I):I}function Ft(I,$){return $(I),I}function Dr(I){return nt(I)?I:[I]}z.toPath=Dr;function Lr(I){return z.toPath(I)}function $n(I,$){for(var ce=$.length,ye=0;ye<ce;ye++){if(I==null)return;I=I[$[ye]]}return ce?I:void 0}function Tn(I,$,ce){var ye=$n(I,Lr($));return Y(ye)?ce:ye}function sr(I,$){$=Lr($);for(var ce=$.length,ye=0;ye<ce;ye++){var Ae=$[ye];if(!bt(I,Ae))return!1;I=I[Ae]}return!!ce}function an(I){return I}function xt(I){return I=Pn({},I),function($){return fe($,I)}}function Qn(I){return I=Lr(I),function($){return $n($,I)}}function xn(I,$,ce){if($===void 0)return I;switch(ce??3){case 1:return function(ye){return I.call($,ye)};case 3:return function(ye,Ae,Pe){return I.call($,ye,Ae,Pe)};case 4:return function(ye,Ae,Pe,Ge){return I.call($,ye,Ae,Pe,Ge)}}return function(){return I.apply($,arguments)}}function er(I,$,ce){return I==null?an:He(I)?xn(I,$,ce):ne(I)&&!nt(I)?xt(I):Qn(I)}function qt(I,$){return er(I,$,1/0)}z.iteratee=qt;function fn(I,$,ce){return z.iteratee!==qt?z.iteratee(I,$):er(I,$,ce)}function pr(I,$,ce){$=fn($,ce);for(var ye=ot(I),Ae=ye.length,Pe={},Ge=0;Ge<Ae;Ge++){var ft=ye[Ge];Pe[ft]=$(I[ft],ft,I)}return Pe}function Wr(){}function Ze(I){return I==null?Wr:function($){return Tn(I,$)}}function jt(I,$,ce){var ye=Array(Math.max(0,I));$=xn($,ce,1);for(var Ae=0;Ae<I;Ae++)ye[Ae]=$(Ae);return ye}function io(I,$){return $==null&&($=I,I=0),I+Math.floor(Math.random()*($-I+1))}const B=Date.now||function(){return new Date().getTime()};function ue(I){var $=function(Pe){return I[Pe]},ce="(?:"+ot(I).join("|")+")",ye=RegExp(ce),Ae=RegExp(ce,"g");return function(Pe){return Pe=Pe==null?"":""+Pe,ye.test(Pe)?Pe.replace(Ae,$):Pe}}const Ve={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},tt=ue(Ve),it=Nn(Ve),Gt=ue(it),Jt=z.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Cn=/(.)^/,sn={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},hr=/\\|'|\r|\n|\u2028|\u2029/g;function ao(I){return"\\"+sn[I]}var Ko=/^\s*(\w|\$)+\s*$/;function To(I,$,ce){!$&&ce&&($=ce),$=Br({},$,z.templateSettings);var ye=RegExp([($.escape||Cn).source,($.interpolate||Cn).source,($.evaluate||Cn).source].join("|")+"|$","g"),Ae=0,Pe="__p+='";I.replace(ye,function(y,x,O,M,N){return Pe+=I.slice(Ae,N).replace(hr,ao),Ae=N+y.length,x?Pe+=`'+
((__t=(`+x+`))==null?'':_.escape(__t))+
'`:O?Pe+=`'+
((__t=(`+O+`))==null?'':__t)+
'`:M&&(Pe+=`';
`+M+`
__p+='`),y}),Pe+=`';
`;var Ge=$.variable;if(Ge){if(!Ko.test(Ge))throw new Error("variable is not a bare identifier: "+Ge)}else Pe=`with(obj||{}){
`+Pe+`}
`,Ge="obj";Pe=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+Pe+`return __p;
`;var ft;try{ft=new Function(Ge,"_",Pe)}catch(y){throw y.source=Pe,y}var w=function(y){return ft.call(this,y,z)};return w.source="function("+Ge+`){
`+Pe+"}",w}function Or(I,$,ce){$=Lr($);var ye=$.length;if(!ye)return He(ce)?ce.call(I):ce;for(var Ae=0;Ae<ye;Ae++){var Pe=I==null?void 0:I[$[Ae]];Pe===void 0&&(Pe=ce,Ae=ye),I=He(Pe)?Pe.call(I):Pe}return I}var Go=0;function zi(I){var $=++Go+"";return I?I+$:$}function xi(I){var $=z(I);return $._chain=!0,$}function li(I,$,ce,ye,Ae){if(!(ye instanceof $))return I.apply(ce,Ae);var Pe=An(I.prototype),Ge=I.apply(Pe,Ae);return ne(Ge)?Ge:Pe}var Eo=pe(function(I,$){var ce=Eo.placeholder,ye=function(){for(var Ae=0,Pe=$.length,Ge=Array(Pe),ft=0;ft<Pe;ft++)Ge[ft]=$[ft]===ce?arguments[Ae++]:$[ft];for(;Ae<arguments.length;)Ge.push(arguments[Ae++]);return li(I,ye,this,this,Ge)};return ye});Eo.placeholder=z;const Yo=Eo,Hi=pe(function(I,$,ce){if(!He(I))throw new TypeError("Bind must be called on a function");var ye=pe(function(Ae){return li(I,ye,$,this,ce.concat(Ae))});return ye}),Rn=E(ae);function qn(I,$,ce,ye){if(ye=ye||[],!$&&$!==0)$=1/0;else if($<=0)return ye.concat(I);for(var Ae=ye.length,Pe=0,Ge=ae(I);Pe<Ge;Pe++){var ft=I[Pe];if(Rn(ft)&&(nt(ft)||Mt(ft)))if($>1)qn(ft,$-1,ce,ye),Ae=ye.length;else for(var w=0,y=ft.length;w<y;)ye[Ae++]=ft[w++];else ce||(ye[Ae++]=ft)}return ye}const aa=pe(function(I,$){$=qn($,!1,!1);var ce=$.length;if(ce<1)throw new Error("bindAll must be passed function names");for(;ce--;){var ye=$[ce];I[ye]=Hi(I[ye],I)}return I});function $r(I,$){var ce=function(ye){var Ae=ce.cache,Pe=""+($?$.apply(this,arguments):ye);return bt(Ae,Pe)||(Ae[Pe]=I.apply(this,arguments)),Ae[Pe]};return ce.cache={},ce}const Po=pe(function(I,$,ce){return setTimeout(function(){return I.apply(null,ce)},$)}),Tr=Yo(Po,z,1);function Fn(I,$,ce){var ye,Ae,Pe,Ge,ft=0;ce||(ce={});var w=function(){ft=ce.leading===!1?0:B(),ye=null,Ge=I.apply(Ae,Pe),ye||(Ae=Pe=null)},y=function(){var x=B();!ft&&ce.leading===!1&&(ft=x);var O=$-(x-ft);return Ae=this,Pe=arguments,O<=0||O>$?(ye&&(clearTimeout(ye),ye=null),ft=x,Ge=I.apply(Ae,Pe),ye||(Ae=Pe=null)):!ye&&ce.trailing!==!1&&(ye=setTimeout(w,O)),Ge};return y.cancel=function(){clearTimeout(ye),ft=0,ye=Ae=Pe=null},y}function Ta(I,$,ce){var ye,Ae,Pe,Ge,ft,w=function(){var x=B()-Ae;$>x?ye=setTimeout(w,$-x):(ye=null,ce||(Ge=I.apply(ft,Pe)),ye||(Pe=ft=null))},y=pe(function(x){return ft=this,Pe=x,Ae=B(),ye||(ye=setTimeout(w,$),ce&&(Ge=I.apply(ft,Pe))),Ge});return y.cancel=function(){clearTimeout(ye),ye=Pe=ft=null},y}function ko(I,$){return Yo($,I)}function so(I){return function(){return!I.apply(this,arguments)}}function Ao(){var I=arguments,$=I.length-1;return function(){for(var ce=$,ye=I[$].apply(this,arguments);ce--;)ye=I[ce].call(this,ye);return ye}}function lo(I,$){return function(){if(--I<1)return $.apply(this,arguments)}}function Kr(I,$){var ce;return function(){return--I>0&&(ce=$.apply(this,arguments)),I<=1&&($=null),ce}}const Ui=Yo(Kr,2);function Bi(I,$,ce){$=fn($,ce);for(var ye=ot(I),Ae,Pe=0,Ge=ye.length;Pe<Ge;Pe++)if(Ae=ye[Pe],$(I[Ae],Ae,I))return Ae}function ui(I){return function($,ce,ye){ce=fn(ce,ye);for(var Ae=ae($),Pe=I>0?0:Ae-1;Pe>=0&&Pe<Ae;Pe+=I)if(ce($[Pe],Pe,$))return Pe;return-1}}const uo=ui(1),Ci=ui(-1);function jr(I,$,ce,ye){ce=fn(ce,ye,1);for(var Ae=ce($),Pe=0,Ge=ae(I);Pe<Ge;){var ft=Math.floor((Pe+Ge)/2);ce(I[ft])<Ae?Pe=ft+1:Ge=ft}return Pe}function Pt(I,$,ce){return function(ye,Ae,Pe){var Ge=0,ft=ae(ye);if(typeof Pe=="number")I>0?Ge=Pe>=0?Pe:Math.max(Pe+ft,Ge):ft=Pe>=0?Math.min(Pe+1,ft):Pe+ft+1;else if(ce&&Pe&&ft)return Pe=ce(ye,Ae),ye[Pe]===Ae?Pe:-1;if(Ae!==Ae)return Pe=$(h.call(ye,Ge,ft),tn),Pe>=0?Pe+Ge:-1;for(Pe=I>0?Ge:ft-1;Pe>=0&&Pe<ft;Pe+=I)if(ye[Pe]===Ae)return Pe;return-1}}const Lt=Pt(1,uo,jr),en=Pt(-1,Ci);function Vt(I,$,ce){var ye=Rn(I)?uo:Bi,Ae=ye(I,$,ce);if(Ae!==void 0&&Ae!==-1)return I[Ae]}function En(I,$){return Vt(I,xt($))}function Mn(I,$,ce){$=xn($,ce);var ye,Ae;if(Rn(I))for(ye=0,Ae=I.length;ye<Ae;ye++)$(I[ye],ye,I);else{var Pe=ot(I);for(ye=0,Ae=Pe.length;ye<Ae;ye++)$(I[Pe[ye]],Pe[ye],I)}return I}function vr(I,$,ce){$=fn($,ce);for(var ye=!Rn(I)&&ot(I),Ae=(ye||I).length,Pe=Array(Ae),Ge=0;Ge<Ae;Ge++){var ft=ye?ye[Ge]:Ge;Pe[Ge]=$(I[ft],ft,I)}return Pe}function co(I){var $=function(ce,ye,Ae,Pe){var Ge=!Rn(ce)&&ot(ce),ft=(Ge||ce).length,w=I>0?0:ft-1;for(Pe||(Ae=ce[Ge?Ge[w]:w],w+=I);w>=0&&w<ft;w+=I){var y=Ge?Ge[w]:w;Ae=ye(Ae,ce[y],y,ce)}return Ae};return function(ce,ye,Ae,Pe){var Ge=arguments.length>=3;return $(ce,xn(ye,Pe,4),Ae,Ge)}}const gr=co(1),Ir=co(-1);function Gr(I,$,ce){var ye=[];return $=fn($,ce),Mn(I,function(Ae,Pe,Ge){$(Ae,Pe,Ge)&&ye.push(Ae)}),ye}function tr(I,$,ce){return Gr(I,so(fn($)),ce)}function Si(I,$,ce){$=fn($,ce);for(var ye=!Rn(I)&&ot(I),Ae=(ye||I).length,Pe=0;Pe<Ae;Pe++){var Ge=ye?ye[Pe]:Pe;if(!$(I[Ge],Ge,I))return!1}return!0}function Wi(I,$,ce){$=fn($,ce);for(var ye=!Rn(I)&&ot(I),Ae=(ye||I).length,Pe=0;Pe<Ae;Pe++){var Ge=ye?ye[Pe]:Pe;if($(I[Ge],Ge,I))return!0}return!1}function nr(I,$,ce,ye){return Rn(I)||(I=Ut(I)),(typeof ce!="number"||ye)&&(ce=0),Lt(I,$,ce)>=0}const gs=pe(function(I,$,ce){var ye,Ae;return He($)?Ae=$:($=Lr($),ye=$.slice(0,-1),$=$[$.length-1]),vr(I,function(Pe){var Ge=Ae;if(!Ge){if(ye&&ye.length&&(Pe=$n(Pe,ye)),Pe==null)return;Ge=Pe[$]}return Ge==null?Ge:Ge.apply(Pe,ce)})});function sa(I,$){return vr(I,Qn($))}function lr(I,$){return Gr(I,xt($))}function ms(I,$,ce){var ye=-1/0,Ae=-1/0,Pe,Ge;if($==null||typeof $=="number"&&typeof I[0]!="object"&&I!=null){I=Rn(I)?I:Ut(I);for(var ft=0,w=I.length;ft<w;ft++)Pe=I[ft],Pe!=null&&Pe>ye&&(ye=Pe)}else $=fn($,ce),Mn(I,function(y,x,O){Ge=$(y,x,O),(Ge>Ae||Ge===-1/0&&ye===-1/0)&&(ye=y,Ae=Ge)});return ye}function ys(I,$,ce){var ye=1/0,Ae=1/0,Pe,Ge;if($==null||typeof $=="number"&&typeof I[0]!="object"&&I!=null){I=Rn(I)?I:Ut(I);for(var ft=0,w=I.length;ft<w;ft++)Pe=I[ft],Pe!=null&&Pe<ye&&(ye=Pe)}else $=fn($,ce),Mn(I,function(y,x,O){Ge=$(y,x,O),(Ge<Ae||Ge===1/0&&ye===1/0)&&(ye=y,Ae=Ge)});return ye}function Ea(I,$,ce){if($==null||ce)return Rn(I)||(I=Ut(I)),I[io(I.length-1)];var ye=Rn(I)?At(I):Ut(I),Ae=ae(ye);$=Math.max(Math.min($,Ae),0);for(var Pe=Ae-1,Ge=0;Ge<$;Ge++){var ft=io(Ge,Pe),w=ye[Ge];ye[Ge]=ye[ft],ye[ft]=w}return ye.slice(0,$)}function ol(I){return Ea(I,1/0)}function il(I,$,ce){var ye=0;return $=fn($,ce),sa(vr(I,function(Ae,Pe,Ge){return{value:Ae,index:ye++,criteria:$(Ae,Pe,Ge)}}).sort(function(Ae,Pe){var Ge=Ae.criteria,ft=Pe.criteria;if(Ge!==ft){if(Ge>ft||Ge===void 0)return 1;if(Ge<ft||ft===void 0)return-1}return Ae.index-Pe.index}),"value")}function Pa(I,$){return function(ce,ye,Ae){var Pe=$?[[],[]]:{};return ye=fn(ye,Ae),Mn(ce,function(Ge,ft){var w=ye(Ge,ft,ce);I(Pe,Ge,w)}),Pe}}const al=Pa(function(I,$,ce){bt(I,ce)?I[ce].push($):I[ce]=[$]}),ws=Pa(function(I,$,ce){I[ce]=$}),_s=Pa(function(I,$,ce){bt(I,ce)?I[ce]++:I[ce]=1}),$i=Pa(function(I,$,ce){I[ce?0:1].push($)},!0);var Mo=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Do(I){return I?nt(I)?h.call(I):ge(I)?I.match(Mo):Rn(I)?vr(I,an):Ut(I):[]}function sl(I){return I==null?0:Rn(I)?I.length:ot(I).length}function ll(I,$,ce){return $ in ce}const ka=pe(function(I,$){var ce={},ye=$[0];if(I==null)return ce;He(ye)?($.length>1&&(ye=xn(ye,$[1])),$=ut(I)):(ye=ll,$=qn($,!1,!1),I=Object(I));for(var Ae=0,Pe=$.length;Ae<Pe;Ae++){var Ge=$[Ae],ft=I[Ge];ye(ft,Ge,I)&&(ce[Ge]=ft)}return ce}),Oi=pe(function(I,$){var ce=$[0],ye;return He(ce)?(ce=so(ce),$.length>1&&(ye=$[1])):($=vr(qn($,!1,!1),String),ce=function(Ae,Pe){return!nr($,Pe)}),ka(I,ce,ye)});function wn(I,$,ce){return h.call(I,0,Math.max(0,I.length-($==null||ce?1:$)))}function Ki(I,$,ce){return I==null||I.length<1?$==null||ce?void 0:[]:$==null||ce?I[0]:wn(I,I.length-$)}function ci(I,$,ce){return h.call(I,$==null||ce?1:$)}function Gi(I,$,ce){return I==null||I.length<1?$==null||ce?void 0:[]:$==null||ce?I[I.length-1]:ci(I,Math.max(0,I.length-$))}function ul(I){return Gr(I,Boolean)}function bs(I,$){return qn(I,$,!1)}const xs=pe(function(I,$){return $=qn($,!0,!0),Gr(I,function(ce){return!nr($,ce)})}),Yi=pe(function(I,$){return xs(I,$)});function Xi(I,$,ce,ye){W($)||(ye=ce,ce=$,$=!1),ce!=null&&(ce=fn(ce,ye));for(var Ae=[],Pe=[],Ge=0,ft=ae(I);Ge<ft;Ge++){var w=I[Ge],y=ce?ce(w,Ge,I):w;$&&!ce?((!Ge||Pe!==y)&&Ae.push(w),Pe=y):ce?nr(Pe,y)||(Pe.push(y),Ae.push(w)):nr(Ae,w)||Ae.push(w)}return Ae}const la=pe(function(I){return Xi(qn(I,!0,!0))});function cl(I){for(var $=[],ce=arguments.length,ye=0,Ae=ae(I);ye<Ae;ye++){var Pe=I[ye];if(!nr($,Pe)){var Ge;for(Ge=1;Ge<ce&&nr(arguments[Ge],Pe);Ge++);Ge===ce&&$.push(Pe)}}return $}function fi(I){for(var $=I&&ms(I,ae).length||0,ce=Array($),ye=0;ye<$;ye++)ce[ye]=sa(I,ye);return ce}const Cs=pe(fi);function fl(I,$){for(var ce={},ye=0,Ae=ae(I);ye<Ae;ye++)$?ce[I[ye]]=$[ye]:ce[I[ye][0]]=I[ye][1];return ce}function Ti(I,$,ce){$==null&&($=I||0,I=0),ce||(ce=$<I?-1:1);for(var ye=Math.max(Math.ceil(($-I)/ce),0),Ae=Array(ye),Pe=0;Pe<ye;Pe++,I+=ce)Ae[Pe]=I;return Ae}function Er(I,$){if($==null||$<1)return[];for(var ce=[],ye=0,Ae=I.length;ye<Ae;)ce.push(h.call(I,ye,ye+=$));return ce}function Nr(I,$){return I._chain?z($).chain():$}function qi(I){return Mn(yn(I),function($){var ce=z[$]=I[$];z.prototype[$]=function(){var ye=[this._wrapped];return f.apply(ye,arguments),Nr(this,ce.apply(z,ye))}}),z}Mn(["pop","push","reverse","shift","sort","splice","unshift"],function(I){var $=s[I];z.prototype[I]=function(){var ce=this._wrapped;return ce!=null&&($.apply(ce,arguments),(I==="shift"||I==="splice")&&ce.length===0&&delete ce[0]),Nr(this,ce)}}),Mn(["concat","join","slice"],function(I){var $=s[I];z.prototype[I]=function(){var ce=this._wrapped;return ce!=null&&(ce=$.apply(ce,arguments)),Nr(this,ce)}});const Aa=z;var Yr=qi(t);Yr._=Yr;const Ei=Yr}},qw={};function vn(o){var n=qw[o];if(n!==void 0)return n.exports;var e=qw[o]={exports:{}};return ak[o].call(e.exports,e,e.exports,vn),e.exports}vn.n=o=>{var n=o&&o.__esModule?()=>o.default:()=>o;return vn.d(n,{a:n}),n};vn.d=(o,n)=>{for(var e in n)vn.o(n,e)&&!vn.o(o,e)&&Object.defineProperty(o,e,{enumerable:!0,get:n[e]})};vn.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();vn.o=(o,n)=>Object.prototype.hasOwnProperty.call(o,n);vn.r=o=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})};var BC={};vn.d(BC,{Ay:()=>nV,I0:()=>_1,nu:()=>w1});var U=vn(523),Xe=vn(342);function Vo(o){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];var t=o.raw;return t.reduce(function(r,i,s){var u=n[s-1],c=t[s-1];return Array.isArray(u)?u=u.join(""):c&&c.slice(-1)==="$"?r=r.slice(0,-1):u=(0,Xe.escape)(u),r+u+i})}var sk={stylePrefix:"gjs-",components:"",style:"",fromElement:!1,projectData:void 0,noticeOnUnload:!0,showOffsets:!1,showOffsetsSelected:!1,forceClass:!0,height:"900px",width:"100%",log:["warning","error"],baseCss:"",protectedCss:"* { box-sizing: border-box; } body {margin: 0;}",canvasCss:"",defaultCommand:"select-comp",showToolbar:!0,showDevices:!0,devicePreviewMode:!1,mediaCondition:"max-width",tagVarStart:"{[ ",tagVarEnd:" ]}",keepEmptyTextNodes:!1,jsInHtml:!0,nativeDnD:!0,multipleSelection:!0,optsHtml:{},optsCss:{},avoidInlineStyle:!0,avoidDefaults:!0,clearStyles:!1,listenToEl:[],cssIcons:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css",icons:{close:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',move:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z"/></svg>',plus:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" /></svg>',caret:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7,10L12,15L17,10H7Z" /></svg>',delete:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" /></svg>',copy:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z" /></svg>',arrowUp:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z" /></svg>',chevron:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z" /></svg>',eye:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z" /></svg>',eyeOff:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z" /></svg>'},i18n:{},undoManager:{},assetManager:{},canvas:{},layerManager:{},storageManager:{},richTextEditor:{},domComponents:{},modal:{},codeManager:{},panels:{},commands:{},cssComposer:{},selectorManager:{},deviceManager:{},styleManager:{},blockManager:{},traitManager:{},textViewCode:"Code",keepUnusedStyles:!1,customUI:!1};const Jw=sk;var jg=vn(391),lk=vn.n(jg),Hn=vn(694);const uk=function(o){var n=o.$;if(n&&n.prototype&&n.prototype.constructor.name!=="jQuery"){var e=n.fn;e.hide=function(){return this.css("display","none")},e.show=function(){return this.css("display","block")},e.focus=function(){var i=this.get(0);return i&&i.focus(),this},e.bind=function(i,s){return this.on(i,s)},e.unbind=function(i,s){if((0,U.isObject)(i)){for(var u in i)i.hasOwnProperty(u)&&this.off(u,i[u]);return this}else return this.off(i,s)},e.click=function(i){return i?this.on("click",i):this.trigger("click")},e.change=function(i){return i?this.on("change",i):this.trigger("change")},e.keydown=function(i){return i?this.on("keydown",i):this.trigger("keydown")},e.delegate=function(i,s,u,c){return c||(c=u),this.on(s,i,function(f){f.data=u,c(f)})},e.scrollLeft=function(){var i=this.get(0);i=i.nodeType==9?i.defaultView:i;var s=i instanceof Window?i:null;return s?s.pageXOffset:i.scrollLeft||0},e.scrollTop=function(){var i=this.get(0);i=i.nodeType==9?i.defaultView:i;var s=i instanceof Window?i:null;return s?s.pageYOffset:i.scrollTop||0};var t=n.prototype.offset;e.offset=function(i){var s,u;return i&&(s=i.top,u=i.left),typeof s<"u"&&this.css("top","".concat(s,"px")),typeof u<"u"&&this.css("left","".concat(u,"px")),t.call(this)},n.map=function(i,s){for(var u=[],c=0;c<i.length;c++)u.push(s(i[c],c));return u};var r=Array.prototype.indexOf;n.inArray=function(i,s,u){return s==null?-1:r.call(s,i,u)},n.Event=function(i,s){if(!(this instanceof n.Event))return new n.Event(i,s);this.type=i,this.isDefaultPrevented=function(){return!1}}}};var gt=vn(268),WC=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),ck=function(o){WC(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n}(gt.Kx),fk=function(o){WC(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype.getByComponent=function(e){var t=this;return this.filter(function(r){return t.getComponent(r)===e})[0]},n.prototype.addComponent=function(e,t){var r=this,i=((0,U.isArray)(e)?e:[e]).filter(function(s){return!r.hasComponent(s)}).map(function(s){return new ck({component:s})})[0];return this.push(i,t)},n.prototype.getComponent=function(e){return e.get("component")},n.prototype.hasComponent=function(e){var t=this.getByComponent(e);return t&&this.contains(t)},n.prototype.lastComponent=function(){var e=this.last();return e?this.getComponent(e):void 0},n.prototype.allComponents=function(){var e=this;return this.map(function(t){return e.getComponent(t)}).filter(function(t){return t})},n.prototype.removeComponent=function(e,t){var r=this,i=((0,U.isArray)(e)?e:[e]).map(function(s){return r.getByComponent(s)});return this.remove(i,t)},n}(gt.pM);const dk=fk;var pk=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Ig=function(){return Ig=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},Ig.apply(this,arguments)},hk=function(o,n,e){if(e||arguments.length===2)for(var t=0,r=n.length,i;t<r;t++)(i||!(t in n))&&(i||(i=Array.prototype.slice.call(n,0,t)),i[t]=n[t]);return o.concat(i||Array.prototype.slice.call(n))},$C=function(){function o(n,e,t){this.debounced=[],this.collections=[],this.cls=[],this._em=n,this._name=e;var r=this.name.charAt(0).toLowerCase()+this.name.slice(1),i=(0,U.isUndefined)(n.config[r])?n.config[this.name]:n.config[r],s=i===!0?{}:i||{};s.pStylePrefix=n.config.pStylePrefix||"",!(0,U.isUndefined)(i)&&!i&&(s._disable=1),s.em=n,this._config=(0,Xe.deepMerge)(t||{},s)}return Object.defineProperty(o.prototype,"em",{get:function(){return this._em},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),o.prototype.render=function(n){},o.prototype.postLoad=function(n){},Object.defineProperty(o.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),o.prototype.getConfig=function(n){return n?this.config[n]:this.config},o.prototype.__logWarn=function(n,e){e===void 0&&(e={}),this.em.logWarning("[".concat(this.name,"]: ").concat(n),e)},o.prototype.destroy=function(){this.__destroy()},o.prototype.__destroy=function(){var n,e,t;(n=this.view)===null||n===void 0||n.remove(),(e=this.state)===null||e===void 0||e.stopListening(),(t=this.state)===null||t===void 0||t.clear(),this.debounced.forEach(function(r){return r.cancel()}),this.collections.forEach(function(r){r.stopListening(),r.reset()})},o.prototype.__appendTo=function(){var n=this.getConfig().appendTo;if(n){var e=(0,U.isElement)(n)?n:document.querySelector(n);if(!e)return this.__logWarn('"appendTo" element not found');e.appendChild(this.render())}},o}();const $o=$C;var vs=function(o){pk(n,o);function n(e,t,r,i,s,u){u===void 0&&(u={});var c=o.call(this,e,t,s)||this;return c.cls=[],c.private=!1,c.all=r,c.events=i,!u.skipListen&&c.__initListen(),c}return n.prototype.postLoad=function(e){},n.prototype.render=function(e){},n.prototype.getProjectData=function(e){var t={},r=this.storageKey;return r&&(t[r]=e||this.getAll()),t},n.prototype.loadProjectData=function(e,t){e===void 0&&(e={}),t===void 0&&(t={});var r=t.all,i=t.onResult,s=t.reset,u=this.storageKey,c={action:"load"},f=r||this.all,h=e[u];if(typeof h=="string")try{h=JSON.parse(h)}catch{this.__logWarn("Data parsing failed",{input:h})}return s&&h&&f.reset(void 0,c),i?h&&i(h,c):h&&(0,Xe.isDef)(h.length)&&f.reset(h,c),h},n.prototype.clear=function(e){e===void 0&&(e={});var t=this.all;return t&&t.reset(void 0,e),this},n.prototype.getAll=function(){return hk([],this.all.models,!0)},n.prototype.getAllMap=function(){return this.getAll().reduce(function(e,t){return e[t.get(t.idAttribute)]=t,e},{})},n.prototype.__initListen=function(e){e===void 0&&(e={});var t=this,r=t.all,i=t.em,s=t.events;r&&i&&r.on("add",function(u,c,f){return i.trigger(s.add,u,f)}).on("remove",function(u,c,f){return i.trigger(s.remove,u,f)}).on("change",function(u,c){return i.trigger(s.update,u,u.changedAttributes(),c)}).on("all",this.__catchAllEvent,this),this.cls=[r].concat(e.collections||[]),(e.propagate||[]).forEach(function(u){var c=u.entity,f=u.event;c.on("all",function(h,v,m,_){var C=_||m,T=Ig({event:h},C);[i,r].map(function(k){return k.trigger(f,v,T)})})})},n.prototype.__remove=function(e,t){var r=this;t===void 0&&(t={});var i=this.em,s=(0,U.isString)(e)?this.get(e):e,u=function(){return s&&r.all.remove(s,t),s};return!t.silent&&(i==null||i.trigger(this.events.removeBefore,s,u,t)),!t.abort&&u()},n.prototype.__catchAllEvent=function(e,t,r,i){var s=this,u=s.em,c=s.events,f=i||r;u&&c.all&&u.trigger(c.all,{event:e,model:t,options:f}),this.__onAllEvent()},n.prototype.__appendTo=function(e){var t=this.config.appendTo;if(t){var r=(0,U.isElement)(t)?t:document.querySelector(t);if(!r)return this.__logWarn('"appendTo" element not found');r.appendChild(this.render(e))}},n.prototype.__onAllEvent=function(){},n.prototype._createId=function(e){e===void 0&&(e=16);var t=this.getAll(),r=t.length+e,i=this.getAllMap(),s;do s=(0,Xe.createId)(r);while(i[s]);return s},n.prototype.__listenAdd=function(e,t){var r=this;e.on("add",function(i,s,u){return r.em.trigger(t,i,u)})},n.prototype.__listenRemove=function(e,t){var r=this;e.on("remove",function(i,s,u){return r.em.trigger(t,i,u)})},n.prototype.__listenUpdate=function(e,t){var r=this;e.on("change",function(i,s){return r.em.trigger(t,i,i.changedAttributes(),s)})},n.prototype.__destroy=function(){var e;this.cls.forEach(function(t){t.stopListening(),t.reset()}),(e=this.view)===null||e===void 0||e.remove(),this.view=void 0},n}($C),vk={stylePrefix:"cv-",scripts:[],styles:[],customBadgeLabel:void 0,autoscrollLimit:50,extHl:!1,frameContent:"<!DOCTYPE html>",frameStyle:`
    body { background-color: #fff }
    * ::-webkit-scrollbar-track { background: rgba(0, 0, 0, 0.1) }
    * ::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.2) }
    * ::-webkit-scrollbar { width: 10px }
  `,notTextable:["button","a","input[type=checkbox]","input[type=radio]"],allowExternalDrop:!0};const gk=vk;var fs=vn(578),mk={default:"",devices:[{id:"desktop",name:"Desktop",width:""},{id:"tablet",name:"Tablet",width:"770px",widthMedia:"992px"},{id:"mobileLandscape",name:"Mobile landscape",width:"568px",widthMedia:"768px"},{id:"mobilePortrait",name:"Mobile portrait",width:"320px",widthMedia:"480px"}]};const yk=mk;var wk=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),_k=function(o){wk(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype.defaults=function(){return{name:"",width:null,height:"",widthMedia:null,priority:null}},n.prototype.initialize=function(){var e=this;this.get("widthMedia")===null&&this.set("widthMedia",this.get("width")),this.get("width")===null&&this.set("width",this.get("widthMedia")),!this.get("priority")&&this.set("priority",parseFloat(this.get("widthMedia"))||0);var t=["width","height","widthMedia"];t.forEach(function(r){return e.checkUnit(r)})},n.prototype.checkUnit=function(e){var t=this.get(e)||"",r=(parseFloat(t)||0).toString()===t.toString();r&&this.set(e,"".concat(t,"px"))},n.prototype.getName=function(){return this.get("name")||this.get("id")},n.prototype.getWidthMedia=function(){return this.get("widthMedia")||""},n}(gt.Kx);const KC=_k;var bk=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),GC=function(o){bk(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n}(gt.pM);const Zw=GC;GC.prototype.model=KC;var xk=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Ck=function(o,n){return Object.defineProperty?Object.defineProperty(o,"raw",{value:n}):o.raw=n,o},Sk=function(o){xk(n,o);function n(e){var t=o.call(this,e)||this;return t.config=e.config||{},t.em=t.config.em,t.ppfx=t.config.pStylePrefix||"",t.listenTo(t.em,"change:device",t.updateSelect),t}return n.prototype.template=function(e){var t=e.ppfx,r=e.label;return Vo(Qw||(Qw=Ck([`
      <div class="`,'device-label">',`</div>
      <div class="`,"field ",`select">
        <span id="`,`input-holder">
          <select class="`,`devices"></select>
        </span>
        <div class="`,`sel-arrow">
          <div class="`,`d-s-arrow"></div>
        </div>
      </div>
      <button style="display:none" class="`,`add-trasp" data-add-trasp>+</button>
    `],[`
      <div class="`,'device-label">',`</div>
      <div class="`,"field ",`select">
        <span id="`,`input-holder">
          <select class="`,`devices"></select>
        </span>
        <div class="`,`sel-arrow">
          <div class="`,`d-s-arrow"></div>
        </div>
      </div>
      <button style="display:none" class="`,`add-trasp" data-add-trasp>+</button>
    `])),t,r,t,t,t,t,t,t,t)},n.prototype.events=function(){return{change:"updateDevice","click [data-add-trasp]":"startAdd"}},n.prototype.startAdd=function(){},n.prototype.updateDevice=function(){var e=this.em;if(e){var t=this.devicesEl;e.set("device",t?t.val():"")}},n.prototype.updateSelect=function(){var e=this,t=e.em,r=e.devicesEl;if(t&&t.getDeviceModel&&r){var i=t.getDeviceModel();r.val(i?i.get("id"):"")}},n.prototype.getOptions=function(){var e=this,t=e.collection,r=e.em,i="";return t.forEach(function(s){var u=s.attributes,c=u.name,f=u.id,h=r&&r.t&&r.t("deviceManager.devices.".concat(f))||c;i+='<option value="'.concat(f||c,'">').concat(h,"</option>")}),i},n.prototype.render=function(){var e=this,t=e.em,r=e.ppfx,i=e.$el,s=e.el,u=t&&t.t&&t.t("deviceManager.device");return i.html(this.template({ppfx:r,label:u})),this.devicesEl=i.find(".".concat(r,"devices")),this.devicesEl.append(this.getOptions()),this.devicesEl.val(t.get("device")),s.className="".concat(r,"devices-c"),this},n}(gt.Ss);const Ok=Sk;var Qw,Tk=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),yc=function(){return yc=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},yc.apply(this,arguments)},YC="device",ih="".concat(YC,":"),Ek="".concat(ih,"select"),XC="".concat(ih,"update"),Pk="".concat(ih,"add"),qC="".concat(ih,"remove"),kk="".concat(qC,":before"),Ak="change:device",Mk={all:YC,select:Ek,update:XC,add:Pk,remove:qC,removeBefore:kk},Dk=function(o){Tk(n,o);function n(e){var t,r=o.call(this,e,"DeviceManager",new Zw,Mk,yk)||this;return r.Device=KC,r.Devices=Zw,r.storageKey="",r.devices=r.all,(t=r.config.devices)===null||t===void 0||t.forEach(function(i){return r.add(i,{silent:!0})}),r.select(r.config.default||r.devices.at(0)),e.on(Ak,r._onSelect,r),r}return n.prototype._onSelect=function(e,t,r){var i=this,s=i.em,u=i.events,c=e.previous("device"),f=this.get(t),h=u.select;s.trigger(h,f,this.get(c)),this.__catchAllEvent(h,f,r)},n.prototype.add=function(e,t){t===void 0&&(t={});var r,i=t;if((0,U.isString)(e)){var s=t;i=arguments[2]||{},r=yc(yc({},i),{id:e,name:i.name||e,width:s})}else r=e;return r.id||(r.id=r.name||this._createId()),this.devices.add(r,i)},n.prototype.get=function(e){var t=this.getAll().filter(function(r){return r.get("name")===e})[0];return t||this.devices.get(e)||null},n.prototype.remove=function(e,t){return t===void 0&&(t={}),this.__remove(e,t)},n.prototype.getDevices=function(){return this.devices.models},n.prototype.select=function(e,t){t===void 0&&(t={});var r=(0,U.isString)(e)?this.get(e):e;return r&&this.em.set("device",r.get("id"),t),this},n.prototype.getSelected=function(){return this.get(this.em.get("device"))},n.prototype.getAll=function(){return this.devices},n.prototype.render=function(){var e,t=this.em;return(e=this.view)===null||e===void 0||e.remove(),this.view=new Ok({collection:this.devices,config:yc({em:t},this.config)}),this.view.render().el},n.prototype.destroy=function(){this.__destroy()},n}(vs);const Lk=Dk;var Ng;(function(o){o.add="page:add",o.addBefore="page:add:before",o.remove="page:remove",o.removeBefore="page:remove:before",o.select="page:select",o.selectBefore="page:select:before",o.update="page:update",o.all="page"})(Ng||(Ng={}));const Rg=Ng;var jk=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Ik=function(o){jk(n,o);function n(e,t,r){return o.call(this,t,{module:e,modelConstructor:r})||this}return n.prototype.add=function(e,t){var r=this,i,s=(0,U.isArray)(e)?e:(0,U.isUndefined)(e)?void 0:[e];return s=(i=s==null?void 0:s.map(function(u){return u instanceof r.newModel?u:new r.newModel(r.module,u)}))!==null&&i!==void 0?i:[void 0],o.prototype.add.call(this,(0,U.isArray)(e)?s:s[0],t)},n.prototype.preinitialize=function(e,t){this.newModel=t.modelConstructor,this.module=t.module},n}(gt.pM);const ah=Ik;var Nk=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Fg=function(){return Fg=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},Fg.apply(this,arguments)},e_=function(o,n,e){if(e||arguments.length===2)for(var t=0,r=n.length,i;t<r;t++)(i||!(t in n))&&(i||(i=Array.prototype.slice.call(n,0,t)),i[t]=n[t]);return o.concat(i||Array.prototype.slice.call(n))},t_="__aw",n_="__ah",r_=function(o,n){var e,t=o.get(n),r=(e=o.view)===null||e===void 0?void 0:e.el[n==="width"?"offsetWidth":"offsetHeight"];return(0,U.isNumber)(t)?t:(0,U.isString)(t)&&t.endsWith("px")?parseFloat(t):r||0},Rk=function(o){Nk(n,o);function n(e,t){var r=o.call(this,e,t)||this,i=r.em,s=r.attributes,u=s.styles,c=s.component,f=i.Components,h=f.getConfig(),v=i.Css.getAll(),m={},_={em:i,config:h,frame:r,idMap:m};if(!(0,Xe.isComponent)(c)){var C=(0,Xe.isObject)(c)?c:{components:c};!C.type&&(C.type="wrapper");var T=f.getType("wrapper").model;r.set("component",new T(C,_))}if(!u)r.set("styles",v);else if(!(0,Xe.isObject)(u)){var k=u;(0,U.keys)(m).length&&(k=(0,U.isString)(k)?i.Parser.parseCss(k):k,i.Css.checkId(k,{idMap:m})),v.add(k),r.set("styles",v)}return!t.width&&r.set(t_,1),!t.height&&r.set(n_,1),!r.id&&r.set("id",(0,Xe.createId)()),r}return n.prototype.defaults=function(){return{x:0,y:0,changesCount:0,attributes:{},width:null,height:null,head:[],component:"",styles:"",refFrame:null,_undo:!0,_undoexc:["changesCount"]}},Object.defineProperty(n.prototype,"width",{get:function(){return r_(this,"width")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return r_(this,"height")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"head",{get:function(){return this.get("head")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"refFrame",{get:function(){return this.get("refFrame")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"root",{get:function(){var e=this.refFrame;return(e==null?void 0:e.getComponent())||this.getComponent()},enumerable:!1,configurable:!0}),n.prototype.initRefs=function(){var e=this.refFrame;if((0,U.isString)(e)){var t=this.module.framesById[e];t&&this.set({refFrame:t},{silent:!0})}},n.prototype.getBoxRect=function(){var e=this.attributes,t=e.x,r=e.y,i=this,s=i.width,u=i.height;return{x:t,y:r,width:s,height:u}},n.prototype.onRemove=function(){!this.refFrame&&this.getComponent().remove({root:1})},n.prototype.changesUp=function(e){e===void 0&&(e={}),!(e.temporary||e.noCount||e.avoidStore)&&this.set("changesCount",this.get("changesCount")+1)},n.prototype.getComponent=function(){return this.get("component")},n.prototype.getStyles=function(){return this.get("styles")},n.prototype.disable=function(){this.trigger("disable")},n.prototype.remove=function(){var e;(e=this.view)===null||e===void 0||e.remove(),this.view=void 0;var t=this.collection;return t&&t.remove(this)},n.prototype.getHead=function(){return e_([],this.head,!0)},n.prototype.setHead=function(e){return this.set("head",e_([],e,!0))},n.prototype.addHeadItem=function(e){this.head.push(e)},n.prototype.getHeadByAttr=function(e,t,r){return this.head.filter(function(i){return i.attributes&&i.attributes[e]==t&&(!r||r===i.tag)})[0]},n.prototype.removeHeadByAttr=function(e,t,r){var i=this.getHeadByAttr(e,t,r),s=this.head.indexOf(i);s>=0&&this.head.splice(s,1)},n.prototype.addLink=function(e){var t="link";!this.getHeadByAttr("href",e,t)&&this.addHeadItem({tag:t,attributes:{href:e,rel:"stylesheet"}})},n.prototype.removeLink=function(e){this.removeHeadByAttr("href",e,"link")},n.prototype.addScript=function(e){var t="script";!this.getHeadByAttr("src",e,t)&&this.addHeadItem({tag:t,attributes:{src:e}})},n.prototype.removeScript=function(e){this.removeHeadByAttr("src",e,"script")},n.prototype.getPage=function(){var e;return(e=this.collection)===null||e===void 0?void 0:e.page},n.prototype._emitUpdated=function(e){e===void 0&&(e={}),this.em.trigger("frame:updated",Fg({frame:this},e))},n.prototype.hasAutoHeight=function(){var e=this.attributes.height;return!!(e==="auto"||this.config.infiniteCanvas)},n.prototype.toJSON=function(e){e===void 0&&(e={});var t=fs.A.prototype.toJSON.call(this,e),r=(0,U.result)(this,"defaults");return e.fromUndo&&delete t.component,delete t.styles,delete t.changesCount,t[t_]&&delete t.width,t[n_]&&delete t.height,t.refFrame&&(t.refFrame=t.refFrame.id,delete t.component),(0,U.forEach)(t,function(i,s){s.indexOf("_")===0&&delete t[s]}),(0,U.forEach)(r,function(i,s){t[s]===i&&delete t[s]}),(0,U.forEach)(["attributes","head"],function(i){(0,U.isEmpty)(t[i])&&delete t[i]}),t},n}(fs.A);const JC=Rk;var Fk=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Vk=function(o){Fk(n,o);function n(e,t){t===void 0&&(t=[]);var r=o.call(this,e,t,JC)||this;return r.loadedItems=0,r.itemsToLoad=0,(0,U.bindAll)(r,"itemLoaded"),r.on("add",r.onAdd),r.on("reset",r.onReset),r.on("remove",r.onRemove),r.forEach(function(i){return r.onAdd(i)}),r}return n.prototype.onAdd=function(e){this.module.framesById[e.id]=e},n.prototype.onReset=function(e,t){var r=this,i=(t==null?void 0:t.previousModels)||[];i.map(function(s){return r.onRemove(s)})},n.prototype.onRemove=function(e){e.onRemove(),delete this.module.framesById[e.id]},n.prototype.initRefs=function(){this.forEach(function(e){return e.initRefs()})},n.prototype.itemLoaded=function(){this.loadedItems++,this.loadedItems>=this.itemsToLoad&&(this.trigger("loaded:all"),this.listenToLoadItems(!1))},n.prototype.listenToLoad=function(){this.loadedItems=0,this.itemsToLoad=this.length,this.listenToLoadItems(!0)},n.prototype.listenToLoadItems=function(e){var t=this;this.forEach(function(r){return r[e?"on":"off"]("loaded",t.itemLoaded)})},n}(ah);const ZC=Vk;var zk=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Hk=function(o){zk(n,o);function n(e){var t=this,r=e.em,i=e.config,s=i.scripts,u=i.styles;return t=o.call(this,e,{scripts:s,styles:u})||this,t.set("frames",new ZC(e)),t.on("change:zoom",t.onZoomChange),t.on("change:x change:y",t.onCoordsChange),t.on("change:pointer change:pointerScreen",t.onPointerChange),t.listenTo(r,"change:device ".concat(XC),t.updateDevice),t.listenTo(r,Rg.select,t._pageUpdated),t}return n.prototype.defaults=function(){return{frame:"",frames:[],rulers:!1,zoom:100,x:0,y:0,scripts:[],styles:[],pointer:gt.lK,pointerScreen:gt.lK}},Object.defineProperty(n.prototype,"frames",{get:function(){return this.get("frames")},enumerable:!1,configurable:!0}),n.prototype.init=function(){var e=this.em,t=e.Pages._initPage();this.set("frames",t.getFrames()),this.updateDevice({frame:t.getMainFrame()})},n.prototype._pageUpdated=function(e,t){var r=this.em;r.setSelected(),r.get("readyCanvas")&&r.stopDefault(),t==null||t.getFrames().map(function(i){return i.disable()}),this.set("frames",e.getFrames()),this.updateDevice({frame:e.getMainFrame()})},n.prototype.updateDevice=function(e){e===void 0&&(e={});var t=this.em,r=t.getDeviceModel(),i=e.frame||t.getCurrentFrameModel();if(i&&r){var s=r.attributes,u=s.width,c=s.height;i.set({width:u,height:c},{noUndo:1})}},n.prototype.onZoomChange=function(){var e=this,t=e.em,r=e.module,i=this.get("zoom");i<1&&this.set("zoom",1),t.trigger(r.events.zoom)},n.prototype.onCoordsChange=function(){var e=this,t=e.em,r=e.module;t.trigger(r.events.coords)},n.prototype.onPointerChange=function(){var e=this,t=e.em,r=e.module;t.trigger(r.events.pointer)},n.prototype.getPointerCoords=function(e){e===void 0&&(e=gt.x2.World);var t=this.attributes,r=t.pointer,i=t.pointerScreen;return e===gt.x2.World?r:i},n}(fs.A);const Uk=Hk;var mi=vn(683),no=vn(249),Bk=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Wk=function(o){Bk(n,o);function n(e,t){t===void 0&&(t=[]);var r=o.call(this,e,t,mi.A)||this;r.on("add",r.onAdd),r.on("change",r.onChange),r.on("remove",r.onRemove);var i=r.em;r.refreshDbn=(0,U.debounce)(function(){return r.refresh()},0);var s="component:resize styleable:change component:input ".concat(no.I.update," frame:updated undo redo");return r.listenTo(i,s,function(){return r.refreshDbn()}),r}return Object.defineProperty(n.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"events",{get:function(){return this.module.events},enumerable:!1,configurable:!0}),n.prototype.refresh=function(){var e=this,t=e.em,r=e.events;t.trigger(r.spot)},n.prototype.onAdd=function(e){this.__trgEvent(this.events.spotAdd,{spot:e})},n.prototype.onChange=function(e){this.__trgEvent(this.events.spotUpdate,{spot:e})},n.prototype.onRemove=function(e){this.__trgEvent(this.events.spotRemove,{spot:e})},n.prototype.__trgEvent=function(e,t){var r=this.module,i=r.em;i.trigger(e,t),this.refreshDbn()},n}(ah);const $k=Wk;var zd;(function(o){o.dragEnter="canvas:dragenter",o.dragOver="canvas:dragover",o.dragEnd="canvas:dragend",o.dragData="canvas:dragdata",o.drop="canvas:drop",o.spot="canvas:spot",o.spotAdd="canvas:spot:add",o.spotUpdate="canvas:spot:update",o.spotRemove="canvas:spot:remove",o.coords="canvas:coords",o.zoom="canvas:zoom",o.pointer="canvas:pointer",o.refresh="canvas:refresh",o.frameLoad="canvas:frame:load",o.frameLoadHead="canvas:frame:load:head",o.frameLoadBody="canvas:frame:load:body"})(zd||(zd={}));const dd=zd;var Kk=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Gk=function(o){Kk(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"pfx",{get:function(){return this.ppfx+this.config.stylePrefix||""},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ppfx",{get:function(){return this.em.config.stylePrefix||""},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"module",{get:function(){var e,t;return(t=(e=this.model)===null||e===void 0?void 0:e.module)!==null&&t!==void 0?t:this.collection.module},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"config",{get:function(){return this.module.config},enumerable:!1,configurable:!0}),n.prototype.preinitialize=function(e){this.className=""},n}(gt.Ss);const bi=Gk;var wt=vn(926),Yk=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Xk=function(o){Yk(n,o);function n(e,t){e===void 0&&(e={}),t===void 0&&(t=!1);var r=o.call(this,e)||this;return r.itemsView="",r.itemType="type",r.reuseView=!1,r.viewCollection=[],t&&r.listenTo(r.collection,"add",r.addTo),r}return n.prototype.addTo=function(e){this.add(e)},n.prototype.itemViewNotFound=function(e){},n.prototype.add=function(e,t){var r=this,i=r.reuseView,s=r.viewCollection,u=t||null,c=e.get(this.itemType),f;e.view&&i?f=e.view:f=this.renderView(e,c),s.push(f);var h=f.render().el;u?u.appendChild(h):this.$el.append(h)},n.prototype.render=function(){var e=this,t=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each(function(r){return e.add(r,t)}),this.$el.append(t),this.onRender(),this},n.prototype.onRender=function(){},n.prototype.onRemoveBefore=function(e,t){},n.prototype.onRemove=function(e,t){},n.prototype.remove=function(e){e===void 0&&(e={});var t=this.viewCollection;return this.onRemoveBefore(t,e),this.clearItems(),gt.Ss.prototype.remove.apply(this,e),this.onRemove(t,e),this},n.prototype.clearItems=function(){this.viewCollection},n}(bi);const qk=Xk;var Jk=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Zk=function(o){Jk(n,o);function n(e){e===void 0&&(e={});var t=o.call(this,e)||this;t.config=e.config||{};var r=t.model;return t.listenTo(r,"change",t.render),t.listenTo(r,"destroy remove",t.remove),t.listenTo(r.get("selectors"),"change",t.render),t}return n.prototype.tagName=function(){return"style"},n.prototype.render=function(){var e=this,t=e.model,r=e.el,i=t.get("important");return r.innerHTML=t.toCSS({important:i}),this},n}(gt.Ss);const QC=Zk;var Qk=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),eA=function(o){Qk(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype._createElement=function(){return document.createTextNode("")},n.prototype.render=function(){var e=this.model,t=e.get("important");return this.el.textContent=e.getDeclaration({important:t}),this},n}(QC);const tA=eA;var nA=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),lv=function(o,n){return"".concat(o).concat(n?"-".concat(parseFloat(n)):"")},rA=function(o){nA(n,o);function n(e){var t=o.call(this,e)||this;(0,U.bindAll)(t,"sortRules");var r=e.config||{};t.atRules={},t.config=r,t.em=r.em,t.pfx=r.stylePrefix||"",t.className=t.pfx+"rules";var i=t.collection;return t.listenTo(i,"add",t.addTo),t.listenTo(i,"reset",t.render),t}return n.prototype.addTo=function(e){this.addToCollection(e)},n.prototype.addToCollection=function(e,t){if(this.renderStarted){var r=t||null,i=this.config,s={model:e,config:i},u,c;if(e.get("atRuleType")==="keyframes"){var f=e.getAtRule(),h=this.atRules[f];if(!h){var v=document.createElement("style");h=document.createTextNode(""),v.appendChild(document.createTextNode("".concat(f,"{"))),v.appendChild(h),v.appendChild(document.createTextNode("}")),this.atRules[f]=h,u=v}c=new tA(s),h.appendData(c.render().el.textContent)}else c=new QC(s),u=c.render().el;var m=this.className,_=e.get("mediaText"),C=lv(m),T=C;if(_&&(T=lv(m,this.getMediaWidth(_))),u){var k=r||this.el,P=void 0;try{P=k.querySelector("#".concat(T))}catch{}P||(P=k.querySelector("#".concat(C))),P==null||P.appendChild(u)}return u}},n.prototype.getMediaWidth=function(e){return e&&e.replace("(".concat(this.em.getConfig().mediaCondition,": "),"").replace(")","")},n.prototype.sortRules=function(e,t){var r=this.em,i=(r.getConfig().mediaCondition||"").indexOf("min-width")!==-1;if(!i)return 0;var s=i?e:t,u=i?t:e;return s-u},n.prototype.render=function(){var e=this;this.renderStarted=!0,this.atRules={};var t=this,r=t.em,i=t.$el,s=t.collection,u=this.className,c=document.createDocumentFragment();i.empty();var f=r.Devices.getAll().pluck("priority").sort(this.sortRules);return f.every(function(h){return h})&&f.unshift(0),f.forEach(function(h){return c.appendChild((0,wt.a_)("div",{id:lv(u,h)}))}),s.each(function(h){return e.addToCollection(h,c)}),i.append(c),i.attr("class",u),this},n}(gt.Ss);const eS=rA;var tS="text/html",oA=tS;const iA=function(o,n){n===void 0&&(n={});var e=new DOMParser,t=n.htmlType||oA,r=t===tS,i=r?o:"<div>".concat(o,"</div>"),s=e.parseFromString(i,t),u;if(r){if(n.asDocument)return s;var c=s.head,f=s.body,h=c.querySelectorAll("script");(0,U.each)(h,function(m){return f.appendChild(m)});var v=[];(0,U.each)(c.children,function(m){return v.push(m)}),(0,U.each)(v,function(m,_){return f.insertBefore(m,f.children[_])}),u=f}else u=s.firstChild;return u};var da=function(){return da=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},da.apply(this,arguments)},aA="data-gjs-",o_="parse:html",sA=function(o,n){return n===void 0&&(n={}),{compTypes:[],modelAttrStart:aA,getPropAttribute:function(e,t){var r=e.replace(this.modelAttrStart,""),i=(t==null?void 0:t.length)||0,s=t==null?void 0:t.substring(0,1),u=t==null?void 0:t.substring(i-1),c=t==="true"?!0:t==="false"?!1:t;try{c=s=="{"&&u=="}"||s=="["&&u=="]"?JSON.parse(c):c}catch{}return{name:r,value:c}},splitPropsFromAttr:function(e){var t=this;e===void 0&&(e={});var r={},i={};return(0,U.each)(e,function(s,u){if(u.indexOf(t.modelAttrStart)===0){var c=t.getPropAttribute(u,s);r[c.name]=c.value}else i[u]=s}),{props:r,attrs:i}},parseStyle:function(e){for(var t={};e.indexOf("/*")>=0;){var r=e.indexOf("/*"),i=e.indexOf("*/")+2;e=e.replace(e.slice(r,i),"")}for(var s=e.split(";"),u=0,c=s.length;u<c;u++){var f=s[u].trim();if(f){var h=f.split(":"),v=h[0].trim(),m=h.slice(1).join(":").trim();t[v]?((0,U.isArray)(t[v])||(t[v]=[t[v]]),t[v].push(m)):t[v]=m}}return t},parseClass:function(e){for(var t=[],r=e.split(" "),i=0,s=r.length;i<s;i++){var u=r[i].trim();u&&t.push(u)}return t},parseNodeAttr:function(e,t){for(var r=t||{},i=e.attributes||[],s=i.length,u=0;u<s;u++){var c=i[u].nodeName,f=i[u].nodeValue;if(c=="style")r.style=this.parseStyle(f);else if(c=="class")r.classes=this.parseClass(f);else{if(c=="contenteditable")continue;if(c.indexOf(this.modelAttrStart)===0){var h=this.getPropAttribute(c,f);r[h.name]=h.value}else f===""&&e[c]===!0&&(f=!0),r.attributes||(r.attributes={}),r.attributes[c]=f}}return r},detectNode:function(e,t){var r;t===void 0&&(t={});var i=this.compTypes,s={};if(i){var u=(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"".concat(this.modelAttrStart,"type"));if(u)s={type:u};else for(var c=0;c<i.length;c++){var f=i[c],h=f.model.isComponent(e,t);if(h){typeof h!="object"&&(h={type:f.id}),s=h;break}}}return s},parseNode:function(e,t){var r;t===void 0&&(t={});var i=((r=e.content)===null||r===void 0?void 0:r.childNodes)||e.childNodes,s=i.length,u=this.detectNode(e,t);if(!u.tagName){var c=e.tagName||"",f=e.namespaceURI||"";u.tagName=c&&f==="http://www.w3.org/1999/xhtml"?c.toLowerCase():c}if(u=this.parseNodeAttr(e,u),!s&&"".concat(e.outerHTML).slice(-2)==="/>"&&(u.void=!0),s&&!u.components&&!t.skipChildren){var h=i[0];s===1&&h.nodeType===3?(!u.type&&(u.type="text"),u.components={type:"textnode",content:h.nodeValue}):u.components=this.parseNodes(e,da(da({},t),{inSvg:t.inSvg||u.type==="svg"}))}var v=u.components;if(!u.type&&(v!=null&&v.length)){for(var m=n.textTypes,_=m===void 0?[]:m,C=n.textTags,T=C===void 0?[]:C,k=!0,P=!1,L=0;L<v.length;L++){var D=v[L],V=D.type;if(!_.includes(V)&&!T.includes(D.tagName)){k=!1;break}V==="textnode"&&(P=!0)}k&&P&&(u.type="text")}return u},parseNodes:function(e,t){var r;t===void 0&&(t={});for(var i=[],s=((r=e.content)===null||r===void 0?void 0:r.childNodes)||e.childNodes,u=s.length,c=0;c<u;c++){var f=s[c],h=i[i.length-1],v=this.parseNode(f,t);if(v.type==="textnode"){if((h==null?void 0:h.type)==="textnode"){h.content+=v.content;continue}if(!t.keepEmptyTextNodes){var m=f.nodeValue||"",_=c===0||c===u-1,C=m.includes(`
`);if(m!=" "&&!m.trim()&&(_||C))continue}}!v.tagName&&(0,U.isUndefined)(v.content)||i.push(v)}return i},parse:function(e,t,r){var i,s,u;r===void 0&&(r={});var c=(o==null?void 0:o.get("Config"))||{},f={html:[]},h=da(da({},n),r),v=da(da(da({},n.optionsHtml),{htmlType:((i=n.optionsHtml)===null||i===void 0?void 0:i.htmlType)||n.htmlType}),r),m=v.preParser,_=v.asDocument,C=(0,U.isFunction)(m)?m(e,{editor:o==null?void 0:o.getEditor()}):e,T=(0,U.isFunction)(h.parserHtml)?h.parserHtml(C,v):iA(C,v),k=T,P=T;_&&(k=P.documentElement,f.doctype=(0,wt.LJ)(P.doctype));var L=k.querySelectorAll("script"),D=L.length,V=(0,U.isUndefined)(c.allowScripts)?v.allowScripts:c.allowScripts;if(!V)for(;D--;)(s=L[D].parentNode)===null||s===void 0||s.removeChild(L[D]);if((!v.allowUnsafeAttr||!v.allowUnsafeAttrValue)&&this.__sanitizeNode(k,v),t){for(var re=k.querySelectorAll("style"),_e=re.length,Q="";_e--;)Q=re[_e].innerHTML+Q,(u=re[_e].parentNode)===null||u===void 0||u.removeChild(re[_e]);Q&&(f.css=t.parse(Q))}o==null||o.trigger("".concat(o_,":root"),{input:C,root:k});var pe=[];if(_)f.head=this.parseNode(P.head,h),f.root=this.parseNodeAttr(k),pe=this.parseNode(P.body,h);else{var ne=this.parseNodes(k,h);pe=ne.length===1&&!h.returnArray?ne[0]:ne}return f.html=pe,o==null||o.trigger(o_,{input:C,output:f}),f},__sanitizeNode:function(e,t){var r=this,i=e.attributes||[],s=e.childNodes||[],u=[];(0,U.each)(i,function(c){var f=c.nodeName||"",h=c.nodeValue||"";!t.allowUnsafeAttr&&f.startsWith("on")&&u.push(f),!t.allowUnsafeAttrValue&&h.startsWith("javascript:")&&u.push(f)}),u.map(function(c){return e.removeAttribute(c)}),(0,U.each)(s,function(c){return r.__sanitizeNode(c,t)})}}};const nS=sA;var lA=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Is=function(){return Is=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},Is.apply(this,arguments)},uA=nS(),Vg=function(o){return(0,U.isArray)(o)?o[o.length-1]:o},cA=function(o){lA(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype.parseStyle=function(e){return uA.parseStyle(e)},n.prototype.extendStyle=function(e){return Is(Is({},this.getStyle()),e)},n.prototype.getStyle=function(e){var t=this.get("style")||{},r=Is({},t);return e&&(0,U.isString)(e)?r[e]:r},n.prototype.setStyle=function(e,t){var r=this;e===void 0&&(e={}),t===void 0&&(t={}),(0,U.isString)(e)&&(e=this.parseStyle(e));var i=this.getStyle(t);t.partial||t.avoidStore?(t.avoidStore=!0,e.__p=!0):delete e.__p;var s=Is({},e),u=Is({},s);(0,U.keys)(u).forEach(function(f){u[f]===""&&delete u[f]}),this.set("style",u,t);var c=(0,Xe.shallowDiff)(i,s);return delete c.__p,(0,U.keys)(c).forEach(function(f){var h=r.em;t.noEvent||(r.trigger("change:style:".concat(f)),h&&(h.trigger("styleable:change",r,f,t),h.trigger("styleable:change:".concat(f),r,f,t)))}),s},n.prototype.addStyle=function(e,t,r){var i;t===void 0&&(t=""),r===void 0&&(r={}),typeof e=="string"?e=(i={},i[e]=t,i):r=t||{},r.addStyle=e,e=this.extendStyle(e),this.setStyle(e,r)},n.prototype.removeStyle=function(e){var t=this.getStyle();delete t[e],this.setStyle(t)},n.prototype.styleToString=function(e){e===void 0&&(e={});var t=[],r=this.getStyle(e),i=e.important,s=function(c){var f=(0,U.isArray)(i)?i.indexOf(c)>=0:i,h=c.substring(0,2),v=h==="__";if(v)return"continue";var m=r[c],_=(0,U.isArray)(m)?m:[m];_.forEach(function(C){var T="".concat(C).concat(f?" !important":"");T&&t.push("".concat(c,":").concat(T,";"))})};for(var u in r)s(u);return t.join("")},n.prototype.getSelectors=function(){return this.get("selectors")||this.get("classes")},n.prototype.getSelectorsString=function(e){return this.selectorsToString?this.selectorsToString(e):this.getSelectors().getFullString()},n}(gt.Kx);const rS=cA;var No=function(){return No=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},No.apply(this,arguments)},oS=function(o,n,e){if(e||arguments.length===2)for(var t=0,r=n.length,i;t<r;t++)(i||!(t in n))&&(i||(i=Array.prototype.slice.call(n,0,t)),i[t]=n[t]);return o.concat(i||Array.prototype.slice.call(n))},Hd=function(o){return(0,U.isArray)(o.get(Ro))},Ud=function(o){return!!o.get(pi)},hu=function(o){return!!(Hd(o)||Ud(o))},Qs=function(o){var n=o.parent();return hu(o)&&(!n||!hu(n))},Ju=function(o){o.__symbReady||(o.on("change",o.__upSymbProps),o.__symbReady=!0)},el=function(o){var n=o.get(pi);if(n&&(0,U.isString)(n)){var e=o.__getAllById()[n];e?(n=e,o.set(pi,e)):n=0}return n||void 0},ni=function(o){var n=o==null?void 0:o.get(Ro);return n&&(0,U.isArray)(n)&&(n.forEach(function(e,t){e&&(0,U.isString)(e)&&(n[t]=o.__getAllById()[e])}),n=n.filter(function(e){return e&&!(0,U.isString)(e)})),n||void 0},vu=function(o,n){n===void 0&&(n="");var e=o==null?void 0:o.get(_c),t=n.split(":")[0],r=n!==t?[n,t]:[n];return e===!0||(0,U.isArray)(e)&&r.some(function(i){return e.indexOf(i)>=0})},Bs=function(o,n){n===void 0&&(n={});var e=[],t=n.changed;if(n.fromInstance||n.noPropagate||n.fromUndo||t&&vu(o,t))return e;var r=ni(o)||[],i=el(o),s=i?oS([i],ni(i)||[],!0):r;return e=s.filter(function(u){return u!==o}).filter(function(u){return!(t&&vu(u,t))}),e},i_=function(o,n){for(var e=o,t=o.parent(n);t&&hu(t);)e=t,t=t.parent(n);return e},ny=function(o,n){n===void 0&&(n={});var e=el(o),t=e&&ni(e);!n.skipRefs&&t&&e.set(Ro,t.filter(function(r){return r!==o})),o.set(pi,0),o.components().forEach(function(r){return ny(r,n)})},wc=function(o,n,e,t){t===void 0&&(t={});var r=el(o),i=ni(o);!r&&!i||o.em.log(n,{model:o,toUp:e,context:"symbols",opts:t})},fA=function(o,n){n===void 0&&(n={});var e=o.changedAttributes()||{},t=e.attributes||{};if(delete e.status,delete e.open,delete e[Ro],delete e[pi],delete e[_c],delete e.attributes,delete t.id,(0,Xe.isEmptyObj)(t)||(e.attributes=t),!(0,Xe.isEmptyObj)(e)){var r=Bs(o,n);(0,U.keys)(e).map(function(i){vu(o,i)&&delete e[i]}),wc(o,"props",r,{opts:n,changed:e}),r.forEach(function(i){var s=No({},e);(0,U.keys)(s).map(function(u){vu(i,u)&&delete s[u]}),i.set(s,No({fromInstance:o},n))})}},dA=function(o,n){n===void 0&&(n={});var e=Bs(o,n);wc(o,"classes",e,{opts:n}),e.forEach(function(t){t.set("classes",o.get("classes"),{fromInstance:o})}),o.__changesUp(n)},iS=function(o,n,e,t){var r=t||e||{},i=r.fromInstance,s=r.fromUndo,u={fromInstance:i,fromUndo:s},c=n.opt.temporary;if(t)if(t.add){var _=[],C=!!ni(o),h=Bs(o,No(No({},u),{changed:"components:add"}));if(h.length){var T=el(n);_=ni(T||n)||[],_=oS([],_,!0),_.push(T||n)}!c&&wc(o,"add",h,{opts:t,addedInstances:_.map(function(pe){return pe.cid}),added:n.cid}),h.forEach(function(pe){var ne=i_(pe),me=_.filter(function(W){var te=i_(W,{prev:1});return ne&&te&&te===ne})[0],Y=me||n.clone({symbol:!0,symbolInv:C});pe.append(Y,No({fromInstance:o},t))})}else{var k=el(n);if(k&&!t.temporary&&k.set(Ro,ni(k).filter(function(Q){return Q!==n})),!Qs(n)&&!t.skipRefsUp){var P="components:remove",L=t.index,D=n.parent(),V=No({fromInstance:n},t),re=Qs(n),_e=function(pe){var ne=pe.parent();ne&&!vu(ne,P)&&pe.remove(V)},h=vu(D,P)?[]:Bs(n,u);re&&(h=D&&Bs(D,No(No({},u),{changed:P})),_e=function(pe){var ne=pe.components().at(L);ne&&ne.remove(No({fromInstance:D},V))}),!c&&wc(o,"remove",h,{opts:t,removed:n.cid,isSymbNested:re}),h.forEach(_e)}}else{var f=n,h=Bs(o,No(No({},u),{changed:"components:reset"})),v=f.models,m=new Set;wc(o,"reset",h,{components:v}),h.forEach(function(Q){var pe=Q.components(),ne=v.map(function(me,Y){return!hu(me)||m.has(me)?(m.add(me),me.clone({symbol:!0})):pe.at(Y)});pe.reset(ne,No({fromInstance:o},e))})}o.__changesUp(r)},pA=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),ei=function(){return ei=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},ei.apply(this,arguments)},pd=function(o,n){var e={};for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&n.indexOf(t)<0&&(e[t]=o[t]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(o);r<t.length;r++)n.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(o,t[r])&&(e[t[r]]=o[t[r]]);return e},a_=function(o,n,e){if(e||arguments.length===2)for(var t=0,r=n.length,i;t<r;t++)(i||!(t in n))&&(i||(i=Array.prototype.slice.call(n,0,t)),i[t]=n[t]);return o.concat(i||Array.prototype.slice.call(n))},$l=function(o,n){if(n===void 0&&(n=[]),!o)return[];var e=(0,U.isArray)(o)||(0,U.isFunction)(o.map)?o:[o];return e.map(function(t){n.push(t.getId()),$l(t.components().models,n)}),n},aS=function(o,n,e){n===void 0&&(n={}),e===void 0&&(e={}),e.visitedCmps=e.visitedCmps||{};var t=e.visitedCmps,r=(0,U.isArray)(o)?o:[o];return r.map(function(i){var s=i.attributes,u=s===void 0?{}:s,c=i.components,f=i.tagName,h=i.style,v=u.id;u.draggable;var m=pd(u,["id","draggable"]),_=i;if(v){if(t[v])t[v].push(_),v=oo.getNewId(n),_.attributes.id=v;else if(t[v]=[],n[v]){_=n[v];var C=_;f&&C.set({tagName:f},ei(ei({},e),{silent:!0})),(0,U.keys)(m).length&&C.addAttributes(m,ei({},e)),(0,U.keys)(h).length&&C.addStyle(h,e)}}if(c){var T=aS(c,n);if((0,U.isFunction)(_.components)){var k=_.components();k.length>0&&k.reset(T,e)}else _.components=T}return _})},hA=function(o){pA(n,o);function n(e,t){var r=o.call(this,e,t)||this;r.opt=t,r.listenTo(r,"add",r.onAdd),r.listenTo(r,"remove",r.removeChildren),r.listenTo(r,"reset",r.resetChildren);var i=t.em,s=t.config;return r.config=s,r.em=i,r.domc=t.domc||(i==null?void 0:i.Components),r}return Object.defineProperty(n.prototype,"events",{get:function(){var e;return(e=this.domc)===null||e===void 0?void 0:e.events},enumerable:!1,configurable:!0}),n.prototype.resetChildren=function(e,t){var r=this;t===void 0&&(t={});var i=this,s=t.previousModels||[],u=s.filter(function(h){return!e.get(h.cid)}),c=$l(e),f=$l(s).filter(function(h){return c.indexOf(h)>=0});t.keepIds=(t.keepIds||[]).concat(f),u.forEach(function(h){return r.removeChildren(h,i,t)}),e.each(function(h){return r.onAdd(h)})},n.prototype.resetFromString=function(e,t){var r,i;e===void 0&&(e=""),t===void 0&&(t={}),t.keepIds=$l(this);var s=this,u=s.domc,c=s.em,f=s.parent,h=c==null?void 0:c.Css,v=(u==null?void 0:u.allById())||{},m=this.parseString(e,t),_=aS(m,v,t),C=t.visitedCmps,T=C===void 0?{}:C;Object.keys(T).forEach(function(k){var P=T[k];if(P.length){var L=(h==null?void 0:h.getRules("#".concat(k)))||[];L.length&&P.forEach(function(D){L.forEach(function(V){var re=V.clone();re.set("selectors",["#".concat(D.attributes.id)]),h.getAll().add(re)})})}}),this.reset(_,t),c==null||c.trigger("component:content",f,t,e),(i=(r=f).__checkInnerChilds)===null||i===void 0||i.call(r)},n.prototype.removeChildren=function(e,t,r){var i=this;if(r===void 0&&(r={}),!!e){var s=this,u=s.domc,c=s.em,f=r.temporary||r.fromUndo;if(e.prevColl=this,!f){var h=e.getId(),v=c.Selectors.getAll(),m=c.Css.getAll(),_=(r.keepIds||[]).indexOf(h)<0,C=u?u.allById():{};delete C[h];var T=_?m.remove(m.filter(function(L){return L.getSelectors().getFullString()==="#".concat(h)}),r):[];v.remove(T.map(function(L){return L.getSelectors().at(0)})),e.opt.temporary||(c.Commands.run("core:component-style-clear",{target:e}),e.removed(),e.trigger("removed"),c.trigger(no.I.remove,e),u&&Ud(e)&&Qs(e)&&u.symbols.__trgEvent(u.events.symbolInstanceRemove,{component:e},!0));var k=e.components();k.forEach(function(L){iS(L,L,k,ei(ei({},r),{skipRefsUp:!0})),i.removeChildren(L,t,r)})}var P=e.components();c.stopListening(P),c.stopListening(e),c.stopListening(e.get("classes")),e.__postRemove()}},n.prototype.model=function(e,t){var r=t.collection.opt,i=r.em,s,u=i.Components.componentTypes;t.em=i,t.config=r.config,t.componentTypes=u,t.domc=r.domc;for(var c=0;c<u.length;c++){var f=u[c].id;if(f==e.type){s=u[c].model;break}}return s||(s=u[u.length-1].model,i&&e.type&&i.logWarning("Component type '".concat(e.type,"' not found"),{attrs:e,options:t})),new s(e,t)},n.prototype.parseString=function(e,t){t===void 0&&(t={});var r=this,i=r.em,s=r.domc,u=r.parent,c=t.asDocument&&(u==null?void 0:u.is("wrapper")),f=i.Css,h=i.Parser.parseHtml(e,ei({asDocument:c},t.parserOptions)),v=h.html;if(c){var m=u,_=h.html||{},C=_.components,T=pd(_,["components"]),k=h.head||{},P=k.components,L=pd(k,["components"]);v=C,m.set(T,t),m.head.set(L,t),m.head.components(P,t),m.docEl.set(h.root,t),m.set({doctype:h.doctype})}if(oo.checkId(v,h.css,s.componentsById,t),h.css&&f&&!t.temporary){t.at;var D=pd(t,["at"]);f.addCollection(h.css,ei(ei({},D),{extend:1}))}return v},n.prototype.add=function(e,t){var r=this;if(t===void 0&&(t={}),e!=null){t.keepIds=a_(a_([],t.keepIds||[],!0),$l(t.previousModels),!0),(0,U.isString)(e)?e=this.parseString(e,t):(0,U.isArray)(e)&&e.forEach(function(s,u){if((0,U.isString)(s)){var c=r.parseString(s,t);e[u]=(0,U.isArray)(c)&&!c.length?null:c}});var i=((0,U.isArray)(e)?e:[e]).filter(Boolean).map(function(s){return r.processDef(s)});return e=(0,U.isArray)(e)?(0,U.flatten)(i,1):i[0],o.prototype.add.call(this,e,t)}},n.prototype.processDef=function(e){if(e.cid&&e.ccid)return e;var t=this,r=t.em,i=t.config,s=i===void 0?{}:i,u=s.processor,c=e;if(u){c=ei({},c);var f=u(c);f&&((0,U.each)(c,function(k,P){return delete c[P]}),(0,U.extend)(c,f))}if(c.$$typeof&&typeof c.props=="object"){c=ei({},c),c.props=ei({},c.props);var h=r.Components,v=r.Parser,m=v.parserHtml;(0,U.each)(c,function(k,P){(0,U.includes)(["props","type"],P)||delete c[P]});var _=c.props,C=_.children;delete _.children,delete c.props;var T=m.splitPropsFromAttr(_);c.attributes=T.attrs,C&&(c.components=C),c.type?h.getType(c.type)||(c.tagName=c.type,delete c.type):c.type="textnode",(0,U.extend)(c,T.props)}return c},n.prototype.onAdd=function(e,t,r){r===void 0&&(r={});var i=this,s=i.domc,u=i.em,c=e.getStyle(),f=u&&u.getConfig().avoidInlineStyle;if(s&&s.Component.ensureInList(e),!(0,U.isEmpty)(c)&&!f&&u&&u.getConfig().forceClass&&!r.temporary){var h=e.cid;u.Css.setClassRule(h,c),e.setStyle({}),e.addClass(h)}if(e.__postAdd({recursive:!0}),u&&!r.temporary){var v=function(m){u.trigger(no.I.add,m,r),m.components().forEach(function(_){return v(_)})};v(e),s&&Ud(e)&&Qs(e)&&s.symbols.__trgEvent(s.events.symbolInstanceAdd,{component:e},!0)}},n}(gt.pM);const qc=hA;var vA=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),$f=1,uv=2,sS=function(o){vA(n,o);function n(e,t){t===void 0&&(t={});var r=o.call(this,e,t)||this,i=t.config,s=i===void 0?{}:i,u=r.get("name"),c=r.get("label");u?c||r.set("label",u):r.set("name",c);var f=r.get("name"),h=s.escapeName,v=h?h(f):n.escapeName(f);return r.set("name",v),r.em=t.em,r}return n.prototype.defaults=function(){return{name:"",label:"",type:$f,active:!0,private:!1,protected:!1,_undo:!0}},n.prototype.isId=function(){return this.get("type")===uv},n.prototype.isClass=function(){return this.get("type")===$f},n.prototype.getFullName=function(e){e===void 0&&(e={});var t=e.escape,r=this.get("name"),i="";switch(this.get("type")){case $f:i=".";break;case uv:i="#";break}return i+(t?t(r):r)},n.prototype.toString=function(){return this.getFullName()},n.prototype.getName=function(){return this.get("name")||""},n.prototype.getLabel=function(){return this.get("label")||""},n.prototype.setLabel=function(e){return this.set("label",e)},n.prototype.getActive=function(){return!!this.get("active")},n.prototype.setActive=function(e){return this.set("active",e)},n.prototype.toJSON=function(e){e===void 0&&(e={});var t=this.em,r=gt.Kx.prototype.toJSON.call(this,[e]),i=(0,U.result)(this,"defaults");if(t!=null&&t.getConfig().avoidDefaults){(0,U.forEach)(i,function(u,c){r[c]===u&&delete r[c]}),r.label===r.name&&delete r.label;var s=(0,U.keys)(r).length;s===1&&r.name&&(r=r.name),s===2&&r.name&&r.type&&(r=this.getFullName())}return r},n.escapeName=function(e){return"".concat(e).trim().replace(/\s+/g,"-")},n.TYPE_CLASS=$f,n.TYPE_ID=uv,n}(gt.Kx);const bo=sS;sS.prototype.idAttribute="name";var gA=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),lS=function(o,n){return o.reduce(function(e,t,r){return e.concat(lS(o.slice(r+1),"".concat(n).concat(t)))},[n])},uS=function(o){gA(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype.modelId=function(e){return"".concat(e.name,"_").concat(e.type||bo.TYPE_CLASS)},n.prototype.getStyleable=function(){return(0,U.filter)(this.models,function(e){return e.getActive()&&!e.get("private")})},n.prototype.getValid=function(e){var t=e===void 0?{}:e,r=t.noDisabled;return(0,U.filter)(this.models,function(i){return!i.get("private")}).filter(function(i){return r?i.get("active"):1})},n.prototype.getFullString=function(e,t){t===void 0&&(t={});var r=[],i=e||this;return i.forEach(function(s){return r.push(s.getFullName(t))}),t.sort&&r.sort(),r.join("").trim()},n.prototype.getFullName=function(e){e===void 0&&(e={});var t=e.combination,r=e.array,i=[],s=this.map(function(u){return u.getFullName(e)}).sort();return t?s.forEach(function(u,c){i=i.concat(lS(s.slice(c+1),u))}):i=s,r?i:t?i.join(","):i.join("")},n}(gt.pM);const es=uS;uS.prototype.model=bo;var mA=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),s_=function(o,n,e){if(e||arguments.length===2)for(var t=0,r=n.length,i;t<r;t++)(i||!(t in n))&&(i||(i=Array.prototype.slice.call(n,0,t)),i[t]=n[t]);return o.concat(i||Array.prototype.slice.call(n))},yA=function(o){mA(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype.defaults=function(){return{id:"",label:"",open:!0,attributes:{}}},n.prototype.getId=function(){return this.get("id")},n.prototype.getLabel=function(){return this.get("label")},n}(gt.Kx);const of=yA;function cS(o){var n=new Set,e=new Map,t={items:[]};o.forEach(function(i){var s=i.category;if(s){n.add(s);var u=e.get(s);u?u.push(i):e.set(s,[i])}else t.items.push(i)});var r=Array.from(n).map(function(i){return{category:i,items:e.get(i)||[]}});return s_(s_([],r,!0),[t],!1)}var wA=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),l_="category",fS=function(o){wA(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype.initCategory=function(e){var t=e.get(l_),r=t instanceof of;if(t&&!r){(0,U.isString)(t)?t={id:t,label:t}:(0,Xe.isObject)(t)&&!t.id&&(t.id=t.label);var i=this.getCategories().add(t);return e.set(l_,i,{silent:!0}),i}else if(r){var i=t;return this.getCategories().add(i),i}},n}(gt.pM),_A=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),dS=function(o){_A(n,o);function n(e,t){t===void 0&&(t={});var r=o.call(this,e,t)||this,i=t.events,s=t.em,u=i==null?void 0:i.update;return s&&u&&r.on("change",function(c,f){return s.trigger(u,{category:c,changes:c.changedAttributes(),options:f})}),r}return n.prototype.add=function(e,t){var r=(0,U.isArray)(e)?e:[e];return r.forEach(function(i){return i&&(i.id=(0,Xe.normalizeKey)("".concat(i.id)))}),o.prototype.add.call(this,e,t)},n.prototype.get=function(e){return o.prototype.get.call(this,(0,U.isString)(e)?(0,Xe.normalizeKey)(e):e)},n}(gt.pM);const Bd=dS;dS.prototype.model=of;var Wd;(function(o){o.select="trait:select",o.value="trait:value",o.categoryUpdate="trait:category:update",o.custom="trait:custom",o.all="trait"})(Wd||(Wd={}));const zg=Wd;var bA=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),$d=function(){return $d=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},$d.apply(this,arguments)},xA=function(o){bA(n,o);function n(e,t){var r=o.call(this,e)||this,i=r.attributes,s=i.target,u=i.name;return!r.get("id")&&r.set("id",u),s&&r.setTarget(s),r.em=t,r}return n.prototype.defaults=function(){return{type:"text",label:"",name:"",unit:"",step:1,value:"",default:"",placeholder:"",category:"",changeProp:!1,options:[]}},Object.defineProperty(n.prototype,"parent",{get:function(){return this.collection},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"category",{get:function(){var e=this.get("category");return e instanceof of?e:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"component",{get:function(){return this.target},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"changeProp",{get:function(){return!!this.get("changeProp")},enumerable:!1,configurable:!0}),n.prototype.setTarget=function(e){if(e){var t=this.attributes,r=t.name,i=t.changeProp,s=t.value,u=t.getValue;this.target=e,this.unset("target");var c=i?"change:".concat(r):"change:attributes:".concat(r);this.listenTo(e,c,this.targetUpdated);var f=s||(u?void 0:this.getValue());!(0,U.isUndefined)(f)&&this.set({value:f},{silent:!0})}},n.prototype.getId=function(){return this.get("id")},n.prototype.getType=function(){return this.get("type")},n.prototype.getName=function(){return this.get("name")},n.prototype.getLabel=function(e){var t;e===void 0&&(e={});var r=e.locale,i=r===void 0?!0:r,s=this.getId(),u=this.get("label")||this.getName();return i&&((t=this.em)===null||t===void 0?void 0:t.t("traitManager.traits.labels.".concat(s)))||u},n.prototype.getValue=function(e){return this.getTargetValue(e)},n.prototype.setValue=function(e,t){var r=this;t===void 0&&(t={});var i=this,s=i.component,u=i.em,c=t.partial,f={},h=this.attributes.setValue;if(h){h({value:e,component:s,editor:u==null?void 0:u.getEditor(),trait:this,partial:!!c,options:t,emitUpdate:function(){return r.targetUpdated()}});return}c&&(f.avoidStore=!0),this.setTargetValue(e,f)},n.prototype.getDefault=function(){return this.get("default")},n.prototype.getOptions=function(){return this.get("options")||[]},n.prototype.getOption=function(e){var t=this,r=(0,Xe.isDef)(e)?e:this.getValue();return this.getOptions().filter(function(i){return t.getOptionId(i)===r})[0]},n.prototype.getOptionId=function(e){return e.id||e.value},n.prototype.getOptionLabel=function(e,t){var r;t===void 0&&(t={});var i=t.locale,s=i===void 0?!0:i,u=(0,U.isString)(e)?this.getOption(e):e,c=this.getOptionId(u),f=u.label||u.name||c,h=this.getName();return s&&((r=this.em)===null||r===void 0?void 0:r.t("traitManager.traits.options.".concat(h,".").concat(c)))||f},n.prototype.getCategoryLabel=function(e){e===void 0&&(e={});var t=this,r=t.em,i=t.category,s=e.locale,u=s===void 0?!0:s,c=i==null?void 0:i.getId(),f=i==null?void 0:i.getLabel();return u&&(r==null?void 0:r.t("traitManager.categories.".concat(c)))||f||""},n.prototype.runCommand=function(){var e=this.em,t=this.attributes.command;if(t&&e)return(0,U.isString)(t)?e.Commands.run(t):t(e.Editor,this)},n.prototype.props=function(){return this.attributes},n.prototype.targetUpdated=function(){var e=this,t=e.component,r=e.em,i=this.getTargetValue({useType:!0});this.set({value:i},{fromTarget:1});var s={trait:this,component:t,value:i};t.trigger(zg.value,s),r==null||r.trigger(zg.value,s),r==null||r.trigger("trait:update",s)},n.prototype.getTargetValue=function(e){e===void 0&&(e={});var t=this,r=t.component,i=t.em,s=this.getName(),u=this.get("getValue"),c;if(u?c=u({editor:i==null?void 0:i.getEditor(),trait:this,component:r}):this.changeProp?c=r.get(s):c=r.getAttributes()[s],e.useType){var f=this.getType();if(f==="checkbox"){var h=this.attributes,v=h.valueTrue,m=h.valueFalse;!(0,U.isUndefined)(v)&&v===c?c=!0:!(0,U.isUndefined)(m)&&m===c&&(c=!1)}}return(0,U.isUndefined)(c)?"":c},n.prototype.setTargetValue=function(e,t){var r;t===void 0&&(t={});var i=this,s=i.component,u=i.attributes,c=this.getName();if(!(0,U.isUndefined)(e)){var f=e;if(e==="false"?f=!1:e==="true"&&(f=!0),this.getType()==="checkbox"){var h=u.valueTrue,v=u.valueFalse;f&&!(0,U.isUndefined)(h)&&(f=h),!f&&!(0,U.isUndefined)(v)&&(f=v)}var m=(r={},r[c]=f,r);m.__p=t.avoidStore?null:void 0,this.changeProp?s.set(m,t):s.addAttributes(m,t)}},n.prototype.setValueFromInput=function(e,t,r){t===void 0&&(t=!0),r===void 0&&(r={});var i={value:e};this.set(i,$d($d({},r),{avoidStore:1})),t&&(this.set("value","",r),this.set(i,r))},n.prototype.getInitValue=function(){var e=this.component,t=this.getName(),r;if(e){var i=e.get("attributes");r=this.changeProp?e.get(t):i[t]}return r||this.get("value")||this.get("default")},n}(gt.Kx);const Kd=xA;var CA=function(){function o(n){n===void 0&&(n={}),this.config=n}return o.prototype.build=function(n,e){return(0,U.isString)(n)?this.buildFromString(n,e):new Kd(n,e)},o.prototype.buildFromString=function(n,e){var t={name:n,type:"text"};switch(n){case"target":t.type="select",t.default=!1,t.options=this.config.optionsTarget;break}return new Kd(t,e)},o}();const SA=CA;var OA=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),TA=function(o){OA(n,o);function n(e,t){var r=o.call(this,e)||this;r.categories=new Bd;var i=t.em;r.em=i,r.categories=new Bd([],{em:i,events:{update:zg.categoryUpdate}}),r.on("add",r.handleAdd),r.on("reset",r.handleReset);var s=r.module,u=s==null?void 0:s.getConfig();return r.tf=new SA(u),r}return Object.defineProperty(n.prototype,"module",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),n.prototype.getCategories=function(){return this.categories},n.prototype.handleReset=function(e,t){var r=t===void 0?{}:t,i=r.previousModels,s=i===void 0?[]:i;s.forEach(function(u){return u.trigger("remove")})},n.prototype.handleAdd=function(e){e.em=this.em;var t=this.target;t&&(e.target=t),this.initCategory(e)},n.prototype.setTarget=function(e){this.target=e,this.models.forEach(function(t){return t.setTarget(e)})},n.prototype.add=function(e,t){if(e!=null){var r=this,i=r.target,s=r.em;if((0,U.isArray)(e)){for(var u=[],c=0,f=e.length;c<f;c++){var h=e[c];u[c]=h instanceof Kd?h:this.tf.build(h,s),u[c].setTarget(i)}return o.prototype.add.call(this,u,t)}var v=e instanceof Kd?e:this.tf.build(e,s);return v.setTarget(i),o.prototype.add.call(this,v,t)}},n}(fS);const Gd=TA;var EA=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),On=function(){return On=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},On.apply(this,arguments)},PA=function(o,n){var e={};for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&n.indexOf(t)<0&&(e[t]=o[t]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(o);r<t.length;r++)n.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(o,t[r])&&(e[t[r]]=o[t[r]]);return e},Mi=function(o,n,e){if(e||arguments.length===2)for(var t=0,r=n.length,i;t<r;t++)(i||!(t in n))&&(i||(i=Array.prototype.slice.call(n,0,t)),i[t]=n[t]);return o.concat(i||Array.prototype.slice.call(n))},u_=function(o){return o.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},ac=function(o){return!!(o!=null&&o.getConfig().avoidInlineStyle)},ry="component:drag",Ro="__symbols",pi="__symbol",_c="__symbol_ovrd",hd=no.I.update,Hg=no.I.updateInside,kA=function(o){EA(n,o);function n(e,t){e===void 0&&(e={});var r=o.call(this,e,t)||this;(0,U.bindAll)(r,"__upSymbProps","__upSymbCls","__upSymbComps");var i=t.em,s=r.parent(),u=s==null?void 0:s.attributes,c=r.get("propagate");if(c&&r.set("propagate",(0,U.isArray)(c)?c:[c]),u&&u.propagate&&!c){var f={},h=u.propagate;h.forEach(function(T){return f[T]=s.get(T)}),f.propagate=h,r.set(On(On({},f),e))}if(t&&t.config&&t.config.voidElements.indexOf(r.get("tagName"))>=0&&r.set("void",!0),t.em=i,r.opt=t,r.em=i,r.frame=t.frame,r.config=t.config||{},r.set("attributes",On(On({},(0,U.result)(r,"defaults").attributes||{}),r.get("attributes")||{})),r.ccid=n.createId(r,t),r.initClasses(),r.initComponents(),r.initTraits(),r.initToolbar(),r.initScriptProps(),r.listenTo(r,"change:script",r.scriptUpdated),r.listenTo(r,"change:tagName",r.tagUpdated),r.listenTo(r,"change:attributes",r.attrUpdated),r.listenTo(r,"change:attributes:id",r._idUpdated),r.on("change:toolbar",r.__emitUpdateTlb),r.on("change",r.__onChange),r.on(Hg,r.__propToParent),r.set("status",""),r.views=[],["classes","traits","components"].forEach(function(T){var k="add remove ".concat(T!=="components"?"change":"");r.listenTo(r.get(T),k.trim(),function(){for(var P=[],L=0;L<arguments.length;L++)P[L]=arguments[L];return r.emitUpdate.apply(r,Mi([T],P,!1))})}),!t.temporary){var v=i&&i.Css,m=r.attributes,_=m.styles,C=m.type;_&&v&&v.addCollection(_,{avoidUpdateStyle:!0},{group:"cmp:".concat(C)}),r.__postAdd(),r.init(),hu(r)&&Ju(r),i==null||i.trigger(no.I.create,r,t)}return r}return Object.defineProperty(n.prototype,"defaults",{get:function(){var e;return e={tagName:"div",type:"",name:"",removable:!0,draggable:!0,droppable:!0,badgable:!0,stylable:!0,"stylable-require":"","style-signature":"",unstylable:"",highlightable:!0,copyable:!0,resizable:!1,editable:!1,layerable:!0,selectable:!0,hoverable:!0,void:!1,state:"",status:"",content:"",icon:"",style:"",styles:"",classes:"",script:"","script-props":"","script-export":"",attributes:{},traits:["id","title"],propagate:"",dmode:"",toolbar:null,delegate:null},e[pi]=0,e[Ro]=0,e[_c]=0,e._undo=!0,e._undoexc=["status","open"],e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"tagName",{get:function(){return this.get("tagName")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"classes",{get:function(){return this.get("classes")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"traits",{get:function(){return this.get("traits")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"content",{get:function(){var e;return(e=this.get("content"))!==null&&e!==void 0?e:""},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"toolbar",{get:function(){return this.get("toolbar")||[]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"resizable",{get:function(){return this.get("resizable")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"delegate",{get:function(){return this.get("delegate")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"locked",{get:function(){return this.get("locked")},enumerable:!1,configurable:!0}),n.prototype.init=function(){},n.prototype.updated=function(e,t,r){},n.prototype.removed=function(){},n.prototype.__postAdd=function(e){e===void 0&&(e={});var t=this.em,r=t==null?void 0:t.UndoManager,i=this.components();r&&!this.__hasUm&&(r.add(i),r.add(this.getSelectors()),this.__hasUm=!0),e.recursive&&i.map(function(s){return s.__postAdd(e)})},n.prototype.__postRemove=function(){var e=this.em,t=e==null?void 0:e.UndoManager;t&&(t.remove(this.components()),t.remove(this.getSelectors()),delete this.__hasUm)},n.prototype.__onChange=function(e,t){var r=this,i=this.changedAttributes()||{};(0,U.keys)(i).forEach(function(s){return r.emitUpdate(s)}),["status","open","toolbar","traits"].forEach(function(s){return delete i[s]}),(0,Xe.isEmptyObj)(i)||(this.__changesUp(t),this.__propSelfToParent({component:this,changed:i,options:t}))},n.prototype.__onStyleChange=function(e){var t=this,r=this.em;if(r){var i="component:styleUpdate",s=(0,U.keys)(e),u={style:e};r.trigger(i,this,u),s.forEach(function(c){return r.trigger("".concat(i,":").concat(c),t,u)})}},n.prototype.__changesUp=function(e){var t=this,r=t.em,i=t.frame;[i,r].forEach(function(s){return s&&s.changesUp(e)})},n.prototype.__propSelfToParent=function(e){this.trigger(hd,e),this.__propToParent(e)},n.prototype.__propToParent=function(e){var t=this.parent();t&&t.trigger(Hg,e)},n.prototype.__emitUpdateTlb=function(){this.emitUpdate("toolbar")},n.prototype.__getAllById=function(){var e=this.em;return e?e.Components.allById():{}},n.prototype.__upSymbProps=function(e,t){t===void 0&&(t={}),fA(this,t)},n.prototype.__upSymbCls=function(e,t,r){r===void 0&&(r={}),dA(this,r)},n.prototype.__upSymbComps=function(e,t,r){iS(this,e,t,r)},n.prototype.is=function(e){return this.get("type")==e},n.prototype.props=function(){return this.attributes},n.prototype.index=function(){var e=this.collection;return e?e.indexOf(this):0},n.prototype.setDragMode=function(e){return this.set("dmode",e)},n.prototype.getDragMode=function(){return this.get("dmode")||""},n.prototype.setSymbolOverride=function(e){var t;this.set(_c,(t=(0,U.isString)(e)?[e]:e)!==null&&t!==void 0?t:0)},n.prototype.getSymbolOverride=function(){return this.get(_c)},n.prototype.find=function(e){var t,r=[],i=(t=this.view)===null||t===void 0?void 0:t.$el.find(e);return i==null||i.each(function(s){var u=i.eq(s),c=u.data("model");c&&r.push(c)}),r},n.prototype.findType=function(e){var t=[],r=function(i){return i.forEach(function(s){s.is(e)&&t.push(s),r(s.components())})};return r(this.components()),t},n.prototype.findFirstType=function(e){return this.findType(e).at(0)},n.prototype.closest=function(e){var t,r=(t=this.view)===null||t===void 0?void 0:t.$el.closest(e);return r!=null&&r.length?r.data("model"):void 0},n.prototype.closestType=function(e){for(var t=this.parent();t&&!t.is(e);)t=t.parent();return t},n.prototype.contains=function(e){var t=!1;if(!e)return t;var r=function(i){!t&&i.forEach(function(s){s===e&&(t=!0),!t&&r(s.components())})};return r(this.components()),t},n.prototype.tagUpdated=function(){this.trigger("rerender")},n.prototype.replaceWith=function(e,t){t===void 0&&(t={});var r=this.collection,i=r.indexOf(this);r.remove(this);var s=r.add(e,On(On({},t),{at:i}));return(0,U.isArray)(s)?s:[s]},n.prototype.attrUpdated=function(e,t,r){var i=this;r===void 0&&(r={});var s=this.get("attributes"),u=s.class;u&&this.setClass(u),delete s.class;var c=s.style;c&&this.setStyle(c,r),delete s.style;var f=On({},this.previous("attributes")),h=(0,Xe.shallowDiff)(f,this.get("attributes"));(0,U.keys)(h).forEach(function(v){var m,_="attributes:".concat(v);i.trigger("change:".concat(_),i,h[v],r),(m=i.em)===null||m===void 0||m.trigger("".concat(hd,":").concat(_),i,h[v],r)})},n.prototype.setAttributes=function(e,t){return t===void 0&&(t={}),this.set("attributes",On({},e),t),this},n.prototype.addAttributes=function(e,t){return t===void 0&&(t={}),this.setAttributes(On(On({},this.getAttributes({noClass:!0})),e),t)},n.prototype.removeAttributes=function(e,t){e===void 0&&(e=[]),t===void 0&&(t={});var r=Array.isArray(e)?e:[e],i=this.getAttributes();return r.map(function(s){return delete i[s]}),this.setAttributes(i,t)},n.prototype.getStyle=function(e,t){e===void 0&&(e={}),t===void 0&&(t={});var r=this.em,i=(0,U.isString)(e)?e:"",s=i?t:e;if(ac(r)&&!s.inline){var u=r.get("state"),c=r.Css,f=c.getIdRule(this.getId(),On({state:u},s));return this.rule=f,f?f.getStyle(i):{}}return o.prototype.getStyle.call(this,i)},n.prototype.setStyle=function(e,t){var r=this;e===void 0&&(e={}),t===void 0&&(t={});var i=this,s=i.opt,u=i.em;if(ac(u)&&!s.temporary&&!t.inline){var c=this.get("style")||{};e=(0,U.isString)(e)?this.parseStyle(e):e,e=On(On({},e),c);var f=u.get("state"),h=u.Css,v=this.getStyle(t);this.rule=h.setIdRule(this.getId(),e,On({state:f},t));var m=(0,Xe.shallowDiff)(v,e);this.set("style","",{silent:!0}),(0,U.keys)(m).forEach(function(_){return r.trigger("change:style:".concat(_))})}else e=o.prototype.setStyle.apply(this,arguments);return s.temporary||this.__onStyleChange(t.addStyle||e),e},n.prototype.getAttributes=function(e){e===void 0&&(e={});var t=this.em,r=[],i=On({},this.get("attributes")),s=t==null?void 0:t.Selectors,u=this.getId();if(e.noClass?delete i.class:(this.classes.forEach(function(h){return r.push((0,U.isString)(h)?h:h.getName())}),r.length&&(i.class=r.join(" "))),!e.noStyle){var c=this.getStyle({inline:!0});(0,Xe.isObject)(c)&&!(0,Xe.isEmptyObj)(c)&&(i.style=this.styleToString({inline:!0}))}if(!(0,U.has)(i,"id")){var f=!1;(ac(t)||!(0,U.isEmpty)(this.getStyle()))&&(f=!!(s!=null&&s.get(u,s.Selector.TYPE_ID))),(hu(this)||this.get("script-export")||this.get("script"))&&(f=!0),f&&(i.id=u)}return i},n.prototype.addClass=function(e){var t=this.em.Selectors.addClass(e);return this.classes.add(t)},n.prototype.setClass=function(e){return this.classes.reset(),this.addClass(e)},n.prototype.removeClass=function(e){var t=[];e=(0,U.isArray)(e)?e:[e];var r=this.classes,i=bo.TYPE_CLASS;return e.forEach(function(s){var u=s.split(" ");u.forEach(function(c){var f=r.where({name:c,type:i})[0];f&&t.push(r.remove(f))})}),t},n.prototype.getClasses=function(){var e=this.getAttributes(),t=e.class;return t?t.split(" "):[]},n.prototype.initClasses=function(e,t,r){r===void 0&&(r={});var i="change:classes",s=this.get("attributes")||{},u=s.class,c=PA(s,["class"]),f=[this,i,this.initClasses],h=this.get("classes")||u||[],v=(0,U.isString)(h)?h.split(" "):h;this.stopListening.apply(this,f);var m=this.normalizeClasses(v),_=new es([]);return this.set("classes",_,r),_.add(m),_.on("add remove reset",this.__upSymbCls),u&&m.length&&this.set("attributes",c),this.listenTo.apply(this,f),this},n.prototype.initComponents=function(){var e="change:components",t=[this,e,this.initComponents];this.stopListening.apply(this,t);var r=new qc([],this.opt);r.parent=this;var i=this.get("components"),s=!this.opt.avoidChildren;return this.set("components",r),s&&i&&r.add((0,U.isFunction)(i)?i(this):i,this.opt),r.on("add remove reset",this.__upSymbComps),this.listenTo.apply(this,t),this},n.prototype.initTraits=function(e){var t=this.em,r="change:traits";this.off(r,this.initTraits),this.__loadTraits();var i=On({},this.get("attributes")),s=this.traits;return s.each(function(u){if(!u.changeProp){var c=u.getName(),f=u.getInitValue();c&&f&&(i[c]=f)}}),s.length&&this.set("attributes",i),this.on(r,this.initTraits),e&&t&&t.trigger("component:toggled"),this},n.prototype.initScriptProps=function(){if(!this.opt.temporary){var e="script-props",t=["change:".concat(e),this.initScriptProps];this.off.apply(this,t);var r=this.previous(e)||[],i=this.get(e)||[],s=r.map(function(c){return"change:".concat(c)}).join(" "),u=i.map(function(c){return"change:".concat(c)}).join(" ");s&&this.off(s,this.__scriptPropsChange),u&&this.on(u,this.__scriptPropsChange),this.on.apply(this,t)}},n.prototype.__scriptPropsChange=function(e,t,r){r===void 0&&(r={}),!r.avoidStore&&this.trigger("rerender")},n.prototype.append=function(e,t){t===void 0&&(t={});var r=(0,U.isArray)(e)?Mi([],e,!0):[e],i=r.map(function(u){return(0,U.isString)(u)||u.collection&&u.collection.remove(u,{temporary:!0}),u}),s=this.components().add(i,On({action:no.t.add},t));return(0,U.isArray)(s)?s:[s]},n.prototype.components=function(e,t){t===void 0&&(t={});var r=this.get("components");return(0,U.isUndefined)(e)?r:(r.reset(void 0,t),e?this.append(e,t):[])},n.prototype.getChildAt=function(e){return this.components().at(e||0)||void 0},n.prototype.getLastChild=function(){var e=this.components();return e.at(e.length-1)||null},n.prototype.empty=function(e){return e===void 0&&(e={}),this.components().reset(void 0,e),this},n.prototype.parent=function(e){e===void 0&&(e={});var t=this.collection||e.prev&&this.prevColl;return t?t.parent:void 0},n.prototype.parents=function(){var e=this.parent();return e?[e].concat(e.parents()):[]},n.prototype.scriptUpdated=function(){this.set("scriptUpdated",1)},n.prototype.initToolbar=function(){var e=this.em,t=this,r=e&&e.getConfig().stylePrefix||"";if(!t.get("toolbar")&&e){var i=[];t.collection&&i.push({label:e.getIcon("arrowUp"),command:function(s){return s.runCommand("core:component-exit",{force:1})}}),t.get("draggable")&&i.push({attributes:{class:"".concat(r,"no-touch-actions"),draggable:!0},label:e.getIcon("move"),command:"tlb-move"}),t.get("copyable")&&i.push({label:e.getIcon("copy"),command:"tlb-clone"}),t.get("removable")&&i.push({label:e.getIcon("delete"),command:"tlb-delete"}),t.set("toolbar",i)}},n.prototype.__loadTraits=function(e,t){t===void 0&&(t={});var r=e||this.traits;if(!(r instanceof Gd)){r=(0,U.isFunction)(r)?r(this):r;var i=new Gd([],this.opt);i.setTarget(this),r.length&&(r.forEach(function(s){return s.attributes&&delete s.attributes.value}),i.add(r)),this.set({traits:i},t)}return this},n.prototype.getTraits=function(){return this.__loadTraits(),Mi([],this.traits.models,!0)},n.prototype.setTraits=function(e){var t=(0,U.isArray)(e)?e:[e];return this.set({traits:t}),this.getTraits()},n.prototype.getTrait=function(e){return this.getTraits().filter(function(t){return t.get("id")===e||t.get("name")===e})[0]||null},n.prototype.updateTrait=function(e,t){var r,i=this.getTrait(e);return i&&i.set(t),(r=this.em)===null||r===void 0||r.trigger("component:toggled"),this},n.prototype.getTraitIndex=function(e){var t=this.getTrait(e);return t?this.traits.indexOf(t):-1},n.prototype.removeTrait=function(e){var t=this,r,i=(0,U.isArray)(e)?e:[e],s=i.map(function(f){return t.getTrait(f)}),u=this.traits,c=s.length?u.remove(s):[];return(r=this.em)===null||r===void 0||r.trigger("component:toggled"),(0,U.isArray)(c)?c:[c]},n.prototype.addTrait=function(e,t){var r;t===void 0&&(t={}),this.__loadTraits();var i=this.traits.add(e,t);return(r=this.em)===null||r===void 0||r.trigger("component:toggled"),(0,U.isArray)(i)?i:[i]},n.prototype.normalizeClasses=function(e){var t=[],r=this.em,i=r==null?void 0:r.Selectors;return i?e.models?Mi([],e.models,!0):(e.forEach(function(s){return t.push(i.add(s))}),t):[]},n.prototype.clone=function(e){e===void 0&&(e={});var t=this.em,r=On({},this.attributes),i=On({},this.opt),s=this.getId(),u=t==null?void 0:t.Css;r.attributes=On({},r.attributes),delete r.attributes.id,r.components=[],r.classes=[],r.traits=[],Qs(this)&&(e.symbol=!0),this.get("components").each(function(C,T){r.components[T]=C.clone(On(On({},e),{_inner:1}))}),this.get("traits").each(function(C,T){r.traits[T]=C.clone()}),this.get("classes").each(function(C,T){r.classes[T]=C.get("name")}),r.status="",i.collection=null;var c=new this.constructor(r,i),f="#".concat(c.getId()),h=u?u.getRules("#".concat(s)):[];h.forEach(function(C){var T=C.clone();T.set("selectors",[f]),u.getAll().add(T)}),c.set(Ro,0);var v=el(this),m=ni(this);!e.symbol&&(v||m)?(c.set(pi,0),c.set(Ro,0)):v?(v.set(Ro,Mi(Mi([],ni(v),!0),[c],!1)),Ju(c)):e.symbol&&(Hd(this)?(this.set(Ro,Mi(Mi([],m,!0),[c],!1)),c.set(pi,this),Ju(c)):e.symbolInv?(this.set(Ro,[c]),c.set(pi,this),[this,c].map(function(C){return Ju(C)})):(c.set(Ro,[this]),[this,c].map(function(C){return Ju(C)}),this.set(pi,c)));var _="component:clone";return t&&t.trigger(_,c),this.trigger(_,c),c},n.prototype.getName=function(e){e===void 0&&(e={});var t=this.em,r=this.attributes,i=r.type,s=r.tagName,u=r.name,c=i||s,f=i?"":s,h="domComponents.names.",v=u&&(t==null?void 0:t.t("".concat(h).concat(u))),m=f&&(t==null?void 0:t.t("".concat(h).concat(f))),_=t&&(t.t("".concat(h).concat(i))||t.t("".concat(h).concat(s))),C=this.get("custom-name");return(e.noCustom?"":C)||v||u||m||(0,Xe.capitalize)(f)||_||(0,Xe.capitalize)(c)},n.prototype.setName=function(e,t){t===void 0&&(t={}),this.set("custom-name",e,t)},n.prototype.getIcon=function(){var e=this.get("icon");return e?e+" ":""},n.prototype.toHTML=function(e){e===void 0&&(e={});var t=this,r=[],i=e.tag,s=i||t.get("tagName"),u=t.get("void"),c=e.attributes,f=this.getAttrToHTML(e);if(delete e.tag,c&&((0,U.isFunction)(c)?f=c(t,f)||{}:(0,Xe.isObject)(c)&&(f=c)),e.withProps){var h=this.toJSON();(0,U.forEach)(h,function(L,D){var V=["classes","attributes","components"];D[0]!=="_"&&V.indexOf(D)<0&&(f["data-gjs-".concat(D)]=(0,U.isArray)(L)||(0,Xe.isObject)(L)?JSON.stringify(L):(0,U.isBoolean)(L)?"".concat(L):L)})}for(var v in f){var m=f[v];if(!(0,U.isUndefined)(m)&&m!==null)if((0,U.isBoolean)(m))m&&r.push(v);else{var _="";if(e.altQuoteAttr&&(0,U.isString)(m)&&m.indexOf('"')>=0)_="'".concat(m.replace(/'/g,"&apos;"),"'");else{var C=(0,U.isString)(m)?m.replace(/"/g,"&quot;"):m;_='"'.concat(C,'"')}r.push("".concat(v,"=").concat(_))}}var T=r.length?" ".concat(r.join(" ")):"",k=t.getInnerHTML(e),P="<".concat(s).concat(T).concat(u?"/":"",">").concat(k);return!u&&(P+="</".concat(s,">")),P},n.prototype.getInnerHTML=function(e){return this.__innerHTML(e)},n.prototype.__innerHTML=function(e){e===void 0&&(e={});var t=this.components();return t.length?t.map(function(r){return r.toHTML(e)}).join(""):this.content},n.prototype.getAttrToHTML=function(e){var t=this.getAttributes();return ac(this.em)&&(e==null?void 0:e.keepInlineStyle)!==!0&&delete t.style,t},n.prototype.toJSON=function(e){e===void 0&&(e={});var t=jg.Model.prototype.toJSON.call(this,e);if(t.attributes=this.getAttributes(),delete t.attributes.class,delete t.toolbar,delete t.traits,delete t.status,delete t.open,delete t._undoexc,delete t.delegate,!e.fromUndo){var r=t[pi],i=t[Ro];i&&(0,U.isArray)(i)&&(t[Ro]=i.filter(function(s){return s}).map(function(s){return s.getId?s.getId():s})),r&&!(0,U.isString)(r)&&(t[pi]=r.getId())}return this.em.getConfig().avoidDefaults&&this.getChangedProps(t),t},n.prototype.getChangedProps=function(e){var t=e||jg.Model.prototype.toJSON.apply(this),r=(0,U.result)(this,"defaults");return(0,U.forEach)(r,function(i,s){["type"].indexOf(s)===-1&&t[s]===i&&delete t[s]}),(0,U.isEmpty)(t.type)&&delete t.type,(0,U.forEach)(["attributes","style"],function(i){(0,U.isEmpty)(r[i])&&(0,U.isEmpty)(t[i])&&delete t[i]}),(0,U.forEach)(["classes","components"],function(i){(!t[i]||(0,U.isEmpty)(r[i])&&!t[i].length)&&delete t[i]}),t},n.prototype.getId=function(){var e=this.get("attributes")||{};return e.id||this.ccid||this.cid},n.prototype.setId=function(e,t){var r=On({},this.get("attributes"));return r.id=e,this.set("attributes",r,t),this},n.prototype.getEl=function(e){var t=this.getView(e);return t&&t.el},n.prototype.getView=function(e){var t=this,r=t.view,i=t.views,s=t.em,u=e||(s==null?void 0:s.getCurrentFrameModel());return u&&(r=i.filter(function(c){return c.frameView===u.view})[0]),r},n.prototype.getCurrentView=function(){var e=this.em.getCurrentFrame(),t=e==null?void 0:e.model;return this.getView(t)},n.prototype.__getScriptProps=function(){var e=this.props(),t=this.get("script-props")||[];return t.reduce(function(r,i){return r[i]=e[i],r},{})},n.prototype.getScriptString=function(e){var t=this,r=e||this.get("script")||"";if(!r)return r;if(this.get("script-props"))r=r.toString().trim();else{if((0,U.isFunction)(r)){var i=r.toString().trim();i=i.slice(i.indexOf("{")+1,i.lastIndexOf("}")),r=i.trim()}var s=this.em.getConfig(),u=u_(s.tagVarStart||"{[ "),c=u_(s.tagVarEnd||" ]}"),f=new RegExp("".concat(u,"([\\w\\d-]*)").concat(c),"g");r=r.replace(f,function(h,v){t.scriptUpdated();var m=t.attributes[v]||"";return(0,U.isArray)(m)||typeof m=="object"?JSON.stringify(m):m})}return r},n.prototype.emitUpdate=function(e){for(var t,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var s=this.em,u=hd+(e?":".concat(e):""),c=e&&this.get(e);e&&this.updated.apply(this,Mi([e,c,e&&this.previous(e)],r,!1)),this.trigger.apply(this,Mi([u],r,!1)),s&&s.trigger.apply(s,Mi([u,this],r,!1)),["components","classes"].indexOf(e)>=0&&this.__propSelfToParent({component:this,changed:(t={},t[e]=c,t),options:r[2]||r[1]||{}})},n.prototype.onAll=function(e){return(0,U.isFunction)(e)&&(e(this),this.components().forEach(function(t){return t.onAll(e)})),this},n.prototype.forEachChild=function(e){(0,U.isFunction)(e)&&this.components().forEach(function(t){e(t),t.forEachChild(e)})},n.prototype.remove=function(e){var t=this;e===void 0&&(e={});var r=this.em,i=this.collection,s=function(){i&&i.remove(t,On({action:no.t.remove},e)),i||(t.components("",e),t.components().removeChildren(t,void 0,e))},u=On({},e);return[this,r].map(function(c){return c.trigger(no.I.removeBefore,t,s,u)}),!u.abort&&s(),this},n.prototype.move=function(e,t){if(t===void 0&&(t={}),e){var r=t.at,i=this.index(),s=e===this.parent(),u=i===r||i===r-1;if(!s||!u){s&&r&&r>i&&(t.at=r-1);var c=no.t.move;this.remove({action:c,temporary:1}),e.append(this,On({action:c},t)),this.emitUpdate()}}return this},n.prototype.isInstanceOf=function(e){var t,r,i=(r=(t=this.em)===null||t===void 0?void 0:t.Components.getType(e))===null||r===void 0?void 0:r.model;if(!i)return!1;var s=this.constructor.typeExtends;return this instanceof i||s.has(e)},n.prototype.isChildOf=function(e){for(var t=(0,U.isString)(e),r=this.parent();r;){if(t){if(r.isInstanceOf(e))return!0}else if(r===e)return!0;r=r.parent()}return!1},n.prototype.resetId=function(e){var t=this.em,r=this.getId();if(!r)return this;var i=n.createId(this);this.setId(i);var s=t==null?void 0:t.Css.getIdRule(r),u=s==null?void 0:s.get("selectors").at(0);return u==null||u.set("name",i),this},n.prototype._getStyleRule=function(e){var t=e===void 0?{}:e,r=t.id,i=this.em,s=r||this.getId();return i==null?void 0:i.Css.getIdRule(s)},n.prototype._getStyleSelector=function(e){var t=this._getStyleRule(e);return t==null?void 0:t.get("selectors").at(0)},n.prototype._idUpdated=function(e,t,r){if(r===void 0&&(r={}),!r.idUpdate){var i=this.ccid,s=(this.get("attributes")||{}).id,u=(this.previous("attributes")||{}).id||i,c=n.getList(this);if(c[s]||!s&&u)return this.setId(u,{idUpdate:!0});delete c[u],c[s]=this,this.ccid=s;var f=this._getStyleSelector({id:u});f&&f.set({name:s,label:s})}},n.getDefaults=function(){return(0,U.result)(this.prototype,"defaults")},n.isComponent=function(e,t){return{tagName:(0,Xe.toLowerCase)(e.tagName)}},n.ensureInList=function(e){var t=n.getList(e),r=e.getId(),i=t[r];if(!i)t[r]=e;else if(i!==e){var s=n.getIncrementId(r,t);e.setId(s),t[s]=e}e.components().forEach(function(u){return n.ensureInList(u)})},n.createId=function(e,t){t===void 0&&(t={});var r=n.getList(e),i=t.idMap,s=i===void 0?{}:i,u=e.get("attributes").id,c;return u?(c=n.getIncrementId(u,r,t),e.setId(c),u!==c&&(s[u]=c)):c=n.getNewId(r),r[c]=e,c},n.getNewId=function(e){for(var t=Object.keys(e).length,r=t.toString().length+2,i=(Math.random()+1.1).toString(36).slice(-r),s="i".concat(i);e[s];)s=n.getNewId(e);return s},n.getIncrementId=function(e,t,r){r===void 0&&(r={});var i=r.keepIds,s=i===void 0?[]:i,u=1,c=e;if(s.indexOf(e)<0)for(;t[c];)u++,c="".concat(e,"-").concat(u);return c},n.getList=function(e){var t,r=e.em,i=r==null?void 0:r.Components;return(t=i==null?void 0:i.componentsById)!==null&&t!==void 0?t:{}},n.checkId=function(e,t,r,i){t===void 0&&(t=[]),r===void 0&&(r={}),i===void 0&&(i={});var s=(0,U.isArray)(e)?e:[e],u=i.keepIds,c=u===void 0?[]:u,f=i.idMap,h=f===void 0?{}:f;s.forEach(function(v){v.attributes;var m=v.attributes,_=m===void 0?{}:m,C=v.components,T=_.id;if(T&&r[T]&&c.indexOf(T)<0){var k=n.getIncrementId(T,r);h[T]=k,_.id=k,(0,U.isArray)(t)&&t.forEach(function(P){var L=P.selectors;L.forEach(function(D,V){D==="#".concat(T)&&(L[V]="#".concat(k))})})}C&&n.checkId(C,t,r,i)})},n.typeExtends=new Set,n}(rS);const oo=kA;var AA=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Yd=function(){return Yd=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},Yd.apply(this,arguments)},iu="head",MA=["title","style","base","link","meta","script","noscript"],DA=function(o){AA(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Yd(Yd({},o.prototype.defaults),{type:iu,tagName:iu,draggable:!1,highlightable:!1,droppable:function(e){var t=e.tagName;return!t||MA.includes((0,Xe.toLowerCase)(t))}})},enumerable:!1,configurable:!0}),n.isComponent=function(e){return(0,Xe.toLowerCase)(e.tagName)===iu},n}(oo);const LA=DA;var Ug=function(){return Ug=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},Ug.apply(this,arguments)},jA=function(){function o(n,e){var t=this;this.em=n,this.canvas=n.Canvas;var r=e||this.canvas.getFrames().map(function(s){return s.getComponent().getEl()}),i=Array.isArray(r)?r:[r];this.el=i[0],this.counter=0,(0,U.bindAll)(this,"handleDragEnter","handleDragOver","handleDrop","handleDragLeave"),i.forEach(function(s){return t.toggleEffects(s,!0)})}return o.prototype.toggleEffects=function(n,e){var t={on:wt.on,off:wt.AU},r=e?"on":"off";t[r](n,"dragenter",this.handleDragEnter),t[r](n,"dragover",this.handleDragOver),t[r](n,"drop",this.handleDrop),t[r](n,"dragleave",this.handleDragLeave)},o.prototype.__customTglEff=function(n){var e,t=n?wt.on:wt.AU,r=this.el.ownerDocument,i=(e=r.defaultView)===null||e===void 0?void 0:e.frameElement;this.sortOpts=n?{onStart:function(s){var u=s.sorter;(0,wt.on)(i,"pointermove",u.onMove)},onEnd:function(s){var u=s.sorter;(0,wt.AU)(i,"pointermove",u.onMove)},customTarget:function(s){var u=s.event;return r.elementFromPoint(u.clientX,u.clientY)}}:null,t(i,"pointerenter",this.handleDragEnter),t(i,"pointermove",this.handleDragOver),t(document,"pointerup",this.handleDrop),t(i,"pointerout",this.handleDragLeave)},o.prototype.startCustom=function(){this.__customTglEff(!0)},o.prototype.endCustom=function(n){this.over?this.endDrop(n):this.__customTglEff(!1)},o.prototype.endDrop=function(n,e){var t=this,r=t.em,i=t.dragStop;this.counter=0,i&&i(n||!this.over),this.__customTglEff(!1),r.trigger("canvas:dragend",e)},o.prototype.handleDragLeave=function(n){this.updateCounter(-1,n)},o.prototype.updateCounter=function(n,e){this.counter+=n,this.counter===0&&this.endDrop(!0,e)},o.prototype.handleDragEnter=function(n){var e=this,t=this,r=t.em,i=t.canvas,s=n.dataTransfer,u=r.get("dragContent");if(!(!u&&!i.getConfig().allowExternalDrop)&&(this.updateCounter(1,n),!this.over)){this.over=!0;var c=r.Utils,f=u||"<br>",h,v;if(r.stopDefault(),r.inAbsoluteMode()){var m=r.Components.getWrapper(),_=m.append({})[0],C=r.Commands.run("core:component-drag",{event:n,guidesInfo:1,center:1,target:_,onEnd:function(k,P,L){var D=L.cancelled,V;if(!D){V=m.append(f)[0];var re=i.getOffset(),_e=_.getStyle(),Q=_e.top,pe=_e.left,ne=_e.position,me=(0,wt.Xy)(k.target),Y=parseInt("".concat(parseFloat(pe)+me.x-re.left),10),W=parseInt("".concat(parseFloat(Q)+me.y-re.top),10);V.addStyle({left:Y+"px",top:W+"px",position:ne})}e.handleDragEnd(V,s),_.remove()}});h=function(k){return C.stop(n,{cancel:k})},v=function(k){return f=k}}else{var T=new c.Sorter(Ug({em:r,wmargin:1,nested:1,canvasRelative:1,direction:"a",container:this.el,placer:i.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:"gjs-",onEndMove:function(k){return e.handleDragEnd(k,s)},document:this.el.ownerDocument},this.sortOpts||{}));T.setDropContent(f),T.startSort(),this.sorter=T,h=function(k){k&&(T.moved=!1),T.endMove()},v=function(k){return T.setDropContent(k)}}this.dragStop=h,this.dragContent=v,r.trigger("canvas:dragenter",s,f)}},o.prototype.handleDragEnd=function(n,e){var t=this.em;this.over=!1,n&&(t.set("dragResult",n),t.trigger("canvas:drop",e,n)),t.runDefault({preserveSelected:1})},o.prototype.handleDragOver=function(n){n.preventDefault(),this.em.trigger("canvas:dragover",n)},o.prototype.handleDrop=function(n){n.preventDefault();var e=this.dragContent,t=n.dataTransfer,r=this.getContentByData(t).content;r&&e&&e(r),this.endDrop(!r,n)},o.prototype.getContentByData=function(n){var e=this.em,t=n&&n.types,r=n&&n.files||[],i=e.get("dragContent"),s=n&&n.getData("text");if(r.length){s=[];for(var u=0;u<r.length;u++){var c=r[u],f=c.type.split("/")[0];f=="image"&&s.push({type:f,file:c,attributes:{alt:c.name}})}}else if(i)s=i;else if((0,U.indexOf)(t,"text/html")>=0)s=n&&n.getData("text/html").replace(/<\/?meta[^>]*>/g,"");else if((0,U.indexOf)(t,"text/uri-list")>=0)s={type:"link",attributes:{href:s},content:s};else if((0,U.indexOf)(t,"text/json")>=0){var h=n&&n.getData("text/json");h&&(s=JSON.parse(h))}else t.length===1&&t[0]==="text/plain"&&(s="<div>".concat(s,"</div>"));var v={content:s};return e.trigger("canvas:dragdata",n,v),v},o}();const IA=jA;var NA=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),di=function(){return di=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},di.apply(this,arguments)},RA=function(o,n,e){if(e||arguments.length===2)for(var t=0,r=n.length,i;t<r;t++)(i||!(t in n))&&(i||(i=Array.prototype.slice.call(n,0,t)),i[t]=n[t]);return o.concat(i||Array.prototype.slice.call(n))},FA=function(o){NA(n,o);function n(e,t){var r=o.call(this,{model:e})||this;r.dragging=!1,r.loaded=!1,r.lastMaxHeight=0,r.tools={},(0,U.bindAll)(r,"updateClientY","stopAutoscroll","autoscroll","_emitUpdate");var i=r.el;r.module._config=di(di({},r.config||{}),{frameView:r}),r.frameWrapView=t,r.showGlobalTools=(0,U.debounce)(r.showGlobalTools.bind(r),50);var s=r.getCanvasModel();return r.listenTo(e,"change:head",r.updateHead),r.listenTo(s,"change:styles",r.renderStyles),e.view=r,(0,Xe.setViewEl)(i,r),r}return Object.defineProperty(n.prototype,"tagName",{get:function(){return"iframe"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"attributes",{get:function(){return{allowfullscreen:"allowfullscreen"}},enumerable:!1,configurable:!0}),n.prototype.getBoxRect=function(){var e=this,t=e.el,r=e.module,i=r.getCanvasView(),s=r.getCoords(),u=t.getBoundingClientRect(),c=i.getCanvasOffset(),f=i.getViewportDelta(),h=r.getZoomMultiplier(),v=(u.x-c.left-f.x-s.x)*h,m=(u.y-c.top-f.y-s.y)*h,_=u.width*h,C=u.height*h;return{x:v,y:m,width:_,height:C}},n.prototype.updateHead=function(){var e=this.model,t=this.getHead(),r=[],i=[],s=e.head,u=e.previous("head"),c=function(h){return h===void 0&&(h={}),Object.keys(h).sort().map(function(v){return"[".concat(v,'="').concat(h[v],'"]')}).join("")},f=function(h,v,m){h.forEach(function(_){var C=_.tag,T=_.attributes,k=v.some(function(P){return P.tag===C&&c(P.attributes)===c(T)});!k&&m.push(_)})};f(s,u,i),f(u,s,r),r.forEach(function(h){var v,m=t.querySelector("".concat(h.tag).concat(c(h.attributes)));(v=m==null?void 0:m.parentNode)===null||v===void 0||v.removeChild(m)}),(0,wt.af)(t,i)},n.prototype.getEl=function(){return this.el},n.prototype.getCanvasModel=function(){var e;return(e=this===null||this===void 0?void 0:this.em.Canvas)===null||e===void 0?void 0:e.getModel()},n.prototype.getWindow=function(){return this.getEl().contentWindow},n.prototype.getDoc=function(){return this.getEl().contentDocument},n.prototype.getHead=function(){return this.getDoc().querySelector("head")},n.prototype.getBody=function(){return this.getDoc().querySelector("body")},n.prototype.getWrapper=function(){return this.getBody().querySelector("[data-gjs-type=wrapper]")},n.prototype.getJsContainer=function(){return this.jsContainer||(this.jsContainer=(0,wt.a_)("div",{class:"".concat(this.ppfx,"js-cont")})),this.jsContainer},n.prototype.getToolsEl=function(){var e;return(e=this.frameWrapView)===null||e===void 0?void 0:e.elTools},n.prototype.getGlobalToolsEl=function(){return this.em.Canvas.getGlobalToolsEl()},n.prototype.getHighlighter=function(){return this._getTool("[data-hl]")},n.prototype.getBadgeEl=function(){return this._getTool("[data-badge]")},n.prototype.getOffsetViewerEl=function(){return this._getTool("[data-offset]")},n.prototype.getRect=function(){return this.rect||(this.rect=this.el.getBoundingClientRect()),this.rect},n.prototype.getOffsetRect=function(){var e=this.el,t=this.getBody(),r=t.scrollTop,i=t.scrollLeft,s=e.offsetHeight,u=e.offsetWidth;return{top:e.offsetTop,left:e.offsetLeft,height:s,width:u,scrollTop:r,scrollLeft:i,scrollBottom:r+s,scrollRight:i+u}},n.prototype._getTool=function(e){var t=this.tools,r=this.getToolsEl();return t[e]||(t[e]=r.querySelector(e)),t[e]},n.prototype.remove=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return this._toggleEffects(!1),this.tools={},(e=this.wrapper)===null||e===void 0||e.remove(),bi.prototype.remove.apply(this,t),this},n.prototype.startAutoscroll=function(){var e=this;this.lastMaxHeight=this.getWrapper().offsetHeight-this.el.offsetHeight,setTimeout(function(){e._toggleAutoscrollFx(!0),requestAnimationFrame(e.autoscroll)},0)},n.prototype.autoscroll=function(){if(this.dragging){var e=this.lastClientY,t=this.em.Canvas,r=this.getWindow(),i=r.pageYOffset,s=e||0,u=t.getConfig().autoscrollLimit,c=this.getRect().height-u,f=i;if(s<u&&(f-=u-s),s>c&&(f+=s-c),!(0,U.isUndefined)(e)&&f!==i&&f>0&&f<this.lastMaxHeight){var h=this.getGlobalToolsEl();h.style.opacity="0",this.showGlobalTools(),r.scrollTo(0,f),t.spots.refreshDbn()}requestAnimationFrame(this.autoscroll)}},n.prototype.updateClientY=function(e){e.preventDefault(),this.lastClientY=(0,wt.G2)(e).clientY*this.em.getZoomDecimal()},n.prototype.showGlobalTools=function(){this.getGlobalToolsEl().style.opacity=""},n.prototype.stopAutoscroll=function(){this.dragging&&this._toggleAutoscrollFx(!1)},n.prototype._toggleAutoscrollFx=function(e){this.dragging=e;var t=this.getWindow(),r=e?"on":"off",i={on:wt.on,off:wt.AU};i[r](t,"mousemove dragover",this.updateClientY),i[r](t,"mouseup",this.stopAutoscroll)},n.prototype.render=function(){var e=this,t=e.$el,r=e.ppfx,i=e.em;return t.attr({class:"".concat(r,"frame")}),this.renderScripts(),i.trigger("frame:render",this),this},n.prototype.renderScripts=function(){var e=this,t=this,r=t.el,i=t.model,s=t.em,u="frame:load",c={el:r,model:i,view:this},f=this.getCanvasModel(),h=function(v){var m;if(v.length>0){var _=v.shift(),C=(0,wt.a_)("script",di({type:"text/javascript"},(0,U.isString)(_)?{src:_}:_));(m=r.contentDocument)===null||m===void 0||m.head.appendChild(C),C.hasAttribute("nomodule")&&"noModule"in HTMLScriptElement.prototype?h(v):C.onerror=C.onload=h.bind(null,v)}else s==null||s.trigger(dd.frameLoadHead,c),e.renderBody(),s==null||s.trigger(dd.frameLoadBody,c),s==null||s.trigger(u,c)};r.onload=function(){var v=e.config.frameContent;if(v){var m=e.getDoc();m.open(),m.write(v),m.close()}c.window=e.getWindow(),s==null||s.trigger("".concat(u,":before"),c),s==null||s.trigger(dd.frameLoad,c),e.renderHead(),h(RA([],f.get("scripts"),!0))}},n.prototype.renderStyles=function(e){e===void 0&&(e={});var t=this.getHead(),r=this.getCanvasModel(),i=function(v){return v===void 0&&(v=[]),v.map(function(m){return{tag:"link",attributes:di({rel:"stylesheet"},(0,U.isString)(m)?{href:m}:m)}})},s=i(e.prev||r.previous("styles")),u=i(r==null?void 0:r.get("styles")),c=[],f=[],h=function(v,m,_){v.forEach(function(C){var T=C.attributes.href,k=m.some(function(P){return P.attributes.href===T});!k&&_.push(C)})};h(u,s,f),h(s,u,c),c.forEach(function(v){var m,_=t.querySelector('link[href="'.concat(v.attributes.href,'"]'));(m=_==null?void 0:_.parentNode)===null||m===void 0||m.removeChild(_)}),(0,wt.af)(t,f)},n.prototype.renderHead=function(){var e,t=this,r=t.model,i=t.em,s=r.root,u=(e=i==null?void 0:i.Components)===null||e===void 0?void 0:e.getType(iu).view;u&&(this.headView=new u({el:this.getHead(),model:s.head,config:di(di({},s.config),{frameView:this})}).render())},n.prototype.renderBody=function(){var e=this,t,r,i,s=this,u=s.config,c=s.em,f=s.model,h=s.ppfx,v=this.getDoc(),m=this.getBody(),_=this.getWindow(),C=f.hasAutoHeight(),T=c.config;_._isEditor=!0,this.renderStyles({prev:[]});var k="#ffca6f";(0,wt.BC)(m,`<style>
      `.concat(T.baseCss||u.frameStyle||"",`

      `).concat(C?"body { overflow: hidden }":"",`

      [data-gjs-type="wrapper"] {
        `).concat(C?"":"min-height: 100vh;",`
        padding-top: 0.001em;
      }

      .`).concat(h,`dashed *[data-gjs-highlightable] {
        outline: 1px dashed rgba(170,170,170,0.7);
        outline-offset: -2px;
      }

      .`).concat(h,`selected {
        outline: 2px solid #3b97e3 !important;
        outline-offset: -2px;
      }

      .`).concat(h,`selected-parent {
        outline: 2px solid `).concat(k,` !important
      }

      .`).concat(h,`no-select {
        user-select: none;
        -webkit-user-select:none;
        -moz-user-select: none;
      }

      .`).concat(h,`freezed {
        opacity: 0.5;
        pointer-events: none;
      }

      .`).concat(h,`no-pointer {
        pointer-events: none;
      }

      .`).concat(h,`pointer-init {
        pointer-events: initial;
      }

      .`).concat(h,`plh-image {
        background: #f5f5f5;
        border: none;
        height: 100px;
        width: 100px;
        display: block;
        outline: 3px solid #ffca6f;
        cursor: pointer;
        outline-offset: -2px
      }

      .`).concat(h,`grabbing {
        cursor: grabbing;
        cursor: -webkit-grabbing;
      }

      .`).concat(h,`is__grabbing {
        overflow-x: hidden;
      }

      .`).concat(h,`is__grabbing,
      .`).concat(h,`is__grabbing * {
        cursor: grabbing !important;
      }

      `).concat(T.canvasCss||"",`
      `).concat(T.protectedCss||"",`
    </style>`));var P=f.root,L=(((t=c==null?void 0:c.Components)===null||t===void 0?void 0:t.getType("wrapper"))||{}).view;L&&(this.wrapper=new L({model:P,config:di(di({},P.config),{em:c,frameView:this})}).render(),(0,wt.BC)(m,(r=this.wrapper)===null||r===void 0?void 0:r.el),(0,wt.BC)(m,new eS({collection:f.getStyles(),config:di(di({},c.Css.getConfig()),{frameView:this})}).render().el),(0,wt.BC)(m,this.getJsContainer()),(0,wt.on)(m,"click",function(D){var V;return D&&((V=D.target)===null||V===void 0?void 0:V.tagName)=="A"&&D.preventDefault()}),(0,wt.on)(m,"submit",function(D){return D&&D.preventDefault()}),[{event:"keydown keyup keypress",class:"KeyboardEvent"},{event:"mousedown mousemove mouseup",class:"MouseEvent"},{event:"pointerdown pointermove pointerup",class:"PointerEvent"},{event:"wheel",class:"WheelEvent",opts:{passive:!u.infiniteCanvas}}].forEach(function(D){return D.event.split(" ").forEach(function(V){v.addEventListener(V,function(re){return e.el.dispatchEvent((0,wt.yL)(re,D.class))},D.opts)})}),this._toggleEffects(!0),(0,Xe.hasDnd)(c)&&(this.droppable=new IA(c,(i=this.wrapper)===null||i===void 0?void 0:i.el)),this.loaded=!0,f.trigger("loaded"))},n.prototype._toggleEffects=function(e){var t=e?wt.on:wt.AU,r=this.getWindow();r&&t(r,"".concat(wt.D8," resize"),this._emitUpdate)},n.prototype._emitUpdate=function(){this.model._emitUpdated()},n}(bi);const VA=FA;var pS=vn(14),zA=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Kl=function(){return Kl=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},Kl.apply(this,arguments)},HA=function(o){zA(n,o);function n(e,t){var r=o.call(this,{model:e})||this;return(0,U.bindAll)(r,"onScroll","frameLoaded","updateOffset","remove","startDrag"),Kl(Kl({},e.config),{frameWrapView:r}),r.cv=t,r.frame=new VA(e,r),r.classAnim="".concat(r.ppfx,"frame-wrapper--anim"),r.updateOffset=(0,U.debounce)(r.updateOffset.bind(r),0),r.updateSize=(0,U.debounce)(r.updateSize.bind(r),0),r.listenTo(e,"loaded",r.frameLoaded),r.listenTo(e,"change:x change:y",r.updatePos),r.listenTo(e,"change:width change:height",r.updateSize),r.listenTo(e,"destroy remove",r.remove),r.updatePos(),r.setupDragger(),r}return n.prototype.events=function(){return{"click [data-action-remove]":"remove","mousedown [data-action-move]":"startDrag"}},n.prototype.setupDragger=function(){var e=this,t=this,r=t.module,i=t.model,s,u,c,f=function(h){r.toggleFramesEvents(h)};this.dragger=new pS.A({onStart:function(){var h=i.attributes,v=h.x,m=h.y;c=e.em.getZoomMultiplier(),s=v,u=m,f(!1)},onEnd:function(){return f(!0)},setPosition:function(h){i.set({x:s+h.x*c,y:u+h.y*c})}})},n.prototype.startDrag=function(e){var t;e&&((t=this.dragger)===null||t===void 0||t.start(e))},n.prototype.__clear=function(e){var t=this.frame;t&&t.remove(e),(0,wt.YZ)(this.elTools)},n.prototype.remove=function(e){var t=this;return this.__clear(e),bi.prototype.remove.apply(this,e),["frame","dragger","cv","elTools"].forEach(function(r){return t[r]=0}),this},n.prototype.updateOffset=function(){var e,t=this,r=t.em,i=t.$el,s=t.frame;!r||r.destroyed||(r.runDefault({preserveSelected:1}),i.removeClass(this.classAnim),(e=s==null?void 0:s.model)===null||e===void 0||e._emitUpdated())},n.prototype.updatePos=function(e){var t=this,r=t.model,i=t.el,s=r.attributes,u=s.x,c=s.y,f=i.style;this.frame.rect=void 0,f.left=isNaN(u)?u:"".concat(u,"px"),f.top=isNaN(c)?c:"".concat(c,"px"),e&&this.updateOffset()},n.prototype.updateSize=function(){this.updateDim()},n.prototype.updateDim=function(){var e=this,t=e.em,r=e.el,i=e.$el,s=e.model,u=e.classAnim,c=e.frame;if(c){c.rect=void 0,i.addClass(u);var f=this.__handleSize(),h=f.noChanges,v=f.width,m=f.height;((0,U.isNull)(v)||(0,U.isNull)(m))&&s.set(Kl(Kl({},v?{}:{width:r.offsetWidth}),m?{}:{height:r.offsetHeight}),{silent:1}),t.stopDefault({preserveSelected:1}),h?this.updateOffset():setTimeout(this.updateOffset,350)}},n.prototype.onScroll=function(){var e=this,t=e.frame,r=e.em;r.trigger("frame:scroll",{frame:t,body:t.getBody(),target:t.getWindow()})},n.prototype.frameLoaded=function(){var e=this,t=e.frame;e.config,t.getWindow().onscroll=this.onScroll,this.updateDim()},n.prototype.__handleSize=function(){var e,t,r="px",i=this,s=i.model,u=i.el,c=u.style,f=s.attributes,h=f.width,v=f.height,m=c.width||"",_=c.height||"",C=h||"",T=v||"",k=m==C&&_==T,P=(0,U.isNumber)(C)?"".concat(C).concat(r):C,L=(0,U.isNumber)(T)?"".concat(T).concat(r):T;if(c.width=P,s.hasAutoHeight()){var D=this.frame.el;if(D.contentDocument){var V=D.contentDocument,re=new ResizeObserver(function(){c.height="".concat(V.body.scrollHeight,"px")});re.observe(V.body),(e=this.sizeObserver)===null||e===void 0||e.disconnect(),this.sizeObserver=re}}else c.height=L,(t=this.sizeObserver)===null||t===void 0||t.disconnect(),delete this.sizeObserver;return{noChanges:k,width:h,height:v,newW:C,newH:T}},n.prototype.render=function(){var e=this,t=e.frame,r=e.$el,i=e.ppfx,s=e.cv,u=e.model,c=e.el,f=u.attributes.onRender;this.__clear(),this.__handleSize(),t.render(),r.empty().attr({class:"".concat(i,"frame-wrapper")}).append(`
      <div class="`.concat(i,`frame-wrapper__top gjs-two-color" data-frame-top>
        <div class="`).concat(i,`frame-wrapper__name" data-action-move>
          `).concat(u.get("name")||"",`
        </div>
        <div class="`).concat(i,`frame-wrapper__top-r">
          <div class="`).concat(i,`frame-wrapper__icon" data-action-remove style="display: none">
            <svg viewBox="0 0 24 24"><path d="M19 4h-3.5l-1-1h-5l-1 1H5v2h14M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12z"></path></svg>
          </div>
        </div>
      </div>
      <div class="`).concat(i,`frame-wrapper__right" data-frame-right></div>
      <div class="`).concat(i,`frame-wrapper__left" data-frame-left></div>
      <div class="`).concat(i,`frame-wrapper__bottom" data-frame-bottom></div>
      `)).append(t.el);var h=(0,wt.a_)("div",{class:"".concat(i,"tools"),style:"pointer-events:none; display: none"},`
      <div class="`.concat(i,`highlighter" data-hl></div>
      <div class="`).concat(i,`badge" data-badge></div>
      <div class="`).concat(i,`placeholder">
        <div class="`).concat(i,`placeholder-int"></div>
      </div>
      <div class="`).concat(i,`ghost"></div>
      <div class="`).concat(i,`toolbar" style="pointer-events:all"></div>
      <div class="`).concat(i,`resizer"></div>
      <div class="`).concat(i,`offset-v" data-offset>
        <div class="gjs-marginName" data-offset-m>
          <div class="gjs-margin-v-el gjs-margin-v-top" data-offset-m-t></div>
          <div class="gjs-margin-v-el gjs-margin-v-bottom" data-offset-m-b></div>
          <div class="gjs-margin-v-el gjs-margin-v-left" data-offset-m-l></div>
          <div class="gjs-margin-v-el gjs-margin-v-right" data-offset-m-r></div>
        </div>
        <div class="gjs-paddingName" data-offset-m>
          <div class="gjs-padding-v-el gjs-padding-v-top" data-offset-p-t></div>
          <div class="gjs-padding-v-el gjs-padding-v-bottom" data-offset-p-b></div>
          <div class="gjs-padding-v-el gjs-padding-v-left" data-offset-p-l></div>
          <div class="gjs-padding-v-el gjs-padding-v-right" data-offset-p-r></div>
        </div>
      </div>
      <div class="`).concat(i,`offset-fixed-v"></div>
    `));this.elTools=h;var v=s==null?void 0:s.toolsWrapper;return v&&v.appendChild(h),f&&f({el:c,elTop:c.querySelector("[data-frame-top]"),elRight:c.querySelector("[data-frame-right]"),elBottom:c.querySelector("[data-frame-bottom]"),elLeft:c.querySelector("[data-frame-left]"),frame:u,frameWrapperView:this,remove:this.remove,startDrag:this.startDrag}),this},n}(bi);const UA=HA;var BA=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),WA=function(o){BA(n,o);function n(e,t){e===void 0&&(e={});var r=o.call(this,e,!0)||this;return r.listenTo(r.collection,"reset",r.render),r.canvasView=t.canvasView,r._module=t.module,r}return n.prototype.onRemoveBefore=function(e,t){t===void 0&&(t={}),e.forEach(function(r){return r.remove(t)})},n.prototype.onRender=function(){var e=this,t=e.$el,r=e.ppfx;t.attr({class:"".concat(r,"frames")})},n.prototype.clearItems=function(){var e=this.viewCollection||[];e.forEach(function(t){return t.remove()}),this.viewCollection=[]},n.prototype.renderView=function(e,t){return new UA(e,this.canvasView)},n}(qk);const $A=WA;var KA=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Xd=function(){return Xd=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},Xd.apply(this,arguments)},GA=function(o){KA(n,o);function n(e){var t=o.call(this,{model:e})||this;t.ready=!1,(0,U.bindAll)(t,"clearOff","onKeyPress","onWheel","onPointer");var r=t,i=r.em,s=r.pfx,u=r.ppfx,c=t.module.events;return t.className="".concat(s,"canvas ").concat(u,"no-touch-actions").concat(i.config.customUI?"":" ".concat(s,"canvas-bg")),t.clsUnscale="".concat(s,"unscale"),t._initFrames(),t.listenTo(i,c.refresh,t.clearOff),t.listenTo(i,"component:selected",t.checkSelected),t.listenTo(i,"".concat(c.coords," ").concat(c.zoom),t.updateFrames),t.listenTo(e,"change:frames",t._onFramesUpdate),t.toggleListeners(!0),t}return n.prototype.template=function(){var e=this.pfx;return`
      <div class="`.concat(e,`canvas__frames" data-frames>
        <div class="`).concat(e,`canvas__spots" data-spots></div>
      </div>
      <div id="`).concat(e,'tools" class="').concat(e,`canvas__tools" data-tools></div>
      <style data-canvas-style></style>
    `)},n.prototype._onFramesUpdate=function(){this._initFrames(),this._renderFrames()},n.prototype._initFrames=function(){var e=this,t=e.frames,r=e.model,i=e.config,s=e.em,u=r.frames;s.set("readyCanvas",0),u.once("loaded:all",function(){return s.set("readyCanvas",1)}),t==null||t.remove(),this.frames=new $A({collection:u},Xd(Xd({},i),{canvasView:this}))},n.prototype.checkSelected=function(e,t){var r;t===void 0&&(t={});var i=t.scroll,s=this.em.getCurrentFrame();i&&((r=e.views)===null||r===void 0||r.forEach(function(u){u.frameView===s&&u.scrollIntoView(i)}))},n.prototype.remove=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return(e=this.frames)===null||e===void 0||e.remove(),this.frames=void 0,bi.prototype.remove.apply(this,t),this.toggleListeners(!1),this},n.prototype.preventDefault=function(e){var t;e&&(e.preventDefault(),(t=e._parentEvent)===null||t===void 0||t.preventDefault())},n.prototype.toggleListeners=function(e){var t=this,r=t.el,i=t.config,s=e?wt.on:wt.AU;s(document,"keypress",this.onKeyPress),s(window,"scroll resize",this.clearOff),s(r,"wheel",this.onWheel,{passive:!i.infiniteCanvas}),s(r,"pointermove",this.onPointer)},n.prototype.screenToWorld=function(e,t){var r=this.module,i=r.getCoords(),s=r.getZoomMultiplier(),u=this.getViewportDelta();return{x:(e-i.x-u.x)*s,y:(t-i.y-u.y)*s}},n.prototype.onPointer=function(e){if(this.config.infiniteCanvas){var t=this.getCanvasOffset(),r=(0,wt.Xy)(),i={x:e.clientX-t.left+r.x,y:e.clientY-t.top+r.y};if(e._parentEvent){var s=e.target.getBoundingClientRect(),u=this.module.getZoomDecimal();i.x=s.left-t.left+r.x+e.clientX*u,i.y=s.top-t.top+r.y+e.clientY*u}this.model.set({pointerScreen:i,pointer:this.screenToWorld(i.x,i.y)})}},n.prototype.onKeyPress=function(e){var t=this.em,r=(0,wt.Ch)(e);r===" "&&t.getZoomDecimal()!==1&&!t.Canvas.isInputFocused()&&(this.preventDefault(e),t.Editor.runCommand("core:canvas-move"))},n.prototype.onWheel=function(e){var t=this,r=t.module,i=t.config;if(i.infiniteCanvas){this.preventDefault(e);var s=e.deltaX,u=e.deltaY,c=r.getZoomDecimal(),f=(0,wt.rp)(e),h=r.getCoords();if(f){var v=c-u*c*.01;r.setZoom(v*100);var m=this.model.getPointerCoords(gt.x2.Screen),_=this.getCanvasOffset(),C=m.x-_.width/2,T=m.y-_.height/2,k=v/c,P=C-(C-h.x)*k,L=T-(T-h.y)*k;r.setCoords(P,L)}else this.onPointer(e),r.setCoords(h.x-s,h.y-u)}},n.prototype.updateFrames=function(e){var t=this.em,r=this.toolsWrapper,i={preserveSelected:1};this.updateFramesArea(),this.clearOff(),r.style.display="none",t.trigger("canvas:update",e),this.timerZoom&&clearTimeout(this.timerZoom),this.timerZoom=setTimeout(function(){t.stopDefault(i),t.runDefault(i),r.style.display=""},300)},n.prototype.updateFramesArea=function(){var e=this,t=e.framesArea,r=e.model,i=e.module,s=e.cvStyle,u=e.clsUnscale,c=i.getZoomMultiplier();if(t){var f=r.attributes,h=f.x,v=f.y,m=i.getZoomDecimal();t.style.transform="scale(".concat(m,") translate(").concat(h*c,"px, ").concat(v*c,"px)")}s&&(s.innerHTML=`
        .`.concat(u," { scale: ").concat(c,` }
      `))},n.prototype.fitViewport=function(e){var t,r;e===void 0&&(e={});var i=this,s=i.em,u=i.module,c=i.model,f=this.getCanvasOffset(),h=e.el,v=h&&((t=(0,Xe.getComponentView)(h))===null||t===void 0?void 0:t.frameView),m=v?v.model:e.frame||s.getCurrentFrameModel()||c.frames.at(0),_=m.attributes,C=_.x,T=_.y,k={x:C??0,y:T??0,width:m.width,height:m.height};if(h){var P=this.getElBoxRect(h);k.x=k.x+P.x,k.y=k.y+P.y,k.width=P.width,k.height=P.height}var L=e.ignoreHeight,D=(r=e.gap)!==null&&r!==void 0?r:0,V=(0,U.isNumber)(D),re=V?D:D.x,_e=V?D:D.y,Q=k.width+re*2,pe=k.height+_e*2,ne=f.width,me=f.height,Y=ne/Q,W=me/pe,te=L?Y:Math.min(Y,W),q=te*100;u.setZoom(q);var ge=-k.x+(m.width>=ne?ne/2-Q/2:-re),R=-k.y+me/2-pe/2,ke={x:(ge+re)*te,y:(R+_e)*te};if(L){var he=u.getZoomMultiplier(),Le=me*he,$e=Le-me,be=$e/2;ke.y=(-k.y+_e)*te-be/he}u.setCoords(ke.x,ke.y)},n.prototype.isElInViewport=function(e){var t=(0,Xe.getElement)(e),r=(0,wt.C8)(t),i=this.getFrameOffset(t),s=r.top,u=r.left;return s>=0&&u>=0&&s<=i.height&&u<=i.width},n.prototype.offset=function(e,t){t===void 0&&(t={});var r=t.noScroll,i=(0,wt.C8)(e),s=r?{x:0,y:0}:(0,wt.Xy)(e);return{top:i.top+s.y,left:i.left+s.x,width:i.width,height:i.height}},n.prototype.getRectToScreen=function(e){var t,r,i,s,u=this.module.getZoomDecimal(),c=this.module.getCoords(),f=this.getViewportDelta(),h=((t=e.x)!==null&&t!==void 0?t:0)*u+c.x+f.x||0,v=((r=e.y)!==null&&r!==void 0?r:0)*u+c.y+f.y||0;return{x:h,y:v,width:((i=e.width)!==null&&i!==void 0?i:0)*u,height:((s=e.height)!==null&&s!==void 0?s:0)*u}},n.prototype.getElBoxRect=function(e,t){var r,i,s;t===void 0&&(t={});var u=this.module,c=(0,wt.C8)(e),f=c.width,h=c.height,v=c.left,m=c.top,_=(r=(0,Xe.getComponentView)(e))===null||r===void 0?void 0:r.frameView,C=_==null?void 0:_.getBoxRect(),T=u.getZoomMultiplier(),k=(i=C==null?void 0:C.x)!==null&&i!==void 0?i:0,P=(s=C==null?void 0:C.y)!==null&&s!==void 0?s:0,L=this.el,D=(0,wt.Xy)(),V=v+k+(L.scrollLeft+D.x)*T,re=m+P+(L.scrollTop+D.y)*T,_e={x:V,y:re,width:f,height:h};return t.local&&(_e.x=v,_e.y=m),t.toScreen?this.getRectToScreen(_e):_e},n.prototype.getViewportRect=function(e){e===void 0&&(e={});var t=this.getCanvasOffset(),r=t.top,i=t.left,s=t.width,u=t.height,c=this.module;if(e.toWorld){var f=c.getZoomMultiplier(),h=c.getCoords(),v=this.getViewportDelta(),m=-h.x-v.x||0,_=-h.y-v.y||0;return{x:m*f,y:_*f,width:s*f,height:u*f}}else return{x:i,y:r,width:s,height:u}},n.prototype.getViewportDelta=function(e){var t=this.module.getZoomMultiplier(),r=this.getCanvasOffset(),i=r.width,s=r.height,u=i*t,c=s*t,f=u-i,h=c-s;return{x:f/2/t,y:h/2/t}},n.prototype.clearOff=function(){this.frmOff=void 0,this.cvsOff=void 0},n.prototype.getFrameOffset=function(e){var t;if(!this.frmOff||e){var r=(t=this.frame)===null||t===void 0?void 0:t.el,i=e==null?void 0:e.ownerDocument.defaultView,s=i?i.frameElement:r;this.frmOff=this.offset(s||r)}return this.frmOff},n.prototype.getCanvasOffset=function(){return this.cvsOff||(this.cvsOff=this.offset(this.el)),this.cvsOff},n.prototype.getElementPos=function(e,t){t===void 0&&(t={});var r=this.module.getZoomDecimal(),i=this.getFrameOffset(e),s=this.el,u=this.getCanvasOffset(),c=this.offset(e,t),f=t.avoidFrameOffset?0:i.top,h=t.avoidFrameOffset?0:i.left,v=t.avoidFrameZoom?c.top:c.top*r,m=t.avoidFrameZoom?c.left:c.left*r,_=t.avoidFrameOffset?v:v+f-u.top+s.scrollTop,C=t.avoidFrameOffset?m:m+h-u.left+s.scrollLeft,T=t.avoidFrameZoom?c.height:c.height*r,k=t.avoidFrameZoom?c.width:c.width*r;return{top:_,left:C,height:T,width:k,zoom:r,rect:c}},n.prototype.getElementOffsets=function(e){if(!e||(0,wt.ir)(e))return{};var t={},r=window.getComputedStyle(e),i=this.module.getZoomDecimal(),s=["marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"];return s.forEach(function(u){t[u]=parseFloat(r[u])*i}),t},n.prototype.getPosition=function(e){var t;e===void 0&&(e={});var r=(t=this.frame)===null||t===void 0?void 0:t.el.contentDocument;if(!r)return{top:0,left:0,width:0,height:0};var i=r.body,s=this.module.getZoomDecimal(),u=this.getFrameOffset(),c=this.getCanvasOffset(),f=e.noScroll;return{top:u.top+(f?0:i.scrollTop)*s-c.top,left:u.left+(f?0:i.scrollLeft)*s-c.left,width:c.width,height:c.height}},n.prototype.updateScript=function(e){var t=e.model,r=t.getId();if(!e.scriptContainer){e.scriptContainer=(0,wt.a_)("div",{"data-id":r});var i=this.getJsContainer();i==null||i.appendChild(e.scriptContainer)}e.el.id=r,e.scriptContainer.innerHTML="";var s=document.createElement("script"),u=t.getScriptString(),c=t.get("script-props")?u:`function(){
`.concat(u,`
;}`),f=JSON.stringify(t.__getScriptProps());s.innerHTML=`
      setTimeout(function() {
        var item = document.getElementById('`.concat(r,`');
        if (!item) return;
        (`).concat(c,".bind(item))(").concat(f,`)
      }, 1);`),setTimeout(function(){var h=e.scriptContainer;h==null||h.appendChild(s)},0)},n.prototype.getJsContainer=function(e){var t=this.getFrameView(e);return t==null?void 0:t.getJsContainer()},n.prototype.getFrameView=function(e){return(e==null?void 0:e.frameView)||this.em.getCurrentFrame()},n.prototype._renderFrames=function(){if(this.ready){var e=this,t=e.model,r=e.frames,i=e.em,s=e.framesArea,u=t.frames;u.listenToLoad(),r.render();var c=u.at(0),f=c==null?void 0:c.view;i.setCurrentFrame(f),s==null||s.appendChild(r.el),this.frame=f,this.updateFramesArea()}},n.prototype.renderFrames=function(){this._renderFrames()},n.prototype.render=function(){var e=this,t=e.el,r=e.$el,i=e.ppfx,s=e.config,u=e.em;r.html(this.template());var c=r.find("[data-frames]");this.framesArea=c.get(0);var f=r.find("[data-tools]");return this.toolsWrapper=f.get(0),f.append(`
      <div class="`.concat(i,"tools ").concat(i,`tools-gl" style="pointer-events:none">
        <div class="`).concat(i,`placeholder">
          <div class="`).concat(i,`placeholder-int"></div>
        </div>
      </div>
      <div id="`).concat(i,`tools" style="pointer-events:none">
        `).concat(s.extHl?'<div class="'.concat(i,'highlighter-sel"></div>'):"",`
        <div class="`).concat(i,`badge"></div>
        <div class="`).concat(i,`ghost"></div>
        <div class="`).concat(i,`toolbar" style="pointer-events:all"></div>
        <div class="`).concat(i,`resizer"></div>
        <div class="`).concat(i,`offset-v"></div>
        <div class="`).concat(i,`offset-fixed-v"></div>
      </div>
    `)),this.toolsEl=t.querySelector("#".concat(i,"tools")),this.hlEl=t.querySelector(".".concat(i,"highlighter")),this.badgeEl=t.querySelector(".".concat(i,"badge")),this.placerEl=t.querySelector(".".concat(i,"placeholder")),this.ghostEl=t.querySelector(".".concat(i,"ghost")),this.toolbarEl=t.querySelector(".".concat(i,"toolbar")),this.resizerEl=t.querySelector(".".concat(i,"resizer")),this.offsetEl=t.querySelector(".".concat(i,"offset-v")),this.fixedOffsetEl=t.querySelector(".".concat(i,"offset-fixed-v")),this.toolsGlobEl=t.querySelector(".".concat(i,"tools-gl")),this.spotsEl=t.querySelector("[data-spots]"),this.cvStyle=t.querySelector("[data-canvas-style]"),this.el.className=(0,Xe.getUiClass)(u,this.className),this.ready=!0,this._renderFrames(),this},n}(bi);const YA=GA;var XA=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Ns=function(){return Ns=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},Ns.apply(this,arguments)},qA=function(o,n,e){if(e||arguments.length===2)for(var t=0,r=n.length,i;t<r;t++)(i||!(t in n))&&(i||(i=Array.prototype.slice.call(n,0,t)),i[t]=n[t]);return o.concat(i||Array.prototype.slice.call(n))},JA=function(o){XA(n,o);function n(e){var t=o.call(this,e,"Canvas",gk)||this;return t.events=zd,t.framesById={},t.canvas=new Uk(t),t.spots=new $k(t),t.model=t.canvas,t.startAutoscroll=t.startAutoscroll.bind(t),t.stopAutoscroll=t.stopAutoscroll.bind(t),t}return n.prototype.getCanvasView=function(){return this.canvasView},n.prototype.postLoad=function(){this.model.init()},n.prototype.getModel=function(){return this.canvas},n.prototype.getElement=function(){return this.getCanvasView().el},n.prototype.getFrame=function(e){return this.getFrames()[e||0]},n.prototype.getFrameEl=function(){var e=(this.canvasView||{}).frame;return e==null?void 0:e.el},n.prototype.getFramesEl=function(){var e;return(e=this.canvasView)===null||e===void 0?void 0:e.framesArea},n.prototype.getWindow=function(){var e=(this.canvasView||{}).frame;return e==null?void 0:e.getWindow()},n.prototype.getDocument=function(){var e=this.getFrameEl();return e==null?void 0:e.contentDocument},n.prototype.getBody=function(){var e=this.getDocument();return e==null?void 0:e.body},n.prototype._getLocalEl=function(e,t,r){var i=e,s=t==null?void 0:t.frameView;return i=s?s[r]():i,i},n.prototype.getGlobalToolsEl=function(){var e;return(e=this.canvasView)===null||e===void 0?void 0:e.toolsGlobEl},n.prototype.getToolsEl=function(e){return this._getLocalEl(this.getCanvasView().toolsEl,e,"getToolsEl")},n.prototype.getHighlighter=function(e){return this._getLocalEl(this.getCanvasView().hlEl,e,"getHighlighter")},n.prototype.getBadgeEl=function(e){return this._getLocalEl(this.getCanvasView().badgeEl,e,"getBadgeEl")},n.prototype.getPlacerEl=function(){return this.getCanvasView().placerEl},n.prototype.getGhostEl=function(){return this.getCanvasView().ghostEl},n.prototype.getToolbarEl=function(){return this.getCanvasView().toolbarEl},n.prototype.getResizerEl=function(){return this.getCanvasView().resizerEl},n.prototype.getOffsetViewerEl=function(e){return this._getLocalEl(this.getCanvasView().offsetEl,e,"getOffsetViewerEl")},n.prototype.getFixedOffsetViewerEl=function(){return this.getCanvasView().fixedOffsetEl},n.prototype.getSpotsEl=function(){var e;return(e=this.canvasView)===null||e===void 0?void 0:e.spotsEl},n.prototype.render=function(){var e;return(e=this.canvasView)===null||e===void 0||e.remove(),this.canvasView=new YA(this.canvas),this.canvasView.render().el},n.prototype.getOffset=function(){var e=this.offset(this.getFrameEl()),t=this.offset(this.getElement());return{top:e.top-t.top,left:e.left-t.left}},n.prototype.offset=function(e){return this.getCanvasView().offset(e)},n.prototype.setCustomBadgeLabel=function(e){this.config.customBadgeLabel=e},n.prototype.getElementPos=function(e,t){return this.getCanvasView().getElementPos(e,t)},n.prototype.getElementOffsets=function(e){return this.getCanvasView().getElementOffsets(e)},n.prototype.getRect=function(){var e,t=(e=this.getCanvasView().getPosition())!==null&&e!==void 0?e:{},r=t.top,i=r===void 0?0:r,s=t.left,u=s===void 0?0:s;return Ns(Ns({},this.getCanvasView().getCanvasOffset()),{topScroll:i,leftScroll:u})},n.prototype.getTargetToElementDim=function(e,t,r){r===void 0&&(r={});var i=r||{},s=this.getCanvasView().getPosition();if(s){var u=i.elPos||this.getCanvasView().getElementPos(t),c=r.toRight||0,f=i.targetHeight||e.offsetHeight,h=i.targetWidth||e.offsetWidth,v=i.event||null,m=u.top-f,_=u.left;_+=c?u.width:0,_=c?_-h:_;var C=_<s.left?s.left:_,T=m<s.top?s.top:m;T=T>u.top+u.height?u.top+u.height:T;var k={top:T,left:C,elementTop:u.top,elementLeft:u.left,elementWidth:u.width,elementHeight:u.height,targetWidth:e.offsetWidth,targetHeight:e.offsetHeight,canvasTop:s.top,canvasLeft:s.left,canvasWidth:s.width,canvasHeight:s.height};return v&&this.em&&this.em.trigger(v,k),k}},n.prototype.canvasRectOffset=function(e,t,r){var i=this;r===void 0&&(r={});var s=function(c){var f=c.defaultView;return f==null?void 0:f.frameElement},u=function(c,f,h){f===void 0&&(f=1);var v=i.em.getZoomDecimal(),m=f?"top":"left",_=c.ownerDocument,C=r.offset?s(_):{},T=C.offsetTop,k=T===void 0?0:T,P=C.offsetLeft,L=P===void 0?0:P,D=_.body||{},V=D.scrollTop,re=V===void 0?0:V,_e=D.scrollLeft,Q=_e===void 0?0:_e,pe=f?re:Q,ne=f?k:L;return h[m]-(pe-ne)*v};return{top:u(e,1,t),left:u(e,0,t)}},n.prototype.getTargetToElementFixed=function(e,t,r){r===void 0&&(r={});var i=r.pos||this.getElementPos(e,{noScroll:!0}),s=r.canvasOff||this.canvasRectOffset(e,i),u=t.offsetHeight||0,c=t.offsetWidth||0,f=i.left+i.width,h=this.getCanvasView(),v=h.getPosition(),m=h.getFrameOffset(e),_=r.event,C=-u,T=(0,U.isUndefined)(r.left)?i.width-c:r.left;if(T=i.left<-T?-i.left:T,T=f>v.width?T-(f-v.width):T,s.top<u){var k=i.height+u,P=k<m.height;P?C=C+k:C=-s.top<i.height?-s.top:i.height}var L={top:C,left:T,canvasOffsetTop:s.top,canvasOffsetLeft:s.left,elRect:i,canvasOffset:s,canvasRect:v,targetWidth:c,targetHeight:u};return _&&this.em.trigger(_,L),L},n.prototype.getMouseRelativePos=function(e,t){t===void 0&&(t={});var r=t.subWinOffset,i=e.target.ownerDocument,s=i.defaultView||i.parentWindow,u=s.frameElement,c=r?s.pageYOffset:0,f=r?s.pageXOffset:0,h=this.getZoomMultiplier(),v=0,m=0;if(u){var _=u.getBoundingClientRect();v=_.top||0,m=_.left||0}return{y:(e.clientY+v-c)*h,x:(e.clientX+m-f)*h}},n.prototype.getMouseRelativeCanvas=function(e,t){var r,i=this.getZoomDecimal(),s=(r=this.getCanvasView().getPosition(t))!==null&&r!==void 0?r:{},u=s.top,c=u===void 0?0:u,f=s.left,h=f===void 0?0:f;return{y:e.clientY*i+c,x:e.clientX*i+h}},n.prototype.hasFocus=function(){return this.getDocument().hasFocus()},n.prototype.isInputFocused=function(){var e=this.getDocument(),t=this.getFrameEl(),r=qA(["body"],this.config.notTextable,!0),i=t&&document.activeElement===t,s=i?e&&e.activeElement:document.activeElement;return s&&!r.some(function(u){return s.matches(u)})},n.prototype.scrollTo=function(e,t){t===void 0&&(t={});var r=(0,Xe.getElement)(e),i=r&&(0,Xe.getViewEl)(r);i&&i.scrollIntoView(t)},n.prototype.startAutoscroll=function(e){var t=e&&e.view||this.em.getCurrentFrame();t&&t.startAutoscroll()},n.prototype.stopAutoscroll=function(e){var t=e&&e.view||this.em.getCurrentFrame();t&&t.stopAutoscroll()},n.prototype.setZoom=function(e){return this.canvas.set("zoom",typeof e=="string"?parseFloat(e):e),this},n.prototype.getZoom=function(){return parseFloat(this.canvas.get("zoom"))},n.prototype.setCoords=function(e,t,r){var i;r===void 0&&(r={});var s=e||e===0,u=t||t===0,c={x:this.canvas.get("x"),y:this.canvas.get("y")};if(s&&(c.x=parseFloat("".concat(e))),u&&(c.y=parseFloat("".concat(t))),r.toWorld){var f=(i=this.canvasView)===null||i===void 0?void 0:i.getViewportDelta();f&&(s&&(c.x=c.x-f.x),u&&(c.y=c.y-f.y))}return this.canvas.set(c),this},n.prototype.getCoords=function(){var e=this.canvas.attributes,t=e.x,r=e.y;return{x:t,y:r}},n.prototype.getPointer=function(e){var t=this.canvas.attributes,r=t.pointer,i=t.pointerScreen;return e?i:r},n.prototype.getZoomDecimal=function(){return this.getZoom()/100},n.prototype.getZoomMultiplier=function(){var e=this.getZoomDecimal();return e?1/e:1},n.prototype.fitViewport=function(e){var t;(t=this.canvasView)===null||t===void 0||t.fitViewport(e)},n.prototype.toggleFramesEvents=function(e){var t=this.getFramesEl().style;t.pointerEvents=e?"":"none"},n.prototype.getFrames=function(){return this.canvas.frames.map(function(e){return e})},n.prototype.addFrame=function(e,t){return e===void 0&&(e={}),t===void 0&&(t={}),this.canvas.frames.add(new JC(this,Ns({},e)),t)},n.prototype.getLastDragResult=function(){return this.em.get("dragResult")},n.prototype.addSpot=function(e,t){var r;t===void 0&&(t={});var i=e,s=this.getSpots(i);if(s.length){var u=s[0];return u.set(i),u}var c=i.componentView||((r=i.component)===null||r===void 0?void 0:r.view),f=new mi.A(this,Ns(Ns({},i),{id:i.id||"cs_".concat(i.type,"_").concat(c==null?void 0:c.cid),type:i.type||""}));return this.spots.add(f,t),f},n.prototype.getSpots=function(e){return e===void 0&&(e={}),this.spots.where(e.id?{id:e.id}:e)},n.prototype.removeSpots=function(e){e===void 0&&(e={});var t=(0,U.isArray)(e)?e:this.getSpots(e),r=this.spots.remove(t);return r},n.prototype.hasCustomSpot=function(e){var t=this.config.customSpots;return!!(t===!0||t&&e&&t[e])},n.prototype.getWorldRectToScreen=function(e){var t;return(t=this.canvasView)===null||t===void 0?void 0:t.getRectToScreen(e)},n.prototype.refresh=function(e){e===void 0&&(e={});var t=this,r=t.em,i=t.events,s=t.canvasView;s==null||s.clearOff(),(e.spots||e.all)&&(this.refreshSpots(),r.trigger("canvas:updateTools")),r.set("canvasOffset",this.getOffset()),r.trigger(i.refresh,e)},n.prototype.refreshSpots=function(){this.spots.refresh()},n.prototype.destroy=function(){var e=this,t;this.canvas.stopListening(),(t=this.canvasView)===null||t===void 0||t.remove(),["model","droppable"].forEach(function(r){return e[r]={}})},n}($o);const ZA=JA,c_={stylePrefix:"comp-",components:[],draggableComponents:!0,disableTextInnerChilds:!1,processor:void 0,useFrameDoc:!1,voidElements:["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]};var QA=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),qd=function(){return qd=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},qd.apply(this,arguments)},eM=function(o){QA(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return qd(qd({},o.prototype.defaults),{tagName:"",droppable:!1,layerable:!1,selectable:!1,editable:!0})},enumerable:!1,configurable:!0}),n.prototype.toHTML=function(){var e=this.content,t=this.parent();return t!=null&&t.is("script")?e:this.__escapeContent(e)},n.prototype.__escapeContent=function(e){return(0,Xe.escapeNodeContent)(e)},n.isComponent=function(e){var t;if(e.nodeType===3)return{type:"textnode",content:(t=e.textContent)!==null&&t!==void 0?t:""}},n}(oo);const hS=eM;var tM=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Bg=function(){return Bg=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},Bg.apply(this,arguments)},nM=function(o){tM(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Bg({},o.prototype.defaults)},enumerable:!1,configurable:!0}),n.prototype.toHTML=function(){return"<!--".concat(this.content,"-->")},n.isComponent=function(e){var t;if(e.nodeType==8)return{type:"comment",content:(t=e.textContent)!==null&&t!==void 0?t:""}},n}(hS);const rM=nM;var oM=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Jd=function(){return Jd=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},Jd.apply(this,arguments)},cv="iframe",iM=function(o){oM(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Jd(Jd({},o.prototype.defaults),{type:cv,tagName:cv,droppable:!1,resizable:!0,traits:["id","title","src"],attributes:{frameborder:"0"}})},enumerable:!1,configurable:!0}),n.isComponent=function(e){return(0,Xe.toLowerCase)(e.tagName)===cv},n}(oo);const aM=iM;var sM=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Zd=function(){return Zd=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},Zd.apply(this,arguments)},f_='xmlns="http://www.w3.org/2000/svg" width="100" viewBox="0 0 24 24" style="fill: rgba(0,0,0,0.15); transform: scale(0.75)"',lM=function(o){sM(n,o);function n(e,t){e===void 0&&(e={});var r=o.call(this,e,t)||this,i=r.get("attributes").src;return i&&(0,Xe.buildBase64UrlFromSvg)((0,U.result)(r,"defaults").src)!==i&&r.set("src",i,{silent:!0}),r}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Zd(Zd({},o.prototype.defaults),{type:"image",tagName:"img",void:!0,droppable:0,editable:1,highlightable:0,resizable:{ratioDefault:1},traits:["alt"],src:"<svg ".concat(f_,`>
        <path d="M8.5 13.5l2.5 3 3.5-4.5 4.5 6H5m16 1V5a2 2 0 0 0-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2z"></path>
      </svg>`),fallback:"<svg ".concat(f_,`>
        <path d="M2.28 3L1 4.27l2 2V19c0 1.1.9 2 2 2h12.73l2 2L21 21.72 2.28 3m2.55 0L21 19.17V5a2 2 0 0 0-2-2H4.83M8.5 13.5l2.5 3 1-1.25L14.73 18H5l3.5-4.5z"></path>
      </svg>`),file:""})},enumerable:!1,configurable:!0}),n.prototype.initToolbar=function(){o.prototype.initToolbar.call(this);var e=this.em;if(e){var t=e.Commands,r="image-editor";if(t.has(r)){for(var i=!1,s=this.get("toolbar"),u=0;u<s.length;u++)if(s[u].command==="image-editor"){i=!0;break}i||(s.push({attributes:{class:"fa fa-pencil"},command:r}),this.set("toolbar",s))}}},n.prototype.getAttrToHTML=function(){var e=o.prototype.getAttrToHTML.call(this),t=this.getSrcResult();return t&&(e.src=t),e},n.prototype.getSrcResult=function(e){e===void 0&&(e={});var t=this.get(e.fallback?"fallback":"src")||"",r=t;return t&&t.substr(0,4)==="<svg"&&(r=(0,Xe.buildBase64UrlFromSvg)(t)),r},n.prototype.isDefaultSrc=function(){var e=this.get("src"),t=(0,U.result)(this,"defaults").src;return e===t||e===(0,Xe.buildBase64UrlFromSvg)(t)},n.prototype.toJSON=function(e){var t=o.prototype.toJSON.call(this,e),r=t.attributes;return r&&t.src===r.src&&delete t.src,t},n.prototype.parseUri=function(e){var t={},r=function(i){i===void 0&&(i="");for(var s={},u=i.substring(1).split("&"),c=0;c<u.length;c++){var f=u[c].split("="),h=decodeURIComponent(f[0]);h&&(s[h]=decodeURIComponent(f[1]||""))}return s};if((0,Xe.hasWin)())t=document.createElement("a"),t.href=e;else if(typeof URL<"u")try{t=new URL(e)}catch{}return{hostname:t.hostname||"",pathname:t.pathname||"",protocol:t.protocol||"",search:t.search||"",hash:t.hash||"",port:t.port||"",query:r(t.search)}},n.isComponent=function(e){return(0,Xe.toLowerCase)(e.tagName)==="img"},n}(oo);const oy=lM;var uM=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Qd=function(){return Qd=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},Qd.apply(this,arguments)},cM=function(o){uM(n,o);function n(e,t){e===void 0&&(e={});var r=o.call(this,e,t)||this;return r.__checkInnerChilds(),r}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Qd(Qd({},o.prototype.defaults),{type:"text",droppable:!1,editable:!0})},enumerable:!1,configurable:!0}),n.prototype.__checkInnerChilds=function(){var e=this.em.Components.config.disableTextInnerChilds;if(e){var t=function(r){r.isInstanceOf("textnode")||r.set({locked:!0,layerable:!1})};(0,U.isFunction)(e)?this.forEachChild(function(r){e(r)&&t(r)}):this.forEachChild(t)}},n}(oo);const iy=cM;var fM=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),ep=function(){return ep=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},ep.apply(this,arguments)},fv="label",dM=function(o){fM(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return ep(ep({},o.prototype.defaults),{type:fv,tagName:fv,traits:["id","title","for"]})},enumerable:!1,configurable:!0}),n.isComponent=function(e){return(0,Xe.toLowerCase)(e.tagName)===fv},n}(iy);const pM=dM;var hM=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),tp=function(){return tp=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},tp.apply(this,arguments)},d_="link",vM=function(o){hM(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return tp(tp({},o.prototype.defaults),{type:d_,tagName:"a",traits:["title","href","target"]})},enumerable:!1,configurable:!0}),n.isComponent=function(e,t){t===void 0&&(t={});var r;if((0,Xe.toLowerCase)(e.tagName)==="a"){var i=t.textTags||[];r={type:d_,editable:!1};var s=e.childNodes,u=s.length;u||delete r.editable,(0,U.forEach)(s,function(c){var f=c.tagName;(c.nodeType==3&&c.textContent.trim()!==""||f&&i.indexOf((0,Xe.toLowerCase)(f))>=0)&&delete r.editable})}return r},n}(iy);const gM=vM;var mM=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),np=function(){return np=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},np.apply(this,arguments)},yM=function(o){mM(n,o);function n(e,t){e===void 0&&(e={});var r=o.call(this,e,t)||this;return r.get("src")?r.parseFromSrc():r.updateSrc(),r.listenTo(r,"change:address change:zoom change:mapType",r.updateSrc),r}return Object.defineProperty(n.prototype,"defaults",{get:function(){var e=o.prototype.defaults;return np(np({},e),{type:"map",src:"",void:!1,mapUrl:"https://maps.google.com/maps",tagName:"iframe",mapType:"q",address:"",zoom:"1",attributes:{frameborder:0},toolbar:e.toolbar,traits:[{label:"Address",name:"address",placeholder:"eg. London, UK",changeProp:!0},{type:"select",label:"Map type",name:"mapType",changeProp:!0,options:[{id:"q",label:"Roadmap"},{id:"w",label:"Satellite"}]},{label:"Zoom",name:"zoom",type:"range",min:1,max:20,changeProp:!0}]})},enumerable:!1,configurable:!0}),n.prototype.updateSrc=function(){this.set("src",this.getMapUrl())},n.prototype.getMapUrl=function(){var e=this.get("address"),t=this.get("zoom"),r=this.get("mapType");e=e?"&q="+e:"",t=t?"&z="+t:"",r=r?"&t="+r:"";var i=this.get("mapUrl")+"?"+e+t+r;return i+="&output=embed",i},n.prototype.parseFromSrc=function(){var e=this.parseUri(this.get("src")),t=e.query;t.q&&this.set("address",t.q),t.z&&this.set("zoom",t.z),t.t&&this.set("mapType",t.t)},n.isComponent=function(e){if((0,Xe.toLowerCase)(e.tagName)=="iframe"&&/maps\.google\.com/.test(e.src))return{type:"map",src:e.src}},n}(oy);const wM=yM;var _M=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),rp=function(){return rp=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},rp.apply(this,arguments)},dv="script",bM=function(o){_M(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return rp(rp({},o.prototype.defaults),{type:dv,tagName:dv,droppable:!1,draggable:!1,layerable:!1,highlightable:!1})},enumerable:!1,configurable:!0}),n.isComponent=function(e){return(0,Xe.toLowerCase)(e.tagName)===dv},n}(oo);const xM=bM;var CM=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),op=function(){return op=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},op.apply(this,arguments)},pv="svg",SM=function(o){CM(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return op(op({},o.prototype.defaults),{type:pv,tagName:pv,highlightable:!1,resizable:{ratioDefault:!0}})},enumerable:!1,configurable:!0}),n.prototype.getName=function(){var e=this.get("tagName"),t=this.get("custom-name");return e=e.charAt(0).toUpperCase()+e.slice(1),t||e},n.isComponent=function(e){return(0,Xe.toLowerCase)(e.tagName)===pv},n}(oo);const vS=SM;var OM=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),ip=function(){return ip=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},ip.apply(this,arguments)},TM=function(o){OM(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return ip(ip({},o.prototype.defaults),{selectable:!1,hoverable:!1,layerable:!1})},enumerable:!1,configurable:!0}),n.isComponent=function(e,t){return t===void 0&&(t={}),!!t.inSvg},n}(vS);const EM=TM;var PM=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),ap=function(){return ap=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},ap.apply(this,arguments)},hv="table",kM=function(o){PM(n,o);function n(e,t){e===void 0&&(e={});var r=o.call(this,e,t)||this,i=r.get("components");return!i.length&&i.add({type:"tbody"}),r}return Object.defineProperty(n.prototype,"defaults",{get:function(){return ap(ap({},o.prototype.defaults),{type:hv,tagName:hv,droppable:["tbody","thead","tfoot"]})},enumerable:!1,configurable:!0}),n.isComponent=function(e){return(0,Xe.toLowerCase)(e.tagName)===hv},n}(oo);const AM=kM;var MM=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),sp=function(){return sp=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},sp.apply(this,arguments)},vv="tbody",DM=function(o){MM(n,o);function n(e,t){e===void 0&&(e={});var r=o.call(this,e,t)||this,i=r.get("components"),s=r.get("columns"),u=r.get("rows");if(!i.length){for(var c=[];u--;){for(var f=[],h=s;h--;)f.push({type:"cell",classes:["cell"]});c.push({type:"row",classes:["row"],components:f})}i.add(c)}return r}return Object.defineProperty(n.prototype,"defaults",{get:function(){return sp(sp({},o.prototype.defaults),{type:vv,tagName:vv,draggable:["table"],droppable:["tr"],columns:1,rows:1})},enumerable:!1,configurable:!0}),n.isComponent=function(e){return(0,Xe.toLowerCase)(e.tagName)===vv},n}(oo);const ay=DM;var LM=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),lp=function(){return lp=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},lp.apply(this,arguments)},jM=function(o){LM(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return lp(lp({},o.prototype.defaults),{type:"cell",tagName:"td",draggable:["tr"]})},enumerable:!1,configurable:!0}),n.isComponent=function(e){return["td","th"].indexOf((0,Xe.toLowerCase)(e.tagName))>=0},n}(oo);const IM=jM;var NM=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),up=function(){return up=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},up.apply(this,arguments)},gv="tfoot",RM=function(o){NM(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return up(up({},o.prototype.defaults),{type:gv,tagName:gv})},enumerable:!1,configurable:!0}),n.isComponent=function(e){return(0,Xe.toLowerCase)(e.tagName)===gv},n}(ay);const FM=RM;var VM=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),cp=function(){return cp=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},cp.apply(this,arguments)},mv="thead",zM=function(o){VM(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return cp(cp({},o.prototype.defaults),{type:mv,tagName:mv})},enumerable:!1,configurable:!0}),n.isComponent=function(e){return(0,Xe.toLowerCase)(e.tagName)===mv},n}(ay);const HM=zM;var UM=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),fp=function(){return fp=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},fp.apply(this,arguments)},p_="tr",BM=function(o){UM(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return fp(fp({},o.prototype.defaults),{tagName:p_,draggable:["thead","tbody","tfoot"],droppable:["th","td"]})},enumerable:!1,configurable:!0}),n.isComponent=function(e){return(0,Xe.toLowerCase)(e.tagName)===p_},n}(oo);const WM=BM;var $M=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),dp=function(){return dp=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},dp.apply(this,arguments)},yv="video",El="yt",Pl="vi",kl="ytnc",h_="so",wv=function(o){return o&&o!=="0"},KM=function(o){$M(n,o);function n(e,t){e===void 0&&(e={});var r=o.call(this,e,t)||this;return r.get("src")&&r.parseFromSrc(),r.updatePropsFromAttr(),r.updateTraits(),r.on("change:provider",r.updateTraits),r.on("change:videoId change:provider",r.updateSrc),r}return Object.defineProperty(n.prototype,"defaults",{get:function(){return dp(dp({},o.prototype.defaults),{type:yv,tagName:yv,videoId:"",void:!1,provider:h_,ytUrl:"https://www.youtube.com/embed/",ytncUrl:"https://www.youtube-nocookie.com/embed/",viUrl:"https://player.vimeo.com/video/",loop:!1,poster:"",muted:0,autoplay:!1,controls:!0,color:"",list:"",src:"",rel:1,modestbranding:0,sources:[],attributes:{allowfullscreen:"allowfullscreen"}})},enumerable:!1,configurable:!0}),n.prototype.updatePropsFromAttr=function(){if(this.get("provider")===h_){var e=this.get("attributes"),t=e.controls,r=e.autoplay,i=e.loop,s={};(0,Xe.isDef)(t)&&(s.controls=!!t),(0,Xe.isDef)(r)&&(s.autoplay=!!r),(0,Xe.isDef)(i)&&(s.loop=!!i),(0,Xe.isEmptyObj)(s)||this.set(s)}},n.prototype.updateTraits=function(){var e=this.em,t=this.get("provider"),r="iframe",i;switch(t){case El:case kl:i=this.getYoutubeTraits();break;case Pl:i=this.getVimeoTraits();break;default:r="video",i=this.getSourceTraits()}this.set({tagName:r},{silent:!0}),this.set({traits:i}),e.get("ready")&&e.trigger("component:toggled")},n.prototype.parseFromSrc=function(){var e=this.get("provider"),t=this.parseUri(this.get("src")),r=t.query;switch(e){case El:case kl:case Pl:this.set("videoId",t.pathname.split("/").pop()),r.list&&this.set("list",r.list),wv(r.autoplay)&&this.set("autoplay",!0),wv(r.loop)&&this.set("loop",!0),parseInt(r.controls)===0&&this.set("controls",!1),wv(r.color)&&this.set("color",r.color),r.rel==="0"&&this.set("rel",0),r.modestbranding==="1"&&this.set("modestbranding",1);break}},n.prototype.updateSrc=function(){var e=this.get("provider"),t="";switch(e){case El:t=this.getYoutubeSrc();break;case kl:t=this.getYoutubeNoCookieSrc();break;case Pl:t=this.getVimeoSrc();break}this.set({src:t})},n.prototype.getAttrToHTML=function(){var e=o.prototype.getAttrToHTML.call(this),t=this.get("provider");switch(t){case El:case kl:case Pl:break;default:e.loop=!!this.get("loop"),e.autoplay=!!this.get("autoplay"),e.controls=!!this.get("controls")}return e},n.prototype.getProviderTrait=function(){return{type:"select",label:"Provider",name:"provider",changeProp:!0,options:[{value:"so",name:"HTML5 Source"},{value:El,name:"Youtube"},{value:kl,name:"Youtube (no cookie)"},{value:Pl,name:"Vimeo"}]}},n.prototype.getSourceTraits=function(){return[this.getProviderTrait(),{label:"Source",name:"src",placeholder:"eg. ./media/video.mp4",changeProp:!0},{label:"Poster",name:"poster",placeholder:"eg. ./media/image.jpg"},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait()]},n.prototype.getYoutubeTraits=function(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. jNQXAC9IVRw",changeProp:!0},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait(),{type:"checkbox",label:"Related",name:"rel",changeProp:!0},{type:"checkbox",label:"Modest",name:"modestbranding",changeProp:!0}]},n.prototype.getVimeoTraits=function(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. 123456789",changeProp:!0},{label:"Color",name:"color",placeholder:"eg. FF0000",changeProp:!0},this.getAutoplayTrait(),this.getLoopTrait()]},n.prototype.getAutoplayTrait=function(){return{type:"checkbox",label:"Autoplay",name:"autoplay",changeProp:!0}},n.prototype.getLoopTrait=function(){return{type:"checkbox",label:"Loop",name:"loop",changeProp:!0}},n.prototype.getControlsTrait=function(){return{type:"checkbox",label:"Controls",name:"controls",changeProp:!0}},n.prototype.getYoutubeSrc=function(){var e=this.get("videoId"),t=this.get("ytUrl"),r=this.get("list");return t+=e+(e.indexOf("?")<0?"?":""),t+=r?"&list=".concat(r):"",t+=this.get("autoplay")?"&autoplay=1&mute=1":"",t+=this.get("controls")?"":"&controls=0&showinfo=0",t+=this.get("loop")?"&loop=1&playlist=".concat(e):"",t+=this.get("rel")?"":"&rel=0",t+=this.get("modestbranding")?"&modestbranding=1":"",t},n.prototype.getYoutubeNoCookieSrc=function(){var e=this.getYoutubeSrc();return e=e.replace(this.get("ytUrl"),this.get("ytncUrl")),e},n.prototype.getVimeoSrc=function(){var e=this.get("viUrl");return e+=this.get("videoId")+"?",e+=this.get("autoplay")?"&autoplay=1&muted=1":"",e+=this.get("loop")?"&loop=1":"",e+=this.get("controls")?"":"&title=0&portrait=0&badge=0",e+=this.get("color")?"&color="+this.get("color"):"",e},n.isComponent=function(e){var t=e.tagName,r=e.src,i=/youtube\.com\/embed/.test(r),s=/youtube-nocookie\.com\/embed/.test(r),u=/player\.vimeo\.com\/video/.test(r),c=i||s||u;if((0,Xe.toLowerCase)(t)==yv||(0,Xe.toLowerCase)(t)=="iframe"&&c){var f={type:"video"};return r&&(f.src=r),c&&(i?f.provider=El:s?f.provider=kl:u&&(f.provider=Pl)),f}},n}(oy);const GM=KM;var YM=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),pp=function(){return pp=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},pp.apply(this,arguments)},XM=function(o){YM(n,o);function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r,i,s=o.apply(this,e)||this,u=e[1],c=(r=u==null?void 0:u.em)===null||r===void 0?void 0:r.Components,f=(i=c==null?void 0:c.getType(iu))===null||i===void 0?void 0:i.model,h=c==null?void 0:c.getType("default").model;return f&&s.set({head:new f({},u),docEl:new h({tagName:"html"},u)},{silent:!0}),s}return Object.defineProperty(n.prototype,"defaults",{get:function(){return pp(pp({},o.prototype.defaults),{tagName:"body",removable:!1,copyable:!1,draggable:!1,components:[],traits:[],doctype:"",head:null,docEl:null,stylable:["background","background-color","background-image","background-repeat","background-attachment","background-position","background-size"]})},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"head",{get:function(){return this.get("head")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"docEl",{get:function(){return this.get("docEl")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"doctype",{get:function(){return this.attributes.doctype||""},enumerable:!1,configurable:!0}),n.prototype.toHTML=function(e){e===void 0&&(e={});var t=this.doctype,r=(0,U.isUndefined)(e.asDocument)?!!t:e.asDocument,i=this,s=i.head,u=i.docEl,c=o.prototype.toHTML.call(this,e),f=r&&(s==null?void 0:s.toHTML(e))||"",h=r&&(0,wt.kk)(u==null?void 0:u.getAttrToHTML())||"",v=h?" ".concat(h):"";return r?"".concat(t,"<html").concat(v,">").concat(f).concat(c,"</html>"):c},n.prototype.__postAdd=function(){var e,t=(e=this.em)===null||e===void 0?void 0:e.UndoManager;return!this.__hasUm&&(t==null||t.add(this)),o.prototype.__postAdd.call(this)},n.prototype.__postRemove=function(){var e,t=(e=this.em)===null||e===void 0?void 0:e.UndoManager;return t==null||t.remove(this),o.prototype.__postRemove.call(this)},n.isComponent=function(){return!1},n}(oo);const qM=XM;var JM=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),ZM=function(o){JM(n,o);function n(){var e=o!==null&&o.apply(this,arguments)||this;return e.compView=dr,e}return n.prototype.initialize=function(e){this.opts=e||{},this.config=e.config||{},this.em=this.config.em;var t=this.collection;this.listenTo(t,"add",this.addTo),this.listenTo(t,"reset",this.resetChildren),this.listenTo(t,"remove",this.removeChildren)},n.prototype.removeChildren=function(e,t,r){var i=this;r===void 0&&(r={}),e.views.forEach(function(u){if(u){var c=u.childrenView,f=u.scriptContainer;c&&c.stopListening(),(0,wt.YZ)(f),u.remove.apply(u)}});var s=e.components();s.forEach(function(u){return i.removeChildren(u,t,r)})},n.prototype.addTo=function(e){this.addToCollection(e,null,this.collection.indexOf(e))},n.prototype.addToCollection=function(e,t,r){for(var i=this,s=i.config,u=i.opts,c=i.em,f=s.frameView,h=(f==null?void 0:f.model)&&e.getView(f.model),v=u.componentTypes||(c==null?void 0:c.Components.getTypes()),m=e.get("type")||"default",_=this.compView,C=0;C<v.length;C++)if(v[C].id==m){_=v[C].view;break}var T=h||new _({model:e,config:s,componentTypes:v}),k;try{k=T.render().el}catch(V){k=document.createTextNode(""),c.logError(V)}if(t)t.appendChild(k);else{var P=this.parentEl,L=P.childNodes;if((0,U.isUndefined)(r))P.appendChild(k);else{var D=L.length==r;D&&r--,D||!L.length?P.appendChild(k):P.insertBefore(k,L[r])}}return e.opt.temporary||c==null||c.trigger("component:mount",e),k},n.prototype.resetChildren=function(e,t){var r=this,i=t===void 0?{}:t,s=i.previousModels,u=s===void 0?[]:s;this.parentEl.innerHTML="",u.forEach(function(c){return r.removeChildren(c,r.collection)}),e.each(function(c){return r.addToCollection(c)})},n.prototype.render=function(e){var t=this,r=this.el,i=document.createDocumentFragment();return this.parentEl=e||this.el,this.collection.each(function(s){return t.addToCollection(s,i)}),r.innerHTML="",r.appendChild(i),this},n}(gt.Ss);const gS=ZM;var QM=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),ea=function(){return ea=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},ea.apply(this,arguments)},eD=function(o){QM(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype.className=function(){return this.getClasses()},n.prototype.tagName=function(){return this.model.get("tagName")},n.prototype.preinitialize=function(e){e===void 0&&(e={}),this.opts=e},n.prototype.initialize=function(e){e===void 0&&(e={});var t=this.model,r=e.config||{},i=r.em,s=t.opt||{},u=this,c=u.$el,f=u.el;this.opts=e,this.modelOpt=s,this.config=r,this.em=i,this.pfx=r.stylePrefix||"",this.ppfx=r.pStylePrefix||"",this.attr=t.get("attributes"),this.classe=this.attr.class||[],this.listenTo(t,"change:style",this.updateStyle),this.listenTo(t,"change:attributes",this.renderAttributes),this.listenTo(t,"change:highlightable",this.updateHighlight),this.listenTo(t,"change:status change:locked",this.updateStatus),this.listenTo(t,"change:script rerender",this.reset),this.listenTo(t,"change:content",this.updateContent),this.listenTo(t,"change",this.handleChange),this.listenTo(t,"active",this.onActive),this.listenTo(t,"disable",this.onDisable),c.data("model",t),(0,Xe.setViewEl)(f,this),t.view=this,this.frameView&&t.views.push(this),this.initClasses(),this.initComponents({avoidRender:!0}),this.events=ea(ea({},this.constructor.getEvents()),{dragstart:"handleDragStart"}),this.delegateEvents(),!s.temporary&&this.init(this._clbObj())},Object.defineProperty(n.prototype,"__cmpStyleOpts",{get:function(){return{state:"",mediaText:""}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"frameView",{get:function(){return this.opts.config.frameView},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"createDoc",{get:function(){var e,t,r=((e=this.frameView)===null||e===void 0?void 0:e.getDoc())||document;return!((t=this.opts.config)===null||t===void 0)&&t.useFrameDoc?r:document},enumerable:!1,configurable:!0}),n.prototype.__isDraggable=function(){var e=this,t=e.model,r=e.config,i=t.attributes.draggable;return r.draggableComponents&&i},n.prototype._clbObj=function(){var e=this,t=e.em,r=e.model,i=e.el;return{editor:t==null?void 0:t.getEditor(),model:r,el:i}},n.prototype.init=function(e){},n.prototype.removed=function(e){},n.prototype.onRender=function(e){},n.prototype.onActive=function(e){},n.prototype.onDisable=function(e){},n.prototype.remove=function(){var e;o.prototype.remove.call(this);var t=this,r=t.model,i=t.$el,s=r.views,u=this.frameView||{};return r.components().forEach(function(c){var f=c.getView(u.model);f==null||f.remove()}),(e=this.childrenView)===null||e===void 0||e.remove(),s.splice(s.indexOf(this),1),this.removed(this._clbObj()),i.data({model:"",collection:"",view:""}),this},n.prototype.handleDragStart=function(e){if(!this.__isDraggable())return!1;e.stopPropagation(),e.preventDefault(),this.em.Commands.run("tlb-move",{target:this.model,event:e})},n.prototype.initClasses=function(){var e=this.model,t=e.classes,r="change:classes";t instanceof es&&(this.stopListening(e,r,this.initClasses),this.listenTo(e,r,this.initClasses),this.listenTo(t,"add remove change reset",this.updateClasses),t.length&&this.importClasses())},n.prototype.initComponents=function(e){e===void 0&&(e={});var t=this,r=t.model,i=t.$el,s=t.childrenView,u="change:components",c=r.get("components"),f=[r,u,this.initComponents];c instanceof qc&&(i.data("collection",c),s&&s.remove(),this.stopListening.apply(this,f),!e.avoidRender&&this.renderChildren(),this.listenTo.apply(this,f))},n.prototype.handleChange=function(){var e=this.model,t=(0,U.keys)(e.changed);if(!(t.length===1&&t[0]==="status")){e.emitUpdate();for(var r in e.changed)e.emitUpdate(r)}},n.prototype.importClasses=function(){var e=this,t=e.em,r=e.model,i=t.Selectors;i&&r.classes.forEach(function(s){return i.add(s.getName())})},n.prototype.updateStatus=function(e){e===void 0&&(e={});var t=this,r=t.em,i=t.el,s=t.ppfx,u=t.model,c=r==null?void 0:r.Canvas,f=c==null?void 0:c.config.extHl,h=u.get("status"),v="".concat(s,"selected"),m="".concat(v,"-parent"),_="".concat(s,"freezed"),C="".concat(s,"hovered"),T="".concat(s,"no-pointer"),k="".concat(s,"pointer-init"),P=[v,m,_,C,T],L=f&&!e.noExtHl?"":v;this.$el.removeClass(P.join(" "));var D=i.getAttribute("class")||"",V=[D],re=!(c!=null&&c.hasCustomSpot(mi.F.Select)),_e=!(c!=null&&c.hasCustomSpot(mi.F.Target));switch(h){case"selected":re&&V.push(L);break;case"selected-parent":_e&&V.push(m);break;case"freezed":V.push(_);break;case"freezed-selected":V.push(_),re&&V.push(L);break;case"hovered":!e.avoidHover&&V.push(C);break}(0,U.isBoolean)(u.locked)&&V.push(u.locked?T:k);var Q=V.filter(Boolean).join(" ");Q&&i.setAttribute("class",Q)},n.prototype.updateHighlight=function(){var e=this.model,t=e.get("textable"),r=e.get("highlightable")&&(t||!e.isChildOf("text"));this.setAttribute("data-gjs-highlightable",r?!0:"")},n.prototype.updateStyle=function(e,t,r){r===void 0&&(r={});var i=this,s=i.model,u=i.em;if(ac(u)&&!r.inline){var c=this.__cmpStyleOpts,f=s.getStyle(ea({inline:!0},c));!(0,U.isEmpty)(f)&&s.setStyle(f,c)}else this.setAttribute("style",s.styleToString(r))},n.prototype.updateClasses=function(){var e=this.model.classes.pluck("name").join(" ");this.setAttribute("class",e),this.updateStatus(),this.onAttrUpdate()},n.prototype.setAttribute=function(e,t){var r=this.$el;t?r.attr(e,t):r.removeAttr(e)},n.prototype.getClasses=function(){return this.model.getClasses().join(" ")},n.prototype.updateAttributes=function(){var e=[],t=this,r=t.model,i=t.$el,s=t.el,u=r.attributes,c=u.textable,f=u.type,h=ea(ea({id:r.getId(),"data-gjs-type":f||"default"},this.__isDraggable()&&{draggable:!0}),c&&{contenteditable:"false"});(0,U.each)(s.attributes,function(m){return e.push(m.nodeName)}),e.forEach(function(m){return i.removeAttr(m)}),this.updateStyle(),this.updateHighlight();var v=ea(ea({},h),r.getAttributes());(0,U.keys)(v).forEach(function(m){return v[m]===!1&&delete v[m]}),i.attr(v)},n.prototype.updateContent=function(){var e=this.model.content,t=this.model.components().length;this.getChildrenContainer().innerHTML=t?"":e},n.prototype.prevDef=function(e){e.preventDefault()},n.prototype.updateScript=function(){var e=this,t=e.model,r=e.em;t.get("script")&&(r==null||r.Canvas.getCanvasView().updateScript(this))},n.prototype.getChildrenContainer=function(){var e=this.el;return typeof this.getChildrenSelector=="function"?e=this.el.querySelector(this.getChildrenSelector()):this.getTemplate,e},n.prototype.getOffsetRect=function(){var e={top:0,left:0,bottom:0,right:0},t=this.el,r=0,i=0,s=function(u){var c=u.offsetParent;c?(r+=c.offsetTop,i+=c.offsetLeft,s(c)):(e.top=t.offsetTop+r,e.left=t.offsetLeft+i,e.bottom=e.top+t.offsetHeight,e.right=e.left+t.offsetWidth)};return s(t),e},n.prototype.isInViewport=function(){var e=this,t=e.el,r=e.em,i=e.frameView,s=r.Canvas.getCanvasView(),u=s.getElBoxRect(t,{local:!0}),c=i.el,f=c.clientHeight,h=c.clientWidth,v=u.y,m=u.x,_=v+u.height,C=m+u.width,T=v>=0&&v<f,k=_>0&&_<f,P=C>=0&&C<h,L=m>0&&m<=h,D=(T||k)&&(P||L);return D},n.prototype.scrollIntoView=function(e){var t;e===void 0&&(e={});var r=this.isInViewport();if(!r||e.force){var i=this.el;if(e.behavior!=="smooth"){var s=this.getOffsetRect();(t=i.ownerDocument.defaultView)===null||t===void 0||t.scrollTo(0,s.top)}else i.scrollIntoView(ea({behavior:"smooth",block:"nearest"},e))}},n.prototype.reset=function(){var e=this.el;this.el="",this._ensureElement(),this._setData(),(0,wt.bG)(e,this.el),this.render()},n.prototype._setData=function(){var e=this.model,t=e.components(),r=this;this.$el.data({model:e,collection:t,view:r})},n.prototype._createElement=function(e){return this.createDoc.createElement(e)},n.prototype.renderChildren=function(){this.updateContent();var e=this.getChildrenContainer(),t=this.childrenView||new gS({collection:this.model.get("components"),config:this.config,componentTypes:this.opts.componentTypes});t.render(e),this.childrenView=t;for(var r=Array.prototype.slice.call(t.el.childNodes),i=0,s=r.length;i<s;i++)e.appendChild(r.shift())},n.prototype.renderAttributes=function(){this.updateAttributes(),this.updateClasses()},n.prototype.onAttrUpdate=function(){},n.prototype.render=function(){return this.renderAttributes(),this.modelOpt.temporary?this:(this.renderChildren(),this.updateScript(),(0,Xe.setViewEl)(this.el,this),this.postRender(),this)},n.prototype.postRender=function(){this.modelOpt.temporary||this.onRender(this._clbObj())},n.getEvents=function(){return(0,U.result)(this.prototype,"events")},n}(gt.Ss);const dr=eD;var tD=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),nD=function(o){tD(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype._setAttributes=function(){},n.prototype.renderAttributes=function(){},n.prototype.updateStatus=function(){},n.prototype.updateClasses=function(){},n.prototype.setAttribute=function(){},n.prototype.updateAttributes=function(){},n.prototype.initClasses=function(){},n.prototype.initComponents=function(){},n.prototype.delegateEvents=function(){return this},n.prototype._createElement=function(){return document.createTextNode("")},n.prototype.render=function(){var e=this,t=e.model,r=e.el;return t.opt.temporary?this:(r.textContent=t.content,this)},n}(dr);const mS=nD;var rD=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),oD=function(o){rD(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype._createElement=function(){return document.createComment(this.model.content)},n}(mS);const iD=oD;var aD=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),sD=function(o){aD(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype.tagName=function(){return"div"},n.prototype.initialize=function(e){o.prototype.initialize.call(this,e),this.listenTo(this.model,"change:attributes:src",this.updateSrc)},n.prototype.updateSrc=function(){var e=(0,wt.I6)(this.el,"iframe")[0];e&&(0,wt.X6)(e,{src:this.__getSrc()})},n.prototype.render=function(){o.prototype.render.call(this);var e=(0,wt.a_)("iframe",{class:"".concat(this.ppfx,"no-pointer"),style:"width: 100%; height: 100%; border: none",src:this.__getSrc()});return this.el.appendChild(e),this},n.prototype.__getSrc=function(){return this.model.getAttributes().src||""},n}(dr);const lD=sD;var uD=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),cD=function(o){uD(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype.tagName=function(){return"img"},n.prototype.events=function(){return{dblclick:"onActive",click:"initResize",error:"onError",load:"onLoad",dragstart:"noDrag"}},n.prototype.initialize=function(e){o.prototype.initialize.call(this,e),this.listenTo(this.model,"change:src",this.updateSrc),this.classEmpty="".concat(this.ppfx,"plh-image"),this.fetchFile()},n.prototype.fetchFile=function(){if(!this.modelOpt.temporary){var e=this,t=e.model,r=e.em,i=t.get("file");if(i&&r){var s=r.Assets.FileUploader();s==null||s.uploadFile({dataTransfer:{files:[i]}},function(u){var c=u&&u.data&&u.data[0],f=c&&((0,U.isString)(c)?c:c.src);f&&t.set({src:f})}),t.set("file","")}}},n.prototype.updateSrc=function(){var e=this.model;e.addAttributes({src:e.getSrcResult()}),this.updateClasses()},n.prototype.updateClasses=function(){o.prototype.updateClasses.call(this);var e=this,t=e.el,r=e.classEmpty,i=e.model,s=i.getSrcResult()&&!i.isDefaultSrc(),u=s?"remove":"add";t.classList[u](r)},n.prototype.onActive=function(e){e==null||e.stopPropagation();var t=this,r=t.em,i=t.model,s=r==null?void 0:r.Assets;s&&i.get("editable")&&s.open({select:function(u,c){i.set({src:u.getSrc()}),c&&s.close()},target:i,types:["image"],accept:"image/*"})},n.prototype.onError=function(){var e=this.model.getSrcResult({fallback:!0});e&&(this.el.src=e)},n.prototype.onLoad=function(){this.em.Canvas.refresh({all:!0})},n.prototype.noDrag=function(e){return e.preventDefault(),!1},n.prototype.render=function(){if(this.renderAttributes(),this.modelOpt.temporary)return this;this.updateSrc();var e=this,t=e.$el,r=e.model,i=t.attr("class")||"";return!r.get("src")&&t.attr("class","".concat(i," ").concat(this.classEmpty).trim()),this.postRender(),this},n}(dr);const sy=cD;var fD=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),bc=function(){return bc=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},bc.apply(this,arguments)},Kf=function(o,n,e,t){function r(i){return i instanceof e?i:new e(function(s){s(i)})}return new(e||(e=Promise))(function(i,s){function u(h){try{f(t.next(h))}catch(v){s(v)}}function c(h){try{f(t.throw(h))}catch(v){s(v)}}function f(h){h.done?i(h.value):r(h.value).then(u,c)}f((t=t.apply(o,n||[])).next())})},Gf=function(o,n){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},t,r,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(f){return function(h){return c([f,h])}}function c(f){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,f[0]&&(e=0)),e;)try{if(t=1,r&&(i=f[0]&2?r.return:f[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,f[1])).done)return i;switch(r=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return e.label++,{value:f[1],done:!1};case 5:e.label++,r=f[1],f=[0];continue;case 7:f=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){e=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){e.label=f[1];break}if(f[0]===6&&e.label<i[1]){e.label=i[1],i=f;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(f);break}i[2]&&e.ops.pop(),e.trys.pop();continue}f=n.call(o,e)}catch(h){f=[6,h],r=0}finally{t=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},dD=function(o){fD(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype.events=function(){return{dblclick:"onActive",input:"onInput"}},n.prototype.initialize=function(e){o.prototype.initialize.call(this,e),(0,U.bindAll)(this,"disableEditing","onDisable");var t=this.model,r=this.em;this.listenTo(t,"focus",this.onActive),this.listenTo(t,"change:content",this.updateContentText),this.listenTo(t,"sync:content",this.syncContent),this.rte=r==null?void 0:r.RichTextEditor},n.prototype.updateContentText=function(e,t,r){r===void 0&&(r={}),!r.fromDisable&&this.disableEditing()},n.prototype.canActivate=function(){var e=this,t=e.model,r=e.rteEnabled,i=e.em,s=i==null?void 0:i.getEditing(),u=s===t,c=!0,f=!1,h;if((r||!t.get("editable")||u||(f=t.isChildOf("text")))&&(c=!1,f&&!t.get("textable"))){for(var v=t.parent();v&&!v.isInstanceOf("text");)v=v.parent();v&&v.get("editable")?h=v:c=!0}return{result:c,delegate:h}},n.prototype.onActive=function(e){return Kf(this,void 0,void 0,function(){var t,r,i,s,u,c,f,h,v,m,_;return Gf(this,function(C){switch(C.label){case 0:return t=this,r=t.rte,i=t.em,s=this.canActivate(),u=s.result,c=s.delegate,u?((_=e==null?void 0:e.stopPropagation)===null||_===void 0||_.call(e),f=this,[4,this.getContent()]):(c&&((m=e==null?void 0:e.stopPropagation)===null||m===void 0||m.call(e),i.setSelected(c),c.trigger("active",e)),[2]);case 1:if(f.lastContent=C.sent(),!r)return[3,5];C.label=2;case 2:return C.trys.push([2,4,,5]),h=this,[4,r.enable(this,this.activeRte,{event:e})];case 3:return h.activeRte=C.sent(),[3,5];case 4:return v=C.sent(),i.logError(v),[3,5];case 5:return this.toggleEvents(!0),[2]}})})},n.prototype.onDisable=function(e){this.disableEditing(e)},n.prototype.disableEditing=function(){return Kf(this,arguments,void 0,function(e){var t,r,i,s,u,c,f,h;return e===void 0&&(e={}),Gf(this,function(v){switch(v.label){case 0:if(t=this,r=t.model,i=t.rte,s=t.activeRte,u=t.em,c=r&&r.get("editable"),!i)return[3,8];v.label=1;case 1:return v.trys.push([1,3,,4]),[4,i.disable(this,s,e)];case 2:return v.sent(),[3,4];case 3:return f=v.sent(),u.logError(f),[3,4];case 4:return h=c,h?[4,this.getContent()]:[3,6];case 5:h=v.sent()!==this.lastContent,v.label=6;case 6:return h?[4,this.syncContent(e)]:[3,8];case 7:v.sent(),this.lastContent="",v.label=8;case 8:return this.toggleEvents(),[2]}})})},n.prototype.getContent=function(){return Kf(this,void 0,void 0,function(){var e,t,r,i;return Gf(this,function(s){switch(s.label){case 0:return e=this,t=e.rte,r=e.activeRte,i="",t?[4,t.getContent(this,r)]:[3,2];case 1:i=s.sent(),s.label=2;case 2:return[2,i]}})})},n.prototype.syncContent=function(){return Kf(this,arguments,void 0,function(e){var t,r,i,s,u,c,f;return e===void 0&&(e={}),Gf(this,function(h){switch(h.label){case 0:return t=this,r=t.model,i=t.rte,s=t.rteEnabled,!s&&!e.force?[2]:[4,this.getContent()];case 1:return u=h.sent(),c=r.components(),f=bc({fromDisable:1},e),r.set("content","",f),i!=null&&i.customRte&&!i.customRte.parseContent?(c.length&&c.reset(void 0,bc(bc({},e),{keepIds:$l(c)})),r.set("content",u,f)):c.resetFromString(u,e),[2]}})})},n.prototype.insertComponent=function(e,t){var r;t===void 0&&(t={});var i=this,s=i.model,u=i.el,c=u.ownerDocument,f=c.getSelection();if(f!=null&&f.rangeCount){var h=f.getRangeAt(0),v=h.startContainer,m=h.startOffset,_=(0,Xe.getComponentModel)(v),C=[];if(_&&(!((r=_.is)===null||r===void 0)&&r.call(_,"textnode"))){var T=_.collection;T.forEach(function(L){if(L===_){var D="textnode",V=t.useDomContent?v.textContent||"":L.content;C.push({type:D,content:V.slice(0,m)}),C.push(e),C.push({type:D,content:V.slice(m)})}else C.push(L)});var k=C.filter(Boolean),P=k.indexOf(e);return T.reset(k,t),T.at(P)}}return s.append(e,t)},n.prototype.onInput=function(){var e=this.em,t="component",r=["".concat(t,":update"),"".concat(t,":input")].join(" ");e&&e.trigger(r,this.model)},n.prototype.disablePropagation=function(e){e.stopPropagation()},n.prototype.toggleEvents=function(e){var t=this,r=t.em,i=t.model,s=t.$el,u={on:wt.on,off:wt.AU},c=e?"on":"off";r.setEditing(e?this:!1),this.rteEnabled=!!e;var f=[this.el.ownerDocument,document];if(u.off(f,"mousedown",this.onDisable),u[c](f,"mousedown",this.onDisable),r[c]("toolbar:run:before",this.onDisable),i&&(i[c]("removed",this.onDisable),i.trigger("rte:".concat(e?"enable":"disable"))),s==null||s.off("mousedown",this.disablePropagation),s&&s[c]("mousedown",this.disablePropagation),this.config.draggableComponents)for(var h=this.el;h;)h.draggable=!e,h=h.parentNode,h&&h.tagName=="BODY"&&(h=0)},n}(dr);const yS=dD;var pD=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),hD=function(o){pD(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype.render=function(){return o.prototype.render.call(this),this.el.addEventListener("click",this.prevDef,!0),this},n}(yS);const wS=hD;var vD=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),gD=function(o){vD(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n}(wS);const mD=gD;var yD=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),wD=function(o){yD(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype.tagName=function(){return"div"},n.prototype.events=function(){return{}},n.prototype.initialize=function(e){o.prototype.initialize.call(this,e),this.classEmpty=this.ppfx+"plh-map"},n.prototype.updateSrc=function(){this.getIframe().src=this.model.get("src")},n.prototype.getIframe=function(){if(!this.iframe){var e=document.createElement("iframe");e.src=this.model.get("src"),e.frameBorder="0",e.style.height="100%",e.style.width="100%",e.className=this.ppfx+"no-pointer",this.iframe=e}return this.iframe},n.prototype.render=function(){return o.prototype.render.call(this),this.updateClasses(),this.el.appendChild(this.getIframe()),this},n}(sy);const _D=wD;var bD=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),xD=function(o){bD(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype.tagName=function(){return"script"},n.prototype.events=function(){return{}},n}(dr);const CD=xD;var SD=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),OD=function(o){SD(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype._createElement=function(e){return document.createElementNS("http://www.w3.org/2000/svg",e)},n}(dr);const v_=OD;var TD=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),ED=function(o){TD(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n}(dr);const PD=ED;var kD=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),AD=function(o){kD(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n}(dr);const MD=AD;var DD=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),LD=function(o){DD(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n}(dr);const jD=LD;var ID=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),ND=function(o){ID(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n}(dr);const RD=ND;var FD=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),VD=function(o){FD(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n}(dr);const zD=VD;var HD=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),UD=function(o){HD(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype.events=function(){return{}},n}(dr);const BD=UD;var WD=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),$D=function(o){WD(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype.tagName=function(){return"div"},n.prototype.events=function(){return{}},n.prototype.initialize=function(){dr.prototype.initialize.apply(this,arguments);var e=this.model,t=["loop","autoplay","controls","color","rel","modestbranding","poster"],r=t.map(function(i){return"change:".concat(i)}).join(" ");this.listenTo(e,"change:provider",this.updateProvider),this.listenTo(e,"change:src",this.updateSrc),this.listenTo(e,r,this.updateVideo)},n.prototype.updateProvider=function(){var e=this.model.get("provider");this.el.innerHTML="",this.el.appendChild(this.renderByProvider(e))},n.prototype.updateSrc=function(){var e=this,t=e.model,r=e.videoEl;if(r){var i=t.get("provider"),s=t.get("src");switch(i){case"yt":s=t.getYoutubeSrc();break;case"ytnc":s=t.getYoutubeNoCookieSrc();break;case"vi":s=t.getVimeoSrc();break}r.src=s}},n.prototype.updateVideo=function(){var e=this,t=e.model,r=e.videoEl,i=t.get("provider");switch(i){case"yt":case"ytnc":case"vi":t.trigger("change:videoId");break;default:if(r){var s=r;s.loop=t.get("loop"),s.autoplay=t.get("autoplay"),s.controls=t.get("controls"),s.poster=t.get("poster")}}},n.prototype.renderByProvider=function(e){var t;switch(e){case"yt":t=this.renderYoutube();break;case"ytnc":t=this.renderYoutubeNoCookie();break;case"vi":t=this.renderVimeo();break;default:t=this.renderSource()}return this.videoEl=t,t},n.prototype.renderSource=function(){var e=document.createElement("video");return e.src=this.model.get("src"),this.initVideoEl(e),e},n.prototype.renderYoutube=function(){var e=document.createElement("iframe");return e.src=this.model.getYoutubeSrc(),e.frameBorder="0",e.setAttribute("allowfullscreen","true"),this.initVideoEl(e),e},n.prototype.renderYoutubeNoCookie=function(){var e=document.createElement("iframe");return e.src=this.model.getYoutubeNoCookieSrc(),e.frameBorder="0",e.setAttribute("allowfullscreen","true"),this.initVideoEl(e),e},n.prototype.renderVimeo=function(){var e=document.createElement("iframe");return e.src=this.model.getVimeoSrc(),e.frameBorder="0",e.setAttribute("allowfullscreen","true"),this.initVideoEl(e),e},n.prototype.initVideoEl=function(e){e.className=this.ppfx+"no-pointer",e.style.height="100%",e.style.width="100%"},n.prototype.render=function(){dr.prototype.render.apply(this),this.updateClasses();var e=this.model.get("provider");return this.el.appendChild(this.renderByProvider(e)),this.updateVideo(),this},n}(sy);const KD=$D;var GD=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),YD=function(o){GD(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype.tagName=function(){return"div"},n}(dr);const XD=YD;var qD=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),hp=function(){return hp=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},hp.apply(this,arguments)},JD=function(o){qD(n,o);function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=o.apply(this,e)||this;r.refreshDbn=(0,U.debounce)(function(){return r.refresh()},0);var i=r.events;return r.on(i.update,r.onUpdate),r.on(i.updateInside,r.onUpdateDeep),r}return n.prototype.removeChildren=function(e,t,r){var i;r===void 0&&(r={}),o.prototype.removeChildren.call(this,e,t,r),(i=ni(e))===null||i===void 0||i.forEach(function(s){return ny(s,{skipRefs:!0})}),this.__trgEvent(this.events.symbolMainRemove,{component:e})},n.prototype.onAdd=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o.prototype.onAdd.apply(this,e);var r=e[0];this.__trgEvent(this.events.symbolMainAdd,{component:r})},n.prototype.onUpdate=function(e){this.__trgEvent(this.events.symbolMainUpdate,e)},n.prototype.onUpdateDeep=function(e){this.__trgEvent(this.events.symbolMainUpdateDeep,e)},n.prototype.refresh=function(){var e=this,t=e.em,r=e.events;t.trigger(r.symbol)},n.prototype.__trgEvent=function(e,t,r){r===void 0&&(r=!1);var i=this,s=i.em,u=i.events,c=r?u.symbolInstance:u.symbolMain;s.trigger(e,t),s.trigger(c,hp(hp({},t),{event:e})),this.refreshDbn()},n}(qc);const ZD=JD;var QD=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Qr=function(){return Qr=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},Qr.apply(this,arguments)},eL=function(o,n){var e={};for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&n.indexOf(t)<0&&(e[t]=o[t]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(o);r<t.length;r++)n.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(o,t[r])&&(e[t[r]]=o[t[r]]);return e},tL=function(o,n,e){if(e||arguments.length===2)for(var t=0,r=n.length,i;t<r;t++)(i||!(t in n))&&(i||(i=Array.prototype.slice.call(n,0,t)),i[t]=n[t]);return o.concat(i||Array.prototype.slice.call(n))},xc;(function(o){o[o.InvalidSource=0]="InvalidSource",o[o.SourceReject=1]="SourceReject",o[o.TargetReject=2]="TargetReject"})(xc||(xc={}));var nL=function(o){QD(n,o);function n(e){var t=o.call(this,e,"DomComponents",new qc(void 0,{em:e}))||this;t.componentTypes=[{id:"cell",model:IM,view:MD},{id:"row",model:WM,view:zD},{id:"table",model:AM,view:BD},{id:"thead",model:HM,view:RD},{id:"tbody",model:ay,view:PD},{id:"tfoot",model:FM,view:jD},{id:"map",model:wM,view:_D},{id:"link",model:gM,view:wS},{id:"label",model:pM,view:mD},{id:"video",model:GM,view:KD},{id:"image",model:oy,view:sy},{id:"script",model:xM,view:CD},{id:"svg-in",model:EM,view:v_},{id:"svg",model:vS,view:v_},{id:"iframe",model:aM,view:lD},{id:"comment",model:rM,view:iD},{id:"textnode",model:hS,view:mS},{id:iu,model:LA,view:dr},{id:"wrapper",model:qM,view:XD},{id:"text",model:iy,view:yS},{id:"default",model:oo,view:dr}],t.componentsById={},t.Component=oo,t.Components=qc,t.ComponentView=dr,t.ComponentsView=gS,t.storageKey="components",t.keySymbols="symbols",t.events=no.I;var r=t.config;t.symbols=new ZD([],{em:e,config:r,domc:t}),e&&(t.config.components=e.config.components||t.config.components);for(var i in c_)i in t.config||(t.config[i]=c_[i]);var s=t.config.pStylePrefix;if(s&&(t.config.stylePrefix=s+t.config.stylePrefix),e){e.get("Parser").compTypes=t.componentTypes,e.on("change:componentHovered",t.componentHovered,t);var u=e.get("selected");e.listenTo(u,"add",function(c,f,h){return t.selectAdd(u.getComponent(c),h)}),e.listenTo(u,"remove",function(c,f,h){return t.selectRemove(u.getComponent(c),h)})}return t}return n.prototype.postLoad=function(){var e=this,t=e.em,r=e.symbols,i=t.UndoManager;i.add(r)},n.prototype.load=function(e){var t=this,r=this.loadProjectData(e,{onResult:function(i){var s=t.getWrapper();if(s||(t.em.Pages.add({},{select:!0}),s=t.getWrapper()),(0,U.isArray)(i))i.length&&s.components(i);else{var u=i.components,c=u===void 0?[]:u,f=eL(i,["components"]);s.set(f),s.components(c)}}});return this.symbols.reset(e[this.keySymbols]||[]),r},n.prototype.store=function(){var e;return e={},e[this.keySymbols]=this.symbols,e},n.prototype.getComponent=function(){var e=this.em.Pages.getSelected(),t=e==null?void 0:e.getMainFrame();return t==null?void 0:t.getComponent()},n.prototype.getWrapper=function(){return this.getComponent()},n.prototype.getComponents=function(){var e=this.getWrapper();return e==null?void 0:e.components()},n.prototype.addComponent=function(e,t){return t===void 0&&(t={}),this.getComponents().add(e,t)},n.prototype.render=function(){var e;return(e=this.componentView)===null||e===void 0?void 0:e.render().el},n.prototype.clear=function(e){e===void 0&&(e={});var t=this.getComponents();return t==null||t.filter(Boolean).forEach(function(r){return r.remove(e)}),this},n.prototype.setComponents=function(e,t){t===void 0&&(t={}),this.clear(t).addComponent(e,t)},n.prototype.addType=function(e,t){var r=this.em,i=t.model,s=i===void 0?{}:i,u=t.view,c=u===void 0?{}:u,f=t.isComponent,h=t.extend,v=t.extendView,m=t.extendFn,_=m===void 0?[]:m,C=t.extendFnView,T=C===void 0?[]:C,k=t.block,P=this.getType(e),L=this.getType(h),D=this.getType(v),V=L||P||this.getType("default"),re=V.model,_e=D?D.view:V.view,Q=function(te,q,ge){return te.reduce(function(R,ke){var he=q[ke],Le=ge.prototype[ke];return he&&Le&&(R[ke]=function(){for(var $e=[],be=0;be<arguments.length;be++)$e[be]=arguments[be];Le.bind(this).apply(void 0,$e),he.bind(this).apply(void 0,$e)}),R},{})};if(typeof s=="object"){var pe={defaults:s.defaults};delete s.defaults;var ne=new Set(re.typeExtends);ne.add(re.getDefaults().type),t.model=re.extend(Qr(Qr({},s),Q(_,s,re)),{typeExtends:ne,isComponent:P&&!L&&!f?re.isComponent:f||function(){return 0}}),Object.defineProperty(t.model.prototype,"defaults",{get:function(){return Qr(Qr({},(0,U.result)(re.prototype,"defaults")||{}),(0,U.result)(pe,"defaults")||{})}})}if(typeof c=="object"&&(t.view=_e.extend(Qr(Qr({},c),Q(T,c,_e)))),P?(P.model=t.model,P.view=t.view):(t.id=e,this.componentTypes.unshift(t)),k){var me={id:e,label:e,content:{type:e}},Y=k===!0?me:Qr(Qr({},me),k);r.Blocks.add(Y.id||e,Y)}var W="component:type:".concat(P?"update":"add");return r==null||r.trigger(W,P||t),this},n.prototype.getType=function(e){for(var t=this.componentTypes,r=0;r<t.length;r++){var i=t[r].id;if(i==e)return t[r]}},n.prototype.removeType=function(e){var t=this.componentTypes,r=this.getType(e);if(r){var i=t.indexOf(r);return t.splice(i,1),r}},n.prototype.getTypes=function(){return this.componentTypes},n.prototype.selectAdd=function(e,t){var r=this;t===void 0&&(t={}),e&&(e.set({status:"selected"}),["component:selected","component:toggled"].forEach(function(i){return r.em.trigger(i,e,t)}))},n.prototype.selectRemove=function(e,t){var r=this;t===void 0&&(t={}),e&&(this.em,e.set({status:"",state:""}),["component:deselected","component:toggled"].forEach(function(i){return r.em.trigger(i,e,t)}))},n.prototype.componentHovered=function(){var e=this.em,t=e.get("componentHovered"),r=e.previous("componentHovered"),i="hovered";r&&r.get("status")==i&&r.set({status:"",state:""}),t&&(0,U.isEmpty)(t.get("status"))&&t.set("status",i)},n.prototype.getShallowWrapper=function(){var e=this,t=e.shallow,r=e.em;if(!t&&r){var i=r.shallow;if(!i)return;var s=i.Components;if(s.componentTypes=this.componentTypes,t=s.getWrapper(),t){var u=[hd,Hg].join(" ");t.on(u,(0,U.debounce)(function(){return t==null?void 0:t.components("")},100))}this.shallow=t}return t},n.prototype.isComponent=function(e){return(0,Xe.isComponent)(e)},n.prototype.addSymbol=function(e){if(!((0,U.isSymbol)(e)&&!Qs(e))){var t=e.clone({symbol:!0});return Hd(t)&&this.symbols.add(t),this.em.trigger("component:toggled"),t}},n.prototype.getSymbols=function(){return tL([],this.symbols.models,!0)},n.prototype.detachSymbol=function(e){Ud(e)&&ny(e)},n.prototype.getSymbolInfo=function(e,t){t===void 0&&(t={});var r=Hd(e),i=el(e),s=!!i,u=ni(r?e:i)||[],c=i||(r?e:void 0),f=Bs(e,{changed:t.withChanges}),h=r||s,v=h&&Qs(e);return{isSymbol:h,isMain:r,isInstance:s,isRoot:v,main:c,instances:u,relatives:f||[]}},n.prototype.canMove=function(e,t,r){var i={result:!1,reason:xc.InvalidSource,target:e,source:null};if(!t||!e)return i;var s=(0,Xe.isComponent)(t)?t:null;if(!s){var u=this.getShallowWrapper();s=(u==null?void 0:u.append(t)[0])||null}if(i.source=s,!s)return i;var c=s.get("draggable");if((0,U.isFunction)(c))c=!!c(s,e,r);else{var f=e.getEl();c=(0,U.isArray)(c)?c.join(","):c,c=(0,U.isString)(c)?f==null?void 0:f.matches(c):c}if(!c)return Qr(Qr({},i),{reason:xc.SourceReject});var h=e.get("droppable");if((0,U.isFunction)(h))h=!!h(s,e,r);else if(h===!1&&e.isInstanceOf("text")&&s.get("textable"))h=!0;else{var f=s.getEl();h=(0,U.isArray)(h)?h.join(","):h,h=(0,U.isString)(h)?f==null?void 0:f.matches(h):h}var v=[e].concat(e.parents()).indexOf(s)>-1;return!h||v?Qr(Qr({},i),{reason:xc.TargetReject}):Qr(Qr({},i),{result:!0})},n.prototype.allById=function(){return this.componentsById},n.prototype.getById=function(e){return this.componentsById[e]||null},n.prototype.destroy=function(){var e,t=this.allById();Object.keys(t).forEach(function(r){return t[r]&&t[r].remove()}),(e=this.componentView)===null||e===void 0||e.remove(),[this.em,this.componentsById,this.componentView].forEach(function(r){return{}})},n}(vs);const rL=nL;var oL={stylePrefix:"css-",rules:[]};const iL=oL;var aL=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),sL=Number.MAX_VALUE,lL=function(o){var n=/(-?\d*\.?\d+)\w{0,}/.exec(o);return n?n[0]:""},uL=function(o){aL(n,o);function n(){var e=o.call(this)||this;return(0,U.bindAll)(e,"sortRules"),e.compCls=[],e.ids=[],e}return n.prototype.buildFromModel=function(e,t){var r=this;t===void 0&&(t={});var i="",s=this.em,u=s&&s.getConfig().avoidInlineStyle,c=e.styleToString(),f=e.classes;this.ids.push("#".concat(e.getId())),f.forEach(function(v){return r.compCls.push(v.getFullName())}),!u&&c&&(i="#".concat(e.getId(),"{").concat(c,"}"));var h=e.components();return h.forEach(function(v){return i+=r.buildFromModel(v,t)}),i},n.prototype.build=function(e,t){var r=this;t===void 0&&(t={});var i=t.json,s=t.em,u=t.cssc||(s==null?void 0:s.Css);this.em=s,this.compCls=[],this.ids=[],this.model=e;var c=[],f=e?this.buildFromModel(e,t):"",h=(0,U.isUndefined)(t.clearStyles)&&s?s.getConfig().clearStyles:t.clearStyles;if(u){var v=t.rules||u.getAll(),m={},_=[];t.onlyMatched&&e&&(0,Xe.hasWin)()&&(v=this.matchedRules(e,v)),v.forEach(function(C){var T=C.getAtRule();if(T){var k=m[T];k?k.push(C):m[T]=[C];return}var P=r.buildFromRule(C,_,t);i?c.push(P):f+=P}),this.sortMediaObject(m).forEach(function(C){var T="",k=C.key,P=C.value;P.forEach(function(L){var D=r.buildFromRule(L,_,t);L.get("singleAtRule")?f+="".concat(k,"{").concat(D,"}"):T+=D,i&&c.push(D)}),T&&(f+="".concat(k,"{").concat(T,"}"))}),s&&h&&v.remove&&v.remove(_)}return i?c.filter(function(C){return C}):f},n.prototype.buildFromRule=function(e,t,r){var i=this,s;r===void 0&&(r={});var u="",c=this.model,f=e.selectorsToString({skipAdd:1}),h=e.get("selectorsAdd"),v=e.get("singleAtRule"),m;if((s=e.get("selectors"))===null||s===void 0||s.forEach(function(C){var T=C.getFullName();(i.compCls.indexOf(T)>=0||i.ids.indexOf(T)>=0||r.keepUnusedStyles)&&(m=1)}),f&&m||h||v||!c){var _=e.getDeclaration({body:1});_&&(r.json?u=e:u+=_)}else t.push(e);return u},n.prototype.matchedRules=function(e,t){var r=this,i=e.getEl(),s=[];return t.forEach(function(u){try{u.selectorsToString().split(",").some(function(c){return i==null?void 0:i.matches(r.__cleanSelector(c))})&&s.push(u)}catch{}}),e.components().forEach(function(u){s=s.concat(r.matchedRules(u,t))}),s=s.filter(function(u,c){return s.indexOf(u)===c}),s},n.prototype.getQueryLength=function(e){var t=/(-?\d*\.?\d+)\w{0,}/.exec(e);return t?parseFloat(t[1]):sL},n.prototype.sortMediaObject=function(e){var t=this;e===void 0&&(e={});var r=[];return(0,U.each)(e,function(i,s){return r.push({key:s,value:i})}),r.sort(function(i,s){var u=[i.key,s.key].every(function(h){return h.indexOf("min-width")!==-1}),c=u?i.key:s.key,f=u?s.key:i.key;return t.getQueryLength(c)-t.getQueryLength(f)})},n.prototype.sortRules=function(e,t){var r=function(c){return c.get("mediaText")||""},i=[r(e),r(t)].every(function(c){return c.indexOf("min-width")!==-1}),s=r(i?e:t),u=r(i?t:e);return this.getQueryLength(s)-this.getQueryLength(u)},n.prototype.__cleanSelector=function(e){return e.split(" ").map(function(t){return t.split(":")[0]}).join(" ")},n}(gt.Kx);const cL=uL;var fL=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Cc=function(){return Cc=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},Cc.apply(this,arguments)},dL=function(o,n,e){if(e||arguments.length===2)for(var t=0,r=n.length,i;t<r;t++)(i||!(t in n))&&(i||(i=Array.prototype.slice.call(n,0,t)),i[t]=n[t]);return o.concat(i||Array.prototype.slice.call(n))},_v=((0,Xe.hasWin)()?window:{}).CSS,pL=function(o){fL(n,o);function n(e,t){t===void 0&&(t={});var r=o.call(this,e)||this;return r.config=e||{},r.opt=t,r.em=t.em,r.ensureSelectors(null,null,{}),r.on("change",r.__onChange),r}return n.prototype.defaults=function(){return{selectors:[],selectorsAdd:"",style:{},mediaText:"",state:"",stylable:!0,atRuleType:"",singleAtRule:!1,important:!1,group:"",shallow:!1,_undo:!0}},n.prototype.__onChange=function(e,t){var r=this.em,i=this.changedAttributes();i&&!(0,Xe.isEmptyObj)(i)&&(r==null||r.changesUp(t))},n.prototype.clone=function(){var e=Cc({},this.opt),t=Cc({},this.attributes);return t.selectors=this.get("selectors").map(function(r){return r.clone()}),new this.constructor(t,e)},n.prototype.ensureSelectors=function(e,t,r){var i=this.em,s=i==null?void 0:i.Selectors,u=[this,"change:selectors",this.ensureSelectors],c=this.getSelectors();if(this.stopListening.apply(this,u),c.models&&(c=dL([],c.models,!0)),c=(0,U.isString)(c)?[c]:c,Array.isArray(c)){var f=c.filter(function(h){return h}).map(function(h){return s?s.add(h):h});c=new es(f)}this.set("selectors",c,r),this.listenTo.apply(this,u)},n.prototype.getAtRule=function(){var e=this.get("atRuleType"),t=this.get("mediaText"),r=e?"@".concat(e):t?"@media":"";return r+(t&&r?" ".concat(t):"")},n.prototype.selectorsToString=function(e){e===void 0&&(e={});var t=[],r=this.get("state"),i=this.get("selectorsAdd"),s={escape:function(f){return _v&&_v.escape?_v.escape(f):f}},u=this.getSelectors().getFullString(0,s),c=r&&!e.skipState?":".concat(r):"";return u&&t.push("".concat(u).concat(c)),i&&!e.skipAdd&&t.push(i),t.join(", ")},n.prototype.getDeclaration=function(e){e===void 0&&(e={});var t="",r=this.attributes.important,i=this.selectorsToString(e),s=this.styleToString(Cc({important:r},e)),u=this.get("singleAtRule");return(i||u)&&(s||e.allowEmpty)&&(t=u?s:"".concat(i,"{").concat(s,"}")),t},n.prototype.getDevice=function(){var e=this.em,t=this.attributes,r=t.atRuleType,i=t.mediaText,s=(e==null?void 0:e.Devices.getDevices())||[],u=s.filter(function(c){return c.getWidthMedia()===""})[0];return r!=="media"||!i?u||null:s.filter(function(c){return c.getWidthMedia()===lL(i)})[0]||null},n.prototype.getState=function(){var e=this.em,t=this.get("state"),r=(e==null?void 0:e.Selectors.getStates())||[];return r.filter(function(i){return i.getName()===t})[0]||null},n.prototype.getComponent=function(){var e,t=this.getSelectors(),r=t.length==1&&t.at(0),i=r&&r.isId()&&r.get("name");return i&&((e=this.em)===null||e===void 0?void 0:e.Components.getById(i))||null},n.prototype.toCSS=function(e){e===void 0&&(e={});var t="",r=this.getAtRule(),i=this.getDeclaration(e);return(i||e.allowEmpty)&&(t=i),r&&t&&(t="".concat(r,"{").concat(t,"}")),t},n.prototype.toJSON=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=gt.Kx.prototype.toJSON.apply(this,t);if(!((e=this.em)===null||e===void 0)&&e.getConfig().avoidDefaults){var s=this.defaults();(0,U.forEach)(s,function(u,c){i[c]===u&&delete i[c]}),delete i.style.__p,(0,U.isEmpty)(i.selectors)&&delete i.selectors,(0,U.isEmpty)(i.style)&&delete i.style}return i},n.prototype.compare=function(e,t,r,i){var s;i===void 0&&(i={});var u=t||"",c=r||"",f=i.selectorsAdd||"",h=i.atRuleType||"",v=!(0,U.isArray)(e)&&!e.models?[e]:e.models||e;c&&!h&&(h="media");var m=v.map(function(k){return k.getFullName()}),_=(s=this.get("selectors"))===null||s===void 0?void 0:s.map(function(k){return k.getFullName()}),C=m.slice().sort(),T=_.slice().sort();return!(m.length!==_.length||!C.every(function(k,P){return k===T[P]})||this.get("state")!==u||this.get("mediaText")!==c||this.get("selectorsAdd")!==f||this.get("atRuleType")!==h)},n}(rS);const _S=pL;var hL=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),bS=function(o){hL(n,o);function n(e,t){var r=o.call(this,e)||this;return r.editor=t==null?void 0:t.em,setTimeout(function(){r.on("remove",r.onRemove),r.on("add",r.onAdd)}),r}return n.prototype.toJSON=function(e){var t=gt.pM.prototype.toJSON.call(this,e);return t.filter(function(r){return r.style&&!r.shallow})},n.prototype.onAdd=function(e,t,r){e.ensureSelectors(e,t,r)},n.prototype.onRemove=function(e){var t=this.editor;t.stopListening(e),t.UndoManager.remove(e)},n.prototype.add=function(e,t){return t===void 0&&(t={}),typeof e=="string"&&(e=this.editor.get("Parser").parseCss(e)),t.em=this.editor,gt.pM.prototype.add.apply(this,[e,t])},n}(gt.pM);const vL=bS;bS.prototype.model=_S;var gL=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Rs=function(){return Rs=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},Rs.apply(this,arguments)},mL=function(o,n,e){if(e||arguments.length===2)for(var t=0,r=n.length,i;t<r;t++)(i||!(t in n))&&(i||(i=Array.prototype.slice.call(n,0,t)),i[t]=n[t]);return o.concat(i||Array.prototype.slice.call(n))},yL=function(o){gL(n,o);function n(e){var t=o.call(this,e,"CssComposer",null,{},iL)||this;t.Selectors=es,t.storageKey="styles";var r=t.config,i=r.pStylePrefix;return i&&(r.stylePrefix=i+r.stylePrefix),r.rules=t.em.config.style||r.rules||"",t.rules=new vL([],r),t}return n.prototype.onLoad=function(){this.rules.add(this.config.rules,{silent:!0})},n.prototype.postLoad=function(){var e,t=(e=this.em)===null||e===void 0?void 0:e.get("UndoManager");t&&t.add(this.getAll())},n.prototype.store=function(){return this.getProjectData()},n.prototype.load=function(e){return this.loadProjectData(e,{all:this.rules})},n.prototype.add=function(e,t,r,i,s){i===void 0&&(i={}),s===void 0&&(s={});var u=t||"",c=r||"",f=Rs({},i),h=this.get(e,u,c,f);return h&&h.config&&!h.config.singleAtRule||(f.state=u,f.mediaText=c,f.selectors=[],c&&!f.atRuleType&&(f.atRuleType="media"),h=new _S(f,this.config),h.get("selectors").add(e,s),this.rules.add(h,s)),h},n.prototype.get=function(e,t,r,i){var s=e;if((0,U.isString)(e)){var u=this.em.Selectors,c=e.split(",")[0].trim(),f=this.em.Parser.parserCss.checkNode({selectors:c})[0];s=u.get(f.selectors)}return this.rules.find(function(h){return h.compare(s,t,r,i)})||null},n.prototype.getAll=function(){return this.rules},n.prototype.addCollection=function(e,t,r){t===void 0&&(t={}),r===void 0&&(r={});var i=this.em,s=[];(0,U.isString)(e)&&(e=i.Parser.parseCss(e));for(var u=e instanceof Array?e:[e],c=0,f=u.length;c<f;c++){var h=u[c]||{};if(h.selectors){var v=i==null?void 0:i.Selectors;v||console.warn("Selector Manager not found");for(var m=h.selectors,_=m instanceof Array?m:[m],C=[],T=0,k=_.length;T<k;T++){var P=v.add(_[T]);C.push(P)}var L=this.get(C,h.state,h.mediaText,h),D=this.add(C,h.state,h.mediaText,h,t),V=!L||!t.avoidUpdateStyle,re=h.style||{};if((0,Xe.isObject)(r)&&D.set(r,t),V){var _e=t.extend?Rs(Rs({},D.get("style")),re):re;D.set("style",_e,t)}s.push(D)}}return s},n.prototype.addRules=function(e){return this.addCollection(e)},n.prototype.setRule=function(e,t,r){t===void 0&&(t={}),r===void 0&&(r={});var i=r.atRuleType,s=r.atRuleParams,u=this.em.Parser.parserCss.checkNode({selectors:e,style:t})[0],c=u.state,f=u.selectorsAdd,h=this.em.Selectors,v=h.add(u.selectors),m=this.add(v,c,s,{selectorsAdd:f,atRule:i});return r.addStyles?m.addStyle(t,r):m.setStyle(t,r),m},n.prototype.getRule=function(e,t){t===void 0&&(t={});var r=this.em,i=r.Selectors,s=r.Parser.parserCss.checkNode({selectors:e})[0],u=i.get(s.selectors),c=s.state,f=s.selectorsAdd,h=t.atRuleType,v=t.atRuleParams;return u?this.get(u,c,v,{selectorsAdd:f,atRuleType:h}):void 0},n.prototype.getRules=function(e){var t=this.getAll();if(!e)return mL([],t.models,!0);var r={sort:!0},i=(0,U.isString)(e)?e.split(",").map(function(u){return u.trim()}):e,s=t.filter(function(u){return i.indexOf(u.getSelectors().getFullString(null,r))>=0});return s},n.prototype.setIdRule=function(e,t,r){t===void 0&&(t={}),r===void 0&&(r={});var i=r.addOpts,s=i===void 0?{}:i,u=r.mediaText,c=r.state||"",f=(0,U.isUndefined)(u)?this.em.getCurrentMedia():u,h=this.em.Selectors,v=h.add({name:e,type:bo.TYPE_ID},s),m=this.add(v,c,f,{},s);return m.setStyle(t,Rs(Rs({},r),s)),m},n.prototype.getIdRule=function(e,t){t===void 0&&(t={});var r=t.mediaText,i=t.state||"",s=(0,U.isUndefined)(r)?this.em.getCurrentMedia():r,u=this.em.Selectors.get(e,bo.TYPE_ID);return u&&this.get(u,i,s)},n.prototype.setClassRule=function(e,t,r){t===void 0&&(t={}),r===void 0&&(r={});var i=r.state||"",s=r.mediaText||this.em.getCurrentMedia(),u=this.em.Selectors,c=u.add({name:e,type:bo.TYPE_CLASS}),f=this.add(c,i,s);return f.setStyle(t,r),f},n.prototype.getClassRule=function(e,t){t===void 0&&(t={});var r=t.state||"",i=t.mediaText||this.em.getCurrentMedia(),s=this.em.Selectors.get(e,bo.TYPE_CLASS);return s&&this.get(s,r,i)},n.prototype.remove=function(e,t){var r=(0,U.isString)(e)?this.getRules(e):e,i=this.getAll().remove(r,t);return(0,U.isArray)(i)?i:[i]},n.prototype.clear=function(e){return e===void 0&&(e={}),this.getAll().reset([],e),this},n.prototype.getComponentRules=function(e,t){t===void 0&&(t={});var r=t.state,i=t.mediaText,s=t.current;s&&(r=this.em.get("state")||"",i=this.em.getCurrentMedia());var u=e.getId(),c=this.getAll().filter(function(f){return!(0,U.isUndefined)(r)&&f.get("state")!==r||!(0,U.isUndefined)(i)&&f.get("mediaText")!==i?!1:f.getSelectorsString()==="#".concat(u)});return c},n.prototype.render=function(){var e;return(e=this.rulesView)===null||e===void 0||e.remove(),this.rulesView=new eS({collection:this.rules,config:this.config}),this.rulesView.render().el},n.prototype.checkId=function(e,t){t===void 0&&(t={});var r=t.idMap,i=r===void 0?{}:r,s=[];if(!Object.keys(i).length)return s;var u=Array.isArray(e)?e:[e];return u.forEach(function(c){var f=c.selectors;if(f&&f.length==1){var h=f[0];if((0,U.isString)(h)){if(h[0]==="#"){var v=h.substring(1),m=i[v];v&&m&&(f[0]="#".concat(m),s.push(c))}}else if(h.name&&h.type===bo.TYPE_ID){var m=i[h.name];m&&(h.name=m,s.push(c))}}}),s},n.prototype.destroy=function(){var e;this.rules.reset(),this.rules.stopListening(),(e=this.rulesView)===null||e===void 0||e.remove()},n}(vs);const wL=yL;var _L={appendTo:"",blocks:[],appendOnClick:!1,custom:!1};const bL=_L;var xL=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),CL=function(o){xL(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype.defaults=function(){return{label:"",content:"",media:"",category:"",activate:!1,select:void 0,resetId:!1,disable:!1,onClick:void 0,attributes:{}}},Object.defineProperty(n.prototype,"category",{get:function(){var e=this.get("category");return e instanceof of?e:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"parent",{get:function(){return this.collection},enumerable:!1,configurable:!0}),n.prototype.getId=function(){return this.id},n.prototype.getLabel=function(){return this.get("label")},n.prototype.getMedia=function(){return this.get("media")},n.prototype.getContent=function(){return this.get("content")},n.prototype.getCategoryLabel=function(){var e=this.get("category");return(0,U.isFunction)(e==null?void 0:e.get)?e.get("label"):e!=null&&e.label?e==null?void 0:e.label:e},n}(gt.Kx);const xS=CL;var SL=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),CS=function(o){SL(n,o);function n(e,t){var r=o.call(this,e)||this;return r.em=t.em,r.on("add",r.handleAdd),r}return n.prototype.getCategories=function(){return this.em.Blocks.getCategories()},n.prototype.handleAdd=function(e){this.initCategory(e)},n}(fS);const Yf=CS;CS.prototype.model=xS;var Sc;(function(o){o.add="block:add",o.remove="block:remove",o.removeBefore="block:remove:before",o.update="block:update",o.dragStart="block:drag:start",o.drag="block:drag",o.dragEnd="block:drag:stop",o.categoryUpdate="block:category:update",o.custom="block:custom",o.all="block"})(Sc||(Sc={}));var OL=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),TL=function(o){OL(n,o);function n(e,t){t===void 0&&(t={});var r=o.call(this,e)||this,i=r.model;return r.em=t.em,r.config=t,r.endDrag=r.endDrag.bind(r),r.ppfx=t.pStylePrefix||"",r.listenTo(i,"destroy remove",r.remove),r.listenTo(i,"change",r.render),r}return n.prototype.events=function(){return{click:"handleClick",mousedown:"startDrag",dragstart:"handleDragStart",drag:"handleDrag",dragend:"handleDragEnd"}},n.prototype.__getModule=function(){return this.em.Blocks},n.prototype.handleClick=function(e){var t=this,r=t.config,i=t.model,s=t.em,u=i.get("onClick")||r.appendOnClick;if(s.trigger("block:click",i,e),u){if((0,U.isFunction)(u))return u(i,s==null?void 0:s.getEditor(),{event:e})}else return;var c=r.getSorter(),f=i.get("content"),h=s.getSelected();c.setDropContent(f);var v,m,_;if(h)if(m=c.validTarget(h.getEl(),f),m.valid)v=h;else{var C=h.parent();C&&(m=c.validTarget(C.getEl(),f),m.valid&&(v=C,_=C.components().indexOf(h)+1))}if(!v){var T=s.getWrapper();m=c.validTarget(T.getEl(),f),m.valid&&(v=T)}var k=v&&v.append(f,{at:_})[0];k&&s.setSelected(k,{scroll:1})},n.prototype.startDrag=function(e){var t=this,r=t.config,i=t.em,s=t.model,u=s.get("disable");if(!(e.button!==0||!r.getSorter||this.el.draggable||u)){i.refreshCanvas();var c=r.getSorter();c.__currentBlock=s,c.setDragHelper(this.el,e),c.setDropContent(this.model.get("content")),c.startSort(this.el),(0,wt.on)(document,"mouseup",this.endDrag)}},n.prototype.handleDragStart=function(e){this.__getModule().__startDrag(this.model,e)},n.prototype.handleDrag=function(e){this.__getModule().__drag(e)},n.prototype.handleDragEnd=function(){this.__getModule().__endDrag()},n.prototype.endDrag=function(){(0,wt.AU)(document,"mouseup",this.endDrag);var e=this.config.getSorter();e.moved=0,e.endMove()},n.prototype.render=function(){var e,t=this,r=t.em,i=t.el,s=t.$el,u=t.ppfx,c=t.model,f=c.get("disable"),h=c.get("attributes")||{},v=h.class||"",m="".concat(u,"block"),_=r&&r.t("blockManager.labels.".concat(c.id))||c.get("label"),C=c.get("render"),T=c.get("media"),k=f?"".concat(m,"--disable"):"".concat(u,"four-color-h");s.attr(h),i.className="".concat(v," ").concat(m," ").concat(u,"one-bg ").concat(k).trim(),i.innerHTML=`
      `.concat(T?'<div class="'.concat(m,'__media">').concat(T,"</div>"):"",`
      <div class="`).concat(m,'-label">').concat(_,`</div>
    `),i.title=h.title||((e=i.textContent)===null||e===void 0?void 0:e.trim()),i.setAttribute("draggable","".concat(!!((0,Xe.hasDnd)(r)&&!f)));var P=C&&C({el:i,model:c,className:m,prefix:u});return P&&(i.innerHTML=P),this},n}(gt.Ss);const EL=TL;var PL=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),kL=function(o,n){return Object.defineProperty?Object.defineProperty(o,"raw",{value:n}):o.raw=n,o},AL=function(o){PL(n,o);function n(e,t,r){var i=o.call(this,e)||this;i.config=t;var s=t.pStylePrefix||"";return i.em=t.em,i.catName=r,i.pfx=s,i.caretR="fa fa-caret-right",i.caretD="fa fa-caret-down",i.iconClass="".concat(s,"caret-icon"),i.activeClass="".concat(s,"open"),i.className="".concat(s).concat(r,"-category"),i.listenTo(i.model,"change:open",i.updateVisibility),i.model.view=i,i}return n.prototype.events=function(){return{"click [data-title]":"toggle"}},n.prototype.template=function(e){var t=e.pfx,r=e.label,i=e.catName;return Vo(g_||(g_=kL([`
      <div class="`,`title" data-title>
        <i class="`,`caret-icon"></i>
        `,`
      </div>
      <div class="`,"",`s-c"></div>
    `],[`
      <div class="`,`title" data-title>
        <i class="`,`caret-icon"></i>
        `,`
      </div>
      <div class="`,"",`s-c"></div>
    `])),t,t,r,t,i)},n.prototype.attributes=function(){return this.model.get("attributes")||{}},n.prototype.updateVisibility=function(){this.model.get("open")?this.open():this.close()},n.prototype.open=function(){this.$el.addClass(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretD),this.getTypeEl().style.display=""},n.prototype.close=function(){this.$el.removeClass(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretR),this.getTypeEl().style.display="none"},n.prototype.toggle=function(){var e=this.model;e.set("open",!e.get("open"))},n.prototype.getIconEl=function(){return this.iconEl||(this.iconEl=this.el.querySelector(".".concat(this.iconClass))),this.iconEl},n.prototype.getTypeEl=function(){return this.typeEl||(this.typeEl=this.el.querySelector(".".concat(this.pfx).concat(this.catName,"s-c"))),this.typeEl},n.prototype.append=function(e){this.getTypeEl().appendChild(e)},n.prototype.render=function(){var e=this,t=e.em,r=e.el,i=e.$el,s=e.model,u=e.pfx,c=e.catName,f=t.t("".concat(c,"Manager.categories.").concat(s.id))||s.get("label");return r.innerHTML=this.template({pfx:u,label:f,catName:c}),i.addClass(this.className),i.css({order:s.get("order")}),this.updateVisibility(),this},n}(gt.Ss);const SS=AL;var g_,ML=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),vp=function(){return vp=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},vp.apply(this,arguments)},DL=function(o){ML(n,o);function n(e,t){var r=o.call(this,e)||this;r.renderedCategories=new Map,(0,U.bindAll)(r,"getSorter","onDrag","onDrop","onMove"),r.config=t||{},r.categories=e.categories||"";var i=r.config.pStylePrefix||"";r.ppfx=i,r.noCatClass="".concat(i,"blocks-no-cat"),r.blockContClass="".concat(i,"blocks-c"),r.catsClass="".concat(i,"block-categories");var s=r.collection;return r.listenTo(s,"add",r.addTo),r.listenTo(s,"reset",r.render),r.em=r.config.em,r.em&&(r.config.getSorter=r.getSorter),r}return n.prototype.__getModule=function(){return this.em.Blocks},n.prototype.updateConfig=function(e){e===void 0&&(e={}),this.config=vp(vp({},this.config),e)},n.prototype.getSorter=function(){var e=this.em;if(e){if(!this.sorter){var t=e.Utils,r=e.Canvas;this.sorter=new t.Sorter({container:r.getBody(),placer:r.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:this.ppfx,onStart:this.onDrag,onEndMove:this.onDrop,onMove:this.onMove,document:r.getFrameEl().contentDocument,direction:"a",wmargin:1,nested:1,em:e,canvasRelative:1})}return this.sorter}},n.prototype.onDrag=function(e){this.em.stopDefault(),this.__getModule().__startDrag(this.sorter.__currentBlock,e)},n.prototype.onMove=function(e){this.__getModule().__drag(e)},n.prototype.onDrop=function(e){this.em.runDefault(),this.__getModule().__endDrag({component:e}),delete this.sorter.__currentBlock},n.prototype.addTo=function(e){this.add(e)},n.prototype.add=function(e,t){var r=this,i=r.config,s=r.renderedCategories,u=e.get("attributes"),c=new EL({model:e,attributes:u},i),f=c.render().el,h=e.parent.initCategory(e);if(h&&this.categories&&!i.ignoreCategories){var v=h.getId(),m=this.getCategoriesEl(),_=s.get(v);!_&&m&&(_=new SS({model:h},i,"block").render(),s.set(v,_),m.appendChild(_.el)),_==null||_.append(f);return}t?t.appendChild(f):this.append(f)},n.prototype.getCategoriesEl=function(){return this.catsEl||(this.catsEl=this.el.querySelector(".".concat(this.catsClass))),this.catsEl},n.prototype.getBlocksEl=function(){return this.blocksEl||(this.blocksEl=this.el.querySelector(".".concat(this.noCatClass," .").concat(this.blockContClass))),this.blocksEl},n.prototype.append=function(e){var t=this.getBlocksEl();t&&t.appendChild(e)},n.prototype.render=function(){var e=this,t=this.ppfx,r=document.createDocumentFragment();delete this.catsEl,delete this.blocksEl,this.renderedCategories=new Map,this.el.innerHTML=`
      <div class="`.concat(this.catsClass,`"></div>
      <div class="`).concat(this.noCatClass,`">
        <div class="`).concat(this.blockContClass,`"></div>
      </div>
    `),this.collection.each(function(s){return e.add(s,r)}),this.append(r);var i="".concat(this.blockContClass,"s ").concat(t,"one-bg ").concat(t,"two-color");return this.$el.addClass(i),this.rendered=!0,this},n}(gt.Ss);const m_=DL;var LL=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),$a=function(){return $a=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},$a.apply(this,arguments)},jL=function(o){LL(n,o);function n(e){var t,r=o.call(this,e,"BlockManager",new Yf(((t=e.config.blockManager)===null||t===void 0?void 0:t.blocks)||[],{em:e}),Sc,bL)||this;return r.events=Sc,r.Block=xS,r.Blocks=Yf,r.Category=of,r.Categories=Bd,r.storageKey="",r.blocks=r.all,r.blocksVisible=new Yf(r.blocks.models,{em:e}),r.categories=new Bd([],{em:e,events:{update:Sc.categoryUpdate}}),r.blocks.on("add",function(i){return r.blocksVisible.add(i)}),r.blocks.on("remove",function(i){return r.blocksVisible.remove(i)}),r.blocks.on("reset",function(i){return r.blocksVisible.reset(i.models)}),r.__onAllEvent=(0,U.debounce)(function(){return r.__trgCustom()},0),r}return n.prototype.__trgCustom=function(){this.em.trigger(this.events.custom,this.__customData())},n.prototype.__customData=function(){var e=this,t=this.__getBehaviour();return{bm:this,blocks:this.getAll().models,container:t.container,dragStart:function(r,i){return e.startDrag(r,i)},drag:function(r){return e.__drag(r)},dragStop:function(r){return e.endDrag(r)}}},n.prototype.__startDrag=function(e,t){var r=this,i=r.em,s=r.events,u=r.blocks,c=e.getContent?e.getContent():e;this._dragBlock=e,i.set({dragResult:null,dragContent:c}),[i,u].map(function(f){return f.trigger(s.dragStart,e,t)})},n.prototype.__drag=function(e){var t=this,r=t.em,i=t.events,s=t.blocks,u=this._dragBlock;[r,s].map(function(c){return c.trigger(i.drag,u,e)})},n.prototype.__endDrag=function(e){e===void 0&&(e={});var t=this,r=t.em,i=t.events,s=t.blocks,u=this._dragBlock,c=e.component||r.get("dragResult");if(delete this._dragBlock,c&&u){var f="activeOnRender",h=c.get&&c.get(f),v=u.get("activate")||h,m=u.get("select"),_=(0,U.isArray)(c)?c[0]:c;(m||v&&m!==!1)&&r.setSelected(_),v&&(_.trigger("active"),h&&_.unset(f)),u.get("resetId")&&_.onAll(function(C){return C.resetId()})}r.set({dragResult:null,dragContent:null}),u&&[r,s].map(function(C){return C.trigger(i.dragEnd,c,u)})},n.prototype.__getFrameViews=function(){return this.em.Canvas.getFrames().map(function(e){return e.view}).filter(Boolean)},n.prototype.__behaviour=function(e){return e===void 0&&(e={}),this._bhv=$a($a({},this._bhv||{}),e)},n.prototype.__getBehaviour=function(){return this._bhv||{}},n.prototype.startDrag=function(e,t){this.__startDrag(e,t),this.__getFrameViews().forEach(function(r){var i;return(i=r.droppable)===null||i===void 0?void 0:i.startCustom()})},n.prototype.endDrag=function(e){this.__getFrameViews().forEach(function(t){var r;return(r=t.droppable)===null||r===void 0?void 0:r.endCustom(e)}),this.__endDrag()},n.prototype.postRender=function(){var e=this,t=e.categories,r=e.config,i=e.em,s=this.blocksVisible;this.blocksView=new m_({collection:s,categories:t},$a($a({},r),{em:i})),this.__appendTo(s.models),this.__trgCustom()},n.prototype.add=function(e,t,r){r===void 0&&(r={});var i=t||{};return i.id=e,this.blocks.add(i,r)},n.prototype.get=function(e){return this.blocks.get(e)},n.prototype.getAll=function(){return this.blocks},n.prototype.getAllVisible=function(){return this.blocksVisible},n.prototype.remove=function(e,t){return t===void 0&&(t={}),this.__remove(e,t)},n.prototype.getCategories=function(){return this.categories},n.prototype.getContainer=function(){var e;return(e=this.blocksView)===null||e===void 0?void 0:e.el},n.prototype.getDragBlock=function(){return this._dragBlock},n.prototype.getBlocksByCategory=function(e){return cS(e||this.getAll().models)},n.prototype.render=function(e,t){t===void 0&&(t={});var r=this,i=r.categories,s=r.config,u=r.em,c=e||this.getAll().models;if(t.external){var f=new Yf(c,{em:u});return new m_({collection:f,categories:i},$a($a({em:u},s),t)).render().el}return this.blocksView&&(this.blocksView.updateConfig(t),this.blocksView.collection.reset(c),this.blocksView.rendered||(this.blocksView.render(),this.blocksView.rendered=!0)),this.getContainer()},n.prototype.destroy=function(){var e,t=[this.blocks,this.blocksVisible,this.categories];t.map(function(r){return r.stopListening()}),t.map(function(r){return r.reset()}),(e=this.blocksView)===null||e===void 0||e.remove()},n}(vs);const IL=jL;var NL={stylePrefix:"clm-",appendTo:"",selectors:[],states:[{name:"hover"},{name:"active"},{name:"nth-of-type(2n)"}],iconAdd:'<svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg>',iconSync:'<svg viewBox="0 0 24 24"><path d="M12 18c-3.31 0-6-2.69-6-6 0-1 .25-1.97.7-2.8L5.24 7.74A7.93 7.93 0 0 0 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4m0-11V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1-.25 1.97-.7 2.8l1.46 1.46A7.93 7.93 0 0 0 20 12c0-4.42-3.58-8-8-8z"></path></svg>',iconTagOn:'<svg viewBox="0 0 24 24"><path d="M19 19H5V5h10V3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-8h-2m-11.09-.92L6.5 11.5 11 16 21 6l-1.41-1.42L11 13.17l-3.09-3.09z"></path></svg>',iconTagOff:'<svg viewBox="0 0 24 24"><path d="M19 3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5a2 2 0 0 0-2-2m0 2v14H5V5h14z"></path></svg>',iconTagRemove:'<svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',componentFirst:!1,custom:!1};const RL=NL;var FL=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),OS=function(o){FL(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype.defaults=function(){return{name:"",label:""}},n.prototype.getName=function(){return this.get("name")},n.prototype.getLabel=function(){return this.get("label")||this.getName()},n}(gt.Kx);const bv=OS;OS.prototype.idAttribute="name";var VL=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),zL=function(o,n){return Object.defineProperty?Object.defineProperty(o,"raw",{value:n}):o.raw=n,o},y_="contentEditable",HL=function(o){VL(n,o);function n(e){e===void 0&&(e={});var t=o.call(this,e)||this,r=e.config||{};return t.config=r,t.module=e.module,t.coll=e.coll||null,t.pfx=r.stylePrefix||"",t.ppfx=r.pStylePrefix||"",t.em=r.em,t.listenTo(t.model,"change:active",t.updateStatus),t}return n.prototype.template=function(){var e=this,t=e.pfx,r=e.model,i=e.config,s=r.get("label")||"";return Vo(w_||(w_=zL([`
      <span id="`,'checkbox" class="',`tag-status" data-tag-status></span>
      <span id="`,'tag-label" data-tag-name>',`</span>
      <span id="`,'close" class="','tag-close" data-tag-remove> $',` </span>
    `],[`
      <span id="`,'checkbox" class="',`tag-status" data-tag-status></span>
      <span id="`,'tag-label" data-tag-name>',`</span>
      <span id="`,'close" class="','tag-close" data-tag-remove> $',` </span>
    `])),t,t,t,s,t,t,i.iconTagRemove)},n.prototype.events=function(){return{"click [data-tag-remove]":"removeTag","click [data-tag-status]":"changeStatus","dblclick [data-tag-name]":"startEditTag","focusout [data-tag-name]":"endEditTag"}},n.prototype.getInputEl=function(){return this.inputEl||(this.inputEl=this.el.querySelector("[data-tag-name]")),this.inputEl},n.prototype.startEditTag=function(){var e=this.em,t=this.getInputEl();t[y_]="true",t.focus(),e==null||e.setEditing(!0)},n.prototype.endEditTag=function(){var e=this,t=e.model,r=e.em,i=this.getInputEl(),s=i.textContent||"",u=r==null?void 0:r.Selectors;i[y_]="false",r==null||r.setEditing(!1),u&&u.rename(t,s)!==t&&(i.innerText=t.getLabel())},n.prototype.changeStatus=function(){var e=this.model;e.set("active",!e.getActive())},n.prototype.removeTag=function(){this.module.removeSelected(this.model)},n.prototype.updateStatus=function(){var e=this,t=e.model,r=e.$el,i=e.config,s=i.iconTagOn,u=i.iconTagOff,c=r.find("[data-tag-status]");t.get("active")?(c.html(s),r.removeClass("opac50")):(c.html(u),r.addClass("opac50"))},n.prototype.render=function(){var e=this,t=e.pfx,r=e.ppfx,i=e.$el,s=e.model,u="".concat(t,"tag"),c=["".concat(u," ").concat(r,"three-bg")];return s.get("protected")&&c.push("".concat(u,"-protected")),i.html(this.template()),i.attr("class",c.join(" ")),this.updateStatus(),this},n}(gt.Ss);const UL=HL;var w_,BL=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Zu=function(o,n){return Object.defineProperty?Object.defineProperty(o,"raw",{value:n}):o.raw=n,o},WL=function(o){BL(n,o);function n(e){e===void 0&&(e={});var t=o.call(this,e)||this;t.config=e.config||{},t.pfx=t.config.stylePrefix||"",t.ppfx=t.config.pStylePrefix||"",t.className=t.pfx+"tags",t.stateInputId=t.pfx+"states",t.stateInputC=t.pfx+"input-c",t.states=t.config.states||[];var r=t.config.em,i=t.collection;t.target=r;var s=r.Selectors;t.module=s,t.em=r,t.componentChanged=(0,U.debounce)(t.componentChanged.bind(t),0),t.checkSync=(0,U.debounce)(t.checkSync.bind(t),0);var u=no.I.update,c="".concat(u,":classes"),f="component:toggled ".concat(c),h="".concat(c," ").concat(u,":attributes:id change:state");return t.listenTo(r,f,t.componentChanged),t.listenTo(r,"styleManager:update",t.componentChanged),t.listenTo(r,h,t.__handleStateChange),t.listenTo(r,"styleable:change change:device",t.checkSync),t.listenTo(i,"add",t.addNew),t.listenTo(i,"reset",t.renderClasses),t.listenTo(i,"remove",t.tagRemoved),t.listenTo(s.getAll(),s.events.state,(0,U.debounce)(function(){return t.renderStates()},0)),t.delegateEvents(),t}return n.prototype.template=function(e){var t=e.labelInfo,r=e.labelHead,i=e.iconSync,s=e.iconAdd,u=e.pfx,c=e.ppfx;return Vo(__||(__=Zu([' <div id="','up" class="',`header">
        <div id="`,'label" class="','header-label">',`</div>
        <div id="`,'status-c" class="',`header-status">
          <span id="`,`input-c" data-states-c>
            <div class="`,"field ",`select">
              <span id="`,`input-holder">
                <select id="`,`states" data-states></select>
              </span>
              <div class="`,`sel-arrow">
                <div class="`,`d-s-arrow"></div>
              </div>
            </div>
          </span>
        </div>
      </div>
      <div id="`,'tags-field" class="',`field">
        <div id="`,`tags-c" data-selectors></div>
        <input id="`,`new" data-input />
        <span id="`,'add-tag" class="',"tags-btn ",'tags-btn__add" data-add> $',` </span>
        <span class="`,"tags-btn ",'tags-btn__sync" style="display: none" data-sync-style> $',` </span>
      </div>
      <div class="`,`sels-info">
        <div class="`,'label-sel">',`:</div>
        <div class="`,`sels" data-selected></div>
      </div>`],[' <div id="','up" class="',`header">
        <div id="`,'label" class="','header-label">',`</div>
        <div id="`,'status-c" class="',`header-status">
          <span id="`,`input-c" data-states-c>
            <div class="`,"field ",`select">
              <span id="`,`input-holder">
                <select id="`,`states" data-states></select>
              </span>
              <div class="`,`sel-arrow">
                <div class="`,`d-s-arrow"></div>
              </div>
            </div>
          </span>
        </div>
      </div>
      <div id="`,'tags-field" class="',`field">
        <div id="`,`tags-c" data-selectors></div>
        <input id="`,`new" data-input />
        <span id="`,'add-tag" class="',"tags-btn ",'tags-btn__add" data-add> $',` </span>
        <span class="`,"tags-btn ",'tags-btn__sync" style="display: none" data-sync-style> $',` </span>
      </div>
      <div class="`,`sels-info">
        <div class="`,'label-sel">',`:</div>
        <div class="`,`sels" data-selected></div>
      </div>`])),u,u,u,u,r,u,u,u,c,c,c,u,c,c,u,c,u,u,u,u,u,s,u,u,i,u,u,t,u)},n.prototype.events=function(){return{"change [data-states]":"stateChanged","click [data-add]":"startNewTag","focusout [data-input]":"endNewTag","keyup [data-input]":"onInputKeyUp","click [data-sync-style]":"syncStyle"}},n.prototype.syncStyle=function(){var e=this.em,t=this.getTarget(),r=e.Css,i={noDisabled:1},s=this.getCommonSelectors({opts:i}),u=e.get("state"),c=e.getCurrentMedia(),f=[],h=r.get(s,u,c)||r.add(s,u,c),v;this.getTargets().forEach(function(m){var _=r.getIdRule(m.getId(),{state:u,mediaText:c});v=_.getStyle(),_.setStyle({}),f.push(_)}),v&&h.addStyle(v),e.trigger("component:toggled"),e.trigger("component:sync-style",{component:t,selectors:s,mediaText:c,rule:h,ruleComponents:f,state:u})},n.prototype.tagRemoved=function(e){this.updateStateVis()},n.prototype.addNew=function(e){this.addToClasses(e)},n.prototype.startNewTag=function(){var e,t;(e=this.$addBtn)===null||e===void 0||e.css({display:"none"}),(t=this.$input)===null||t===void 0||t.show().focus()},n.prototype.endNewTag=function(){var e,t;(e=this.$addBtn)===null||e===void 0||e.css({display:""}),(t=this.$input)===null||t===void 0||t.hide().val("")},n.prototype.onInputKeyUp=function(e){var t;e.keyCode===13?(e.preventDefault(),this.addNewTag((t=this.$input)===null||t===void 0?void 0:t.val())):e.keyCode===27&&this.endNewTag()},n.prototype.checkStates=function(){var e=this.em.getState(),t=this.getStates();t&&t.val(e)},n.prototype.componentChanged=function(e){var t=e===void 0?{}:e,r=t.targets;this.updateSelection(r)},n.prototype.updateSelection=function(e){var t=e||this.getTargets();t=(0,U.isArray)(t)?t:[t];var r=[];return t&&t.length&&(r=this.getCommonSelectors({targets:t}),this.checkSync({validSelectors:r})),this.collection.reset(r),this.updateStateVis(t),this.module.__trgCustom(),r},n.prototype.getCommonSelectors=function(e){var t=e===void 0?{}:e,r=t.targets,i=t.opts,s=i===void 0?{}:i,u=r||this.getTargets();return this.module.__getCommonSelectors(u,s)},n.prototype._commonSelectors=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return(e=this.module).__common.apply(e,t)},n.prototype.checkSync=function(){var e=this,t=e.$btnSyncEl,r=e.config,i=e.collection,s=this.getTarget(),u;if(s&&r.componentFirst&&i.length){var c=s.getStyle();u=!(0,U.isEmpty)(c)}t&&t[u?"show":"hide"]()},n.prototype.getTarget=function(){return this.target.getSelected()},n.prototype.getTargets=function(){return this.target.getSelectedAll()},n.prototype.updateStateVis=function(e){var t=this.em,r=t&&t.getConfig().avoidInlineStyle,i=this.collection.length||r?"":"none";this.getStatesC().css("display",i),this.updateSelector(e)},n.prototype.__handleStateChange=function(){this.updateSelector(this.getTargets())},n.prototype.updateSelector=function(e){var t=this,r=this.el.querySelector("[data-selected]"),i=[],s=e||this.getTargets();s=(0,U.isArray)(s)?s:[s],s.forEach(function(u){return i.push(t.__getName(u))}),r&&(r.innerHTML=i.join(", ")),this.checkStates()},n.prototype.__getName=function(e){var t=this,r=t.pfx,i=t.config,s=t.em,u=i.selectedName,c=i.componentFirst,f;if((0,U.isString)(e))f=Vo(b_||(b_=Zu(['<span class="','sel-gen">',"</span>"],['<span class="','sel-gen">',"</span>"])),r,e);else{var h=e==null?void 0:e.getSelectors();if(!h)return"";var v=h.getStyleable(),m=s.get("state"),_=e.getId?Vo(x_||(x_=Zu(['<span class="','sel-cmp">',`</span>
            <span class="`,'sel-id">#',"</span>"],['<span class="','sel-cmp">',`</span>
            <span class="`,'sel-id">#',"</span>"])),r,e.getName(),r,e.getId()):"";f=this.collection.getFullString(v),f=f?Vo(C_||(C_=Zu(['<span class="','sel-rule">',"</span>"],['<span class="','sel-rule">',"</span>"])),r,f):e.get("selectorsAdd")||_,f=c&&_?_:f,f+=m?Vo(S_||(S_=Zu(['<span class="','sel-state">:',"</span>"],['<span class="','sel-state">:',"</span>"])),r,m):"",f=u?u({result:f,state:m,target:e}):f}return f&&'<span class="'.concat(r,'sel">').concat(f,"</span>")},n.prototype.stateChanged=function(e){var t=this.em,r=e.target.value;t.set("state",r)},n.prototype.addNewTag=function(e){var t=e.trim();t&&(this.module.addSelected({label:t}),this.endNewTag())},n.prototype.addToClasses=function(e,t){var r=t,i=this.getClasses(),s=new UL({model:e,config:this.config,coll:this.collection,module:this.module}).render().el;return r?r.appendChild(s):i.append(s),s},n.prototype.renderClasses=function(){var e=this,t=document.createDocumentFragment(),r=this.getClasses();r.empty(),this.collection.each(function(i){return e.addToClasses(i,t)}),r.append(t)},n.prototype.getClasses=function(){return this.$el.find("[data-selectors]")},n.prototype.getStates=function(){if(!this.$states){var e=this.$el.find("[data-states]");this.$states=e[0]&&e}return this.$states},n.prototype.getStatesC=function(){return this.$statesC||(this.$statesC=this.$el.find("#"+this.stateInputC)),this.$statesC},n.prototype.renderStates=function(){var e=this,t=e.module,r=e.em,i=r.t("selectorManager.emptyState"),s=t.getStates().map(function(c){var f=r.t("selectorManager.states.".concat(c.id))||c.getLabel()||c.id;return'<option value="'.concat(c.id,'">').concat(f,"</option>")}).join(""),u=this.getStates();u&&u.html('<option value="">'.concat(i,"</option>").concat(s)),this.checkStates()},n.prototype.render=function(){var e=this,t=e.em,r=e.pfx,i=e.ppfx,s=e.config,u=e.$el,c=e.el,f=s.render,h=s.iconSync,v=s.iconAdd,m={iconSync:h,iconAdd:v,labelHead:t.t("selectorManager.label"),labelInfo:t.t("selectorManager.selected"),ppfx:i,pfx:r,el:c};u.html(this.template(m));var _=f&&f(m);return _&&_!==c&&u.empty().append(_),this.$input=u.find("[data-input]"),this.$addBtn=u.find("[data-add]"),this.$classes=u.find("#"+r+"tags-c"),this.$btnSyncEl=u.find("[data-sync-style]"),this.$input.hide(),this.renderStates(),this.renderClasses(),u.attr("class","".concat(this.className," ").concat(i,"one-bg ").concat(i,"two-color")),this},n}(gt.Ss);const $L=WL;var __,b_,x_,C_,S_,KL=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Oc=function(){return Oc=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},Oc.apply(this,arguments)},xv=function(o,n,e){if(e||arguments.length===2)for(var t=0,r=n.length,i;t<r;t++)(i||!(t in n))&&(i||(i=Array.prototype.slice.call(n,0,t)),i[t]=n[t]);return o.concat(i||Array.prototype.slice.call(n))},O_=function(o){return(0,U.isString)(o)&&o[0]=="#"},T_=function(o){return(0,U.isString)(o)&&o[0]=="."},TS="selector",af="".concat(TS,":"),GL="".concat(af,"add"),YL="".concat(af,"update"),ES="".concat(af,"remove"),XL="".concat(ES,":before"),qL="".concat(af,"custom"),PS="".concat(af,"state"),JL={all:TS,update:YL,add:GL,remove:ES,removeBefore:XL,state:PS,custom:qL},ZL=function(o){KL(n,o);function n(e){var t=o.call(this,e,"SelectorManager",new es([]),JL,RL,{skipListen:!0})||this;t.Selector=bo,t.Selectors=es,t.storageKey="",(0,U.bindAll)(t,"__updateSelectedByComponents");var r=t.config,i=r.pStylePrefix;i&&(r.stylePrefix=i+r.stylePrefix),t.all=new es(r.selectors),t.selected=new es([],{em:e,config:r}),t.states=new gt.pM(r.states.map(function(c){return new bv(c)}),{model:bv}),t.model=new gt.Kx({cFirst:r.componentFirst,_undo:!0}),t.__update=(0,U.debounce)(function(){return t.__trgCustom()},0),t.__initListen({collections:[t.states,t.selected],propagate:[{entity:t.states,event:t.events.state}]}),e.on("change:state",function(c,f){return e.trigger(PS,f)}),t.model.on("change:cFirst",function(c,f){return e.trigger("selector:type",f)});var s="".concat(no.I.update,":classes");e.on("component:toggled ".concat(s),t.__updateSelectedByComponents);var u="component:toggled ".concat(s," change:device styleManager:update selector:state selector:type style:target");return t.model.listenTo(e,u,function(){return t.__update()}),t}return n.prototype.__trgCustom=function(e){this.em.trigger(this.events.custom,this.__customData(e))},n.prototype.getAll=function(e){return e===void 0&&(e={}),this.all?e.array?xv([],this.all.models,!0):this.all:[]},n.prototype.__customData=function(e){return e===void 0&&(e={}),this.__ctn=this.__ctn||e.container,{states:this.getStates(),selected:this.getSelected(),container:this.__ctn}},n.prototype.postRender=function(){this.__appendTo(),this.__trgCustom()},n.prototype.select=function(e,t){t===void 0&&(t={});var r=Array.isArray(e)?e:[e],i=this.em.Styles.select(r,t);this.selected.reset(this.__getCommonSelectors(i));var s=this.selectorTags,u=i.filter(function(c){return c}).map(function(c){return(0,Xe.isComponent)(c)||(0,Xe.isRule)(c)&&!c.get("selectorsAdd")?c:c.getSelectorsString()});return s&&s.componentChanged({targets:u}),this},n.prototype.addSelector=function(e,t,r){t===void 0&&(t={}),r===void 0&&(r={});var i=Oc({},t);(0,U.isObject)(e)?i=e:i.name=e,O_(i.name)?(i.name=i.name.substr(1),i.type=bo.TYPE_ID):T_(i.name)&&(i.name=i.name.substr(1)),i.label&&!i.name&&(i.name=this.escapeName(i.label));var s=i.name,u=this.getConfig(),c=this,f=c.all,h=c.em,v=s?this.get(s,i.type):f.where(i)[0];if(!v){var m=i instanceof bo?i:new bo(i,Oc(Oc({},r),{config:u,em:h}));return f.add(m,r)}return v},n.prototype.getSelector=function(e,t){return t===void 0&&(t=bo.TYPE_CLASS),O_(e)?(e=e.substr(1),t=bo.TYPE_ID):T_(e)&&(e=e.substr(1)),this.all.where({name:e,type:t})[0]},n.prototype.add=function(e,t){var r=this;t===void 0&&(t={});var i=(0,U.isString)(e)?{}:t;return(0,U.isArray)(e)?e.map(function(s){return r.addSelector(s,t,i)}):this.addSelector(e,t,i)},n.prototype.addClass=function(e){var t=this,r=[];return(0,U.isString)(e)&&(e=e.trim().split(" ")),e.forEach(function(i){return r.push(t.addSelector(i))}),r},n.prototype.get=function(e,t){var r=this;if((0,U.isArray)(e)){var i=[],s=e.map(function(u){return r.getSelector(u)}).filter(Boolean);return s.forEach(function(u){return i.indexOf(u)<0&&i.push(u)}),i}else return this.getSelector(e,t)},n.prototype.remove=function(e,t){return this.__remove(e,t)},n.prototype.rename=function(e,t,r){var i=this.escapeName(t),s=this.get(i);return s||e.set({name:i,label:t},r)},n.prototype.setState=function(e){return this.em.setState(e),this},n.prototype.getState=function(){return this.em.getState()},n.prototype.getStates=function(){return xv([],this.states.models,!0)},n.prototype.setStates=function(e,t){return this.states.reset(e.map(function(r){return new bv(r)}),t)},n.prototype.getSelected=function(){return this.__getCommon()},n.prototype.getSelectedAll=function(){return xv([],this.selected.models,!0)},n.prototype.addSelected=function(e){var t=this.add(e);this.em.getSelectedAll().forEach(function(r){r.getSelectors().add(t)})},n.prototype.removeSelected=function(e){this.em.getSelectedAll().forEach(function(t){!e.get("protected")&&t&&t.getSelectors().remove(e)})},n.prototype.duplicateSelected=function(e,t){var r=this;t===void 0&&(t={});var i=this.em,s=this.getSelected();if(!(s.indexOf(e)<0)){var u=this.getState(),c=i.getCurrentMedia(),f=i.Css.get(s,u,c),h=f==null?void 0:f.getStyle();if(i.getSelectedAll().forEach(function(m){var _=m.getSelectors();if(_.includes(e)){var C=t.suffix||" copy",T=e.getLabel(),k=r.addSelector("".concat(T).concat(C)),P=_.indexOf(e);_.remove(e),_.add(k,{at:P})}}),h){var v=i.Css.add(this.getSelected(),u,c);v.setStyle(h)}}},n.prototype.getSelectedTargets=function(){return this.em.Styles.getSelectedAll()},n.prototype.setComponentFirst=function(e){this.getConfig().componentFirst=e,this.model.set({cFirst:e})},n.prototype.getComponentFirst=function(){return this.getConfig().componentFirst},n.prototype.escapeName=function(e){var t=this.getConfig().escapeName;return t?t(e):bo.escapeName(e)},n.prototype.render=function(e){var t=this.selectorTags,r=this.getConfig(),i=t==null?void 0:t.el;return this.selected.reset(e),this.selectorTags=new $L({el:i,collection:this.selected,module:this,config:r}),this.selectorTags.render().el},n.prototype.destroy=function(){var e=this,t=e.selectorTags,r=e.model;r.stopListening(),this.__update.cancel(),this.__destroy(),t==null||t.remove(),this.selectorTags=void 0},n.prototype.__getCommon=function(){return this.__getCommonSelectors(this.em.getSelectedAll())},n.prototype.__getCommonSelectors=function(e,t){t===void 0&&(t={});var r=e.map(function(i){return i.getSelectors&&i.getSelectors().getValid(t)}).filter(Boolean);return this.__common.apply(this,r)},n.prototype.__common=function(){for(var e=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t.length?t.length===1?t[0]:t.length===2?t[0].filter(function(i){return t[1].indexOf(i)>=0}):t.slice(1).reduce(function(i,s){return e.__common(i,s)},t[0]):[]},n.prototype.__updateSelectedByComponents=function(){this.selected.reset(this.__getCommon())},n}(vs);const QL=ZL;var ej={textTags:["br","b","i","u","a","ul","ol"],textTypes:["text","textnode","comment"],parserCss:void 0,parserHtml:void 0,optionsHtml:{htmlType:"text/html",allowScripts:!1,allowUnsafeAttr:!1,allowUnsafeAttrValue:!1,keepEmptyTextNodes:!1}};const tj=ej;var Di,Zo={STYLE_RULE:1,CHARSET_RULE:2,IMPORT_RULE:3,MEDIA_RULE:4,FONT_FACE_RULE:5,PAGE_RULE:6,KEYFRAMES_RULE:7,KEYFRAME_RULE:8,NAMESPACE_RULE:10,COUNTER_STYLE_RULE:11,SUPPORTS_RULE:12,DOCUMENT_RULE:13,FONT_FEATURE_VALUES_RULE:14,VIEWPORT_RULE:15,REGION_STYLE_RULE:16},au=(Di={},Di[Zo.MEDIA_RULE]="media",Di[Zo.FONT_FACE_RULE]="font-face",Di[Zo.PAGE_RULE]="page",Di[Zo.KEYFRAMES_RULE]="keyframes",Di[Zo.COUNTER_STYLE_RULE]="counter-style",Di[Zo.SUPPORTS_RULE]="supports",Di[Zo.DOCUMENT_RULE]="document",Di[Zo.FONT_FEATURE_VALUES_RULE]="font-feature-values",Di[Zo.VIEWPORT_RULE]="viewport",Di),kS=(0,U.keys)(au),ly=[Zo.FONT_FACE_RULE,Zo.PAGE_RULE,Zo.COUNTER_STYLE_RULE,Zo.VIEWPORT_RULE],nj=kS.filter(function(o){return ly.indexOf(Number(o))<0}).map(function(o){return au[o]}).concat(["container","layer"]),rj=ly.map(function(o){return au[o]}),AS=function(o){o===void 0&&(o="");for(var n=[],e=[],t=o.split(","),r=0,i=t.length;r<i;r++){var s=t[r].trim();if(/^(\.{1}[\w\-]+)+(:{1,2}[\w\-()]+)?$/gi.test(s)||/^(#{1}[\w\-]+){1}(:{1,2}[\w\-()]+)?$/gi.test(s)){var u=s.split(".").filter(Boolean);e.push(u)}else n.push(s)}return{result:e,add:n}},oj=function(o){for(var n=o.style,e={},t=0,r=n.length;t<r;t++){var i=n[t],s=n.getPropertyValue(i),u=n.getPropertyPriority(i);e[i]="".concat(s).concat(u?" !".concat(u):"")}return e},E_=function(o){var n=o.conditionText||o.media&&o.media.mediaText||o.name||o.selectorText||"";return n.trim()},Wg=function(o,n,e){n===void 0&&(n={}),e===void 0&&(e={});var t={},r=o.length,i=o[r-1],s=i?i.split(/:(.+)/):[],u=s[1],c=e.atRule,f=e.selectorsAdd,h=e.mediaText,v=rj.indexOf(c)>=0;return v&&(t.singleAtRule=!0),c&&(t.atRuleType=c),f&&(t.selectorsAdd=f),h&&(t.mediaText=h),u&&(o[r-1]=s[0],t.state=u,s.splice(s.length-1,1)),t.selectors=o,t.style=n,t},P_=function(o){var n=o.cssText,e=n===void 0?"":n;return nj.find(function(t){return e.indexOf("@".concat(t))===0})},MS=function(o){for(var n=[],e=o.cssRules||[],t=0,r=e.length;t<r;t++){var i=e[t],s=i.type,u=!1,c="",f="",h=i.selectorText||i.keyText||"",v=ly.indexOf(s)>=0;if(v)u=!0,c=au[s],f=E_(i);else if(kS.indexOf("".concat(s))>=0||!s&&P_(i)){var m=MS(i),_=au[s]||P_(i);f=E_(i);for(var C=0,T=m.length;C<T;C++){var k=m[C];f&&(k.mediaText=f),k.atRuleType=_}n=n.concat(m)}if(!(!h&&!v)){for(var P=oj(i),L=AS(h),D=L.add,V=L.result,re=void 0,_e=0,Q=V.length;_e<Q;_e++){var pe=Wg(V[_e],P,{atRule:au[s]});n.push(pe),re=pe}if(D.length){var ne=D.join(", ");if(re)re.selectorsAdd=ne;else{var pe={selectors:[],selectorsAdd:ne,style:P};u&&(pe.singleAtRule=u),c&&(pe.atRuleType=c),f&&(pe.mediaText=f),n.push(pe)}}}}return n};const ij=function(o){var n=document.createElement("style");n.innerHTML=o,document.head.appendChild(n);var e=n.sheet;return document.head.removeChild(n),e?MS(e):[]};var aj=function(o,n){return n===void 0&&(n={}),{parse:function(e){var t=this,r=[],i=n.parserCss,s=o==null?void 0:o.Editor,u=i?i(e,s):ij(e);return u.forEach(function(c){return r=r.concat(t.checkNode(c))}),o==null||o.trigger("parse:css",{input:e,output:r,nodes:u}),r},checkNode:function(e){var t=e.selectors,r=e.style,i=[e];if((0,U.isString)(t)){var s=[],u=e,c=AS(t),f=c.result,h=c.add.join(", "),v={atRule:u.atRule,mediaText:u.params};if(f.length?f.forEach(function(_){s.push(Wg(_,r,v))}):s.push(Wg([],r,v)),h){var m=s[s.length-1];m.selectorsAdd=h}i=s}return i}}};const sj=aj;var lj=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),uj=function(o){lj(n,o);function n(e){var t=o.call(this,e,"Parser",tj)||this,r=t.config;return t.parserCss=sj(e,r),t.parserHtml=nS(e,r),t}return n.prototype.parseHtml=function(e,t){t===void 0&&(t={});var r=this,i=r.em,s=r.parserHtml;return s.compTypes=i.Components.getTypes()||[],s.parse(e,this.parserCss,t)},n.prototype.parseCss=function(e){return this.parserCss.parse(e)},n.prototype.destroy=function(){},n}($o);const cj=uj;var fj={id:"gjs-",type:"local",autosave:!0,autoload:!0,stepsBeforeSave:1,recovery:!1,onStore:function(o){return o},onLoad:function(o){return o},options:{local:{key:"gjsProject",checkLocal:!0},remote:{headers:{},urlStore:"",urlLoad:"",contentTypeJson:!0,fetchOptions:"",credentials:"include",onStore:function(o){return o},onLoad:function(o){return o}}}};const dj=fj;var k_=function(o,n,e,t){function r(i){return i instanceof e?i:new e(function(s){s(i)})}return new(e||(e=Promise))(function(i,s){function u(h){try{f(t.next(h))}catch(v){s(v)}}function c(h){try{f(t.throw(h))}catch(v){s(v)}}function f(h){h.done?i(h.value):r(h.value).then(u,c)}f((t=t.apply(o,n||[])).next())})},A_=function(o,n){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},t,r,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(f){return function(h){return c([f,h])}}function c(f){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,f[0]&&(e=0)),e;)try{if(t=1,r&&(i=f[0]&2?r.return:f[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,f[1])).done)return i;switch(r=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return e.label++,{value:f[1],done:!1};case 5:e.label++,r=f[1],f=[0];continue;case 7:f=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){e=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){e.label=f[1];break}if(f[0]===6&&e.label<i[1]){e.label=i[1],i=f;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(f);break}i[2]&&e.ops.pop(),e.trys.pop();continue}f=n.call(o,e)}catch(h){f=[6,h],r=0}finally{t=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},pj=function(){function o(){}return o.prototype.store=function(n){return k_(this,arguments,void 0,function(e,t){return t===void 0&&(t={}),A_(this,function(r){return this.hasLocal(t,!0)&&localStorage.setItem(t.key,JSON.stringify(e)),[2,e]})})},o.prototype.load=function(){return k_(this,arguments,void 0,function(n){var e;return n===void 0&&(n={}),A_(this,function(t){return e={},this.hasLocal(n,!0)&&(e=JSON.parse(localStorage.getItem(n.key)||"{}")),[2,e]})})},o.prototype.hasLocal=function(n,e){if(n===void 0&&(n={}),n.checkLocal&&(!(0,Xe.hasWin)()||!localStorage)){if(e)throw new Error("localStorage not available");return!1}return!0},o}();const hj=pj;function Jc(o){"@babel/helpers - typeof";return Jc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Jc(o)}function vj(o){var n=this.constructor;return this.then(function(e){return n.resolve(o()).then(function(){return e})},function(e){return n.resolve(o()).then(function(){return n.reject(e)})})}const gj=vj;var mj=setTimeout;function DS(o){return!!(o&&typeof o.length<"u")}function yj(){}function wj(o,n){return function(){o.apply(n,arguments)}}function ar(o){if(!(this instanceof ar))throw new TypeError("Promises must be constructed via new");if(typeof o!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],jS(o,this)}function LS(o,n){for(;o._state===3;)o=o._value;if(o._state===0){o._deferreds.push(n);return}o._handled=!0,ar._immediateFn(function(){var e=o._state===1?n.onFulfilled:n.onRejected;if(e===null){(o._state===1?$g:Zc)(n.promise,o._value);return}var t;try{t=e(o._value)}catch(r){Zc(n.promise,r);return}$g(n.promise,t)})}function $g(o,n){try{if(n===o)throw new TypeError("A promise cannot be resolved with itself.");if(n&&(Jc(n)==="object"||typeof n=="function")){var e=n.then;if(n instanceof ar){o._state=3,o._value=n,Kg(o);return}else if(typeof e=="function"){jS(wj(e,n),o);return}}o._state=1,o._value=n,Kg(o)}catch(t){Zc(o,t)}}function Zc(o,n){o._state=2,o._value=n,Kg(o)}function Kg(o){o._state===2&&o._deferreds.length===0&&ar._immediateFn(function(){o._handled||ar._unhandledRejectionFn(o._value)});for(var n=0,e=o._deferreds.length;n<e;n++)LS(o,o._deferreds[n]);o._deferreds=null}function _j(o,n,e){this.onFulfilled=typeof o=="function"?o:null,this.onRejected=typeof n=="function"?n:null,this.promise=e}function jS(o,n){var e=!1;try{o(function(t){e||(e=!0,$g(n,t))},function(t){e||(e=!0,Zc(n,t))})}catch(t){if(e)return;e=!0,Zc(n,t)}}ar.prototype.catch=function(o){return this.then(null,o)};ar.prototype.then=function(o,n){var e=new this.constructor(yj);return LS(this,new _j(o,n,e)),e};ar.prototype.finally=gj;ar.all=function(o){return new ar(function(n,e){if(!DS(o))return e(new TypeError("Promise.all accepts an array"));var t=Array.prototype.slice.call(o);if(t.length===0)return n([]);var r=t.length;function i(u,c){try{if(c&&(Jc(c)==="object"||typeof c=="function")){var f=c.then;if(typeof f=="function"){f.call(c,function(h){i(u,h)},e);return}}t[u]=c,--r===0&&n(t)}catch(h){e(h)}}for(var s=0;s<t.length;s++)i(s,t[s])})};ar.resolve=function(o){return o&&Jc(o)==="object"&&o.constructor===ar?o:new ar(function(n){n(o)})};ar.reject=function(o){return new ar(function(n,e){e(o)})};ar.race=function(o){return new ar(function(n,e){if(!DS(o))return e(new TypeError("Promise.race accepts an array"));for(var t=0,r=o.length;t<r;t++)ar.resolve(o[t]).then(n,e)})};ar._immediateFn=typeof setImmediate=="function"&&function(o){setImmediate(o)}||function(o){mj(o,0)};ar._unhandledRejectionFn=function(n){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",n)};const Gg=ar;(0,Xe.hasWin)()&&(window.Promise=window.Promise||Gg);const IS=typeof fetch=="function"?fetch.bind():function(o,n){return new Gg(function(e,t){var r=new XMLHttpRequest;r.open(n.method||"get",o),r.withCredentials=n.credentials=="include";for(var i in n.headers||{})r.setRequestHeader(i,n.headers[i]);r.onload=function(s){return e({status:r.status,statusText:r.statusText,text:function(){return Gg.resolve(r.responseText)}})},r.onerror=t,r.upload&&n.onProgress&&(r.upload.onprogress=n.onProgress),n.body?r.send(n.body):r.send()})};var gp=function(){return gp=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},gp.apply(this,arguments)},M_=function(o,n,e,t){function r(i){return i instanceof e?i:new e(function(s){s(i)})}return new(e||(e=Promise))(function(i,s){function u(h){try{f(t.next(h))}catch(v){s(v)}}function c(h){try{f(t.throw(h))}catch(v){s(v)}}function f(h){h.done?i(h.value):r(h.value).then(u,c)}f((t=t.apply(o,n||[])).next())})},D_=function(o,n){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},t,r,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(f){return function(h){return c([f,h])}}function c(f){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,f[0]&&(e=0)),e;)try{if(t=1,r&&(i=f[0]&2?r.return:f[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,f[1])).done)return i;switch(r=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return e.label++,{value:f[1],done:!1};case 5:e.label++,r=f[1],f=[0];continue;case 7:f=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){e=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){e.label=f[1];break}if(f[0]===6&&e.label<i[1]){e.label=i[1],i=f;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(f);break}i[2]&&e.ops.pop(),e.trys.pop();continue}f=n.call(o,e)}catch(h){f=[6,h],r=0}finally{t=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},bj=function(){function o(){}return o.prototype.store=function(n){return M_(this,arguments,void 0,function(e,t){return t===void 0&&(t={}),D_(this,function(r){switch(r.label){case 0:return[4,this.request(t.urlStore,this.__props(t,e),t)];case 1:return[2,r.sent()]}})})},o.prototype.load=function(){return M_(this,arguments,void 0,function(n){return n===void 0&&(n={}),D_(this,function(e){switch(e.label){case 0:return[4,this.request(n.urlLoad,this.__props(n),n)];case 1:return[2,e.sent()]}})})},o.prototype.request=function(n,e,t){return e===void 0&&(e={}),t===void 0&&(t={}),IS(n,e).then(function(r){var i=r.text(),s=(r.status/200|0)===1;return s?i:i.then(Promise.reject)}).then(function(r){var i=r&&(0,U.isString)(r);return t.contentTypeJson&&i?JSON.parse(r):r})},o.prototype.__props=function(n,e){n===void 0&&(n={});var t=n.contentTypeJson,r=n.headers||{},i=n.fetchOptions||{},s="X-Requested-With",u="Content-Type",c;if((0,U.isUndefined)(r[s])&&(r[s]="XMLHttpRequest"),(0,U.isUndefined)(r[u])&&t&&(r[u]="application/json; charset=utf-8"),e)if(t)c=JSON.stringify(e);else{c=new FormData;for(var f in e)c.append(f,e[f])}var h={method:c?"POST":"GET",credentials:n.credentials,headers:r,body:c};return gp(gp({},h),(0,U.isFunction)(i)?i(h):i)},o}();const xj=bj;var Yg;(function(o){o.start="storage:start",o.startStore="storage:start:store",o.startLoad="storage:start:load",o.load="storage:load",o.store="storage:store",o.after="storage:after",o.afterStore="storage:after:store",o.afterLoad="storage:after:load",o.end="storage:end",o.endStore="storage:end:store",o.endLoad="storage:end:load",o.error="storage:error",o.errorStore="storage:error:store",o.errorLoad="storage:error:load"})(Yg||(Yg={}));const mo=Yg;var Cj=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Gl=function(){return Gl=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},Gl.apply(this,arguments)},Cv=function(o,n,e,t){function r(i){return i instanceof e?i:new e(function(s){s(i)})}return new(e||(e=Promise))(function(i,s){function u(h){try{f(t.next(h))}catch(v){s(v)}}function c(h){try{f(t.throw(h))}catch(v){s(v)}}function f(h){h.done?i(h.value):r(h.value).then(u,c)}f((t=t.apply(o,n||[])).next())})},Sv=function(o,n){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},t,r,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(f){return function(h){return c([f,h])}}function c(f){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,f[0]&&(e=0)),e;)try{if(t=1,r&&(i=f[0]&2?r.return:f[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,f[1])).done)return i;switch(r=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return e.label++,{value:f[1],done:!1};case 5:e.label++,r=f[1],f=[0];continue;case 7:f=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){e=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){e.label=f[1];break}if(f[0]===6&&e.label<i[1]){e.label=i[1],i=f;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(f);break}i[2]&&e.ops.pop(),e.trys.pop();continue}f=n.call(o,e)}catch(h){f=[6,h],r=0}finally{t=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},Xf="local",L_="remote",Sj=function(o){Cj(n,o);function n(e){var t=o.call(this,e,"StorageManager",dj)||this;t.storages={},t.events=mo;var r=t.config;return r._disable&&(r.type=void 0),t.storages={},t.add(Xf,new hj),t.add(L_,new xj),t.setCurrent(r.type),t}return n.prototype.isAutosave=function(){return!!this.config.autosave},n.prototype.setAutosave=function(e){return this.config.autosave=!!e,this},n.prototype.getStepsBeforeSave=function(){return this.config.stepsBeforeSave},n.prototype.setStepsBeforeSave=function(e){return this.config.stepsBeforeSave=e,this},n.prototype.add=function(e,t){return this.storages[e]=t,this},n.prototype.get=function(e){return this.storages[e]},n.prototype.getStorages=function(){return this.storages},n.prototype.getCurrent=function(){return this.config.currentStorage},n.prototype.setCurrent=function(e){return this.getConfig().currentStorage=e,this},n.prototype.getCurrentStorage=function(){return this.get(this.getCurrent())},n.prototype.getStorageOptions=function(e){return this.getCurrentOptions(e)},n.prototype.store=function(e){return Cv(this,arguments,void 0,function(t,r){var i,s,u,c,f,h;return r===void 0&&(r={}),Sv(this,function(v){switch(v.label){case 0:i=this.getCurrentStorage(),s=Gl(Gl({},this.getCurrentOptions()),r),u=this.getRecoveryStorage(),c=this.getCurrentOptions(Xf),v.label=1;case 1:return v.trys.push([1,5,,9]),[4,this.__exec(i,s,t)];case 2:return v.sent(),f=u,f?[4,this.__exec(u,c,{})]:[3,4];case 3:f=v.sent(),v.label=4;case 4:return[3,9];case 5:return h=v.sent(),u?[4,this.__exec(u,c,t)]:[3,7];case 6:return v.sent(),[3,8];case 7:throw h;case 8:return[3,9];case 9:return[2,t]}})})},n.prototype.load=function(){return Cv(this,arguments,void 0,function(e){var t,r,i,s,u;return e===void 0&&(e={}),Sv(this,function(c){switch(c.label){case 0:return t=this.getCurrentStorage(),r=Gl(Gl({},this.getCurrentOptions()),e),i=this.getRecoveryStorage(),i?[4,this.__exec(i,this.getCurrentOptions(Xf))]:[3,5];case 1:if(u=c.sent(),(0,U.isEmpty)(u))return[3,5];c.label=2;case 2:return c.trys.push([2,4,,5]),[4,this.__askRecovery()];case 3:return c.sent(),s=u,[3,5];case 4:return c.sent(),[3,5];case 5:return s?[3,7]:[4,this.__exec(t,r)];case 6:s=c.sent(),c.label=7;case 7:return[2,s||{}]}})})},n.prototype.__askRecovery=function(){var e=this.em,t=this.getRecovery();return new Promise(function(r,i){(0,U.isFunction)(t)?t(r,i,e==null?void 0:e.getEditor()):confirm(e==null?void 0:e.t("storageManager.recover"))?r(null):i()})},n.prototype.getRecovery=function(){return this.config.recovery},n.prototype.getRecoveryStorage=function(){var e=this.getRecovery();return e&&this.getCurrent()===L_&&this.get(Xf)},n.prototype.__exec=function(e,t,r){return Cv(this,void 0,void 0,function(){var i,s,u,c,f,h,v,m,_,C,T,k,P,L;return Sv(this,function(D){switch(D.label){case 0:if(i=r?"store":"load",s=this.getConfig(),u=s.onStore,c=s.onLoad,!e)return[2,r||{}];this.onStart(i,r),D.label=1;case 1:return D.trys.push([1,14,,15]),h=(L=this.em)===null||L===void 0?void 0:L.getEditor(),v=void 0,r?(_=u,_?[4,u(r,h)]:[3,3]):[3,7];case 2:_=D.sent(),D.label=3;case 3:return m=_||r,C=t.onStore,C?[4,t.onStore(m,h)]:[3,5];case 4:C=D.sent(),D.label=5;case 5:return m=C||m,[4,e.store(m,t)];case 6:return v=D.sent(),f=r,[3,13];case 7:return[4,e.load(t)];case 8:return v=D.sent(),f=this.__clearKeys(v),T=t.onLoad,T?[4,t.onLoad(f,h)]:[3,10];case 9:T=D.sent(),D.label=10;case 10:return f=T||f,k=c,k?[4,c(f,h)]:[3,12];case 11:k=D.sent(),D.label=12;case 12:f=k||f,D.label=13;case 13:return this.onAfter(i,f,v),this.onEnd(i,f,v),[3,15];case 14:throw P=D.sent(),this.onError(i,P),P;case 15:return[2,f]}})})},n.prototype.__clearKeys=function(e){e===void 0&&(e={});var t=this.getConfig(),r=new RegExp("^".concat(t.id)),i={};for(var s in e){var u=s.replace(r,"");i[u]=e[s]}return i},n.prototype.getCurrentOptions=function(e){var t=this.getConfig(),r=e||this.getCurrent();return t.options[r]||{}},n.prototype.onStart=function(e,t){var r=this.em;if(r){var i=e==="load"?mo.startLoad:mo.startStore;r.trigger(mo.start,e,t),r.trigger(i,t)}},n.prototype.onAfter=function(e,t,r){var i=this.em;if(i){var s=e==="load"?mo.afterLoad:mo.afterStore;i.trigger(mo.after),i.trigger(s,t,r);var u=e==="load"?mo.load:mo.store;i.trigger(u,t,r)}},n.prototype.onEnd=function(e,t,r){var i=this.em;if(i){var s=e==="load"?mo.endLoad:mo.endStore;i.trigger(mo.end,e,t,r),i.trigger(s,t,r)}},n.prototype.onError=function(e,t){var r=this.em;if(r){var i=e==="load"?mo.errorLoad:mo.errorStore;r.trigger(mo.error,t,e),r.trigger(i,t),this.onEnd(e,t)}},n.prototype.canAutoload=function(){var e=this.getCurrentStorage();return!!e&&!!this.config.autoload},n.prototype.destroy=function(){this.storages={}},n}($o);const Oj=Sj;var Tj={stylePrefix:"trt-",appendTo:"",optionsTarget:[{value:!1},{value:"_blank"}],custom:!1};const Ej=Tj;var Pj=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Tc=function(){return Tc=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},Tc.apply(this,arguments)},NS=function(o){Pj(n,o);function n(e){e===void 0&&(e={});var t=o.call(this,e)||this;t.events={},t.appendInput=!0;var r=e.config,i=r===void 0?{}:r,s=t,u=s.model,c=s.eventCapture,f=u.target,h=u.attributes.type;t.config=i,t.em=i.em,t.pfx=i.stylePrefix||"",t.ppfx=i.pStylePrefix||"",t.target=f,t.className=t.pfx+"trait",t.clsField="".concat(t.ppfx,"field ").concat(t.ppfx,"field-").concat(h);var v=[["change:value",t.onValueChange],["remove",t.removeView]];return v.forEach(function(m){var _=m[0],C=m[1];u.off(_,C),t.listenTo(u,_,C)}),u.view=t,t.listenTo(u,"change:label",t.render),t.listenTo(u,"change:placeholder",t.rerender),t.events={},c.forEach(function(m){return t.events[m]="onChange"}),t.delegateEvents(),t.init(),t}return n.prototype.attributes=function(){return this.model.get("attributes")||{}},n.prototype.templateLabel=function(e){var t=this.ppfx,r=this.getLabel();return'<div class="'.concat(t,'label" title="').concat(r,'">').concat(r,"</div>")},n.prototype.templateInput=function(e){var t=this.clsField;return'<div class="'.concat(t,'" data-input></div>')},n.prototype.getClbOpts=function(){return{component:this.target,trait:this.model,elInput:this.getInputElem()}},n.prototype.removeView=function(){this.remove(),this.removed()},n.prototype.init=function(){},n.prototype.removed=function(){},n.prototype.onRender=function(e){},n.prototype.onUpdate=function(e){},n.prototype.onEvent=function(e){},n.prototype.onChange=function(e){var t=this.getInputElem();t&&!(0,U.isUndefined)(t.value)&&this.model.set("value",t.value),this.onEvent(Tc(Tc({},this.getClbOpts()),{event:e}))},n.prototype.getValueForTarget=function(){return this.model.get("value")},n.prototype.setInputValue=function(e){var t=this.getInputElem();t&&(t.value=e)},n.prototype.onValueChange=function(e,t,r){if(r===void 0&&(r={}),r.fromTarget)this.setInputValue(e.get("value")),this.postUpdate();else{var i=this.getValueForTarget();e.setTargetValue(i,r)}},n.prototype.renderLabel=function(){var e=this,t=e.$el,r=e.target,i=this.getLabel(),s=this.templateLabel(r);this.createLabel&&(s=this.createLabel({label:i,component:r,trait:this})||""),t.find("[data-label]").append(s)},n.prototype.getLabel=function(){var e=this.em,t=this.model.attributes,r=t.label,i=t.name;return e.t("traitManager.traits.labels.".concat(i))||(0,Xe.capitalize)(r||i).replace(/-/g," ")},n.prototype.getComponent=function(){return this.target},n.prototype.getInputEl=function(){if(!this.$input){var e=this,t=e.em,r=e.model,i=r,s=r.attributes.name,u=i.get("placeholder")||i.get("default")||"",c=i.get("type")||"text",f=i.get("min"),h=i.get("max"),v=this.getModelValue(),m=(0,Hn.default)('<input type="'.concat(c,'">')),_=t.t("traitManager.traits.attributes.".concat(s))||{};m.attr(Tc({placeholder:u},_)),(0,U.isUndefined)(v)||(i.set({value:v},{silent:!0}),m.prop("value",v)),f&&m.prop("min",f),h&&m.prop("max",h),this.$input=m}return this.$input.get(0)},n.prototype.getInputElem=function(){var e=this,t=e.input,r=e.$input;return t||r&&r.get&&r.get(0)||this.getElInput()},n.prototype.getModelValue=function(){return this.model.getValue()},n.prototype.getElInput=function(){return this.elInput},n.prototype.renderField=function(){var e=this,t=e.$el,r=e.appendInput,i=e.model,s=t.find("[data-input]"),u=s[s.length-1],c=i.el;c||(c=this.createInput?this.createInput(this.getClbOpts()):this.getInputEl()),(0,U.isString)(c)?(u.innerHTML=c,this.elInput=u.firstChild):(r?u.appendChild(c):u.insertBefore(c,u.firstChild),this.elInput=c),i.el=this.elInput},n.prototype.hasLabel=function(){var e=this.model.attributes.label;return!this.noLabel&&e!==!1},n.prototype.rerender=function(){delete this.model.el,this.render()},n.prototype.postUpdate=function(){this.onUpdate(this.getClbOpts())},n.prototype.render=function(){var e=this,t=e.$el,r=e.pfx,i=e.ppfx,s=e.model,u=s.attributes,c=u.type,f=u.id,h=this.hasLabel&&this.hasLabel(),v="".concat(r,"trait");delete this.$input;var m='<div class="'.concat(v," ").concat(v,"--").concat(c,`">
      `).concat(h?'<div class="'.concat(i,'label-wrp" data-label></div>'):"",`
      <div class="`).concat(i,"field-wrp ").concat(i,"field-wrp--").concat(c,`" data-input>
        `).concat(this.templateInput?(0,U.isFunction)(this.templateInput)?this.templateInput(this.getClbOpts()):this.templateInput:"",`
      </div>
    </div>`);return t.empty().append(m),h&&this.renderLabel(),this.renderField(),this.el.className="".concat(v,"__wrp ").concat(v,"__wrp-").concat(f),this.postUpdate(),this.onRender(this.getClbOpts()),this},n}(gt.Ss);const Sa=NS;NS.prototype.eventCapture=["change"];var kj=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),RS=function(o){kj(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype.templateInput=function(){return""},n.prototype.onChange=function(){this.handleClick()},n.prototype.handleClick=function(){this.model.runCommand()},n.prototype.renderLabel=function(){this.model.get("label")&&Sa.prototype.renderLabel.apply(this)},n.prototype.getInputEl=function(){var e=this,t=e.model,r=e.ppfx,i=t.props(),s=i.labelButton,u=i.text,c=i.full,f=s||u,h="".concat(r,"btn"),v='<button type="button" class="'.concat(h,"-prim").concat(c?" ".concat(h,"--full"):"",'">').concat(f,"</button>");return v},n}(Sa);const Aj=RS;RS.prototype.eventCapture=["click button"];var Mj=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Dj=function(o){Mj(n,o);function n(){var e=o!==null&&o.apply(this,arguments)||this;return e.appendInput=!1,e}return n.prototype.templateInput=function(){var e=this,t=e.ppfx,r=e.clsField;return'<label class="'.concat(r,`" data-input>
    <i class="`).concat(t,`chk-icon"></i>
  </label>`)},n.prototype.onChange=function(){this.model.set("value",this.getInputElem().checked)},n.prototype.setInputValue=function(e){var t=this.getInputElem();t&&(t.checked=!!e)},n.prototype.getInputEl=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=!this.$input,i=Sa.prototype.getInputEl.apply(this,e);if(r){var s=void 0,u=void 0,c=this,f=c.model,h=c.target,v=f.attributes.valueFalse,m=f.getName();f.changeProp?(s=h.get(m),u=s):(u=h.get("attributes")[m],s=!!(u||u==="")),!(0,U.isUndefined)(v)&&u===v&&(s=!1),i.checked=s}return i},n}(Sa);const Lj=Dj;function jj(o,n){if(!(0,Xe.hasWin)())return;var e={beforeShow:_,move:_,change:_,show:_,hide:_,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},t=[],r=!!/msie/i.exec(window.navigator.userAgent),i=function(){function X(je,Se){return!!~(""+je).indexOf(Se)}var fe=document.createElement("div"),z=fe.style;return z.cssText="background-color:rgba(0,0,0,.5)",X(z.backgroundColor,"rgba")||X(z.backgroundColor,"hsla")}(),s=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),u=function(){var X="";if(r)for(var fe=1;fe<=6;fe++)X+="<div class='sp-"+fe+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",X,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}();function c(X,fe,z,je){for(var Se=[],Be=0;Be<X.length;Be++){var qe=X[Be];if(qe){var st=W(qe),ut=st.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";ut+=W.equals(fe,qe)?" sp-thumb-active":"";var Ot=st.toString(je.preferredFormat||"rgb"),Ht=i?"background-color:"+st.toRgbString():"filter:"+st.toFilter();Se.push('<span title="'+Ot+'" data-color="'+st.toRgbString()+'" class="'+ut+'"><span class="sp-thumb-inner" style="'+Ht+';"></span></span>')}else{var Bt="sp-clear-display";Se.push(o("<div />").append(o('<span data-color="" style="background-color:transparent;" class="'+Bt+'"></span>').attr("title",je.noColorSelectedText)).html())}}return"<div class='sp-cf "+z+"'>"+Se.join("")+"</div>"}function f(){for(var X=0;X<t.length;X++)t[X]&&t[X].hide()}function h(X,fe){var z=o.extend({},e,X);return z.callbacks={move:T(z.move,fe),change:T(z.change,fe),show:T(z.show,fe),hide:T(z.hide,fe),beforeShow:T(z.beforeShow,fe)},z}function v(X,fe){var z=h(fe,X),je=z.flat,Se=z.showSelectionPalette,Be=z.localStorageKey,qe=z.theme,st=z.callbacks,ut=P(Kr,10),Ot=!1,Ht=!1,Bt=!0,Kt=0,hn=0,Bn=0,G=0,ve=0,Ee=0,Ke=0,pt=0,Dt=0,Ut=0,bn=1,Nn=[],yn=[],Wn={},ln=z.selectionPalette.slice(0),Pn=z.maxSelectionSize,Br="sp-dragging",on=null,An=X.ownerDocument;An.body;var $t=o(X),At=!1,Ft=o(u,An).addClass(qe),Dr=Ft.find(".sp-picker-container"),Lr=Ft.find(".sp-color"),$n=Ft.find(".sp-dragger"),Tn=Ft.find(".sp-hue"),sr=Ft.find(".sp-slider"),an=Ft.find(".sp-alpha-inner"),xt=Ft.find(".sp-alpha"),Qn=Ft.find(".sp-alpha-handle"),xn=Ft.find(".sp-input"),er=Ft.find(".sp-palette"),qt=Ft.find(".sp-initial"),fn=Ft.find(".sp-cancel"),pr=Ft.find(".sp-clear"),Wr=Ft.find(".sp-choose"),Ze=Ft.find(".sp-palette-toggle"),jt=$t.is("input"),io=jt&&$t.attr("type")==="color"&&L(),B=jt&&!je,ue=B?o(s).addClass(qe).addClass(z.className).addClass(z.replacerClassName):o([]),Ve=B?ue:$t,tt=ue.find(".sp-preview-inner"),it=z.color||jt&&$t.val(),Gt=!1,Jt=z.preferredFormat,Cn=!z.showButtons||z.clickoutFiresChange,sn=!it,hr=z.allowEmpty&&!io;function ao(){if(z.showPaletteOnly&&(z.showPalette=!0),Ze.text(z.showPaletteOnly?z.togglePaletteMoreText:z.togglePaletteLessText),z.palette){Nn=z.palette.slice(0),yn=o.isArray(Nn[0])?Nn:[Nn],Wn={};for(var Pt=0;Pt<yn.length;Pt++)for(var Lt=0;Lt<yn[Pt].length;Lt++){var en=W(yn[Pt][Lt]).toRgbString();Wn[en]=!0}}Ft.toggleClass("sp-flat",je),Ft.toggleClass("sp-input-disabled",!z.showInput),Ft.toggleClass("sp-alpha-enabled",z.showAlpha),Ft.toggleClass("sp-clear-enabled",hr),Ft.toggleClass("sp-buttons-disabled",!z.showButtons),Ft.toggleClass("sp-palette-buttons-disabled",!z.togglePaletteOnly),Ft.toggleClass("sp-palette-disabled",!z.showPalette),Ft.toggleClass("sp-palette-only",z.showPaletteOnly),Ft.toggleClass("sp-initial-disabled",!z.showInitial),Ft.addClass(z.className).addClass(z.containerClassName),Kr()}function Ko(){if(r&&Ft.find("*:not(input)").attr("unselectable","on"),ao(),B&&$t.after(ue).hide(),hr||pr.hide(),je)$t.after(Ft).hide();else{var Pt=z.appendTo==="parent"?$t.parent():o(z.appendTo);Pt.length!==1&&(Pt=o("body")),Pt.append(Ft)}To(),Ve.bind("click.spectrum touchstart.spectrum",function(Vt){At||Hi(),Vt.stopPropagation(),o(Vt.target).is("input")||Vt.preventDefault()}),($t.is(":disabled")||z.disabled===!0)&&uo(),Ft.click(C),xn.change(Yo),xn.bind("paste",function(){setTimeout(Yo,1)}),xn.keydown(function(Vt){Vt.keyCode==13&&Yo()}),fn.text(z.cancelText),fn.bind("click.spectrum",function(Vt){Vt.stopPropagation(),Vt.preventDefault(),Po(),$r()}),pr.attr("title",z.clearText),pr.bind("click.spectrum",function(Vt){Vt.stopPropagation(),Vt.preventDefault(),sn=!0,ko(),je&&lo(!0)}),Wr.text(z.chooseText),Wr.bind("click.spectrum",function(Vt){Vt.stopPropagation(),Vt.preventDefault(),r&&xn.is(":focus")&&xn.trigger("change"),Ta()&&(lo(!0),$r())}),Ze.text(z.showPaletteOnly?z.togglePaletteMoreText:z.togglePaletteLessText),Ze.bind("click.spectrum",function(Vt){Vt.stopPropagation(),Vt.preventDefault(),z.showPaletteOnly=!z.showPaletteOnly,!z.showPaletteOnly&&!je&&Ft.css("left","-="+(Dr.outerWidth(!0)+5)),ao()}),k(xt,function(Vt,En,Mn){bn=Vt/ve,sn=!1,Mn.shiftKey&&(bn=Math.round(bn*10)/10),ko()},li,Eo),k(Tn,function(Vt,En){pt=parseFloat(En/G),sn=!1,z.showAlpha||(bn=1),ko()},li,Eo),k(Lr,function(Vt,En,Mn){if(!Mn.shiftKey)on=null;else if(!on){var vr=Dt*Kt,co=hn-Ut*hn,gr=Math.abs(Vt-vr)>Math.abs(En-co);on=gr?"x":"y"}var Ir=!on||on==="x",Gr=!on||on==="y";Ir&&(Dt=parseFloat(Vt/Kt)),Gr&&(Ut=parseFloat((hn-En)/hn)),sn=!1,z.showAlpha||(bn=1),ko()},li,Eo),it?(Tr(it),so(),Jt=z.preferredFormat||W(it).getFormat(),Or(it)):so(),je&&Rn();function Lt(Vt){return Vt.data&&Vt.data.ignore?(Tr(o(Vt.target).closest(".sp-thumb-el").data("color")),ko()):(Tr(o(Vt.target).closest(".sp-thumb-el").data("color")),ko(),z.hideAfterPaletteSelect&&(lo(!0),$r())),!1}var en=r?"mousedown.spectrum":"click.spectrum touchstart.spectrum";er.delegate(".sp-thumb-el",en,Lt),qt.delegate(".sp-thumb-el:nth-child(1)",en,{ignore:!0},Lt)}function To(){if(Be&&window.localStorage){try{var Pt=window.localStorage[Be].split(",#");Pt.length>1&&(delete window.localStorage[Be],o.each(Pt,function(Lt,en){Or(en)}))}catch{}try{ln=window.localStorage[Be].split(";")}catch{}}}function Or(Pt){if(Se){var Lt=W(Pt).toRgbString();if(!Wn[Lt]&&o.inArray(Lt,ln)===-1)for(ln.push(Lt);ln.length>Pn;)ln.shift();if(Be&&window.localStorage)try{window.localStorage[Be]=ln.join(";")}catch{}}}function Go(){var Pt=[];if(z.showPalette)for(var Lt=0;Lt<ln.length;Lt++){var en=W(ln[Lt]).toRgbString();Wn[en]||Pt.push(ln[Lt])}return Pt.reverse().slice(0,z.maxSelectionSize)}function zi(){var Pt=Fn(),Lt=o.map(yn,function(en,Vt){return c(en,Pt,"sp-palette-row sp-palette-row-"+Vt,z)});To(),ln&&Lt.push(c(Go(),Pt,"sp-palette-row sp-palette-row-selection",z)),er.html(Lt.join(""))}function xi(){if(z.showInitial){var Pt=Gt,Lt=Fn();qt.html(c([Pt,Lt],Lt,"sp-palette-row-initial",z))}}function li(){(hn<=0||Kt<=0||G<=0)&&Kr(),Ht=!0,Ft.addClass(Br),on=null,$t.trigger("dragstart.spectrum",[Fn()])}function Eo(){Ht=!1,Ft.removeClass(Br),$t.trigger("dragstop.spectrum",[Fn()])}function Yo(){var Pt=xn.val();if((Pt===null||Pt==="")&&hr)Tr(null),lo(!0);else{var Lt=W(Pt);Lt.isValid()?(Tr(Lt),lo(!0)):xn.addClass("sp-validation-error")}}function Hi(){Ot?$r():Rn()}function Rn(){var Pt=o.Event("beforeShow.spectrum");if(Ot){Kr();return}if($t.trigger("beforeShow.spectrum",[Fn()]),!(st.beforeShow(Fn())===!1||Pt.isDefaultPrevented())){f(),Ot=!0;var Lt=o(An);Lt.bind("keydown.spectrum",qn),Lt.bind("click.spectrum",aa),o(window).bind("resize.spectrum",ut),ue.addClass("sp-active"),Ft.removeClass("sp-hidden"),Kr(),so(),Gt=Fn(),xi(),st.show(Gt),$t.trigger("show.spectrum",[Gt])}}function qn(Pt){Pt.keyCode===27&&$r()}function aa(Pt){Pt.button!=2&&(Ht||(Cn?lo(!0):Po(),$r()))}function $r(){!Ot||je||(Ot=!1,o(An).unbind("keydown.spectrum",qn),o(An).unbind("click.spectrum",aa),o(window).unbind("resize.spectrum",ut),ue.removeClass("sp-active"),Ft.addClass("sp-hidden"),st.hide(Fn()),$t.trigger("hide.spectrum",[Fn()]))}function Po(){Tr(Gt,!0)}function Tr(Pt,Lt){if(W.equals(Pt,Fn())){so();return}var en,Vt;!Pt&&hr?sn=!0:(sn=!1,Bt=!Pt,en=W(Pt),Vt=en.toHsv(),pt=Vt.h%360/360,Dt=Vt.s,Ut=Vt.v,bn=Vt.a),so(),en&&en.isValid()&&!Lt&&(Jt=z.preferredFormat||en.getFormat())}function Fn(Pt){return Pt=Pt||{},hr&&sn?null:W.fromRatio({h:pt,s:Dt,v:Ut,a:Math.round(bn*100)/100},{format:Pt.format||Jt})}function Ta(){return!xn.hasClass("sp-validation-error")}function ko(){so(),st.move(Fn()),$t.trigger("move.spectrum",[Fn()])}function so(){xn.removeClass("sp-validation-error"),Ao();var Pt=W.fromRatio({h:pt,s:1,v:1});Lr.css("background-color",Pt.toHexString());var Lt=Jt;bn<1&&!(bn===0&&Lt==="name")&&(Lt==="hex"||Lt==="hex3"||Lt==="hex6"||Lt==="name")&&(Lt="rgb");var en=Fn({format:Lt}),Vt="";if(tt.removeClass("sp-clear-display"),tt.css("background-color","transparent"),!en&&hr)tt.addClass("sp-clear-display");else{var En=en.toHexString(),Mn=en.toRgbString();if(i||en.alpha===1?tt.css("background-color",Mn):(tt.css("background-color","transparent"),tt.css("filter",en.toFilter())),z.showAlpha){var vr=en.toRgb();vr.a=0;var co=W(vr).toRgbString(),gr="linear-gradient(left, "+co+", "+En+")";r?an.css("filter",W(co).toFilter({gradientType:1},En)):(an.css("background","-webkit-"+gr),an.css("background","-moz-"+gr),an.css("background","-ms-"+gr),an.css("background","linear-gradient(to right, "+co+", "+En+")"))}Vt=en.toString(Lt)}z.showInput&&xn.val(Vt),z.showPalette&&zi(),xi()}function Ao(){var Pt=Dt,Lt=Ut;if(hr&&sn)Qn.hide(),sr.hide(),$n.hide();else{Qn.show(),sr.show(),$n.show();var en=Pt*Kt,Vt=hn-Lt*hn;en=Math.max(-Bn,Math.min(Kt-Bn,en-Bn)),Vt=Math.max(-Bn,Math.min(hn-Bn,Vt-Bn)),$n.css({top:Vt+"px",left:en+"px"});var En=bn*ve;Qn.css({left:En-Ee/2+"px"});var Mn=pt*G;sr.css({top:Mn-Ke+"px"})}}function lo(Pt){var Lt=Fn(),en="",Vt=Bt?!0:!W.equals(Lt,Gt);Lt&&(en=Lt.toString(Jt),!Ot&&Or(Lt)),jt&&$t.val(en),Pt&&Vt&&(st.change(Lt),$t.trigger("change",[Lt]))}function Kr(){Ot&&(Kt=Lr.width(),hn=Lr.height(),Bn=$n.height(),Tn.width(),G=Tn.height(),Ke=sr.height(),ve=xt.width(),Ee=Qn.width(),je||(Ft.css("position","absolute"),z.offset?Ft.offset(z.offset):Ft.offset(m(Ft,Ve))),Ao(),z.showPalette&&zi(),$t.trigger("reflow.spectrum"))}function Ui(){$t.show(),Ve.unbind("click.spectrum touchstart.spectrum"),Ft.remove(),ue.remove(),t[jr.id]=null}function Bi(Pt,Lt){if(Pt===n)return o.extend({},z);if(Lt===n)return z[Pt];z[Pt]=Lt,Pt==="preferredFormat"&&(Jt=z.preferredFormat),ao()}function ui(){At=!1,$t.attr("disabled",!1),Ve.removeClass("sp-disabled")}function uo(){$r(),At=!0,$t.attr("disabled",!0),Ve.addClass("sp-disabled")}function Ci(Pt){z.offset=Pt,Kr()}Ko();var jr={show:Rn,hide:$r,toggle:Hi,reflow:Kr,option:Bi,enable:ui,disable:uo,offset:Ci,set:function(Pt){Tr(Pt),lo()},get:Fn,destroy:Ui,container:Ft};return jr.id=t.push(jr)-1,jr}function m(X,fe){for(var z=fe[0],je=X[0],Se=je.parentElement,Be=z.getBoundingClientRect(),qe=je.offsetWidth,st=je.offsetHeight,ut={top:0,left:0,width:z.offsetWidth,height:z.offsetHeight};z&&(ut.top+=z.offsetTop-z.scrollTop,ut.left+=z.offsetLeft-z.scrollLeft,!(z===Se||!Se.contains(z.offsetParent)));)z=z.offsetParent;return Be.right+qe>window.innerWidth-window.scrollX&&Be.right-qe>0&&(ut.left-=qe-ut.width),Be.bottom+st<window.innerHeight-window.scrollY?ut.top+=ut.height:ut.top-=st,ut}function _(){}function C(X){X.stopPropagation()}function T(X,fe){var z=Array.prototype.slice,je=z.call(arguments,2);return function(){return X.apply(fe,je.concat(z.call(arguments)))}}function k(X,fe,z,je){fe=fe||function(){},z=z||function(){},je=je||function(){};var Se=document,Be=!1,qe={},st=0,ut=0,Ot="ontouchstart"in window,Ht={};Ht.selectstart=Bt,Ht.dragstart=Bt,Ht["touchmove mousemove"]=Kt,Ht["touchend mouseup"]=Bn;function Bt(G){G.stopPropagation&&G.stopPropagation(),G.preventDefault&&G.preventDefault(),G.returnValue=!1}function Kt(G){if(Be){if(r&&Se.documentMode<9&&!G.button)return Bn();var ve=G&&G.touches&&G.touches[0],Ee=ve&&ve.pageX||G.pageX,Ke=ve&&ve.pageY||G.pageY,pt=Math.max(0,Math.min(Ee-qe.left,ut)),Dt=Math.max(0,Math.min(Ke-qe.top,st));Ot&&Bt(G),fe.apply(X,[pt,Dt,G])}}function hn(G){var ve=G.which?G.which==3:G.button==2;!ve&&!Be&&z.apply(X,arguments)!==!1&&(Be=!0,st=o(X).height(),ut=o(X).width(),qe=o(X).offset(),o(Se).bind(Ht),o(Se.body).addClass("sp-dragging"),Kt(G),Bt(G))}function Bn(){Be&&(o(Se).unbind(Ht),o(Se.body).removeClass("sp-dragging"),setTimeout(function(){je.apply(X,arguments)},0)),Be=!1}o(X).bind("touchstart mousedown",hn)}function P(X,fe,z){var je;return function(){var Se=this,Be=arguments,qe=function(){je=null,X.apply(Se,Be)};z&&clearTimeout(je),(z||!je)&&(je=setTimeout(qe,fe))}}function L(){return o.fn.spectrum.inputTypeColorSupport()}var D="spectrum.id";o.fn.spectrum=function(X,fe){if(typeof X=="string"){var z=this,je=Array.prototype.slice.call(arguments,1);return this.each(function(){var Se=t[o(this).data(D)];if(Se){var Be=Se[X];if(!Be)throw new Error("Spectrum: no such method: '"+X+"'");X=="get"?z=Se.get():X=="container"?z=Se.container:X=="option"?z=Se.option.apply(Se,je):X=="destroy"?(Se.destroy(),o(this).removeData(D)):Be.apply(Se,je)}}),z}return this.spectrum("destroy").each(function(){var Se=o.extend({},X,o(this).data()),Be=v(this,Se);o(this).data(D,Be.id)})},o.fn.spectrum.load=!0,o.fn.spectrum.loadOpts={},o.fn.spectrum.draggable=k,o.fn.spectrum.defaults=e,o.fn.spectrum.inputTypeColorSupport=function X(){if(typeof X._cachedResult>"u"){var fe=o("<input type='color'/>")[0];X._cachedResult=fe.type==="color"&&fe.value!==""}return X._cachedResult},o.spectrum={},o.spectrum.localization={},o.spectrum.palettes={},o.fn.spectrum.processNativeColorInputs=function(){var X=o("input[type=color]");X.length&&!L()&&X.spectrum({preferredFormat:"hex6"})};var V=/^[\s,#]+/,re=/\s+$/,_e=0,Q=Math,pe=Q.round,ne=Q.min,me=Q.max,Y=Q.random,W=function(X,fe){if(X=X||"",fe=fe||{},X instanceof W)return X;if(!(this instanceof W))return new W(X,fe);var z=te(X);this._originalInput=X,this._r=z.r,this._g=z.g,this._b=z.b,this._a=z.a,this._roundA=pe(100*this._a)/100,this._format=fe.format||z.format,this._gradientType=fe.gradientType,this._r<1&&(this._r=pe(this._r)),this._g<1&&(this._g=pe(this._g)),this._b<1&&(this._b=pe(this._b)),this._ok=z.ok,this._tc_id=_e++};W.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var X=this.toRgb();return(X.r*299+X.g*587+X.b*114)/1e3},setAlpha:function(X){return this._a=Rt(X),this._roundA=pe(100*this._a)/100,this},toHsv:function(){var X=ke(this._r,this._g,this._b);return{h:X.h*360,s:X.s,v:X.v,a:this._a}},toHsvString:function(){var X=ke(this._r,this._g,this._b),fe=pe(X.h*360),z=pe(X.s*100),je=pe(X.v*100);return this._a==1?"hsv("+fe+", "+z+"%, "+je+"%)":"hsva("+fe+", "+z+"%, "+je+"%, "+this._roundA+")"},toHsl:function(){var X=ge(this._r,this._g,this._b);return{h:X.h*360,s:X.s,l:X.l,a:this._a}},toHslString:function(){var X=ge(this._r,this._g,this._b),fe=pe(X.h*360),z=pe(X.s*100),je=pe(X.l*100);return this._a==1?"hsl("+fe+", "+z+"%, "+je+"%)":"hsla("+fe+", "+z+"%, "+je+"%, "+this._roundA+")"},toHex:function(X){return Le(this._r,this._g,this._b,X)},toHexString:function(X){return"#"+this.toHex(X)},toHex8:function(){return $e(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:pe(this._r),g:pe(this._g),b:pe(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+pe(this._r)+", "+pe(this._g)+", "+pe(this._b)+")":"rgba("+pe(this._r)+", "+pe(this._g)+", "+pe(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:pe(E(this._r,255)*100)+"%",g:pe(E(this._g,255)*100)+"%",b:pe(E(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+pe(E(this._r,255)*100)+"%, "+pe(E(this._g,255)*100)+"%, "+pe(E(this._b,255)*100)+"%)":"rgba("+pe(E(this._r,255)*100)+"%, "+pe(E(this._g,255)*100)+"%, "+pe(E(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:un[Le(this._r,this._g,this._b,!0)]||!1},toFilter:function(X){var fe="#"+$e(this._r,this._g,this._b,this._a),z=fe,je=this._gradientType?"GradientType = 1, ":"";if(X){var Se=W(X);z=Se.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+je+"startColorstr="+fe+",endColorstr="+z+")"},toString:function(X){var fe=!!X;X=X||this._format;var z=!1,je=this._a<1&&this._a>=0,Se=!fe&&je&&(X==="hex"||X==="hex6"||X==="hex3"||X==="name");return Se?X==="name"&&this._a===0?this.toName():this.toRgbString():(X==="rgb"&&(z=this.toRgbString()),X==="prgb"&&(z=this.toPercentageRgbString()),(X==="hex"||X==="hex6")&&(z=this.toHexString()),X==="hex3"&&(z=this.toHexString(!0)),X==="hex8"&&(z=this.toHex8String()),X==="name"&&(z=this.toName()),X==="hsl"&&(z=this.toHslString()),X==="hsv"&&(z=this.toHsvString()),z||this.toHexString())},_applyModification:function(X,fe){var z=X.apply(null,[this].concat([].slice.call(fe)));return this._r=z._r,this._g=z._g,this._b=z._b,this.setAlpha(z._a),this},lighten:function(){return this._applyModification(He,arguments)},brighten:function(){return this._applyModification(_t,arguments)},darken:function(){return this._applyModification(Te,arguments)},desaturate:function(){return this._applyModification(be,arguments)},saturate:function(){return this._applyModification(Re,arguments)},greyscale:function(){return this._applyModification(rt,arguments)},spin:function(){return this._applyModification(Ne,arguments)},_applyCombination:function(X,fe){return X.apply(null,[this].concat([].slice.call(fe)))},analogous:function(){return this._applyCombination(bt,arguments)},complement:function(){return this._applyCombination(Ye,arguments)},monochromatic:function(){return this._applyCombination(Yt,arguments)},splitcomplement:function(){return this._applyCombination(nt,arguments)},triad:function(){return this._applyCombination(Fe,arguments)},tetrad:function(){return this._applyCombination(vt,arguments)}},W.fromRatio=function(X,fe){if(typeof X=="object"){var z={};for(var je in X)X.hasOwnProperty(je)&&(je==="a"?z[je]=X[je]:z[je]=se(X[je]));X=z}return W(X,fe)};function te(X){var fe={r:0,g:0,b:0},z=1,je=!1,Se=!1;return typeof X=="string"&&(X=ot(X)),typeof X=="object"&&(X.hasOwnProperty("r")&&X.hasOwnProperty("g")&&X.hasOwnProperty("b")?(fe=q(X.r,X.g,X.b),je=!0,Se=String(X.r).substr(-1)==="%"?"prgb":"rgb"):X.hasOwnProperty("h")&&X.hasOwnProperty("s")&&X.hasOwnProperty("v")?(X.s=se(X.s),X.v=se(X.v),fe=he(X.h,X.s,X.v),je=!0,Se="hsv"):X.hasOwnProperty("h")&&X.hasOwnProperty("s")&&X.hasOwnProperty("l")&&(X.s=se(X.s),X.l=se(X.l),fe=R(X.h,X.s,X.l),je=!0,Se="hsl"),X.hasOwnProperty("a")&&(z=X.a)),z=Rt(z),{ok:je,format:X.format||Se,r:ne(255,me(fe.r,0)),g:ne(255,me(fe.g,0)),b:ne(255,me(fe.b,0)),a:z}}function q(X,fe,z){return{r:E(X,255)*255,g:E(fe,255)*255,b:E(z,255)*255}}function ge(X,fe,z){X=E(X,255),fe=E(fe,255),z=E(z,255);var je=me(X,fe,z),Se=ne(X,fe,z),Be,qe,st=(je+Se)/2;if(je==Se)Be=qe=0;else{var ut=je-Se;switch(qe=st>.5?ut/(2-je-Se):ut/(je+Se),je){case X:Be=(fe-z)/ut+(fe<z?6:0);break;case fe:Be=(z-X)/ut+2;break;case z:Be=(X-fe)/ut+4;break}Be/=6}return{h:Be,s:qe,l:st}}function R(X,fe,z){var je,Se,Be;X=E(X,360),fe=E(fe,100),z=E(z,100);function qe(Ot,Ht,Bt){return Bt<0&&(Bt+=1),Bt>1&&(Bt-=1),Bt<1/6?Ot+(Ht-Ot)*6*Bt:Bt<1/2?Ht:Bt<2/3?Ot+(Ht-Ot)*(2/3-Bt)*6:Ot}if(fe===0)je=Se=Be=z;else{var st=z<.5?z*(1+fe):z+fe-z*fe,ut=2*z-st;je=qe(ut,st,X+1/3),Se=qe(ut,st,X),Be=qe(ut,st,X-1/3)}return{r:je*255,g:Se*255,b:Be*255}}function ke(X,fe,z){X=E(X,255),fe=E(fe,255),z=E(z,255);var je=me(X,fe,z),Se=ne(X,fe,z),Be,qe,st=je,ut=je-Se;if(qe=je===0?0:ut/je,je==Se)Be=0;else{switch(je){case X:Be=(fe-z)/ut+(fe<z?6:0);break;case fe:Be=(z-X)/ut+2;break;case z:Be=(X-fe)/ut+4;break}Be/=6}return{h:Be,s:qe,v:st}}function he(X,fe,z){X=E(X,360)*6,fe=E(fe,100),z=E(z,100);var je=Q.floor(X),Se=X-je,Be=z*(1-fe),qe=z*(1-Se*fe),st=z*(1-(1-Se)*fe),ut=je%6,Ot=[z,qe,Be,Be,st,z][ut],Ht=[st,z,z,qe,Be,Be][ut],Bt=[Be,Be,st,z,z,qe][ut];return{r:Ot*255,g:Ht*255,b:Bt*255}}function Le(X,fe,z,je){var Se=[ee(pe(X).toString(16)),ee(pe(fe).toString(16)),ee(pe(z).toString(16))];return je&&Se[0].charAt(0)==Se[0].charAt(1)&&Se[1].charAt(0)==Se[1].charAt(1)&&Se[2].charAt(0)==Se[2].charAt(1)?Se[0].charAt(0)+Se[1].charAt(0)+Se[2].charAt(0):Se.join("")}function $e(X,fe,z,je){var Se=[ee(ae(je)),ee(pe(X).toString(16)),ee(pe(fe).toString(16)),ee(pe(z).toString(16))];return Se.join("")}W.equals=function(X,fe){return!X||!fe?!1:W(X).toRgbString()==W(fe).toRgbString()},W.random=function(){return W.fromRatio({r:Y(),g:Y(),b:Y()})};function be(X,fe){fe=fe===0?0:fe||10;var z=W(X).toHsl();return z.s-=fe/100,z.s=H(z.s),W(z)}function Re(X,fe){fe=fe===0?0:fe||10;var z=W(X).toHsl();return z.s+=fe/100,z.s=H(z.s),W(z)}function rt(X){return W(X).desaturate(100)}function He(X,fe){fe=fe===0?0:fe||10;var z=W(X).toHsl();return z.l+=fe/100,z.l=H(z.l),W(z)}function _t(X,fe){fe=fe===0?0:fe||10;var z=W(X).toRgb();return z.r=me(0,ne(255,z.r-pe(255*-(fe/100)))),z.g=me(0,ne(255,z.g-pe(255*-(fe/100)))),z.b=me(0,ne(255,z.b-pe(255*-(fe/100)))),W(z)}function Te(X,fe){fe=fe===0?0:fe||10;var z=W(X).toHsl();return z.l-=fe/100,z.l=H(z.l),W(z)}function Ne(X,fe){var z=W(X).toHsl(),je=(pe(z.h)+fe)%360;return z.h=je<0?360+je:je,W(z)}function Ye(X){var fe=W(X).toHsl();return fe.h=(fe.h+180)%360,W(fe)}function Fe(X){var fe=W(X).toHsl(),z=fe.h;return[W(X),W({h:(z+120)%360,s:fe.s,l:fe.l}),W({h:(z+240)%360,s:fe.s,l:fe.l})]}function vt(X){var fe=W(X).toHsl(),z=fe.h;return[W(X),W({h:(z+90)%360,s:fe.s,l:fe.l}),W({h:(z+180)%360,s:fe.s,l:fe.l}),W({h:(z+270)%360,s:fe.s,l:fe.l})]}function nt(X){var fe=W(X).toHsl(),z=fe.h;return[W(X),W({h:(z+72)%360,s:fe.s,l:fe.l}),W({h:(z+216)%360,s:fe.s,l:fe.l})]}function bt(X,fe,z){fe=fe||6,z=z||30;var je=W(X).toHsl(),Se=360/z,Be=[W(X)];for(je.h=(je.h-(Se*fe>>1)+720)%360;--fe;)je.h=(je.h+Se)%360,Be.push(W(je));return Be}function Yt(X,fe){fe=fe||6;for(var z=W(X).toHsv(),je=z.h,Se=z.s,Be=z.v,qe=[],st=1/fe;fe--;)qe.push(W({h:je,s:Se,v:Be})),Be=(Be+st)%1;return qe}W.mix=function(X,fe,z){z=z===0?0:z||50;var je=W(X).toRgb(),Se=W(fe).toRgb(),Be=z/100,qe=Be*2-1,st=Se.a-je.a,ut;qe*st==-1?ut=qe:ut=(qe+st)/(1+qe*st),ut=(ut+1)/2;var Ot=1-ut,Ht={r:Se.r*ut+je.r*Ot,g:Se.g*ut+je.g*Ot,b:Se.b*ut+je.b*Ot,a:Se.a*Be+je.a*(1-Be)};return W(Ht)},W.readability=function(X,fe){var z=W(X),je=W(fe),Se=z.toRgb(),Be=je.toRgb(),qe=z.getBrightness(),st=je.getBrightness(),ut=Math.max(Se.r,Be.r)-Math.min(Se.r,Be.r)+Math.max(Se.g,Be.g)-Math.min(Se.g,Be.g)+Math.max(Se.b,Be.b)-Math.min(Se.b,Be.b);return{brightness:Math.abs(qe-st),color:ut}},W.isReadable=function(X,fe){var z=W.readability(X,fe);return z.brightness>125&&z.color>500},W.mostReadable=function(X,fe){for(var z=null,je=0,Se=!1,Be=0;Be<fe.length;Be++){var qe=W.readability(X,fe[Be]),st=qe.brightness>125&&qe.color>500,ut=3*(qe.brightness/125)+qe.color/500;(st&&!Se||st&&Se&&ut>je||!st&&!Se&&ut>je)&&(Se=st,je=ut,z=W(fe[Be]))}return z};var Mt=W.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},un=W.hexNames=tn(Mt);function tn(X){var fe={};for(var z in X)X.hasOwnProperty(z)&&(fe[X[z]]=z);return fe}function Rt(X){return X=parseFloat(X),(isNaN(X)||X<0||X>1)&&(X=1),X}function E(X,fe){we(X)&&(X="100%");var z=xe(X);return X=ne(fe,me(0,parseFloat(X))),z&&(X=parseInt(X*fe,10)/100),Q.abs(X-fe)<1e-6?1:X%fe/parseFloat(fe)}function H(X){return ne(1,me(0,X))}function J(X){return parseInt(X,16)}function we(X){return typeof X=="string"&&X.indexOf(".")!=-1&&parseFloat(X)===1}function xe(X){return typeof X=="string"&&X.indexOf("%")!=-1}function ee(X){return X.length==1?"0"+X:""+X}function se(X){return X<=1&&(X=X*100+"%"),X}function ae(X){return Math.round(parseFloat(X)*255).toString(16)}function et(X){return J(X)/255}var ct=function(){var X="[-\\+]?\\d+%?",fe="[-\\+]?\\d*\\.\\d+%?",z="(?:"+fe+")|(?:"+X+")",je="[\\s|\\(]+("+z+")[,|\\s]+("+z+")[,|\\s]+("+z+")\\s*\\)?",Se="[\\s|\\(]+("+z+")[,|\\s]+("+z+")[,|\\s]+("+z+")[,|\\s]+("+z+")\\s*\\)?";return{rgb:new RegExp("rgb"+je),rgba:new RegExp("rgba"+Se),hsl:new RegExp("hsl"+je),hsla:new RegExp("hsla"+Se),hsv:new RegExp("hsv"+je),hsva:new RegExp("hsva"+Se),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function ot(X){X=X.replace(V,"").replace(re,"").toLowerCase();var fe=!1;if(Mt[X])X=Mt[X],fe=!0;else if(X=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var z;return(z=ct.rgb.exec(X))?{r:z[1],g:z[2],b:z[3]}:(z=ct.rgba.exec(X))?{r:z[1],g:z[2],b:z[3],a:z[4]}:(z=ct.hsl.exec(X))?{h:z[1],s:z[2],l:z[3]}:(z=ct.hsla.exec(X))?{h:z[1],s:z[2],l:z[3],a:z[4]}:(z=ct.hsv.exec(X))?{h:z[1],s:z[2],v:z[3]}:(z=ct.hsva.exec(X))?{h:z[1],s:z[2],v:z[3],a:z[4]}:(z=ct.hex8.exec(X))?{a:et(z[1]),r:J(z[2]),g:J(z[3]),b:J(z[4]),format:fe?"name":"hex8"}:(z=ct.hex6.exec(X))?{r:J(z[1]),g:J(z[2]),b:J(z[3]),format:fe?"name":"hex"}:(z=ct.hex3.exec(X))?{r:J(z[1]+""+z[1]),g:J(z[2]+""+z[2]),b:J(z[3]+""+z[3]),format:fe?"name":"hex"}:!1}window.tinycolor=W,o(function(){o.fn.spectrum.load&&o.fn.spectrum.processNativeColorInputs()})}var Ij=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),FS=function(o){Ij(n,o);function n(e){e===void 0&&(e={});var t=o.call(this,e)||this,r=e.ppfx||"";return t.opts=e,t.ppfx=r,t.em=e.target||{},!e.onChange&&t.listenTo(t.model,"change:value",t.handleModelChange),t}return n.prototype.template=function(){return'<span class="'.concat(this.holderClass(),'"></span>')},n.prototype.inputClass=function(){return"".concat(this.ppfx,"field")},n.prototype.holderClass=function(){return"".concat(this.ppfx,"input-holder")},n.prototype.elementUpdated=function(){this.model.trigger("el:change")},n.prototype.setValue=function(e,t){var r=this.model,i=e||r.get("defaults"),s=this.getInputEl();s&&(s.value=i)},n.prototype.handleModelChange=function(e,t,r){this.setValue(t,r)},n.prototype.handleChange=function(e){e.stopPropagation();var t=this.getInputEl().value;this.__onInputChange(t),this.elementUpdated()},n.prototype.__onInputChange=function(e){this.model.set({value:e},{fromInput:1})},n.prototype.getInputEl=function(){if(!this.inputEl){var e=this,t=e.model,r=e.opts,i=r.type||"text",s=t.get("placeholder")||t.get("defaults")||t.get("default")||"";this.inputEl=(0,Hn.default)('<input type="'.concat(i,'" placeholder="').concat(s,'">'))}return this.inputEl.get(0)},n.prototype.render=function(){this.inputEl=null;var e=this.$el;return e.addClass(this.inputClass()),e.html(this.template()),e.find(".".concat(this.holderClass())).append(this.getInputEl()),this},n}(gt.Ss);const mp=FS;FS.prototype.events={change:"handleChange"};var Nj=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Ec=function(){return Ec=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},Ec.apply(this,arguments)};Hn.default&&jj(Hn.default);var qf=function(o){var n=o.getFormat()==="name"&&o.toName(),e=o.getAlpha()==1?o.toHexString():o.toRgbString();return n||e.replace(/ /g,"")},Rj=function(o){Nj(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype.template=function(){var e=this.ppfx;return`
      <div class="`.concat(this.holderClass(),`"></div>
      <div class="`).concat(e,`field-colorp">
        <div class="`).concat(e,`field-colorp-c" data-colorp-c>
          <div class="`).concat(e,`checker-bg"></div>
        </div>
      </div>
    `)},n.prototype.inputClass=function(){var e=this.ppfx;return"".concat(e,"field ").concat(e,"field-color")},n.prototype.holderClass=function(){return"".concat(this.ppfx,"input-holder")},n.prototype.remove=function(){return o.prototype.remove.call(this),this.colorEl.spectrum("destroy"),this},n.prototype.handleChange=function(e){e.stopPropagation();var t=e.target.value;(0,U.isUndefined)(t)||this.__onInputChange(t)},n.prototype.__onInputChange=function(e){var t=this,r=t.model,i=t.opts,s=i.onChange,u=e,c=this.getColorEl();if(c){c.spectrum("set",u);var f=c.spectrum("get"),h=u&&qf(f);h&&(u=h)}s?s(u):r.set({value:u},{fromInput:1})},n.prototype.setValue=function(e,t){t===void 0&&(t={});var r=this.model,i=(0,U.isUndefined)(t.def)?r.get("defaults"):t.def,s=(0,U.isUndefined)(e)?(0,U.isUndefined)(i)?"":i:e,u=this.getInputEl(),c=this.getColorEl(),f=s!="none"?s:"";u.value=s,c.get(0).style.backgroundColor=f,(t.fromTarget||t.fromInput&&!t.avoidStore)&&(c.spectrum("set",f),this.noneColor=s=="none",this.movedColor=f)},n.prototype.getColorEl=function(){var e=this;if(!this.colorEl){var t=this,r=t.em,i=t.model,s=t.opts,u=this.ppfx,c=s.onChange,f=(0,Hn.default)('<div class="'.concat(this.ppfx,'field-color-picker"></div>')),h=f.get(0).style,v=r&&r.getConfig&&r.getConfig().colorPicker||{};this.movedColor="";var m=!1,_;this.$el.find("[data-colorp-c]").append(f);var C=function(T,k){k===void 0&&(k=!0),c?c(T,!k):(k&&i.setValueFromInput(0,!1),i.setValueFromInput(T,k))};f.spectrum(Ec(Ec(Ec({color:i.getValue()||!1,containerClassName:"".concat(u,"one-bg ").concat(u,"two-color ").concat(u,"editor-sp"),maxSelectionSize:8,showPalette:!0,showAlpha:!0,chooseText:"Ok",cancelText:"⨯",palette:[]},v),i.get("colorPicker")||{}),{move:function(T){var k=qf(T);e.movedColor=k,h.backgroundColor=k,C(k,!1)},change:function(T){m=!0;var k=qf(T);h.backgroundColor=k,C(k),e.noneColor=!1},show:function(T){m=!1,e.movedColor="",_=c?i.getValue({noDefault:!0}):qf(T)},hide:function(){!m&&(_||c)&&(e.noneColor&&(_=""),h.backgroundColor=_,f.spectrum("set",_),C(_,!1))}})),r&&r.on&&this.listenTo(r,"component:selected",function(){e.movedColor&&C(e.movedColor),m=!0,e.movedColor="",f.spectrum("hide")}),this.colorEl=f}return this.colorEl},n.prototype.render=function(){return mp.prototype.render.call(this),this.getColorEl(),this},n}(mp);const VS=Rj;var Fj=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Vj=function(o){Fj(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype.templateInput=function(){return""},n.prototype.getInputEl=function(){if(!this.input){var e=this.model,t=this.getModelValue(),r=new VS({model:e,target:this.config.em,contClass:this.ppfx+"field-color",ppfx:this.ppfx}),i=r.render();i.setValue(t,{fromTarget:1}),this.input=i.el}return this.input},n}(Sa);const zj=Vj;var Hj=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),zS=function(o){Hj(n,o);function n(e){e===void 0&&(e={});var t=o.call(this,e)||this;return(0,U.bindAll)(t,"moveIncrement","upIncrement"),t.doc=document,t.listenTo(t.model,"change:unit",t.handleModelChange),t}return n.prototype.template=function(){var e=this.ppfx;return`
      <span class="`.concat(e,`input-holder"></span>
      <span class="`).concat(e,`field-units"></span>
      <div class="`).concat(e,`field-arrows" data-arrows>
        <div class="`).concat(e,`field-arrow-u" data-arrow-up></div>
        <div class="`).concat(e,`field-arrow-d" data-arrow-down></div>
      </div>
    `)},n.prototype.inputClass=function(){var e=this.ppfx;return this.opts.contClass||"".concat(e,"field ").concat(e,"field-integer")},n.prototype.setValue=function(e,t){var r=t||{},i=this.validateInputValue(e,{deepCheck:1}),s={value:i.value,unit:""};(i.unit||i.force)&&(s.unit=i.unit),this.model.set(s,r),r.silent&&this.handleModelChange()},n.prototype.handleChange=function(e){e.stopPropagation(),this.setValue(this.getInputEl().value),this.elementUpdated()},n.prototype.handleUnitChange=function(e){e.stopPropagation();var t=this.getUnitEl().value;this.model.set("unit",t),this.elementUpdated()},n.prototype.handleKeyDown=function(e){e.key==="ArrowUp"&&(e.preventDefault(),this.upArrowClick()),e.key==="ArrowDown"&&(e.preventDefault(),this.downArrowClick())},n.prototype.elementUpdated=function(){this.model.trigger("el:change")},n.prototype.handleModelChange=function(){var e=this.model;this.getInputEl().value=e.get("value");var t=this.getUnitEl();t&&(t.value=e.get("unit")||"")},n.prototype.getUnitEl=function(){if(!this.unitEl){var e=this.model,t=e.get("units")||[];if(t.length){var r=['<option value="" disabled hidden>-</option>'];t.forEach(function(s){var u=s==e.get("unit")?"selected":"";r.push("<option ".concat(u,">").concat(s,"</option>"))});var i=document.createElement("div");i.innerHTML='<select class="'.concat(this.ppfx,'input-unit">').concat(r.join(""),"</select>"),this.unitEl=i.firstChild}}return this.unitEl},n.prototype.upArrowClick=function(){var e=this.model,t=e.get("step"),r=parseFloat(this.getInputEl().value);this.setValue(this.normalizeValue(r+t)),this.elementUpdated()},n.prototype.downArrowClick=function(){var e=this.model,t=e.get("step"),r=parseFloat(this.getInputEl().value);this.setValue(this.normalizeValue(r-t)),this.elementUpdated()},n.prototype.downIncrement=function(e){e.preventDefault(),this.moved=!1;var t=this.model.get("value")||0;t=this.normalizeValue(t),this.current={y:e.pageY,val:t},(0,wt.on)(this.doc,"mousemove",this.moveIncrement),(0,wt.on)(this.doc,"mouseup",this.upIncrement)},n.prototype.moveIncrement=function(e){this.moved=!0;var t=this.model,r=t.get("step"),i=this.current,s=this.normalizeValue(i.val+(i.y-e.pageY)*r),u=this.validateInputValue(s),c=u.value,f=u.unit;return this.prValue=c,t.set({value:c,unit:f},{avoidStore:1}),!1},n.prototype.upIncrement=function(){var e=this.model,t=e.get("step");if((0,wt.AU)(this.doc,"mouseup",this.upIncrement),(0,wt.AU)(this.doc,"mousemove",this.moveIncrement),this.prValue&&this.moved){var r=this.prValue-t;e.set("value",r,{avoidStore:1}).set("value",r+t),this.elementUpdated()}},n.prototype.normalizeValue=function(e,t){t===void 0&&(t=0);var r=this.model,i=r.get("step"),s=0;if(isNaN(e))return t;if(e=parseFloat(e),Math.floor(e)!==e){var u=i.toString().split(".")[1];s=u?u.length:0}return s?parseFloat(e.toFixed(s)):e},n.prototype.validateInputValue=function(e,t){t===void 0&&(t={});var r=0,i=t||{},s=this.model,u="",c=(0,U.isUndefined)(e)?u:e,f=t.units||s.get("units")||[],h=s.get("unit")||f.length&&f[0]||"",v=(0,U.isUndefined)(t.max)?s.get("max"):t.max,m=(0,U.isUndefined)(t.min)?s.get("min"):t.min,_=!!s.get("limitlessMax"),C=!!s.get("limitlessMin");if(i.deepCheck){var T=s.get("fixedValues")||[];if(c===""&&(h=""),c){var k=new RegExp("^"+T.join("|"),"g");if(T.length&&k.test(c))c=c.match(k)[0],h="",r=1;else{var P=c+"";c+="",c=parseFloat(c.replace(",",".")),c=isNaN(c)?u:c;var L=P.replace(c,"");(0,U.indexOf)(f,L)>=0&&(h=L)}}}return!_&&!(0,U.isUndefined)(v)&&v!==""&&(c=c>v?v:c),!C&&!(0,U.isUndefined)(m)&&m!==""&&(c=c<m?m:c),{force:r,value:c,unit:h}},n.prototype.render=function(){mp.prototype.render.call(this),this.unitEl=null;var e=this.getUnitEl();return e&&this.$el.find(".".concat(this.ppfx,"field-units")).get(0).appendChild(e),this},n}(mp);const HS=zS;zS.prototype.events={"change input":"handleChange","change select":"handleUnitChange","click [data-arrow-up]":"upArrowClick","click [data-arrow-down]":"downArrowClick","mousedown [data-arrows]":"downIncrement",keydown:"handleKeyDown"};var Uj=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Bj=function(o){Uj(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype.getValueForTarget=function(){var e=this.model,t=e.attributes,r=t.value,i=t.unit;return!(0,U.isUndefined)(r)&&r!==""?r+i:e.get("default")},n.prototype.getInputEl=function(){if(!this.input){var e=this,t=e.ppfx,r=e.model,i=this.getModelValue(),s=new HS({contClass:"".concat(t,"field-int"),type:"number",model:r,ppfx:t});s.render(),this.$input=s.inputEl,this.$unit=s.unitEl,r.set("value",i,{fromTarget:!0}),this.$input.val(i),this.input=s.el}return this.input},n}(Sa);const Wj=Bj;var $j=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Kj=function(o){$j(n,o);function n(e){e===void 0&&(e={});var t=o.call(this,e)||this;return t.listenTo(t.model,"change:options",t.rerender),t}return n.prototype.templateInput=function(){var e=this,t=e.ppfx,r=e.clsField;return'<div class="'.concat(r,`">
      <div data-input></div>
      <div class="`).concat(t,`sel-arrow">
        <div class="`).concat(t,`d-s-arrow"></div>
      </div>
    </div>`)},n.prototype.getInputEl=function(){if(!this.$input){var e=this,t=e.model,r=e.em,i=t.get("name"),s=t.get("options")||[],u=[],c="<select>";s.forEach(function(v){var m="",_,C,T;(0,U.isString)(v)?(_=v,C=v):(_=v.name||v.label||v.value,C="".concat((0,U.isUndefined)(v.value)?v.id:v.value).replace(/"/g,"&quot;"),T=v.style?v.style.replace(/"/g,"&quot;"):"",m+=T?' style="'.concat(T,'"'):"");var k=r.t("traitManager.traits.options.".concat(i,".").concat(C))||_;c+='<option value="'.concat(C,'"').concat(m,">").concat(k,"</option>"),u.push(C)}),c+="</select>",this.$input=(0,Hn.default)(c);var f=t.getTargetValue(),h=u.indexOf(f)>=0?f:t.get("default");!(0,U.isUndefined)(h)&&this.$input.val(h)}return this.$input.get(0)},n}(Sa);const Gj=Kj;var Yj=vn(754),Xj=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),j_="data-categories",I_="data-no-categories",US=function(o){Xj(n,o);function n(e,t){var r=o.call(this,e)||this;r.reuseView=!0,r.renderedCategories=new Map,r.itemsView=t;var i=e.config||{};r.config=i;var s=e.editor;r.em=s;var u=i.pStylePrefix||"";return r.ppfx=u,r.pfx=u+i.stylePrefix||"",r.className="".concat(r.pfx,"traits"),r.traitContClass="".concat(u,"traits-c"),r.classNoCat="".concat(u,"traits-empty-c"),r.catsClass="".concat(u,"trait-categories"),r.collection=new Gd([],{em:s}),r.listenTo(s,"component:toggled",r.updatedCollection),r.updatedCollection(),r}return n.prototype.updatedCollection=function(){var e=this,t=e.ppfx,r=e.em,i=r.getSelected();this.el.className="".concat(this.traitContClass,"s ").concat(t,"one-bg ").concat(t,"two-color"),this.collection=(i==null?void 0:i.traits)||new Gd([],{em:r}),this.render()},n.prototype.add=function(e,t){var r=this,i=r.config,s=r.renderedCategories,u=this.itemView,c=e.get(this.itemType);this.itemsView&&this.itemsView[c]&&(u=this.itemsView[c]);var f=new u({config:i,model:e,attributes:e.get("attributes")}),h=f.render().el,v=e.parent.initCategory(e);if(v){var m=v.getId(),_=this.getCategoriesEl(),C=s.get(m);!C&&_&&(C=new SS({model:v},i,"trait").render(),s.set(m,C),_.appendChild(C.el)),C==null||C.append(h);return}t?t.appendChild(h):this.append(h)},n.prototype.getCategoriesEl=function(){return this.catsEl||(this.catsEl=this.el.querySelector("[".concat(j_,"]"))),this.catsEl},n.prototype.getTraitsEl=function(){return this.traitsEl||(this.traitsEl=this.el.querySelector("[".concat(I_,"]"))),this.traitsEl},n.prototype.append=function(e){var t=this.getTraitsEl();t==null||t.appendChild(e)},n.prototype.render=function(){var e=this,t=this,r=t.el,i=t.ppfx,s=t.catsClass,u=t.traitContClass,c=t.classNoCat,f=document.createDocumentFragment();delete this.catsEl,delete this.traitsEl,this.renderedCategories=new Map,r.innerHTML=`
      <div class="`.concat(s,'" ').concat(j_,`></div>
      <div class="`).concat(c," ").concat(u,'" ').concat(I_,`></div>
    `),this.collection.forEach(function(v){return e.add(v,f)}),this.append(f);var h="".concat(u,"s ").concat(i,"one-bg ").concat(i,"two-color");return this.$el.addClass(h),this.rendered=!0,this},n}(Yj.A);const N_=US;US.prototype.itemView=Sa;var qj=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Jj=function(o,n,e){if(e||arguments.length===2)for(var t=0,r=n.length,i;t<r;t++)(i||!(t in n))&&(i||(i=Array.prototype.slice.call(n,0,t)),i[t]=n[t]);return o.concat(i||Array.prototype.slice.call(n))},Zj=function(o){qj(n,o);function n(e){var t=o.call(this,e,"TraitManager",Ej)||this;t.TraitsView=N_,t.events=Wd,t.state=new gt.Kx({traits:[]}),t.types={text:Sa,number:Wj,select:Gj,checkbox:Lj,color:zj,button:Aj};var r=t,i=r.state,s=r.config,u=r.events,c=s.pStylePrefix;c&&(s.stylePrefix="".concat(c).concat(s.stylePrefix)),(0,U.bindAll)(t,"__onSelect");var f=(0,U.debounce)(function(){return t.__upSel()},0),h=(0,U.debounce)(function(){return t.__onUp()},0);return i.listenTo(e,"component:toggled",f),i.listenTo(e,u.value,h),i.on("change:traits",t.__onSelect),t.debounced=[f,h],t}return n.prototype.select=function(e){var t=(e==null?void 0:e.getTraits())||[];this.state.set({component:e,traits:t}),this.__trgCustom()},n.prototype.getCategories=function(){var e,t=this.getComponent(),r=((e=t==null?void 0:t.traits.categories)===null||e===void 0?void 0:e.models)||[];return Jj([],r,!0)},n.prototype.getTraits=function(){return this.getCurrent()},n.prototype.getTraitsByCategory=function(e){return cS(e||this.getTraits())},n.prototype.getComponent=function(){return this.state.attributes.component},n.prototype.addType=function(e,t){var r=this.getType("text");this.types[e]=r.extend(t)},n.prototype.getType=function(e){return this.getTypes()[e]},n.prototype.getTypes=function(){return this.types},n.prototype.getTraitsViewer=function(){return this.view},n.prototype.getCurrent=function(){return this.state.get("traits")||[]},n.prototype.render=function(){var e=this.view,t=this.em;return e=new N_({el:e==null?void 0:e.el,collection:[],editor:t,config:this.getConfig()},this.getTypes()),this.view=e,e.el},n.prototype.postRender=function(){this.__appendTo()},n.prototype.__onSelect=function(){var e=this,t=e.em,r=e.events,i=e.state,s=i.attributes,u=s.component,c=s.traits;t.trigger(r.select,{component:u,traits:c})},n.prototype.__trgCustom=function(e){e===void 0&&(e={});var t=this,r=t.em,i=t.events,s=t.__ctn;this.__ctn=s||e.container,r.trigger(i.custom,this.__customData())},n.prototype.__customData=function(){return{container:this.__ctn}},n.prototype.__upSel=function(){this.select(this.em.getSelected())},n.prototype.__onUp=function(){this.select(this.getComponent())},n}($o);const Qj=Zj;var eI={stylePrefix:"",appendTo:"",sortable:!0,hidable:!0,hideTextnode:!0,root:"",showWrapper:!0,showHover:!0,scrollCanvas:{behavior:"smooth",block:"nearest"},scrollLayers:{behavior:"auto",block:"nearest"},highlightHover:!0,custom:!1,onInit:function(){},onRender:function(){},extend:{}};const tI=eI;var nI=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),rI=function(o){nI(n,o);function n(e){e===void 0&&(e={});var t=o.call(this,e)||this;t.items=[],t.opt=e;var r=e.config||{};t.config=r,t.module=e.module,t.parentView=e.parentView;var i=r.stylePrefix||"",s=r.pStylePrefix||"",u=t.collection;t.listenTo(u,"add",t.addTo),t.listenTo(u,"reset resetNavigator",t.render),t.listenTo(u,"remove",t.removeChildren),t.className="".concat(i,"layers");var c=r.em;if(r.sortable&&!t.opt.sorter){var f=c.Utils;t.opt.sorter=new f.Sorter({container:r.sortContainer||t.el,containerSel:".".concat(t.className),itemSel:".".concat(i,"layer"),ignoreViewChildren:1,avoidSelectOnEnd:1,nested:1,ppfx:s,pfx:i,em:c})}return t.$el.data("collection",u),e.parent&&t.$el.data("model",e.parent),t}return n.prototype.removeChildren=function(e){var t=e.viewLayer;t&&(t.remove(),delete e.viewLayer)},n.prototype.addTo=function(e){this.addToCollection(e,null,this.collection.indexOf(e))},n.prototype.addToCollection=function(e,t,r){var i=this,s=i.parentView,u=i.opt,c=i.config,f=i.el,h=u.ItemView,v=u.opened,m=u.module,_=u.level,C=u.sorter,T=e.viewLayer||new h({ItemView:h,level:_,model:e,parentView:s,config:c,sorter:C,opened:v,module:m}),k=T.render().el;if(t)t.appendChild(k);else{var P=f,L=P.childNodes;if((0,U.isUndefined)(r))P.appendChild(k);else{var D=L.length==r;D&&r--,D||!L.length?P.appendChild(k):P.insertBefore(k,L[r])}}return this.items.push(T),k},n.prototype.remove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return gt.Ss.prototype.remove.apply(this,e),this.items.map(function(r){return r.remove()}),this},n.prototype.render=function(){var e=this,t=this,r=t.el,i=t.module,s=document.createDocumentFragment();return r.innerHTML="",this.collection.map(function(u){return i.__getLayerFromComponent(u)}).forEach(function(u){return e.addToCollection(u,s)}),r.appendChild(s),r.className=this.className,this},n}(gt.Ss);const oI=rI;var Ov=vn(570),iI={stylePrefix:"com-",defaults:{},strict:!0};const aI=iI;var sI=vn(242),lI=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),yp=function(){return yp=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},yp.apply(this,arguments)},R_=function(o,n,e){if(e||arguments.length===2)for(var t=0,r=n.length,i;t<r;t++)(i||!(t in n))&&(i||(i=Array.prototype.slice.call(n,0,t)),i[t]=n[t]);return o.concat(i||Array.prototype.slice.call(n))},F_=[["preview","Preview","preview"],["resize","Resize","resize"],["fullscreen","Fullscreen","fullscreen"],["copy","CopyComponent"],["paste","PasteComponent"],["canvas-move","CanvasMove"],["canvas-clear","CanvasClear"],["open-code","ExportTemplate","export-template"],["open-layers","OpenLayers","open-layers"],["open-styles","OpenStyleManager","open-sm"],["open-traits","OpenTraitManager","open-tm"],["open-blocks","OpenBlocks","open-blocks"],["open-assets","OpenAssets","open-assets"],["component-select","SelectComponent","select-comp"],["component-outline","SwitchVisibility","sw-visibility"],["component-offset","ShowOffset","show-offset"],["component-move","MoveComponent","move-comp"],["component-next","ComponentNext"],["component-prev","ComponentPrev"],["component-enter","ComponentEnter"],["component-exit","ComponentExit","select-parent"],["component-delete","ComponentDelete"],["component-style-clear","ComponentStyleClear"],["component-drag","ComponentDrag"]],BS={preserveSelected:1},WS=function(o){return function(n){return o.trigger("".concat(ry,":start"),n)}},$S=function(o){return function(n){return o.trigger(ry,n)}},KS=function(o,n,e){return e===void 0&&(e={}),function(t,r,i){n.forEach(function(s){return s.set("status",s.get("selectable")?"selected":"")}),o.setSelected(n),n[0].emitUpdate(),o.trigger("".concat(ry,":end"),i),setTimeout(function(){return o.runDefault(BS)}),(e.altMode||i.cancelled)&&o.set("_cmpDrag",1)}},uI=function(o){lI(n,o);function n(e){var t=o.call(this,e,"Commands",aI)||this;t.CommandAbstract=Ov.default,t.defaultCommands={},t.commands={},t.active={},t.events=sI.A;var r=t.config,i=r.pStylePrefix,s=t.defaultCommands;i&&(r.stylePrefix=i+r.stylePrefix),Object.keys(r.defaults).forEach(function(c){var f=r.defaults[c];f.id&&t.add(f.id,f)}),s["tlb-delete"]={run:function(c){return c.runCommand("core:component-delete")}},s["tlb-clone"]={run:function(c){c.runCommand("core:copy"),c.runCommand("core:paste",{action:"clone-component"})}},s["tlb-move"]={run:function(c,f,h){var v;h===void 0&&(h={});var m=c.getModel(),_=h.event,C=h.target,T=C?[C]:R_([],c.getSelectedAll(),!0),k=T.map(function(Y){var W,te;return((te=(W=Y.delegate)===null||W===void 0?void 0:W.move)===null||te===void 0?void 0:te.call(W,Y))||Y}).filter(Boolean),P=k[k.length-1],L=(_==null?void 0:_.type)==="dragstart",D=["absolute","translate"];if(!(P!=null&&P.get("draggable")))return m.logWarning("The element is not draggable");var V=P.get("dmode")||m.get("dmode"),re=function(){return m.stopDefault(BS)},_e=(0,U.includes)(D,V);k.forEach(function(Y){return Y.trigger("disable",{fromMove:!0})}),L?setTimeout(re,0):re();var Q=WS(m),pe=$S(m),ne=KS(m,k,{altMode:_e});if(_e)c.runCommand("core:component-drag",{guidesInfo:1,mode:V,target:P,onStart:Q,onDrag:pe,onEnd:ne,event:_});else{L&&_.dataTransfer.setDragImage((v=P.view)===null||v===void 0?void 0:v.el,0,0);var me=c.Commands.get("move-comp");me.onStart=Q,me.onDrag=pe,me.onEndMoveFromModel=ne,me.initSorterFromModels(k)}k.filter(function(Y){return Y.get("selectable")}).forEach(function(Y){return Y.set("status","freezed-selected")})}},s["core:undo"]=function(c){return c.UndoManager.undo()},s["core:redo"]=function(c){return c.UndoManager.redo()},F_.forEach(function(c){var f=c[2],h=vn(585)("./".concat(c[1])).default,v="core:".concat(c[0]);s[v]=h,f&&(s[f]=h,["run","stop"].forEach(function(m){e.on("".concat(m,":").concat(f),function(){for(var _=[],C=0;C<arguments.length;C++)_[C]=arguments[C];return e.trigger.apply(e,R_(["".concat(m,":").concat(v)],_,!1))})}))}),r.model=e.Canvas;for(var u in s)t.add(u,s[u]);return t}return n.prototype.add=function(e,t){var r=(0,U.isFunction)(t)?{run:t}:t;return r.stop||(r.noStop=!0),delete r.initialize,r.id=e,this.commands[e]=Ov.default.extend(r),this},n.prototype.get=function(e){var t=this.commands[e];return(0,U.isFunction)(t)?(t=new t(this.config),this.commands[e]=t):t||this.em.logWarning("'".concat(e,"' command not found")),t},n.prototype.extend=function(e,t){t===void 0&&(t={});var r=this.get(e);if(r){var i=yp(yp({},r.constructor.prototype),t);this.add(e,i);var s=F_.filter(function(u){return"core:".concat(u[0])===e&&u[2]})[0];s&&this.add(s[2],i)}return this},n.prototype.has=function(e){return!!this.commands[e]},n.prototype.getAll=function(){return this.commands},n.prototype.run=function(e,t){return t===void 0&&(t={}),this.runCommand(this.get(e),t)},n.prototype.stop=function(e,t){return t===void 0&&(t={}),this.stopCommand(this.get(e),t)},n.prototype.isActive=function(e){return this.getActive().hasOwnProperty(e)},n.prototype.getActive=function(){return this.active},n.prototype.runCommand=function(e,t){t===void 0&&(t={});var r;if(e&&e.run){var i=this,s=i.em,u=i.config,c=e.id,f=s.Editor;(!this.isActive(c)||t.force||!u.strict)&&(r=f&&e.callRun(f,t),c&&e.stop&&!e.noStop&&!t.abort&&(this.active[c]=r))}return r},n.prototype.stopCommand=function(e,t){t===void 0&&(t={});var r;if(e&&e.run){var i=this,s=i.em,u=i.config,c=e.id,f=s.Editor;(this.isActive(c)||t.force||!u.strict)&&(c&&delete this.active[c],r=e.callStop(f,t))}return r},n.prototype.create=function(e){e.stop||(e.noStop=!0);var t=Ov.default.extend(e);return new t(this.config)},n.prototype.__onRun=function(e,t){var r=this,i=r.em,s=r.events;i.on("".concat(s.runCommand).concat(e),t)},n.prototype.__onStop=function(e,t){var r=this,i=r.em,s=r.events;i.on("".concat(s.stopCommand).concat(e),t)},n.prototype.destroy=function(){this.defaultCommands={},this.commands={},this.active={}},n}($o);const cI=uI;var fI=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),V_="contentEditable",Jf="data-toggle-move",dI=function(o){fI(n,o);function n(e){var t=o.call(this,e)||this;(0,U.bindAll)(t,"__render"),t.opt=e,t.module=e.module,t.config=e.config||{},t.sorter=e.sorter||"",t.parentView=e.parentView;var r=t,i=r.model,s=r.pfx,u=r.ppfx,c=i.get("type")||"default";return t.className="".concat(s,"layer ").concat(s,"layer__t-").concat(c," no-select ").concat(u,"two-color"),t.inputNameCls="".concat(u,"layer-name"),t.clsTitleC="".concat(s,"layer-title-c"),t.clsTitle="".concat(s,"layer-title"),t.clsCaret="".concat(s,"layer-caret"),t.clsCount="".concat(s,"layer-count"),t.clsMove="".concat(s,"layer-move"),t.clsChildren="".concat(s,"layer-children"),t.clsNoChild="".concat(s,"layer-no-chld"),t.clsEdit="".concat(t.inputNameCls,"--edit"),t.clsNoEdit="".concat(t.inputNameCls,"--no-edit"),t.initComponent(),t}return n.prototype.events=function(){var e;return e={},e["mousedown [".concat(Jf,"]")]="startSort",e["touchstart [".concat(Jf,"]")]="startSort",e["click [data-toggle-visible]"]="toggleVisibility",e["click [data-toggle-open]"]="toggleOpening",e["click [data-toggle-select]"]="handleSelect",e["mouseover [data-toggle-select]"]="handleHover",e["mouseout [data-toggle-select]"]="handleHoverOut",e["dblclick [data-name]"]="handleEdit",e["keydown [data-name]"]="handleEditKey",e["focusout [data-name]"]="handleEditEnd",e},n.prototype.template=function(e){var t=this,r=t.pfx,i=t.ppfx,s=t.config,u=t.clsNoEdit,c=t.module,f=t.opt,h=t.em,v=s.hidable,m=c.getComponents(e).length,_=m?"":this.clsNoChild,C="".concat(this.clsTitle," ").concat(_),T="".concat(this.clsTitleC),k="".concat(this.inputNameCls," ").concat(u," ").concat(i,"no-app"),P=f.level||0,L="".concat(P*10,"px"),D=e.getName(),V=e.getIcon(),re="".concat(r,"layer"),_e=(h==null?void 0:h.getConfig()).icons,Q=_e,pe=Q.move,ne=Q.eye,me=Q.eyeOff,Y=Q.chevron;return`
      <div class="`.concat(r,"layer-item ").concat(i,`one-bg" data-toggle-select>
        <div class="`).concat(r,`layer-item-left">
          `).concat(v?'<i class="'.concat(r,`layer-vis" data-toggle-visible>
                <i class="`).concat(r,'layer-vis-on">').concat(ne,`</i>
                <i class="`).concat(r,'layer-vis-off">').concat(me,`</i>
              </i>`):"",`
          <div class="`).concat(T,`">
            <div class="`).concat(C,'" style="padding-left: ').concat(L,`">
              <div class="`).concat(r,'layer-title-inn" title="').concat(D,`">
                <i class="`).concat(this.clsCaret,'" data-toggle-open>').concat(Y,`</i>
                  `).concat(V?'<span class="'.concat(re,'__icon">').concat(V,"</span>"):"",`
                <span class="`).concat(k,'" data-name>').concat(D,`</span>
              </div>
            </div>
          </div>
        </div>
        <div class="`).concat(r,`layer-item-right">
          <div class="`).concat(this.clsCount,'" data-count>').concat(m||"",`</div>
          <div class="`).concat(this.clsMove,'" ').concat(Jf,">").concat(pe||"",`</div>
        </div>
      </div>
      <div class="`).concat(this.clsChildren,`"></div>
    `)},Object.defineProperty(n.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ppfx",{get:function(){return this.em.getConfig().stylePrefix},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"pfx",{get:function(){return this.config.stylePrefix},enumerable:!1,configurable:!0}),n.prototype.initComponent=function(){var e=this,t=this,r=t.model,i=t.config,s=i.onInit,u=r.components();this.listenTo(u,"remove add reset",this.checkChildren),[["change:status",this.updateStatus],["change:open",this.updateOpening],["change:layerable",this.updateLayerable],["change:style:display",this.updateVisibility],["change:draggable",this.updateMove],["rerender:layer",this.render],["change:name change:custom-name",this.updateName]].forEach(function(c){return e.listenTo(r,c[0],c[1])}),this.$el.data("model",r),this.$el.data("collection",u),r.viewLayer=this,s.bind(this)({component:r,render:this.__render,listenTo:this.listenTo})},n.prototype.updateName=function(){this.getInputName().innerText=this.model.getName()},n.prototype.getVisibilityEl=function(){return this.getItemContainer().find("[data-toggle-visible]")},n.prototype.updateVisibility=function(){var e=this,t=e.pfx,r=e.model,i=e.module,s="".concat(t,"layer-hidden"),u=!i.isVisible(r),c=u?"addClass":"removeClass";this.$el[c](s),this.getVisibilityEl()[c]("".concat(t,"layer-off"))},n.prototype.updateMove=function(){var e=this,t=e.model,r=e.config,i=this.getItemContainer().find("[".concat(Jf,"]"))[0];if(i){var s=t.get("draggable")&&r.sortable;i.style.display=s?"":"none"}},n.prototype.toggleVisibility=function(e){e==null||e.stopImmediatePropagation();var t=this,r=t.module,i=t.model;r.setVisible(i,!r.isVisible(i))},n.prototype.handleEdit=function(e){e==null||e.stopPropagation();var t=this,r=t.em,i=t.$el,s=t.clsNoEdit,u=t.clsEdit,c=this.getInputName();c[V_]="true",c.focus(),document.execCommand("selectAll",!1),r.setEditing(!0),i.find(".".concat(this.inputNameCls)).removeClass(s).addClass(u)},n.prototype.handleEditKey=function(e){e.stopPropagation(),((0,wt.v$)(e)||(0,wt.Ci)(e))&&this.handleEditEnd(e)},n.prototype.handleEditEnd=function(e){e==null||e.stopPropagation();var t=this,r=t.em,i=t.$el,s=t.clsNoEdit,u=t.clsEdit,c=t.model,f=this.getInputName(),h=f.textContent;f.scrollLeft=0,f[V_]="false",c.setName(h),r.setEditing(!1),i.find(".".concat(this.inputNameCls)).addClass(s).removeClass(u),this.updateName()},n.prototype.getInputName=function(){return this.inputName||(this.inputName=this.el.querySelector(".".concat(this.inputNameCls))),this.inputName},n.prototype.updateOpening=function(){var e=this,t=e.$el,r=e.model,i=e.pfx,s="open",u="".concat(i,"layer-open"),c=this.getCaret();this.module.isOpen(r)?(t.addClass(s),c.addClass(u)):(t.removeClass(s),c.removeClass(u))},n.prototype.toggleOpening=function(e){var t=this,r=t.model,i=t.module;e==null||e.stopImmediatePropagation(),r.get("components").length&&i.setOpen(r,!i.isOpen(r))},n.prototype.handleSelect=function(e){e==null||e.stopPropagation();var t=this,r=t.module,i=t.model;r.setLayerData(i,{selected:!0},{event:e})},n.prototype.handleHover=function(e){e==null||e.stopPropagation();var t=this,r=t.module,i=t.model;r.setLayerData(i,{hovered:!0})},n.prototype.handleHoverOut=function(e){e==null||e.stopPropagation();var t=this,r=t.module,i=t.model;r.setLayerData(i,{hovered:!1})},n.prototype.startSort=function(e){var t,r,i;e.stopPropagation();var s=this,u=s.em,c=s.sorter,f=s.model;if(!(e.button&&e.button!==0)&&c){var h=((r=(t=f.delegate)===null||t===void 0?void 0:t.move)===null||r===void 0?void 0:r.call(t,f))||f;c.onStart=WS(u),c.onMoveClb=$S(u),c.onEndMove=KS(u,[h]);var v=((i=h.viewLayer)===null||i===void 0?void 0:i.el)||e.target;c.startSort(v)}},n.prototype.updateStatus=function(){dr.prototype.updateStatus.apply(this,[{avoidHover:!this.config.highlightHover,noExtHl:!0}])},n.prototype.getItemContainer=function(){return this.$el.children("[data-toggle-select]")},n.prototype.checkChildren=function(){var e=this,t=e.model,r=e.clsNoChild,i=e.module,s=i.getComponents(t).length,u=this.getItemContainer(),c=u.find(".".concat(this.clsTitle)),f=u.find("[data-count]");c[s?"removeClass":"addClass"](r),f.html("".concat(s||"")),!s&&i.setOpen(t,!1)},n.prototype.getCaret=function(){return(!this.caret||!this.caret.length)&&(this.caret=this.getItemContainer().find(".".concat(this.clsCaret))),this.caret},n.prototype.setRoot=function(e){var t,r=(0,U.isString)(e)?(t=this.em.getWrapper())===null||t===void 0?void 0:t.find(e)[0]:e;r&&(this.stopListening(),this.model=r,this.initComponent(),this._rendered&&this.render())},n.prototype.updateLayerable=function(){var e=this.parentView,t=e||this;t.render()},n.prototype.__clearItems=function(){var e;(e=this.items)===null||e===void 0||e.remove()},n.prototype.remove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return gt.Ss.prototype.remove.apply(this,e),delete this.model.viewLayer,this.__clearItems(),this},n.prototype.render=function(){var e=this,t=e.model,r=e.config,i=e.pfx,s=e.ppfx,u=e.opt,c=e.sorter;this.__clearItems();var f=u.opened,h=u.module,v=u.ItemView,m=!h.__isLayerable(t),_=this.$el.empty(),C=u.level+1;delete this.inputName,this.items=new oI({ItemView:v,collection:t.get("components"),config:r,sorter:c,opened:f,parentView:this,parent:t,level:C,module:h});var T=this.items.render().$el;return!r.showWrapper&&C===1?_.append(T):(_.html(this.template(t)),_.find(".".concat(this.clsChildren)).append(T)),!h.isVisible(t)&&(this.className+=" ".concat(i,"hide")),m&&(this.className+=" ".concat(s,"hidden")),_.attr("class",this.className),this.updateStatus(),this.updateOpening(),this.updateVisibility(),this.updateMove(),this.__render(),this._rendered=!0,this},n.prototype.__render=function(){var e=this,t=e.model,r=e.config,i=e.el,s=r.onRender,u={component:t,el:i};s.bind(this)(u),this.em.trigger("layer:render",u)},n}(gt.Ss);const pI=dI;var hI=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Xg=function(){return Xg=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},Xg.apply(this,arguments)},GS="layer",uy="".concat(GS,":"),YS="".concat(uy,"root"),XS="".concat(uy,"component"),vI="".concat(uy,"custom"),gI={all:GS,root:YS,component:XS,custom:vI},Tv={mediaText:""},mI=["open","status","locked","custom-name","components","classes"].map(function(o){return"".concat(no.I.update,":").concat(o)}).join(" "),yI=function(o){return o===void 0&&(o={}),(o.display||"").trim().indexOf("none")===0},wI=function(o){hI(n,o);function n(e){var t=o.call(this,e,"LayerManager",tI)||this;return t.events=gI,(0,U.bindAll)(t,"componentChanged","__onRootChange","__onComponent"),t.model=new fs.A(t,{opened:{}}),t.config.stylePrefix=t.config.pStylePrefix,t}return n.prototype.onLoad=function(){var e=this,t=this,r=t.em,i=t.config,s=t.model;s.listenTo(r,"component:selected",this.componentChanged),s.on("change:root",this.__onRootChange),s.listenTo(r,mI,this.__onComponent),this.componentChanged(),s.listenToOnce(r,"load",function(){e.setRoot(i.root),e.__appendTo()})},n.prototype.setRoot=function(e){var t=this.em.getWrapper(),r=(0,Xe.isComponent)(e)?e:t;e&&(0,U.isString)(e)&&(0,Xe.hasWin)()&&(r=t.find(e)[0]||t);var i=this.__getLayerFromComponent(r);return this.model.set("root",i),i},n.prototype.getRoot=function(){return this.model.get("root")},n.prototype.getComponents=function(e){var t=this;return e.components().map(function(r){return t.__getLayerFromComponent(r)}).filter(function(r){return t.__isLayerable(r)})},n.prototype.setOpen=function(e,t){e.set("open",t)},n.prototype.isOpen=function(e){return!!e.get("open")},n.prototype.setVisible=function(e,t){var r="__prev-display",i=e.getStyle(Tv),s=i.display;if(t){var u=e.get(r);delete i.display,u&&(i.display=u,e.unset(r))}else s&&e.set(r,s),i.display="none";e.setStyle(i,Tv),this.updateLayer(e),this.em.trigger("component:toggled")},n.prototype.isVisible=function(e){return!yI(e.getStyle(Tv))},n.prototype.setLocked=function(e,t){e.set("locked",t)},n.prototype.isLocked=function(e){return!!e.get("locked")},n.prototype.setName=function(e,t){e.set("custom-name",t)},n.prototype.getName=function(e){return e.getName()},n.prototype.getLayerData=function(e){var t=e.get("status");return{name:e.getName(),open:this.isOpen(e),selected:t==="selected",hovered:t==="hovered",visible:this.isVisible(e),locked:this.isLocked(e),components:this.getComponents(e)}},n.prototype.setLayerData=function(e,t,r){var i;r===void 0&&(r={});var s=this,u=s.em,c=s.config,f=t.open,h=t.selected,v=t.hovered,m=t.visible,_=t.locked,C=t.name,T=Xg({fromLayers:!0},r);if((0,Xe.isDef)(f)&&this.setOpen(e,f),(0,Xe.isDef)(h))if(h){u.setSelected(e,T);var k=c.scrollCanvas;k&&((i=e.views)===null||i===void 0||i.forEach(function(P){return P.scrollIntoView(k)}))}else u.removeSelected(e,T);(0,Xe.isDef)(v)&&c.showHover&&(v?u.setHovered(e,T):u.setHovered(null,T)),(0,Xe.isDef)(m)&&m!==this.isVisible(e)&&this.setVisible(e,m),(0,Xe.isDef)(_)&&this.setLocked(e,_),(0,Xe.isDef)(C)&&this.setName(e,C)},n.prototype.componentChanged=function(e,t){var r;if(t===void 0&&(t={}),!t.fromLayers){var i=this,s=i.em,u=i.config,c=u.scrollLayers,f=this.model.get("opened"),h=s.getSelected(),v=h==null?void 0:h.parent();for(var m in f)f[m].set("open",!1),delete f[m];for(;v;)v.set("open",!0),f[v.cid]=v,v=v.parent();if(h&&c){var _=(r=h.viewLayer)===null||r===void 0?void 0:r.el;_==null||_.scrollIntoView(c)}}},n.prototype.getAll=function(){return this.view},n.prototype.render=function(){var e,t,r=this,i=r.config,s=r.model,u=pI.extend(i.extend);return this.view=new u({el:(e=this.view)===null||e===void 0?void 0:e.el,ItemView:u,level:0,config:i,opened:s.get("opened"),model:this.getRoot(),module:this}),(t=this.view)===null||t===void 0?void 0:t.render().el},n.prototype.destroy=function(){var e;(e=this.view)===null||e===void 0||e.remove()},n.prototype.__onRootChange=function(){var e,t=this.getRoot();(e=this.view)===null||e===void 0||e.setRoot(t),this.em.trigger(YS,t),this.__trgCustom()},n.prototype.__getLayerFromComponent=function(e){var t,r;return((r=(t=e.delegate)===null||t===void 0?void 0:t.layer)===null||r===void 0?void 0:r.call(t,e))||e},n.prototype.__onComponent=function(e){this.updateLayer(e)},n.prototype.__isLayerable=function(e){var t=e.tagName,r=this.config.hideTextnode,i=!r||!e.isInstanceOf("textnode")&&t!=="br";return i&&e.get("layerable")},n.prototype.__trgCustom=function(e){var t=this,r=t.__ctn,i=t.em,s=t.events;this.__ctn=r||(e==null?void 0:e.container),i.trigger(s.custom,{container:this.__ctn,root:this.getRoot()})},n.prototype.updateLayer=function(e,t){this.em.trigger(XS,e,t)},n}($o);const _I=wI;var bI={assets:[],noAssets:"",stylePrefix:"am-",upload:"",uploadName:"files",headers:{},params:{},credentials:"include",multiUpload:!0,multiUploadSuffix:"[]",autoAdd:!0,customFetch:void 0,uploadFile:void 0,embedAsBase64:!0,handleAdd:void 0,beforeUpload:void 0,showUrlInput:!0,custom:!1,dropzone:!1,openAssetsOnDrop:!0,dropzoneContent:""};const xI=bI;var CI=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),qS=function(o){CI(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.getDefaults=function(){return(0,U.result)(this.prototype,"defaults")},n.prototype.defaults=function(){return{type:"",src:""}},n.prototype.getType=function(){return this.get("type")},n.prototype.getSrc=function(){return this.get("src")},n.prototype.getFilename=function(){return this.get("src").split("/").pop().split("?").shift()},n.prototype.getExtension=function(){return this.getFilename().split(".").pop()},n}(gt.Kx);const qg=qS;qS.prototype.idAttribute="src";var SI=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),wp=function(){return wp=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},wp.apply(this,arguments)},OI=function(o){SI(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype.defaults=function(){return wp(wp({},qg.getDefaults()),{type:"image",unitDim:"px",height:0,width:0})},n}(qg);const TI=OI;var EI=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),PI=function(o){EI(n,o);function n(e){var t=o.call(this,e)||this;t.options=e,t.collection=e.collection;var r=e.config||{};t.config=r,t.pfx=r.stylePrefix||"",t.ppfx=r.pStylePrefix||"",t.em=r.em,t.className=t.pfx+"asset",t.listenTo(t.model,"destroy remove",t.remove),t.model.view=t;var i=t.init&&t.init.bind(t);return i&&i(e),t}return n.prototype.__getBhv=function(){var e=this.em,t=e==null?void 0:e.Assets;return(t==null?void 0:t.__getBehaviour())||{}},n.prototype.template=function(e,t){var r=this.pfx;return`
      <div class="`.concat(r,`preview-cont">
        `).concat(this.getPreview(),`
      </div>
      <div class="`).concat(r,`meta">
        `).concat(this.getInfo(),`
      </div>
      <div class="`).concat(r,`close" data-toggle="asset-remove">
        &Cross;
      </div>
    `)},n.prototype.updateTarget=function(e){e&&e.set&&(e.set("attributes",(0,U.clone)(e.get("attributes"))),e.set("src",this.model.get("src")))},n.prototype.getPreview=function(){return""},n.prototype.getInfo=function(){return""},n.prototype.render=function(){var e=this.el;return e.innerHTML=this.template(this,this.model),e.className=this.className,this},n}(gt.Ss);const kI=PI;var AI=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),z_=function(o,n){return Object.defineProperty?Object.defineProperty(o,"raw",{value:n}):o.raw=n,o},JS=function(o){AI(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype.getPreview=function(){var e=this,t=e.pfx,r=e.ppfx,i=e.model,s=i.get("src");return Vo(H_||(H_=z_([`
      <div class="`,`preview" style="background-image: url('`,`');"></div>
      <div class="`,"preview-bg ",`checker-bg"></div>
    `],[`
      <div class="`,`preview" style="background-image: url('`,`');"></div>
      <div class="`,"preview-bg ",`checker-bg"></div>
    `])),t,s,t,r)},n.prototype.getInfo=function(){var e=this,t=e.pfx,r=e.model,i=r.get("name"),s=r.get("width"),u=r.get("height"),c=r.get("unitDim"),f=s&&u?"".concat(s,"x").concat(u).concat(c):"";return i=i||r.getFilename(),Vo(U_||(U_=z_([`
      <div class="`,'name">',`</div>
      <div class="`,'dimensions">',`</div>
    `],[`
      <div class="`,'name">',`</div>
      <div class="`,'dimensions">',`</div>
    `])),t,i,t,f)},n.prototype.init=function(e){var t=this.pfx;this.className+=" ".concat(t,"asset-image")},n.prototype.onClick=function(){var e=this,t=e.model,r=e.pfx,i=this.__getBhv().select,s=this.config.onClick,u=this.collection;u.trigger("deselectAll"),this.$el.addClass(r+"highlight"),(0,U.isFunction)(i)?i(t,!1):(0,U.isFunction)(s)?s(t):this.updateTarget(u.target)},n.prototype.onDblClick=function(){var e=this,t=e.em,r=e.model,i=this.__getBhv().select,s=this.config.onDblClick,u=this.collection,c=u.target,f=u.onSelect;(0,U.isFunction)(i)?i(r,!0):(0,U.isFunction)(s)?s(r):(this.updateTarget(c),t==null||t.Modal.close()),(0,U.isFunction)(f)&&f(r)},n.prototype.onRemove=function(e){e.stopImmediatePropagation(),this.model.collection.remove(this.model)},n}(kI);const MI=JS;JS.prototype.events={"click [data-toggle=asset-remove]":"onRemove",click:"onClick",dblclick:"onDblClick"};var H_,U_,_p=function(){return _p=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},_p.apply(this,arguments)},DI={types:[],initialize:function(o,n){var e=this;n===void 0&&(n={});var t=n.em;this.em=t,this.opts=n,this.model=function(i,s){i===void 0&&(i={}),s===void 0&&(s={});var u,c,f;if(i&&i.type){var h=e.getBaseType();f=e.getType(i.type),u=f?f.model:h.model,c=f?f.view:h.view}else{var v=e.recognizeType(i);f=v.type,u=f.model,c=f.view,i=v.attributes}var m=new u(i,_p(_p({},s),{em:t}));return m.typeView=c,e.model.prototype=u.prototype,m};var r=this.init&&this.init.bind(this);r&&r()},recognizeType:function(o){for(var n=this.getTypes(),e=0;e<n.length;e++){var t=n[e],r=t.isType(o);if(r=typeof r=="boolean"&&r?{type:t.id}:r,r)return{type:t,attributes:r}}return{type:this.getBaseType(),attributes:o}},getBaseType:function(){var o=this.getTypes();return o[o.length-1]},getTypes:function(){return this.types},getType:function(o){for(var n=this.getTypes(),e=0;e<n.length;e++){var t=n[e];if(t.id===o)return t}},addType:function(o,n){var e=this.getType(o),t=this.getBaseType(),r=e?e.model:t.model,i=e?e.view:t.view,s=n.model,u=n.view,c=n.isType;s=s instanceof gt.Kx||(0,U.isFunction)(s)?s:r.extend(s||{}),u=u instanceof gt.Ss||(0,U.isFunction)(u)?u:i.extend(u||{}),this.extendViewApi&&!n.model&&!n.view&&(u=u.extend(n)),e?(e.model=s,e.view=u,e.isType=c||e.isType):(n.id=o,n.model=s,n.view=u,n.isType=c||function(f){if(f&&f.type==o)return!0},this.getTypes().unshift(n))}};const ZS=DI;var LI=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),jI=gt.pM.extend(ZS),QS=function(o){LI(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n}(jI);const Ev=QS;QS.prototype.types=[{id:"image",model:TI,view:MI,isType:function(o){return typeof o=="string"?{type:"image",src:o}:o}}];var Jg;(function(o){o.add="asset:add",o.remove="asset:remove",o.removeBefore="asset:remove:before",o.update="asset:update",o.open="asset:open",o.close="asset:close",o.uploadStart="asset:upload:start",o.uploadEnd="asset:upload:end",o.uploadError="asset:upload:error",o.uploadResponse="asset:upload:response",o.custom="asset:custom",o.all="asset"})(Jg||(Jg={}));const B_=Jg;var II=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),e1=function(o){II(n,o);function n(e){e===void 0&&(e={});var t=o.call(this,e)||this;t.options=e,t.config=e.config,t.pfx=t.config.stylePrefix||"",t.ppfx=t.config.pStylePrefix||"",t.em=t.config.em;var r=t.collection;return t.listenTo(r,"reset",t.renderAssets),t.listenTo(r,"add",t.addToAsset),t.listenTo(r,"remove",t.removedAsset),t.listenTo(r,"deselectAll",t.deselectAll),t}return n.prototype.template=function(e){var t=e.pfx,r=e.ppfx,i=e.em,s="";return this.config.showUrlInput&&(s=`
          <form class="`.concat(t,`add-asset">
            <div class="`).concat(r,"field ").concat(t,`add-field">
              <input placeholder="`).concat(i==null?void 0:i.t("assetManager.inputPlh"),`"/>
            </div>
            <button class="`).concat(r,'btn-prim">').concat(i==null?void 0:i.t("assetManager.addButton"),`</button>
            <div style="clear:both"></div>
          </form>
      `)),`
    <div class="`.concat(t,`assets-cont">
      <div class="`).concat(t,`assets-header">
        `).concat(s,`
      </div>
      <div class="`).concat(t,`assets" data-el="assets"></div>
      <div style="clear:both"></div>
    </div>
    `)},n.prototype.handleSubmit=function(e){e.preventDefault();var t=this.getAddInput(),r=t&&t.value.trim(),i=this.config.handleAdd;if(r){t.value="";var s=this.getAssetsEl();s&&(s.scrollTop=0),i?i.bind(this)(r):this.options.globalCollection.add(r,{at:0})}},n.prototype.getAssetsEl=function(){return this.el.querySelector(".".concat(this.pfx,"assets"))},n.prototype.getAddInput=function(){return(!this.inputUrl||!this.inputUrl.value)&&(this.inputUrl=this.el.querySelector(".".concat(this.pfx,"add-asset input"))),this.inputUrl},n.prototype.removedAsset=function(e){this.collection.length||this.toggleNoAssets()},n.prototype.addToAsset=function(e){this.collection.length==1&&this.toggleNoAssets(!0),this.addAsset(e)},n.prototype.addAsset=function(e,t){t===void 0&&(t=null);var r=t,i=this.collection,s=this.config,u=new e.typeView({model:e,collection:i,config:s}).render().el;if(r)r.appendChild(u);else{var c=this.getAssetsEl();c&&c.insertBefore(u,c.firstChild)}return u},n.prototype.toggleNoAssets=function(e){e===void 0&&(e=!1);var t=this.$el.find(".".concat(this.pfx,"assets"));if(e)t.empty();else{var r=this.config.noAssets;r&&t.append(r)}},n.prototype.deselectAll=function(){var e=this.pfx;this.$el.find(".".concat(e,"highlight")).removeClass("".concat(e,"highlight"))},n.prototype.renderAssets=function(){var e=this,t=document.createDocumentFragment(),r=this.$el.find(".".concat(this.pfx,"assets"));r.empty(),this.toggleNoAssets(!!this.collection.length),this.collection.each(function(i){return e.addAsset(i,t)}),r.append(t)},n.prototype.render=function(){var e=this.options.fu.render().el;return this.$el.empty(),this.$el.append(e).append(this.template(this)),this.el.className="".concat(this.ppfx,"asset-manager"),this.renderAssets(),this},n}(gt.Ss);const NI=e1;e1.prototype.events={submit:"handleSubmit"};var RI=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),FI=function(o,n){return Object.defineProperty?Object.defineProperty(o,"raw",{value:n}):o.raw=n,o},VI=function(o){RI(n,o);function n(e){e===void 0&&(e={});var t=o.call(this,e)||this;t.options=e;var r=e.config||{};t.module=e.module,t.config=r,t.em=t.config.em,t.pfx=r.stylePrefix||"",t.ppfx=r.pStylePrefix||"",t.target=t.options.globalCollection||{},t.uploadId=t.pfx+"uploadFile",t.disabled=r.disableUpload!==void 0?r.disableUpload:!r.upload&&!r.embedAsBase64,t.multiUpload=r.multiUpload!==void 0?r.multiUpload:!0;var i=r.uploadFile;return i?t.uploadFile=i.bind(t):!r.upload&&r.embedAsBase64&&(t.uploadFile=n.embedAsBase64),t.delegateEvents(),t}return n.prototype.template=function(e){var t=e.pfx,r=e.title,i=e.uploadId,s=e.disabled,u=e.multiUpload;return Vo(W_||(W_=FI([`
      <form>
        <div id="`,'title">',`</div>
        <input
          data-input
          type="file"
          id="`,`"
          name="file"
          accept="*/*"
          `,`
          `,`
        />
        <div style="clear:both;"></div>
      </form>
    `],[`
      <form>
        <div id="`,'title">',`</div>
        <input
          data-input
          type="file"
          id="`,`"
          name="file"
          accept="*/*"
          `,`
          `,`
        />
        <div style="clear:both;"></div>
      </form>
    `])),t,r,i,s?"disabled":"",u?"multiple":"")},n.prototype.events=function(){return{"change [data-input]":"uploadFile"}},n.prototype.onUploadStart=function(){var e=this.module;e==null||e.__propEv(e.events.uploadStart)},n.prototype.onUploadEnd=function(e){var t=this,r=t.$el,i=t.module;i==null||i.__propEv(i.events.uploadEnd,e);var s=r.find("input");s&&s.val("")},n.prototype.onUploadError=function(e){var t=this.module;console.error(e),this.onUploadEnd(e),t==null||t.__propEv(t.events.uploadError,e)},n.prototype.onUploadResponse=function(e,t){var r=this,i=r.module,s=r.config,u=r.target,c;try{c=typeof e=="string"?JSON.parse(e):e}catch{c=e}i==null||i.__propEv(i.events.uploadResponse,c),s.autoAdd&&u&&u.add(c.data,{at:0}),this.onUploadEnd(e),t==null||t(c)},n.prototype.uploadFile=function(e,t){var r=this,i=e.dataTransfer?e.dataTransfer.files:e.target.files,s=this.config,u=s.beforeUpload,c=u&&u(i);if(c!==!1){var f=new FormData,h=s.params,v=s.customFetch,m=s.fetchOptions;for(var _ in h)f.append(_,h[_]);if(this.multiUpload)for(var C=0;C<i.length;C++)f.append("".concat(s.uploadName).concat(s.multiUploadSuffix),i[C]);else i.length&&f.append(s.uploadName,i[0]);var T=s.upload,k=s.headers,P="X-Requested-With";if(typeof k[P]>"u"&&(k[P]="XMLHttpRequest"),T){this.onUploadStart();var L={method:"post",credentials:s.credentials||"include",headers:k,body:f},D=(m==null?void 0:m(L))||L,V=v?v(T,D):IS(T,D).then(function(re){return(re.status/200|0)==1?re.text():re.text().then(function(_e){return Promise.reject(_e)})});return V.then(function(re){return r.onUploadResponse(re,t)}).catch(function(re){return r.onUploadError(re)})}}},n.prototype.initDrop=function(){var e=this;if(!this.uploadForm){this.uploadForm=this.$el.find("form").get(0);var t=this.uploadForm;"draggable"in t&&(this.uploadForm.ondragover=function(){return t.className=e.pfx+"hover",!1},this.uploadForm.ondragleave=function(){return t.className="",!1},this.uploadForm.ondrop=function(r){t.className="",r.preventDefault(),e.uploadFile(r)})}},n.prototype.initDropzone=function(e){var t=this,r=0,i=this.config,s=e.model,u=e.el,c=s.Editor,f=s.Canvas.getBody(),h=this.ppfx,v="".concat(h,"dropzone-active"),m="".concat(h,"dropzone"),_=function(){u.className=u.className.replace(v,"").trim(),r=0},C=function(){return r||(u.className+=" ".concat(v),r=1),!1},T=function(){return _(),!1},k=function(P){if(_(),P.preventDefault(),P.stopPropagation(),t.uploadFile(P),i.openAssetsOnDrop&&c){var L=c.getSelected();c.runCommand("open-assets",{target:L,onSelect:function(){c.Modal.close(),c.AssetManager.setTarget(null)}})}return!1};e.$el.append('<div class="'.concat(m,'">').concat(i.dropzoneContent,"</div>")),_(),"draggable"in u&&[u,f].forEach(function(P){P.ondragover=C,P.ondragleave=T,P.ondrop=k})},n.prototype.render=function(){var e=this,t=e.$el,r=e.pfx,i=e.em;return t.html(this.template({title:i&&i.t("assetManager.uploadTitle"),uploadId:this.uploadId,disabled:this.disabled,multiUpload:this.multiUpload,pfx:r})),this.initDrop(),t.attr("class",r+"file-uploader"),this},n.embedAsBase64=function(e,t){var r=this,i=e.dataTransfer?e.dataTransfer.files:e.target.files,s={data:[]};if(!FileReader){this.onUploadError(new Error("Unsupported platform, FileReader is not defined"));return}for(var u=[],c=/^(.+)\/(.+)$/,f=function(_){var C=new Promise(function(T,k){var P=new FileReader;P.addEventListener("load",function(L){var D,V=_.name,re=c.exec(_.type);if(re?D=re[1]:D=_.type,D==="image"){var _e={src:P.result,name:V,type:D,height:0,width:0},Q=new Image;Q.addEventListener("error",function(pe){k(pe)}),Q.addEventListener("load",function(){_e.height=Q.height,_e.width=Q.width,T(_e)}),Q.src=_e.src}else T(D?{src:P.result,name:V,type:D}:P.result)}),P.addEventListener("error",function(L){k(L)}),P.addEventListener("abort",function(L){k("Aborted")}),P.readAsDataURL(_)});u.push(C)},h=0,v=i;h<v.length;h++){var m=v[h];f(m)}return Promise.all(u).then(function(_){s.data=_,r.onUploadResponse(s,t)},function(_){r.onUploadError(_)})},n}(gt.Ss);const zI=VI;var W_,HI=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Yl=function(){return Yl=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},Yl.apply(this,arguments)},$_=function(o,n,e){if(e||arguments.length===2)for(var t=0,r=n.length,i;t<r;t++)(i||!(t in n))&&(i||(i=Array.prototype.slice.call(n,0,t)),i[t]=n[t]);return o.concat(i||Array.prototype.slice.call(n))},Qu="open-assets",UI=function(o){HI(n,o);function n(e){var t=o.call(this,e,"AssetManager",new Ev([],e),B_,xI)||this;t.storageKey="assets",t.Asset=qg,t.Assets=Ev,t.events=B_;var r=t,i=r.all,s=r.config;t.assetsVis=new Ev([]);var u=s.pStylePrefix;return u&&(s.stylePrefix="".concat(u).concat(s.stylePrefix)),i.on("add",function(c){return t.getAllVisible().add(c)}),i.on("remove",function(c){return t.getAllVisible().remove(c)}),t.__onAllEvent=(0,U.debounce)(function(){return t.__trgCustom()},0),t}return n.prototype.open=function(e){e===void 0&&(e={});var t=this.em.Commands;t.run(Qu,Yl({types:["image"],select:function(){}},e))},n.prototype.close=function(){var e=this.em.Commands;e.stop(Qu)},n.prototype.isOpen=function(){var e=this.em.Commands;return!!(e!=null&&e.isActive(Qu))},n.prototype.add=function(e,t){return t===void 0&&(t={}),typeof t.at>"u"&&(t.at=0),this.all.add(e,t)},n.prototype.get=function(e){return this.all.where({src:e})[0]||null},n.prototype.getAll=function(){return this.all},n.prototype.getAllVisible=function(){return this.assetsVis},n.prototype.remove=function(e,t){return this.__remove(e,t)},n.prototype.store=function(){return this.getProjectData()},n.prototype.load=function(e){return this.loadProjectData(e)},n.prototype.getContainer=function(){var e,t=this.__getBehaviour();return t.container||((e=this.am)===null||e===void 0?void 0:e.el)},n.prototype.getAssetsEl=function(){var e;return(e=this.am)===null||e===void 0?void 0:e.el.querySelector("[data-el=assets]")},n.prototype.render=function(e){if(!this.getConfig().custom){var t=e||this.getAll().models;if(!this.am){var r=this.__viewParams();r.fu=this.FileUploader(),this.am=new NI(Yl({},r)),this.am.render()}return this.assetsVis.reset(t),this.getContainer()}},n.prototype.__viewParams=function(){return{collection:this.assetsVis,globalCollection:this.all,config:this.config,module:this,fu:void 0}},n.prototype.addType=function(e,t){this.getAll().addType(e,t)},n.prototype.getType=function(e){return this.getAll().getType(e)},n.prototype.getTypes=function(){return this.getAll().getTypes()},n.prototype.AssetsView=function(){return this.am},n.prototype.FileUploader=function(){return this.fu||(this.fu=new zI(this.__viewParams())),this.fu},n.prototype.onLoad=function(){var e=this;this.getAll().reset(this.config.assets);var t=this,r=t.em,i=t.events;r.Commands.__onRun(Qu,function(){return e.__propEv(i.open)}),r.Commands.__onStop(Qu,function(){return e.__propEv(i.close)})},n.prototype.postRender=function(e){var t;this.config.dropzone&&((t=this.fu)===null||t===void 0||t.initDropzone(e))},n.prototype.setTarget=function(e){this.assetsVis.target=e},n.prototype.onSelect=function(e){this.assetsVis.onSelect=e},n.prototype.onClick=function(e){this.config.onClick=e},n.prototype.onDblClick=function(e){this.config.onDblClick=e},n.prototype.__propEv=function(e){for(var t,r,i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];(t=this.em).trigger.apply(t,$_([e],i,!1)),(r=this.getAll()).trigger.apply(r,$_([e],i,!1))},n.prototype.__trgCustom=function(){var e=this.__getBehaviour(),t=this.getConfig().custom;!e.container&&!t.open||this.em.trigger(this.events.custom,this.__customData())},n.prototype.__customData=function(){var e=this,t=this.__getBehaviour();return{am:this,open:this.isOpen(),assets:this.getAll().models,types:t.types||[],container:t.container,close:function(){return e.close()},remove:function(r,i){return e.remove(r,i)},select:function(r,i){var s=e.add(r);(0,U.isFunction)(t.select)&&t.select(s,i)},options:t.options||{}}},n.prototype.__behaviour=function(e){return e===void 0&&(e={}),this._bhv=Yl(Yl({},this._bhv||{}),e)},n.prototype.__getBehaviour=function(e){return this._bhv||{}},n.prototype.destroy=function(){var e,t;this.all.stopListening(),this.all.reset(),this.assetsVis.stopListening(),this.assetsVis.reset(),(e=this.fu)===null||e===void 0||e.remove(),(t=this.am)===null||t===void 0||t.remove(),this._bhv={}},n}(vs);const BI=UI;var WI=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),$I=function(o){WI(n,o);function n(e,t){t===void 0&&(t={});var r=o.call(this,e,t)||this,i=t.em,s={};r.em=i,e.frames||(s.component=e.component,s.styles=e.styles,["component","styles"].map(function(f){return r.unset(f)}));var u=e.frames||[s],c=new ZC(i.Canvas,u);return c.page=r,r.set("frames",c),!r.getId()&&r.set("id",i==null?void 0:i.Pages._createId()),i==null||i.UndoManager.add(c),r}return n.prototype.defaults=function(){return{name:"",frames:[],_undo:!0}},n.prototype.onRemove=function(){this.getFrames().reset()},n.prototype.getFrames=function(){return this.get("frames")},n.prototype.getId=function(){return this.id},n.prototype.getName=function(){return this.get("name")},n.prototype.setName=function(e){return this.set({name:e})},n.prototype.getAllFrames=function(){return this.getFrames().models||[]},n.prototype.getMainFrame=function(){return this.getFrames().at(0)},n.prototype.getMainComponent=function(){var e=this.getMainFrame();return e==null?void 0:e.getComponent()},n.prototype.toJSON=function(e){e===void 0&&(e={});var t=gt.Kx.prototype.toJSON.call(this,e),r=(0,U.result)(this,"defaults");return(0,U.forEach)(t,function(i,s){s.indexOf("_")===0&&delete t[s]}),(0,U.forEach)(r,function(i,s){t[s]===i&&delete t[s]}),t},n}(gt.Kx);const Zg=$I;var KI=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),bp=function(){return bp=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},bp.apply(this,arguments)},GI=function(o){KI(n,o);function n(e,t){var r=o.call(this,e)||this;return r.on("reset",r.onReset),r.on("remove",r.onRemove),r.model=function(i,s){return s===void 0&&(s={}),new Zg(i,bp(bp({},s),{em:t}))},r}return n.prototype.onReset=function(e,t){var r=this,i;(i=t==null?void 0:t.previousModels)===null||i===void 0||i.map(function(s){return r.onRemove(s)})},n.prototype.onRemove=function(e){e==null||e.onRemove()},n}(gt.pM);const YI=GI;var XI=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),qI=function(o,n,e){if(e||arguments.length===2)for(var t=0,r=n.length,i;t<r;t++)(i||!(t in n))&&(i||(i=Array.prototype.slice.call(n,0,t)),i[t]=n[t]);return o.concat(i||Array.prototype.slice.call(n))},K_="change:selected",G_="main",JI=function(o){XI(n,o);function n(e){var t=o.call(this,e,"PageManager",new YI([],e),Rg)||this;t.events=Rg,t.storageKey="pages",(0,U.bindAll)(t,"_onPageChange");var r=new fs.A({_undo:!0});return t.model=r,t.pages.on("reset",function(i){return i.at(0)&&t.select(i.at(0))}),t.pages.on("all",t.__onChange,t),r.on(K_,t._onPageChange),t}return Object.defineProperty(n.prototype,"pages",{get:function(){return this.all},enumerable:!1,configurable:!0}),n.prototype.getAll=function(){return qI([],this.all.models,!0)},n.prototype.__onChange=function(e,t,r,i){var s=this,u=s.em,c=s.events,f=i||r;u.trigger(c.all,{event:e,page:t,options:f})},n.prototype.onLoad=function(){var e,t=this,r=t.pages,i=t.config,s=t.em,u={silent:!0},c=((e=i.pages)===null||e===void 0?void 0:e.map(function(h){return new Zg(h,{em:s,config:i})}))||[];r.add(c,u);var f=r.length?this._initPage():this.add({type:G_},u);f&&this.select(f,u)},n.prototype._onPageChange=function(e,t,r){var i=this,s=i.em,u=i.events,c=s.Layers,f=t.getMainComponent();c&&f&&c.setRoot(f),s.trigger(u.select,t,e.previous("selected")),this.__onChange(K_,t,r)},n.prototype.postLoad=function(){var e=this,t=e.em,r=e.model,i=e.pages,s=t.UndoManager;s.add(r),s.add(i),i.on("add remove reset change",function(u,c,f){return t.changesUp(f||c)})},n.prototype.add=function(e,t){var r=this;t===void 0&&(t={});var i=this,s=i.em,u=i.events;e.id=e.id||this._createId();var c=function(){var f=r.pages.add(new Zg(e,{em:r.em,config:r.config}),t);return t.select&&r.select(f),f};return!t.silent&&s.trigger(u.addBefore,e,c,t),t.abort?void 0:c()},n.prototype.remove=function(e,t){var r=this;t===void 0&&(t={});var i=this,s=i.em,u=i.events,c=(0,U.isString)(e)?this.get(e):e,f=function(){return c&&r.pages.remove(c,t),c};return!t.silent&&s.trigger(u.removeBefore,c,f,t),!t.abort&&f()},n.prototype.get=function(e){return this.pages.filter(function(t){return t.get(t.idAttribute)===e})[0]},n.prototype.getMain=function(){var e=this.pages;return e.filter(function(t){return t.get("type")===G_})[0]||e.at(0)},n.prototype.getAllWrappers=function(){var e=this.getAll();return(0,U.unique)((0,U.flatten)(e.map(function(t){return t.getAllFrames().map(function(r){return r.getComponent()})})))},n.prototype.select=function(e,t){t===void 0&&(t={});var r=this,i=r.em,s=r.model,u=r.events,c=(0,U.isString)(e)?this.get(e):e;return c&&(i.trigger(u.selectBefore,c,t),s.set("selected",c,t)),this},n.prototype.getSelected=function(){return this.model.get("selected")},n.prototype.destroy=function(){var e=this;this.pages.off().reset(),this.model.stopListening(),this.model.clear({silent:!0}),["selected","model"].map(function(t){return e[t]=0})},n.prototype.store=function(){return this.getProjectData()},n.prototype.load=function(e){var t=this.loadProjectData(e,{all:this.pages,reset:!0});return this.pages.forEach(function(r){return r.getFrames().initRefs()}),t},n.prototype._initPage=function(){return this.get(this.config.selected)||this.getMain()},n.prototype._createId=function(){var e=this.getAll(),t=e.length+16,r=this.getAllMap(),i;do i=(0,Xe.createId)(t);while(r[i]);return i},n}(vs);const ZI=JI;var Pv={placeholder:"eg. Text here"};const QI={assetManager:{addButton:"Add image",inputPlh:"http://path/to/the/image.jpg",modalTitle:"Select Image",uploadTitle:"Drop files here or click to upload"},blockManager:{labels:{},categories:{}},domComponents:{names:{"":"Box",wrapper:"Body",text:"Text",comment:"Comment",image:"Image",video:"Video",label:"Label",link:"Link",map:"Map",tfoot:"Table foot",tbody:"Table body",thead:"Table head",table:"Table",row:"Table row",cell:"Table cell"}},deviceManager:{device:"Device",devices:{desktop:"Desktop",tablet:"Tablet",mobileLandscape:"Mobile Landscape",mobilePortrait:"Mobile Portrait"}},panels:{buttons:{titles:{preview:"Preview",fullscreen:"Fullscreen","sw-visibility":"View components","export-template":"View code","open-sm":"Open Style Manager","open-tm":"Settings","open-layers":"Open Layer Manager","open-blocks":"Open Blocks"}}},selectorManager:{label:"Classes",selected:"Selected",emptyState:"- State -",states:{hover:"Hover",active:"Click","nth-of-type(2n)":"Even/Odd"}},styleManager:{empty:"Select an element before using Style Manager",layer:"Layer",fileButton:"Images",sectors:{general:"General",layout:"Layout",typography:"Typography",decorations:"Decorations",extra:"Extra",flex:"Flex",dimension:"Dimension"},properties:{"text-shadow-h":"X","text-shadow-v":"Y","text-shadow-blur":"Blur","text-shadow-color":"Color","box-shadow-h":"X","box-shadow-v":"Y","box-shadow-blur":"Blur","box-shadow-spread":"Spread","box-shadow-color":"Color","box-shadow-type":"Type","margin-top-sub":"Top","margin-right-sub":"Right","margin-bottom-sub":"Bottom","margin-left-sub":"Left","padding-top-sub":"Top","padding-right-sub":"Right","padding-bottom-sub":"Bottom","padding-left-sub":"Left","border-width-sub":"Width","border-style-sub":"Style","border-color-sub":"Color","border-top-left-radius-sub":"Top Left","border-top-right-radius-sub":"Top Right","border-bottom-right-radius-sub":"Bottom Right","border-bottom-left-radius-sub":"Bottom Left","transform-rotate-x":"Rotate X","transform-rotate-y":"Rotate Y","transform-rotate-z":"Rotate Z","transform-scale-x":"Scale X","transform-scale-y":"Scale Y","transform-scale-z":"Scale Z","transition-property-sub":"Property","transition-duration-sub":"Duration","transition-timing-function-sub":"Timing","background-image-sub":"Image","background-repeat-sub":"Repeat","background-position-sub":"Position","background-attachment-sub":"Attachment","background-size-sub":"Size"}},traitManager:{empty:"Select an element before using Trait Manager",label:"Component settings",categories:{},traits:{labels:{},attributes:{id:Pv,alt:Pv,title:Pv,href:{placeholder:"eg. https://google.com"}},options:{target:{false:"This window",_blank:"New window"}}}},storageManager:{recover:"Do you want to recover unsaved changes?"}};var e2={locale:"en",localeFallback:"en",detectLocale:!0,debug:!1,messages:{en:QI},messagesAdd:void 0};const t2=e2;var Qg;(function(o){o.add="i18n:add",o.update="i18n:update",o.locale="i18n:locale"})(Qg||(Qg={}));const n2=Qg;var r2=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),o2=function(o){r2(n,o);function n(e){var t=o.call(this,e,"I18n",t2)||this;t.events=n2;var r=t.config.messagesAdd;return r&&t.addMessages(r),t.config.detectLocale&&(t.config.locale=t._localLang()),t}return n.prototype.setLocale=function(e){var t=this,r=t.em,i=t.config,s=t.events;return r.trigger(s.locale,{value:e,valuePrev:i.locale}),i.locale=e,this},n.prototype.getLocale=function(){return this.config.locale},n.prototype.getMessages=function(e,t){t===void 0&&(t={});var r=this.config.messages;return e&&!r[e]&&this._debug("'".concat(e,"' i18n lang not found"),t),e?r[e]:r},n.prototype.setMessages=function(e){var t=this,r=t.em,i=t.config,s=t.events;return i.messages=e,r.trigger(s.update,e),this},n.prototype.addMessages=function(e){var t=this,r=t.em,i=t.events,s=t.config,u=s.messages;return r.trigger(i.add,e),this.setMessages((0,Xe.deepMerge)(u,e)),this},n.prototype.t=function(e,t){t===void 0&&(t={});var r=this.config,i=t.params||{},s=t.l||this.getLocale(),u=t.lFlb||r.localeFallback,c=this._getMsg(e,s,t);return c||(c=this._getMsg(e,u,t)),!c&&this._debug("'".concat(e,"' i18n key not found in '").concat(s,"' lang"),t),c=c&&(0,U.isString)(c)?this._addParams(c,i):c,c},n.prototype._localLang=function(){var e=(0,Xe.hasWin)()&&window.navigator||{},t=e.language||e.userLanguage;return t?t.split("-")[0]:"en"},n.prototype._addParams=function(e,t){var r=new RegExp("{([\\w\\d-]*)}","g");return e.replace(r,function(i,s){return t[s]||""}).trim()},n.prototype._getMsg=function(e,t,r){r===void 0&&(r={});var i=this.getMessages(t,r);if(i){var s=i[e];return!s&&e.indexOf(".")>0&&(s=e.split(".").reduce(function(u,c){if(!(0,U.isUndefined)(u))return u[c]},i)),s}},n.prototype._debug=function(e,t){t===void 0&&(t={});var r=this,i=r.em,s=r.config;(t.debug||s.debug)&&i&&i.logWarning(e)},n.prototype.destroy=function(){},n}($o);const i2=o2;var a2=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),ta=function(){return ta=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},ta.apply(this,arguments)},s2=function(){},l2=mi.F.Target,Y_={id:"sorter-target",type:l2},u2=function(o){a2(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype.initialize=function(e){e===void 0&&(e={}),this.opt=e||{},(0,U.bindAll)(this,"startSort","onMove","endMove","rollback","updateOffset","moveDragHelper");var t=e||{};this.elT=0,this.elL=0,this.borderOffset=t.borderOffset||10;var r=t.container;this.el=typeof r=="string"?document.querySelector(r):r,this.$el=(0,Hn.default)(this.el),this.containerSel=t.containerSel||"div",this.itemSel=t.itemSel||"div",this.draggable=t.draggable||!0,this.nested=!!t.nested,this.pfx=t.pfx||"",this.ppfx=t.ppfx||"",this.freezeClass=t.freezeClass||this.pfx+"freezed",this.onStart=t.onStart||s2,this.onEndMove=t.onEndMove,this.customTarget=t.customTarget,this.onEnd=t.onEnd,this.direction=t.direction||"v",this.onMoveClb=t.onMove,this.relative=t.relative||!1,this.ignoreViewChildren=!!t.ignoreViewChildren,this.plh=t.placer,this.wmargin=t.wmargin||0,this.offTop=t.offsetTop||0,this.offLeft=t.offsetLeft||0,this.document=t.document||document,this.em=t.em,this.canvasRelative=!!t.canvasRelative,this.selectOnEnd=!t.avoidSelectOnEnd,this.scale=t.scale;var i=this.em;i!=null&&i.on&&(i.on(i.Canvas.events.refresh,this.updateOffset),this.updateOffset())},n.prototype.getScale=function(){return(0,U.result)(this,"scale")||1},n.prototype.getContainerEl=function(e){if(e&&(this.el=e),!this.el){var t=this.opt.container;this.el=typeof t=="string"?document.querySelector(t):t,this.$el=(0,Hn.default)(this.el)}return this.el},n.prototype.getDocuments=function(e){var t=this.em,r=e?e.ownerDocument:t==null?void 0:t.Canvas.getBody().ownerDocument,i=[document];return r&&i.push(r),i},n.prototype.updateOffset=function(){var e,t=((e=this.em)===null||e===void 0?void 0:e.get("canvasOffset"))||{};this.offTop=t.top,this.offLeft=t.left},n.prototype.setDropContent=function(e){delete this.dropModel,this.dropContent=e},n.prototype.updateTextViewCursorPosition=function(e){var t=this.em;if(t){var r=t.Canvas,i=r.getDocument(),s=null;if(i.caretRangeFromPoint){var u=(0,wt.G2)(e);s=i.caretRangeFromPoint(u.clientX,u.clientY)}else e.rangeParent&&(s=i.createRange(),s.setStart(e.rangeParent,e.rangeOffset));var c=r.getWindow().getSelection();r.getFrameEl().focus(),c==null||c.removeAllRanges(),s&&(c==null||c.addRange(s)),this.setContentEditable(this.activeTextModel,!0)}},n.prototype.setContentEditable=function(e,t){if(e){var r=e.getEl();r.contentEditable!=t&&(r.contentEditable=t)}},n.prototype.toggleSortCursor=function(e){var t=this.em,r=t==null?void 0:t.Canvas;r&&(e?r.startAutoscroll():r.stopAutoscroll())},n.prototype.setDragHelper=function(e,t){for(var r=t||"",i=e.cloneNode(!0),s=e.getBoundingClientRect(),u=getComputedStyle(e),c="",f=0;f<u.length;f++){var h=u[f];c+="".concat(h,":").concat(u.getPropertyValue(h),";")}if(document.body.appendChild(i),i.className+=" ".concat(this.pfx,"bdrag"),i.setAttribute("style",c),this.dragHelper=i,i.style.width="".concat(s.width,"px"),i.style.height="".concat(s.height,"px"),r&&this.moveDragHelper(r),this.em){var v=(0,Hn.default)(this.em.Canvas.getBody().ownerDocument);v.off("mousemove",this.moveDragHelper).on("mousemove",this.moveDragHelper)}(0,Hn.default)(document).off("mousemove",this.moveDragHelper).on("mousemove",this.moveDragHelper)},n.prototype.moveDragHelper=function(e){var t=e.target.ownerDocument;if(!(!this.dragHelper||!t)){var r=e.pageY,i=e.pageX,s=0,u=0,c=t.defaultView||t.parentWindow,f=c.frameElement,h=this.dragHelper.style;if(f){var v=f.getBoundingClientRect();s=v.top+document.documentElement.scrollTop,u=v.left+document.documentElement.scrollLeft,r=e.clientY,i=e.clientX}h.top=r+s+"px",h.left=i+u+"px"}},n.prototype.matches=function(e,t){return Xe.matches.call(e,t)},n.prototype.closest=function(e,t){if(e)for(var r=e.parentNode;r&&r.nodeType===1;){if(this.matches(r,t))return r;r=r.parentNode}},n.prototype.offset=function(e){var t=e.getBoundingClientRect();return{top:t.top+document.body.scrollTop,left:t.left+document.body.scrollLeft}},n.prototype.createPlaceholder=function(){var e=this.pfx,t=document.createElement("div"),r=document.createElement("div");return t.className=e+"placeholder",t.style.display="none",t.style.pointerEvents="none",r.className=e+"placeholder-int",t.appendChild(r),t},n.prototype.startSort=function(e,t){var r,i;t===void 0&&(t={});var s=this,u=s.em,c=s.itemSel,f=s.containerSel,h=s.plh,v=this.getContainerEl(t.container),m=this.getDocuments(e),_;delete this.dropModel,delete this.target,delete this.prevTarget,this.moved=!1,e&&!this.matches(e,"".concat(c,", ").concat(f))&&(e=this.closest(e,c)),this.sourceEl=e,h||(this.plh=this.createPlaceholder(),v.appendChild(this.plh)),e&&(_=this.getSourceModel(e),_!=null&&_.set&&_.set("status","freezed"),this.srcModel=_),(0,wt.on)(v,"mousemove dragover",this.onMove),(0,wt.on)(m,"mouseup dragend touchend",this.endMove),(0,wt.on)(m,"keydown",this.rollback),this.onStart({sorter:this,target:_,parent:_&&((r=_.parent)===null||r===void 0?void 0:r.call(_)),index:_&&((i=_.index)===null||i===void 0?void 0:i.call(_))}),u==null||u.clearSelection(),this.toggleSortCursor(!0),u==null||u.trigger("sorter:drag:start",e,_)},n.prototype.getTargetModel=function(e){var t=e||this.target;return(0,Hn.default)(t).data("model")},n.prototype.getSourceModel=function(e,t){var r=this,i=t===void 0?{}:t,s=i.target,u=i.avoidChildren,c=u===void 0?1:u,f=this,h=f.em,v=f.sourceEl,m=e||v,_=this,C=_.dropModel,T=_.dropContent,k=function(V){return V&&s&&V.opt&&V.opt.avoidChildren&&r.isTextableActive(V,s)};if(T&&h){if(k(C)&&(C=void 0),!C){var P=h.Components.getComponents(),L={avoidChildren:c,avoidStore:1,avoidUpdateStyle:1},D=P.add(T,ta(ta({},L),{temporary:!0}));if(C=P.remove(D,L),C=C instanceof Array?C[0]:C,this.dropModel=C,k(C))return this.getSourceModel(m,{target:s,avoidChildren:0})}return C}return m&&(0,Hn.default)(m).data("model")},n.prototype.selectTargetModel=function(e,t){if(!(e instanceof gt.pM)&&!(t&&t===e)){var r=this.targetModel;if(r&&r!==this.srcModel&&r.set("status",""),e!=null&&e.set){var i=this.em.Canvas,s=mi.F.Select,u=mi.F.Hover,c=mi.F.Spacing;[s,u,c].forEach(function(f){return i.removeSpots({type:f})}),i.addSpot(ta(ta({},Y_),{component:e})),e.set("status","selected-parent"),this.targetModel=e}}},n.prototype.onMove=function(e){var t=e,r=this,i=r.em,s=r.onMoveClb,u=r.plh,c=r.customTarget;this.moved=!0;var f=u.style.display;(!f||f==="none")&&(u.style.display="block");var h=this.offset(this.el);this.elT=this.wmargin?Math.abs(h.top):h.top,this.elL=this.wmargin?Math.abs(h.left):h.left;var v=e.pageY-this.elT+this.el.scrollTop,m=e.pageX-this.elL+this.el.scrollLeft;if(this.canvasRelative&&i){var _=i.Canvas.getMouseRelativeCanvas(e,{noScroll:1});m=_.x,v=_.y}this.rX=m,this.rY=v,this.eventMove=e;var C=this.getSourceModel(),T=c?c({sorter:this,event:e}):e.target,k=this.dimsFromTarget(T,m,v),P=this.target,L=P&&this.getTargetModel(P);if(this.selectTargetModel(L,C),L||(u.style.display="none"),!!P){this.lastDims=k;var D=this.findPosition(k,m,v);this.isTextableActive(C,L)?(this.activeTextModel=L,u.style.display="none",this.lastPos=D,this.updateTextViewCursorPosition(t)):(this.disableTextable(),delete this.activeTextModel,(!this.lastPos||this.lastPos.index!=D.index||this.lastPos.method!=D.method)&&(this.movePlaceholder(this.plh,k,D,this.prevTargetDim),this.$plh||(this.$plh=(0,Hn.default)(this.plh)),this.canvasRelative||(this.offTop&&this.$plh.css("top","+="+this.offTop+"px"),this.offLeft&&this.$plh.css("left","+="+this.offLeft+"px")),this.lastPos=D)),(0,U.isFunction)(s)&&s({event:e,target:C,parent:L,index:D.index+(D.method=="after"?1:0)}),i&&i.trigger("sorter:drag",{target:P,targetModel:L,sourceModel:C,dims:k,pos:D,x:m,y:v})}},n.prototype.isTextableActive=function(e,t){var r;return((r=e==null?void 0:e.get)===null||r===void 0?void 0:r.call(e,"textable"))&&(t==null?void 0:t.isInstanceOf("text"))},n.prototype.disableTextable=function(){var e=this.activeTextModel;e==null||e.getView().disableEditing(),this.setContentEditable(e,!1)},n.prototype.isInFlow=function(e,t){if(!e)return!1;t=t||document.body;var r=e;return r.offsetHeight,!!this.styleInFlow(r,t)},n.prototype.styleInFlow=function(e,t){if(!(0,wt.ir)(e)){var r=e.style||{},i=(0,Hn.default)(e),s=t&&(0,Hn.default)(t);if(!(r.overflow&&r.overflow!=="visible")){var u=i.css("float");if(!(u&&u!=="none")&&!(s&&s.css("display")=="flex"&&s.css("flex-direction")!=="column")){switch(r.position){case"static":case"relative":case"":break;default:return}switch(e.tagName){case"TR":case"TBODY":case"THEAD":case"TFOOT":return!0}switch(i.css("display")){case"block":case"list-item":case"table":case"flex":case"grid":return!0}}}}},n.prototype.validTarget=function(e,t){var r,i,s=this.lastPos,u=this.getTargetModel(e),c=this.getSourceModel(t,{target:u});t=(r=c==null?void 0:c.view)===null||r===void 0?void 0:r.el,e=(i=u==null?void 0:u.view)===null||i===void 0?void 0:i.el;var f={valid:!0,src:t,srcModel:c,trg:e,trgModel:u,draggable:!1,droppable:!1,dragInfo:"",dropInfo:""};if(!t||!e)return f.valid=!1,f;var h=s?s.method==="after"?s.indexEl+1:s.indexEl:u.components().length,v=c.get("draggable");if((0,U.isFunction)(v)){var m=v(c,u,h);f.dragInfo=m,f.draggable=m,v=m}else v=v instanceof Array?v.join(", "):v,f.dragInfo=v,v=(0,U.isString)(v)?this.matches(e,v):v,f.draggable=v;var _=u.get("droppable");if((0,U.isFunction)(_)){var m=_(c,u,h);f.droppable=m,f.dropInfo=m,_=m}else _=_ instanceof gt.pM?1:_,_=_ instanceof Array?_.join(", "):_,f.dropInfo=_,_=(0,U.isString)(_)?this.matches(t,_):_,_=v&&this.isTextableActive(c,u)?1:_,f.droppable=_;return(!_||!v)&&(f.valid=!1),f},n.prototype.dimsFromTarget=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=0);var i=this.em,s=[];if(!e||(this.matches(e,"".concat(this.itemSel,", ").concat(this.containerSel))||(e=this.closest(e,this.itemSel)),this.draggable instanceof Array&&(e=this.closest(e,this.draggable.join(","))),!e))return s;if(this.prevTarget&&this.prevTarget!=e&&delete this.prevTarget,!this.prevTarget){this.targetP=this.closest(e,this.containerSel);var u=this.validTarget(e);if(i&&i.trigger("sorter:drag:validation",u),!u.valid&&this.targetP)return this.dimsFromTarget(this.targetP,t,r);this.prevTarget=e,this.prevTargetDim=this.getDim(e),this.cacheDimsP=this.getChildrenDim(this.targetP),this.cacheDims=this.getChildrenDim(e)}if(this.prevTarget==e&&(s=this.cacheDims),this.target=this.prevTarget,this.nearBorders(this.prevTargetDim,t,r)||!this.nested&&!this.cacheDims.length){var c=this.targetP;c&&this.validTarget(c).valid&&(s=this.cacheDimsP,this.target=c)}return delete this.lastPos,s},n.prototype.getTargetFromEl=function(e){var t=e,r,i=this.targetPrev,s=this.em,u=this.containerSel,c=this.itemSel;if(this.matches(t,"".concat(c,", ").concat(u))||(t=this.closest(t,c)),this.draggable instanceof Array&&(t=this.closest(t,this.draggable.join(","))),i&&i!=t&&delete this.targetPrev,!this.targetPrev){r=this.closest(t,u);var f=this.validTarget(t);if(s&&s.trigger("sorter:drag:validation",f),!f.valid&&r)return this.getTargetFromEl(r);this.targetPrev=t}return this.nearElBorders(t)&&(r=this.closest(t,u),r&&this.validTarget(r).valid&&(t=r)),t},n.prototype.nearElBorders=function(e){var t=10,r=e.getBoundingClientRect(),i=e.ownerDocument.body,s=this.getCurrentPos(),u=s.x,c=s.y,f=r.top+i.scrollTop,h=r.left+i.scrollLeft,v=r.width,m=r.height;if(c<f+t||c>f+m-t||u<h+t||u>h+v-t)return 1},n.prototype.getCurrentPos=function(){var e=this.eventMove,t=(e==null?void 0:e.pageX)||0,r=(e==null?void 0:e.pageY)||0;return{x:t,y:r}},n.prototype.getDim=function(e){var t=this,r=t.em,i=t.canvasRelative,s=r==null?void 0:r.Canvas,u=s?s.getElementOffsets(e):{},c,f,h,v;if(i&&r){var m=s.getElementPos(e,{noScroll:1});c=m.top,f=m.left,h=m.height,v=m.width}else{var _=this.offset(e);c=this.relative?e.offsetTop:_.top-(this.wmargin?-1:1)*this.elT,f=this.relative?e.offsetLeft:_.left-(this.wmargin?-1:1)*this.elL,h=e.offsetHeight,v=e.offsetWidth}return{top:c,left:f,height:h,width:v,offsets:u}},n.prototype.getChildrenDim=function(e){var t=this,r=[];if(!e)return r;var i=this.getTargetModel(e);if(i&&i.view&&!this.ignoreViewChildren){var s=i.getCurrentView?i.getCurrentView():i.view;e=s.getChildrenContainer()}return(0,U.each)(e.children,function(u,c){var f=u,h=(0,Xe.getModel)(f,Hn.default),v=h&&h.index?h.index():c;if(!(!(0,wt.ir)(f)&&!t.matches(f,t.itemSel))){var m=t.getDim(f),_=t.direction,C;_=="v"?C=!0:_=="h"?C=!1:C=t.isInFlow(f,e),m.dir=C,m.el=f,m.indexEl=v,r.push(m)}}),r},n.prototype.nearBorders=function(e,t,r){var i=!1,s=this.borderOffset,u=t||0,c=r||0,f=e.top,h=e.left,v=e.height,m=e.width;return(f+s>c||c>f+v-s||h+s>u||u>h+m-s)&&(i=!0),i},n.prototype.findPosition=function(e,t,r){for(var i={index:0,indexEl:0,method:"before"},s=0,u=0,c=0,f=0,h=0,v=0,m=0,_,C=0,T=e.length;C<T;C++){_=e[C];var k=_.top,P=_.left,L=_.height,D=_.width;if(c=P+D,m=k+L,h=P+D/2,v=k+L/2,!(u&&P>u||f&&v>=f||s&&c<s))if(i.index=C,i.indexEl=_.indexEl,!_.dir)r<m&&(f=m),t<h?(u=h,i.method="before"):(s=h,i.method="after");else if(r<v){i.method="before";break}else i.method="after"}return i},n.prototype.movePlaceholder=function(e,t,r,i){var s=0,u=0,c=0,f="",h="",v="px",m=5,_=r.method,C=t[r.index];if(e.classList.remove("vertical"),e.classList.add("horizontal"),C){var T=C.top,k=C.left,P=C.height,L=C.width;C.dir?(f=L+v,h="auto",u=_=="before"?T-s:T+P-s,c=k):(f="auto",h=P-s*2+v,u=T+s,c=_=="before"?k-s:k+L-s,e.classList.remove("horizontal"),e.classList.add("vertical"))}else{if(!this.nested){e.style.display="none";return}if(i){var D=i.offsets||{},V=D.paddingTop||m,re=D.paddingLeft||m,_e=D.borderTopWidth||0,Q=D.borderLeftWidth||0,pe=D.borderRightWidth||0,ne=Q+pe;u=i.top+V+_e,c=i.left+re+Q,f=parseInt("".concat(i.width))-re*2-ne+v,h="auto"}}e.style.top=u+v,e.style.left=c+v,f&&(e.style.width=f),h&&(e.style.height=h)},n.prototype.parents=function(e){return e?[e].concat(this.parents(e.parent())):[]},n.prototype.sort=function(e,t){var r=e.parents.filter(function(c){return t.parents.includes(c)}),i=r[0];if(!i)return t.model.index()-e.model.index();var s=e.parents[e.parents.indexOf(i)-1],u=t.parents[t.parents.indexOf(i)-1];return u.index()-s.index()},n.prototype.endMove=function(){var e=this,t,r=this.sourceEl,i=[],s=this.getDocuments(),u=this.getContainerEl(),c=this.onEndMove,f=this.onEnd,h=this,v=h.target,m=h.lastPos,_;if((0,wt.AU)(u,"mousemove dragover",this.onMove),(0,wt.AU)(s,"mouseup dragend touchend",this.endMove),(0,wt.AU)(s,"keydown",this.rollback),this.plh.style.display="none",r&&(_=this.getSourceModel()),this.moved&&v){var C=this.toMove,T=(0,U.isArray)(C)?C:C?[C]:[r],k=0;T.length===1?i.push(this.move(v,T[0],m)):T.map(function(D){return{model:D,parents:e.parents(D)}}).sort(this.sort).forEach(function(D){var V=D.model,re=V.index(),_e=V.parent().getEl();i.push(e.move(v,V,ta(ta({},m),{indexEl:m.indexEl-k,index:m.index-k}))),_e===v&&re<=m.index&&k++})}this.plh&&(this.plh.style.display="none");var P=this.dragHelper;if(P&&(P.parentNode.removeChild(P),delete this.dragHelper),this.disableTextable(),this.selectTargetModel(),this.toggleSortCursor(),(t=this.em)===null||t===void 0||t.Canvas.removeSpots(Y_),delete this.toMove,delete this.eventMove,delete this.dropModel,(0,U.isFunction)(c)){var L={target:_,parent:_&&_.parent(),index:_&&_.index()};i.length?i.forEach(function(D){return c(D,e,L)}):c(null,this,ta(ta({},L),{cancelled:1}))}(0,U.isFunction)(f)&&f({sorter:this})},n.prototype.move=function(e,t,r){var i=this,s=i.em,u=i.dropContent,c=(0,Xe.getElement)(t),f=[],h=r.method==="after"?r.indexEl+1:r.indexEl,v=this.validTarget(e,c),m=(0,Hn.default)(e).data("collection"),_=v.trgModel,C=v.srcModel,T=v.draggable,k=_ instanceof gt.pM?1:v.droppable,P,L;if(m&&k&&T){var D={at:h,action:"move-component"},V=this.isTextableActive(C,_);if(u)P=(0,U.isFunction)(u)?u():u,D.avoidUpdateStyle=!0,D.action="add-component";else{var re=C.collection.indexOf(C),_e=m===C.collection,Q=re===h||re===h-1,pe=!_e||!Q||V;pe&&(P=C.collection.remove(C,{temporary:!0}),_e&&h>re&&(D.at=h-1))}P&&(V?(delete D.at,L=_.getView().insertComponent(P,D)):L=m.add(P,D)),delete this.dropContent,delete this.prevTarget}else if(s){var ne=v.dropInfo||(_==null?void 0:_.get("droppable")),me=v.dragInfo||(C==null?void 0:C.get("draggable"));!m&&f.push("Target collection not found"),!k&&ne&&f.push("Target is not droppable, accepts [".concat(ne,"]")),!T&&me&&f.push("Component not draggable, acceptable by [".concat(me,"]")),s.logWarning("Invalid target position",{errors:f,model:C,context:"sorter",target:_})}return s==null||s.trigger("sorter:drag:end",{targetCollection:m,modelToDrop:P,warns:f,validResult:v,dst:e,srcEl:c}),L},n.prototype.rollback=function(e){(0,wt.AU)(this.getDocuments(),"keydown",this.rollback);var t=e.which||e.keyCode;t==27&&(this.moved=!1,this.endMove())},n}(gt.Ss);const c2=u2;var Fs=function(){return Fs=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},Fs.apply(this,arguments)},f2=function(o,n){n===void 0&&(n={});var e=n.prefix||"",t=document.createElement("i");return t.className=e+"resizer-h "+e+"resizer-h-"+o,t.setAttribute("data-"+e+"handler",o),t},d2=function(o,n){var e=n||window,t=o.getBoundingClientRect();return{left:t.left+e.pageXOffset,top:t.top+e.pageYOffset,width:t.width,height:t.height}},p2=function(){function o(n){n===void 0&&(n={}),this.defOpts={ratioDefault:!1,onUpdateContainer:function(){},step:1,minDim:10,maxDim:1/0,unitHeight:"px",unitWidth:"px",keyHeight:"height",keyWidth:"width",currentUnit:!0,silentFrames:!1,avoidContainerUpdate:!1,keepAutoHeight:!1,keepAutoWidth:!1,autoHeight:!1,autoWidth:!1,tl:!0,tc:!0,tr:!0,cl:!0,cr:!0,bl:!0,bc:!0,br:!0},this.opts=Fs({},this.defOpts),this.setOptions(n),(0,U.bindAll)(this,"handleKeyDown","handleMouseDown","move","stop")}return o.prototype.getConfig=function(){return this.opts},o.prototype.setOptions=function(n,e){n===void 0&&(n={}),this.opts=Fs(Fs({},e?this.defOpts:this.opts),n),this.setup()},o.prototype.setup=function(){var n=this.opts,e=n.prefix||"",t=n.appendTo||document.body,r=this.container;for(r||(r=document.createElement("div"),r.className="".concat(e,"resizer-c"),t.appendChild(r),this.container=r);r.firstChild;)r.removeChild(r.firstChild);var i={};["tl","tc","tr","cl","cr","bl","bc","br"].forEach(function(c){return i[c]=n[c]?f2(c,n):null});for(var s in i){var u=i[s];u&&r.appendChild(u)}this.handlers=i,this.mousePosFetcher=n.mousePosFetcher,this.updateTarget=n.updateTarget,this.posFetcher=n.posFetcher,this.onStart=n.onStart,this.onMove=n.onMove,this.onEnd=n.onEnd,this.onUpdateContainer=n.onUpdateContainer},o.prototype.toggleFrames=function(n){if(this.opts.silentFrames){var e=document.querySelectorAll("iframe");(0,U.each)(e,function(t){return t.style.pointerEvents=n?"none":""})}},o.prototype.isHandler=function(n){var e=this.handlers;for(var t in e)if(e[t]===n)return!0;return!1},o.prototype.getFocusedEl=function(){return this.el},o.prototype.getParentEl=function(){var n;return(n=this.el)===null||n===void 0?void 0:n.parentElement},o.prototype.getDocumentEl=function(){return[this.el.ownerDocument,document]},o.prototype.getElementPos=function(n,e){e===void 0&&(e={});var t=this.posFetcher;return t?t(n,e):d2(n)},o.prototype.focus=function(n){n&&n===this.el||(this.el=n,this.updateContainer({forceShow:!0}),(0,wt.on)(this.getDocumentEl(),"pointerdown",this.handleMouseDown))},o.prototype.blur=function(){this.container.style.display="none",this.el&&((0,wt.AU)(this.getDocumentEl(),"pointerdown",this.handleMouseDown),delete this.el)},o.prototype.start=function(n){var e=n;if(e.button===0){e.preventDefault(),e.stopPropagation();var t=this.el,r=this.getParentEl(),i=this,s=this.opts||{},u=this.mousePosFetcher,c="data-"+s.prefix+"handler",f=this.getElementPos(t,{avoidFrameZoom:!0,avoidFrameOffset:!0}),h=this.getElementPos(r),v=e.target;this.handlerAttr=v.getAttribute(c),this.clickedHandler=v,this.startDim={t:f.top,l:f.left,w:f.width,h:f.height},this.rectDim={t:f.top,l:f.left,w:f.width,h:f.height},this.startPos=u?u(e):{x:e.clientX,y:e.clientY},this.parentDim={t:h.top,l:h.left,w:h.width,h:h.height};var m=this.getDocumentEl();this.docs=m,(0,wt.on)(m,"pointermove",this.move),(0,wt.on)(m,"keydown",this.handleKeyDown),(0,wt.on)(m,"pointerup",this.stop),(0,U.isFunction)(this.onStart)&&this.onStart(e,{docs:m,config:s,el:t,resizer:i}),this.toggleFrames(!0),this.move(e)}},o.prototype.move=function(n){var e=n,t=this.onMove,r=this.mousePosFetcher,i=r?r(e):{x:e.clientX,y:e.clientY};this.currentPos=i,this.delta={x:i.x-this.startPos.x,y:i.y-this.startPos.y},this.keys={shift:e.shiftKey,ctrl:e.ctrlKey,alt:e.altKey},this.rectDim=this.calc(this),this.updateRect(!1),t&&t(e)},o.prototype.stop=function(n){var e=this.el,t=this.opts,r=this.docs||this.getDocumentEl();(0,wt.AU)(r,"pointermove",this.move),(0,wt.AU)(r,"keydown",this.handleKeyDown),(0,wt.AU)(r,"pointerup",this.stop),this.updateRect(!0),this.toggleFrames(),(0,U.isFunction)(this.onEnd)&&this.onEnd(n,{docs:r,config:t,el:e,resizer:this}),delete this.docs},o.prototype.updateRect=function(n){var e=this.el,t=this,r=this.opts,i=this.rectDim,s=this.updateTarget,u=this.getSelectedHandler(),c=r.unitHeight,f=r.unitWidth,h=r.keyWidth,v=r.keyHeight;if((0,U.isFunction)(s))s(e,i,{store:n,selectedHandler:u,resizer:t,config:r});else{var m=e.style;m[h]=i.w+f,m[v]=i.h+c}this.updateContainer()},o.prototype.updateContainer=function(n){var e;n===void 0&&(n={});var t=this,r=t.opts,i=t.container,s=t.el,u=i.style;!r.avoidContainerUpdate&&s&&n.forceShow&&(u.display="block"),(e=this.onUpdateContainer)===null||e===void 0||e.call(this,{el:i,resizer:this,opts:Fs(Fs({},r),n)})},o.prototype.getSelectedHandler=function(){var n=this.handlers;if(this.selectedHandler){for(var e in n)if(n[e]===this.selectedHandler)return e}},o.prototype.handleKeyDown=function(n){n.keyCode===27&&(this.rectDim=this.startDim,this.stop(n))},o.prototype.handleMouseDown=function(n){var e=n.target;this.isHandler(e)?(this.selectedHandler=e,this.start(n)):e!==this.el&&(delete this.selectedHandler,this.blur())},o.prototype.calc=function(n){var e,t=this.opts||{},r=t.step,i=this.startDim,s=t.minDim,u=t.maxDim,c=n.delta.x,f=n.delta.y,h=this.parentDim.w,v=this.parentDim.h,m=this.opts.unitWidth,_=this.opts.unitHeight,C=m==="%"?i.w/100*h:i.w,T=_==="%"?i.h/100*v:i.h,k={t:i.t,l:i.l,w:C,h:T};if(n){var P=n.handlerAttr;~P.indexOf("r")&&(e=m==="%"?(0,Xe.normalizeFloat)((C+c*r)/h*100,.01):(0,Xe.normalizeFloat)(C+c*r,r),e=Math.max(s,e),u&&(e=Math.min(u,e)),k.w=e),~P.indexOf("b")&&(e=_==="%"?(0,Xe.normalizeFloat)((T+f*r)/v*100,.01):(0,Xe.normalizeFloat)(T+f*r,r),e=Math.max(s,e),u&&(e=Math.min(u,e)),k.h=e),~P.indexOf("l")&&(e=m==="%"?(0,Xe.normalizeFloat)((C-c*r)/h*100,.01):(0,Xe.normalizeFloat)(C-c*r,r),e=Math.max(s,e),u&&(e=Math.min(u,e)),k.w=e),~P.indexOf("t")&&(e=_==="%"?(0,Xe.normalizeFloat)((T-f*r)/v*100,.01):(0,Xe.normalizeFloat)(T-f*r,r),e=Math.max(s,e),u&&(e=Math.min(u,e)),k.h=e);var L=t.ratioDefault?!n.keys.shift:n.keys.shift;if(P.indexOf("c")<0&&L){var D=i.w/i.h;k.w/k.h>D?k.h=Math.round(k.w/D):k.w=Math.round(k.h*D)}~P.indexOf("l")&&(k.l+=i.w-k.w),~P.indexOf("t")&&(k.t+=i.h-k.h);for(var V in k){var re=V;k[re]=parseInt("".concat(k[re]),10)}return k}},o}();const h2=p2;var v2=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),em=function(){return em=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},em.apply(this,arguments)},g2=function(o){v2(n,o);function n(e){var t=o.call(this,e,"Utils")||this;return t.Sorter=c2,t.Resizer=h2,t.Dragger=pS.A,t.helpers=em({},Xe),t}return n.prototype.destroy=function(){},n}($o);const m2=g2;var zo,ri={},_o={16:!1,18:!1,17:!1,91:!1},t1="all",tl={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},n1={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},cy=function(o){return n1[o]||o.toUpperCase().charCodeAt(0)},gu=[];for(zo=1;zo<20;zo++)n1["f"+zo]=111+zo;function Pc(o,n){for(var e=o.length;e--;)if(o[e]===n)return e;return-1}function y2(o,n){if(o.length!=n.length)return!1;for(var e=0;e<o.length;e++)if(o[e]!==n[e])return!1;return!0}var w2={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function _2(o){for(zo in _o)_o[zo]=o[w2[zo]]}function b2(o){var n,e,t,r,i,s;if(n=o.keyCode,Pc(gu,n)==-1&&gu.push(n),(n==93||n==224)&&(n=91),n in _o){_o[n]=!0;for(t in tl)tl[t]==n&&(Co[t]=!0);return}if(_2(o),!!Co.filter.call(this,o)&&n in ri){for(s=fy(),r=0;r<ri[n].length;r++)if(e=ri[n][r],e.scope==s||e.scope=="all"){i=e.mods.length>0;for(t in _o)(!_o[t]&&Pc(e.mods,+t)>-1||_o[t]&&Pc(e.mods,+t)==-1)&&(i=!1);(e.mods.length==0&&!_o[16]&&!_o[18]&&!_o[17]&&!_o[91]||i)&&e.method(o,e)===!1&&(o.preventDefault?o.preventDefault():o.returnValue=!1,o.stopPropagation&&o.stopPropagation(),o.cancelBubble&&(o.cancelBubble=!0))}}}function x2(o){var n=o.keyCode,e,t=Pc(gu,n);if(t>=0&&gu.splice(t,1),(n==93||n==224)&&(n=91),n in _o){_o[n]=!1;for(e in tl)tl[e]==n&&(Co[e]=!1)}}function C2(){for(zo in _o)_o[zo]=!1;for(zo in tl)Co[zo]=!1}function Co(o,n,e){var t,r;t=r1(o),e===void 0&&(e=n,n="all");for(var i=0;i<t.length;i++)r=[],o=t[i].split("+"),o.length>1&&(r=o1(o),o=[o[o.length-1]]),o=o[0],o=cy(o),o in ri||(ri[o]=[]),ri[o].push({shortcut:t[i],scope:n,method:e,key:t[i],mods:r})}function S2(o,n){var e,t,r=[],i,s,u;for(e=r1(o),s=0;s<e.length;s++){if(t=e[s].split("+"),t.length>1&&(r=o1(t)),o=t[t.length-1],o=cy(o),n===void 0&&(n=fy()),!ri[o])return;for(i=0;i<ri[o].length;i++)u=ri[o][i],u.scope===n&&y2(u.mods,r)&&(ri[o][i]={})}}function O2(o){return typeof o=="string"&&(o=cy(o)),Pc(gu,o)!=-1}function T2(){return gu.slice(0)}function E2(o){var n=(o.target||o.srcElement).tagName;return!(n=="INPUT"||n=="SELECT"||n=="TEXTAREA")}for(zo in tl)Co[zo]=!1;function P2(o){t1=o||"all"}function fy(){return t1||"all"}function k2(o){var n,e,t;for(n in ri)for(e=ri[n],t=0;t<e.length;)e[t].scope===o?e.splice(t,1):t++}function r1(o){var n;return o=o.replace(/\s/g,""),n=o.split(","),n[n.length-1]==""&&(n[n.length-2]+=","),n}function o1(o){for(var n=o.slice(0,o.length-1),e=0;e<n.length;e++)n[e]=tl[n[e]];return n}function kv(o,n,e){o.addEventListener?o.addEventListener(n,e,!1):o.attachEvent&&o.attachEvent("on"+n,function(){e(window.event)})}Co.setScope=P2;Co.getScope=fy;Co.deleteScope=k2;Co.filter=E2;Co.isPressed=O2;Co.getPressedKeyCodes=T2;Co.unbind=S2;Co.handlers=ri;Co.init=function(o){kv(o.document,"keydown",function(n){b2(n)}),kv(o.document,"keyup",x2),kv(o,"focus",C2)};const sc=Co;var A2={defaults:{"core:undo":{keys:"⌘+z, ctrl+z",handler:"core:undo",opts:{prevent:!0}},"core:redo":{keys:"⌘+shift+z, ctrl+shift+z",handler:"core:redo",opts:{prevent:!0}},"core:copy":{keys:"⌘+c, ctrl+c",handler:"core:copy"},"core:paste":{keys:"⌘+v, ctrl+v",handler:"core:paste"},"core:component-next":{keys:"s",handler:"core:component-next"},"core:component-prev":{keys:"w",handler:"core:component-prev"},"core:component-enter":{keys:"d",handler:"core:component-enter"},"core:component-exit":{keys:"a",handler:"core:component-exit"},"core:component-delete":{keys:"backspace, delete",handler:"core:component-delete",opts:{prevent:!0}}}};const M2=A2;var D2=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),X_=function(o,n,e){if(e||arguments.length===2)for(var t=0,r=n.length,i;t<r;t++)(i||!(t in n))&&(i||(i=Array.prototype.slice.call(n,0,t)),i[t]=n[t]);return o.concat(i||Array.prototype.slice.call(n))};(0,Xe.hasWin)()&&sc.init(window);var L2=function(o){D2(n,o);function n(e){var t=o.call(this,e,"Keymaps",M2)||this;return t.keymaster=sc,t.keymaps={},t}return n.prototype.onLoad=function(){var e=this.config.defaults;for(var t in e){var r=e[t];this.add(t,r.keys,r.handler,r.opts||{})}},n.prototype.add=function(e,t,r,i){i===void 0&&(i={});var s=this.em,u=s.Commands,c=s.getEditor(),f=s.Canvas,h={id:e,keys:t,handler:r},v=this.keymaps[e];return v&&this.remove(e),this.keymaps[e]=h,sc(t,function(m,_){var C={event:m,h:_},T=(0,U.isString)(r)?u.get(r):r,k=!s.isEditing()&&!c.Canvas.isInputFocused();if(k||i.force){i.prevent&&f.getCanvasView().preventDefault(m),(0,U.isFunction)(T)?T(c,0,C):u.runCommand(T,C);var P=[e,_.shortcut,m];s.trigger.apply(s,X_(["keymap:emit"],P,!1)),s.trigger.apply(s,X_(["keymap:emit:".concat(e)],P,!1))}},void 0),s.trigger("keymap:add",h),h},n.prototype.get=function(e){return this.keymaps[e]},n.prototype.getAll=function(){return this.keymaps},n.prototype.remove=function(e){var t=this.em,r=this.get(e);if(r)return delete this.keymaps[e],r.keys.split(", ").forEach(function(i){sc.unbind(i.trim())}),t==null||t.trigger("keymap:remove",r),r},n.prototype.removeAll=function(){var e=this;return Object.keys(this.keymaps).forEach(function(t){return e.remove(t)}),sc.handlers={},this},n.prototype.destroy=function(){this.removeAll(),this.keymaps={}},n}($o);const j2=L2;var I2={stylePrefix:"mdl-",title:"",content:"",backdrop:!0,custom:!1,extend:{}};const N2=I2;var R2=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),F2=function(o){R2(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype.defaults=function(){return{title:"",content:"",attributes:{},open:!1}},n.prototype.open=function(){this.set("open",!0)},n.prototype.close=function(){this.set("open",!1)},n}(fs.A);const V2=F2;var z2=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),xp=function(){return xp=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},xp.apply(this,arguments)},H2=function(o){z2(n,o);function n(e){var t=o.call(this,e)||this,r=t.model;return t.listenTo(r,"change:open",t.updateOpen),t.listenTo(r,"change:title",t.updateTitle),t.listenTo(r,"change:content",t.updateContent),t}return n.prototype.template=function(e){var t=e.pfx,r=e.ppfx,i=e.content,s=e.title;return'<div class="'.concat(t,"dialog ").concat(r,"one-bg ").concat(r,`two-color">
      <div class="`).concat(t,`header">
        <div class="`).concat(t,'title">').concat(s,`</div>
        <div class="`).concat(t,`btn-close" data-close-modal>&Cross;</div>
      </div>
      <div class="`).concat(t,`content">
        <div id="`).concat(t,'c">').concat(i,`</div>
        <div style="clear:both"></div>
      </div>
    </div>
    <div class="`).concat(t,'collector" style="display: none"></div>')},n.prototype.events=function(){return{click:"onClick","click [data-close-modal]":"hide"}},n.prototype.onClick=function(e){var t=this.config.backdrop;t&&e.target===this.el&&this.hide()},n.prototype.getCollector=function(){return this.$collector||(this.$collector=this.$el.find("."+this.pfx+"collector")),this.$collector},n.prototype.getContent=function(){var e=this.pfx;return this.$content||(this.$content=this.$el.find(".".concat(e,"content #").concat(e,"c"))),this.$content},n.prototype.getTitle=function(e){return e===void 0&&(e={}),this.$title||(this.$title=this.$el.find("."+this.pfx+"title")),e.$?this.$title:this.$title.get(0)},n.prototype.updateContent=function(){var e=this.getContent(),t=e.children(),r=this.getCollector(),i=this.model.get("content");t.length&&r.append(t),e.empty().append(i)},n.prototype.updateTitle=function(){var e=this.getTitle({$:!0});e&&e.empty().append(this.model.get("title"))},n.prototype.updateOpen=function(){this.el.style.display=this.model.get("open")?"":"none"},n.prototype.hide=function(){this.model.close()},n.prototype.show=function(){this.model.open()},n.prototype.updateAttr=function(e){var t=this,r=t.pfx,i=t.$el,s=t.el,u=[].slice.call(s.attributes).map(function(c){return c.name});i.removeAttr(u.join(" ")),i.attr(xp(xp({},e||{}),{class:"".concat(r,"container ").concat(e&&e.class||"").trim()}))},n.prototype.render=function(){var e=this.$el,t=this.model.toJSON();return t.pfx=this.pfx,t.ppfx=this.ppfx,e.html(this.template(t)),this.updateAttr(),this.updateOpen(),this},n}(bi);const U2=H2;var B2=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),W2=function(o){B2(n,o);function n(e){var t=o.call(this,e,"Modal",N2)||this;return t.model=new V2(t),t.model.on("change:open",function(r,i){e.trigger("modal:".concat(i?"open":"close"))}),t.model.on("change",(0,U.debounce)(function(){var r=t._evData(),i=t.config.custom;(0,U.isFunction)(i)&&i(r),e.trigger("modal",r)},0)),t}return n.prototype._evData=function(){var e=this,t=this.getTitle(),r=this.getContent(),i=this.model.attributes,s=i.open,u=i.attributes;return{open:s,attributes:u,title:(0,U.isString)(t)?(0,wt.GZ)(t):t,content:(0,U.isString)(r)?(0,wt.GZ)(r):r.get?r.get(0):r,close:function(){e.close()}}},n.prototype.postRender=function(e){var t=e.model.config.el||e.el,r=this.render();r&&(t==null||t.appendChild(r))},n.prototype.open=function(e){e===void 0&&(e={});var t=e.attributes||{};return e.title&&this.setTitle(e.title),e.content&&this.setContent(e.content),this.model.set("attributes",t),this.model.open(),this.modal&&this.modal.updateAttr(t),this},n.prototype.close=function(){return this.model.close(),this},n.prototype.onceClose=function(e){return this.em.once("modal:close",e),this},n.prototype.onceOpen=function(e){return this.em.once("modal:open",e),this},n.prototype.isOpen=function(){return!!this.model.get("open")},n.prototype.setTitle=function(e){return this.model.set("title",e),this},n.prototype.getTitle=function(){return this.model.get("title")},n.prototype.setContent=function(e){return this.model.set("content"," "),this.model.set("content",e),this},n.prototype.getContent=function(){return this.model.get("content")},n.prototype.getContentEl=function(){var e;return(e=this.modal)===null||e===void 0?void 0:e.getContent().get(0)},n.prototype.getModel=function(){return this.model},n.prototype.render=function(){var e;if(!this.config.custom){var t=U2.extend(this.config.extend),r=this.modal&&this.modal.el;return this.modal=new t({el:r,model:this.model,config:this.config}),(e=this.modal)===null||e===void 0?void 0:e.render().el}},n.prototype.destroy=function(){var e;(e=this.modal)===null||e===void 0||e.remove()},n}($o);const $2=W2;var q_="sw-visibility",J_="export-template",Z_="open-sm",Q_="open-tm",eb="open-layers",tb="open-blocks",Av="fullscreen",Mv="preview",K2={stylePrefix:"pn-",defaults:[{id:"commands",buttons:[{}]},{id:"options",buttons:[{active:!0,id:q_,className:"fa fa-square-o",command:"core:component-outline",context:q_,attributes:{title:"View components"}},{id:Mv,className:"fa fa-eye",command:Mv,context:Mv,attributes:{title:"Preview"}},{id:Av,className:"fa fa-arrows-alt",command:Av,context:Av,attributes:{title:"Fullscreen"}},{id:J_,className:"fa fa-code",command:J_,attributes:{title:"View code"}}]},{id:"views",buttons:[{id:Z_,className:"fa fa-paint-brush",command:Z_,active:!0,togglable:!1,attributes:{title:"Open Style Manager"}},{id:Q_,className:"fa fa-cog",command:Q_,togglable:!1,attributes:{title:"Settings"}},{id:eb,className:"fa fa-bars",command:eb,togglable:!1,attributes:{title:"Open Layer Manager"}},{id:tb,className:"fa fa-th-large",command:tb,togglable:!1,attributes:{title:"Open Blocks"}}]}]};const Dv=K2;var G2=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Y2=function(o){G2(n,o);function n(e,t){var r=o.call(this,e,t)||this;return r.get("buttons").length&&r.set("buttons",new s1(r.module,r.get("buttons"))),r}return n.prototype.defaults=function(){return{id:"",label:"",tagName:"span",className:"",command:"",context:"",buttons:[],attributes:{},options:{},active:!1,dragDrop:!1,togglable:!0,runDefaultCommand:!0,stopDefaultCommand:!1,disable:!1}},Object.defineProperty(n.prototype,"className",{get:function(){return this.get("className")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"command",{get:function(){return this.get("command")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"active",{get:function(){return this.get("active")},set:function(e){this.set("active",e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"togglable",{get:function(){return this.get("togglable")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"runDefaultCommand",{get:function(){return this.get("runDefaultCommand")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"stopDefaultCommand",{get:function(){return this.get("stopDefaultCommand")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"disable",{get:function(){return this.get("disable")},enumerable:!1,configurable:!0}),n}(fs.A);const i1=Y2;var X2=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),a1=function(o){X2(n,o);function n(e,t){return o.call(this,e,t,i1)||this}return n.prototype.deactivateAllExceptOne=function(e,t){this.forEach(function(r,i){r!==e&&(r.set("active",!1),t&&r.get("buttons").length&&r.get("buttons").deactivateAllExceptOne(e,t))})},n.prototype.deactivateAll=function(e,t){var r=e||"";this.forEach(function(i){i.get("context")==r&&i!==t&&i.set("active",!1,{fromCollection:!0})})},n.prototype.disableAllButtons=function(e){var t=e||"";this.forEach(function(r,i){r.get("context")==t&&r.set("disable",!0)})},n.prototype.disableAllButtonsExceptOne=function(e,t){this.forEach(function(r,i){r!==e&&(r.set("disable",!0),t&&r.get("buttons").length&&r.get("buttons").disableAllButtonsExceptOne(e,t))})},n}(ah);const s1=a1;a1.prototype.model=i1;var q2=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),J2=function(o){q2(n,o);function n(e,t){var r=o.call(this,e,t)||this,i=r.get("buttons")||[];return r.buttons=new s1(e,i),r}return n.prototype.defaults=function(){return{id:"",content:"",visible:!0,buttons:[],attributes:{}}},Object.defineProperty(n.prototype,"buttons",{get:function(){return this.get("buttons")},set:function(e){this.set("buttons",e)},enumerable:!1,configurable:!0}),n}(fs.A);const l1=J2;var Z2=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),u1=function(o){Z2(n,o);function n(e,t){return o.call(this,e,t,l1)||this}return n}(ah);const Q2=u1;u1.prototype.model=l1;var eN=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Xl=function(){return Xl=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},Xl.apply(this,arguments)},tN=function(o){eN(n,o);function n(e){var t=o.call(this,e)||this,r=t,i=r.model,s=r.em,u=r.pfx,c=r.ppfx,f=i.className,h=i.attributes,v=h.command,m=h.listen;if(t.id=u+i.get("id"),t.activeCls="".concat(u,"active ").concat(c,"four-color"),t.disableCls="".concat(c,"disabled"),t.btnsVisCls="".concat(u,"visible"),t.className=u+"btn"+(f?" "+f:""),t.listenTo(i,"change",t.render),t.listenTo(i,"change:active updateActive",t.updateActive),t.listenTo(i,"checkActive",t.checkActive),t.listenTo(i,"change:bntsVis",t.updateBtnsVis),t.listenTo(i,"change:attributes",t.updateAttributes),t.listenTo(i,"change:className",t.updateClassName),t.listenTo(i,"change:disable",t.updateDisable),s&&(0,U.isString)(v)&&m){var _={fromListen:!0};t.listenTo(s,"run:".concat(v),function(){return i.set("active",!0,_)}),t.listenTo(s,"stop:".concat(v),function(){return i.set("active",!1,_)})}return s&&s.get&&(t.commands=s.get("Commands")),t}return n.prototype.tagName=function(){return this.model.get("tagName")},n.prototype.events=function(){return{click:"clicked"}},n.prototype.updateClassName=function(){var e=this,t=e.model,r=e.pfx,i=t.className,s=t.get("attributes").class,u="".concat(s||""," ").concat(r,"btn ").concat(i||"");this.$el.attr("class",u.trim())},n.prototype.updateAttributes=function(){var e=this,t=e.em,r=e.model,i=e.$el,s=r.get("attributes")||{},u=t&&t.t&&t.t("panels.buttons.titles.".concat(r.id));i.attr(s),u&&i.attr({title:u}),this.updateClassName()},n.prototype.updateBtnsVis=function(){this.$buttons&&(this.model.get("bntsVis")?this.$buttons.addClass(this.btnsVisCls):this.$buttons.removeClass(this.btnsVisCls))},n.prototype.updateActive=function(e,t,r){var i;r===void 0&&(r={});var s=this,u=s.model,c=s.commands,f=s.$el,h=s.activeCls,v=r.fromCollection,m=r.fromListen,_=u.get("context"),C=u.get("options"),T=u.command,k={};T&&(c&&(0,U.isString)(T)?k=c.get(T)||{}:(0,U.isFunction)(T)?k=c.create({run:T}):T!==null&&(0,U.isObject)(T)&&(k=c.create(T)),u.active?(!v&&((i=u.collection)===null||i===void 0||i.deactivateAll(_,u)),u.set("active",!0,{silent:!0}).trigger("checkActive"),!m&&c.runCommand(k,Xl(Xl({},C),{sender:u})),k.noStop&&u.set("active",!1)):(f.removeClass(h),!m&&c.stopCommand(k,Xl(Xl({},C),{sender:u,force:1}))))},n.prototype.updateDisable=function(){var e=this,t=e.disableCls,r=e.model,i=r.disable;this.$el[i?"addClass":"removeClass"](t)},n.prototype.checkActive=function(){var e=this,t=e.model,r=e.$el,i=e.activeCls;t.active?r.addClass(i):r.removeClass(i)},n.prototype.clicked=function(){var e=this.model;e.get("bntsVis")||e.disable||!e.command||this.toggleActive()},n.prototype.toggleActive=function(){var e=this,t=e.model,r=e.em,i=t.active,s=t.togglable;i&&!s||(t.active=!i,i?t.runDefaultCommand&&r.runDefault():t.stopDefaultCommand&&r.stopDefault())},n.prototype.render=function(){var e=this.model,t=e.get("label"),r=this.$el;return!e.get("el")&&r.empty(),this.updateAttributes(),t&&r.append(t),this.checkActive(),this.updateDisable(),this},n}(bi);const nN=tN;var rN=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),oN=function(o){rN(n,o);function n(e){var t=o.call(this,{collection:e})||this;return t.listenTo(t.collection,"add",t.addTo),t.listenTo(t.collection,"reset remove",t.render),t.className=t.pfx+"buttons",t}return n.prototype.addTo=function(e){this.addToCollection(e)},n.prototype.addToCollection=function(e,t){var r=t||null,i=e.get("el"),s=new nN({el:i,model:e}),u=s.render().el;return r?r.appendChild(u):this.$el.append(u),u},n.prototype.render=function(){var e=this,t=document.createDocumentFragment();return this.$el.empty(),this.collection.each(function(r){return e.addToCollection(r,t)}),this.$el.append(t),this.$el.attr("class",(0,U.result)(this,"className")),this},n}(bi);const iN=oN;var aN=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),tm=function(){return tm=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},tm.apply(this,arguments)},sN=function(o){aN(n,o);function n(e){var t=o.call(this,{model:e,el:e.get("el")})||this;return t.className=t.pfx+"panel",t.id=t.pfx+e.get("id"),t.listenTo(e,"change:appendContent",t.appendContent),t.listenTo(e,"change:content",t.updateContent),t.listenTo(e,"change:visible",t.toggleVisible),e.view=t,t}return n.prototype.appendContent=function(){this.$el.append(this.model.get("appendContent"))},n.prototype.updateContent=function(){this.$el.html(this.model.get("content"))},n.prototype.toggleVisible=function(){if(!this.model.get("visible")){this.$el.addClass("".concat(this.ppfx,"hidden"));return}this.$el.removeClass("".concat(this.ppfx,"hidden"))},n.prototype.attributes=function(){return this.model.get("attributes")},n.prototype.initResize=function(){var e=this.em,t=e==null?void 0:e.Editor,r=this.model.get("resizable");if(t&&r){var i=r===!0?[!0,!0,!0,!0]:r,s=i.length,u=void 0,c=void 0,f=void 0,h=!1;if(s==2){var v=i;u=v[0],f=v[0],c=v[1],h=v[1]}else if(s==4){var v=i;u=v[0],c=v[1],f=v[2],h=v[3]}var m=new t.Utils.Resizer(tm({tc:u,cr:c,bc:f,cl:h,tl:!1,tr:!1,bl:!1,br:!1,appendTo:this.el,silentFrames:!0,avoidContainerUpdate:!0,prefix:t.getConfig().stylePrefix,onEnd:function(){e.Canvas.refresh({all:!0})},posFetcher:function(_,C){var T=C.target,k=_.style,P=m.getConfig(),L=P.keyWidth,D=P.keyHeight,V=_.getBoundingClientRect(),re=T=="container",_e=k[L],Q=k[D],pe=_e&&!re?parseFloat(_e):V.width,ne=Q&&!re?parseFloat(Q):V.height;return{left:0,top:0,width:pe,height:ne}}},r&&typeof r!="boolean"?r:{}));m.blur=function(){},m.focus(this.el)}},n.prototype.render=function(){var e=this.model.buttons,t=this.$el,r=this.ppfx,i="".concat(this.className," ").concat(this.id," ").concat(r,"one-bg ").concat(r,"two-color");if(t.addClass(i),this.toggleVisible(),e.length){var s=new iN(e);t.append(s.render().el)}return t.append(this.model.get("content")),this},n}(bi);const lN=sN;var uN=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),cN=function(o){uN(n,o);function n(e){var t=o.call(this,{collection:e})||this;return t.listenTo(e,"add",t.addTo),t.listenTo(e,"reset",t.render),t.listenTo(e,"remove",t.onRemove),t.className=t.pfx+"panels",t}return n.prototype.onRemove=function(e){var t=e.view;t&&t.remove()},n.prototype.addTo=function(e){this.addToCollection(e)},n.prototype.addToCollection=function(e,t){var r=t||null,i=e.get("el"),s=new lN(e),u=s.render().el,c=e.get("appendTo");if(!i)if(c){var f=document.querySelector(c);f==null||f.appendChild(u)}else r?r.appendChild(u):this.$el.append(u);return s.initResize(),u},n.prototype.render=function(){var e=this,t=this.$el,r=document.createDocumentFragment();return t.empty(),this.collection.each(function(i){return e.addToCollection(i,r)}),t.append(r),t.attr("class",this.className),this},n}(bi);const fN=cN;var dN=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),pN=function(o){dN(n,o);function n(e){var t=o.call(this,e,"Panels",Dv)||this;t.panels=new Q2(t,t.config.defaults);for(var r in Dv)r in t.config||(t.config[r]=Dv[r]);return t}return n.prototype.getPanels=function(){return this.panels},n.prototype.getPanelsEl=function(){var e;return(e=this.PanelsViewObj)===null||e===void 0?void 0:e.el},n.prototype.addPanel=function(e){return this.panels.add(e)},n.prototype.removePanel=function(e){return this.panels.remove(e)},n.prototype.getPanel=function(e){var t=this.panels.where({id:e});return t.length?t[0]:null},n.prototype.addButton=function(e,t){var r=this.getPanel(e);return r?r.buttons.add(t):null},n.prototype.removeButton=function(e,t){var r=this.getPanel(e);return r&&r.buttons.remove(t)},n.prototype.getButton=function(e,t){var r=this.getPanel(e);if(r){var i=r.buttons.where({id:t});return i.length?i[0]:null}return null},n.prototype.render=function(){var e;return(e=this.PanelsViewObj)===null||e===void 0||e.remove(),this.PanelsViewObj=new fN(this.panels),this.PanelsViewObj.render().el},n.prototype.active=function(){this.getPanels().each(function(e){e.buttons.each(function(t){t.get("active")&&t.trigger("updateActive")})})},n.prototype.disableButtons=function(){this.getPanels().each(function(e){e.buttons.each(function(t){t.get("disable")&&t.trigger("change:disable")})})},n.prototype.destroy=function(){this.panels.reset(),this.panels.stopListening(),this.PanelsViewObj&&this.PanelsViewObj.remove()},n}($o);const hN=pN;var vN={stylePrefix:"cm-",optsCodeViewer:{}};const gN=vN;var mN=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),yN=function(o,n){var e={};for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&n.indexOf(t)<0&&(e[t]=o[t]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(o);r<t.length;r++)n.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(o,t[r])&&(e[t[r]]=o[t[r]]);return e},wN=function(o){mN(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype.build=function(e,t){t===void 0&&(t={});var r=t.em,i=yN(t,["em"]),s=i;if(t.cleanId&&r){var u=r.Css.getAll(),c=u.toJSON().map(function(f){var h=f.selectors,v=h&&h.length===1&&h.models[0];return v&&v.isId()&&v.get("name")}).filter(Boolean);s.attributes||(s.attributes=function(f,h){var v=h.id;return v&&v[0]==="i"&&!f.get("script")&&!f.get("attributes").id&&c.indexOf(v)<0&&delete h.id,h})}return e.toHTML(s)},n}(gt.Kx);const _N=wN;var bN=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),xN=function(o){bN(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype.build=function(e){var t=this,r=e.toJSON();return this.beforeEach(r),(0,U.each)(r,function(i,s){var u=r[s];if(u instanceof gt.Kx)r[s]=t.build(u);else if(u instanceof gt.pM){var c=u;r[s]=[],c.length&&c.forEach(function(f,h){r[s][h]=t.build(f)})}}),r},n.prototype.beforeEach=function(e){delete e.status},n}(gt.Kx);const CN=xN;var SN=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}();function ON(o){var n,e=((n=o.toString().match(/\{([\s\S]*)\}/m))===null||n===void 0?void 0:n[1])||"";return e.replace(/^\s*\/\/.*$/gm,"").trim().length===0}var TN=function(o){SN(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype.mapModel=function(e){var t,r=this,i="",s=e.get("script-export")||e.get("script"),u=e.get("type"),c=e.get("components"),f=e.getId();if(s){var h=e.get("attributes");h=(0,U.extend)({},h,{id:f}),e.set("attributes",h,{silent:!0});var v=e.getScriptString(s),m=e.get("script-props");if(e.get("scriptUpdated")&&!m)this.mapJs[u+"-"+f]={ids:[f],code:v};else{var _=void 0,C=this.mapJs[u];if(m&&(_=e.__getScriptProps()),C)C.ids.push(f),_&&(C.props[f]=_);else{var T={ids:[f],code:v};_&&(T.props=(t={},t[f]=_,t)),this.mapJs[u]=T}}}return c.forEach(function(k){i+=r.mapModel(k)}),i},n.prototype.build=function(e){this.mapJs={},this.mapModel(e);var t="";for(var r in this.mapJs){var i=this.mapJs[r];if(i.code)if(i.props){if(ON(i.code))continue;t+=`
          var props = `.concat(JSON.stringify(i.props),`;
          var ids = Object.keys(props).map(function(id) { return '#'+id }).join(',');
          var els = document.querySelectorAll(ids);
          for (var i = 0, len = els.length; i < len; i++) {
            var el = els[i];
            (`).concat(i.code,`.bind(el))(props[el.id]);
          }`)}else{var s="#"+i.ids.join(", #");t+=`
          var items = document.querySelectorAll('`.concat(s,`');
          for (var i = 0, len = items.length; i < len; i++) {
            (function(){
`).concat(i.code,`
}.bind(items[i]))();
          }`)}}return t},n}(gt.Kx);const EN=TN;var PN=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),nm=function(){return nm=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},nm.apply(this,arguments)},kc;(0,Xe.hasWin)()&&(kc=vn(237),vn(520),vn(656),vn(862));var c1=function(o){PN(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype.defaults=function(){return{input:"",label:"",codeName:"",theme:"hopscotch",readOnly:!0,lineNumbers:!0,autoFormat:!0}},n.prototype.init=function(e){return(0,U.bindAll)(this,"onChange"),this.editor=kc.fromTextArea(e,nm({dragDrop:!1,lineWrapping:!0,mode:this.get("codeName")},this.attributes)),this.element=e,this.editor.on("change",this.onChange),this},n.prototype.onChange=function(){this.trigger("update",this)},n.prototype.getEditor=function(){return this.editor},n.prototype.getElement=function(){return this.element},n.prototype.setElement=function(e){return this.element=e,this},n.prototype.refresh=function(){return this.getEditor().refresh(),this},n.prototype.focus=function(){return this.getEditor().focus(),this},n.prototype.getContent=function(){var e=this.getEditor();return e&&e.getValue()},n.prototype.setContent=function(e,t){var r=this;t===void 0&&(t={});var i=this.editor;if(i){i.setValue(e);var s=this.get("autoFormat"),u=i.autoFormatRange&&(s===!0||Array.isArray(s)&&s.includes(this.get("codeName")));u&&(kc.commands.selectAll(i),i.autoFormatRange(i.getCursor(!0),i.getCursor(!1)),kc.commands.goDocStart(i)),!t.noRefresh&&setTimeout(function(){return r.refresh()})}},n}(gt.Kx);const kN=c1;c1.prototype.CodeMirror=kc;var AN=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),MN=function(o,n){return Object.defineProperty?Object.defineProperty(o,"raw",{value:n}):o.raw=n,o},DN=function(o){AN(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype.template=function(e){var t=e.pfx,r=e.codeName,i=e.label;return Vo(nb||(nb=MN([`
      <div class="`,'editor" id="',"",`">
        <div id="`,'title">',`</div>
        <div id="`,`code"></div>
      </div>
    `],[`
      <div class="`,'editor" id="',"",`">
        <div id="`,'title">',`</div>
        <div id="`,`code"></div>
      </div>
    `])),t,t,r,t,i,t)},n.prototype.initialize=function(e){this.config=e.config||{},this.pfx=this.config.stylePrefix},n.prototype.render=function(){var e,t,r=this,i=r.model,s=r.pfx,u=r.$el,c=i.toJSON(),f=i.get("input")||((t=(e=i).getElement)===null||t===void 0?void 0:t.call(e));return c.pfx=s,u.html(this.template(c)),u.attr("class","".concat(s,"editor-c")),u.find("#".concat(s,"code")).append(f),this},n}(gt.Ss);const LN=DN;var nb,jN=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Cp=function(){return Cp=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},Cp.apply(this,arguments)},IN="CodeMirror",NN=function(o){jN(n,o);function n(e){var t=o.call(this,e,"CodeManager",gN)||this;t.EditorView=LN;var r=t.config,i=r.pStylePrefix;return i&&(r.stylePrefix=i+r.stylePrefix),t.generators={},t.viewers={},t.defGenerators={html:new _N,css:new cL,json:new CN,js:new EN},t.defViewers={CodeMirror:new kN},t.loadDefaultGenerators().loadDefaultViewers(),t}return n.prototype.addGenerator=function(e,t){return this.generators[e]=t,this},n.prototype.getGenerator=function(e){return this.generators[e]},n.prototype.getGenerators=function(){return this.generators},n.prototype.addViewer=function(e,t){return this.viewers[e]=t,this},n.prototype.getViewer=function(e){return this.viewers[e]},n.prototype.getViewers=function(){return this.viewers},n.prototype.createViewer=function(e){e===void 0&&(e={});var t=(0,U.isUndefined)(e.type)?IN:e.type,r=this.getViewer(t)&&this.getViewer(t).clone(),i=document.createElement("div"),s=document.createElement("textarea");return i.appendChild(s),r.set(Cp(Cp({},this.config.optsCodeViewer),e)),r.init(s),r.setElement(i),r},n.prototype.updateViewer=function(e,t){e.setContent(t)},n.prototype.getCode=function(e,t,r){r===void 0&&(r={}),r.em=this.em;var i=this.getGenerator(t);return i?i.build(e,r):""},n.prototype.loadDefaultGenerators=function(){for(var e in this.defGenerators)this.addGenerator(e,this.defGenerators[e]);return this},n.prototype.loadDefaultViewers=function(){for(var e in this.defViewers)this.addViewer(e,this.defViewers[e]);return this},n.prototype.destroy=function(){},n}($o);const RN=NN;var FN=vn(982),VN=vn.n(FN),zN={maximumStackLength:500,trackSelection:!0};const HN=zN;var UN=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),pa=function(){return pa=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},pa.apply(this,arguments)},BN=function(o,n,e){if(e||arguments.length===2)for(var t=0,r=n.length,i;t<r;t++)(i||!(t in n))&&(i||(i=Array.prototype.slice.call(n,0,t)),i[t]=n[t]);return o.concat(i||Array.prototype.slice.call(n))},Zf=function(o){return o.avoidStore||o.noUndo},rb=function(o){return Object.keys(o.changedAttributes())},WN=function(o){UN(n,o);function n(e){var t=o.call(this,e,"UndoManager",HN)||this;t.config._disable&&(t.config.maximumStackLength=0);var r=!0;return t.um=new(VN())(pa({track:!0,register:[]},t.config)),t.um.changeUndoType("change",{condition:function(i){var s=i.get("_undo");if(s){var u=i.get("_undoexc");if((0,U.isArray)(u)&&rb(i).some(function(c){return u.indexOf(c)>=0}))return!1;if((0,U.isBoolean)(s)||(0,U.isArray)(s)&&rb(i).some(function(c){return s.indexOf(c)>=0}))return!0}return!1},on:function(i,s,u){var c=this;!this.beforeCache&&(this.beforeCache=i.previousAttributes());var f=u||s||{};if(f.noUndo&&setTimeout(function(){c.beforeCache=null}),!Zf(f)){var h=i.toJSON({fromUndo:r}),v={object:i,before:this.beforeCache,after:h};return this.beforeCache=null,(0,U.isEmpty)(h)?void 0:v}}}),t.um.changeUndoType("add",{on:function(i,s,u){if(u===void 0&&(u={}),!(Zf(u)||!t.isRegistered(s)))return{object:s,before:void 0,after:i,options:pa(pa({},u),{fromUndo:r})}}}),t.um.changeUndoType("remove",{on:function(i,s,u){if(u===void 0&&(u={}),!(Zf(u)||!t.isRegistered(s)))return{object:s,before:i,after:void 0,options:pa(pa({},u),{fromUndo:r})}}}),t.um.changeUndoType("reset",{undo:function(i,s){i.reset(s,{fromUndo:r})},redo:function(i,s,u){i.reset(u,{fromUndo:r})},on:function(i,s){if(s===void 0&&(s={}),!(Zf(s)||!t.isRegistered(i)))return{object:i,before:s.previousModels,after:BN([],i.models,!0),options:pa(pa({},s),{fromUndo:r})}}}),t.um.on("undo redo",function(){e.getSelectedAll().map(function(i){return i.trigger("rerender:layer")})}),["undo","redo"].forEach(function(i){return t.um.on(i,function(){return e.trigger(i)})}),t}return n.prototype.postLoad=function(){var e=this,t=e.config,r=e.em;t.trackSelection&&r&&this.add(r.get("selected"))},n.prototype.add=function(e){return this.um.register(e),this},n.prototype.remove=function(e){return this.um.unregister(e),this},n.prototype.removeAll=function(){return this.um.unregisterAll(),this},n.prototype.start=function(){return this.um.startTracking(),this},n.prototype.stop=function(){return this.um.stopTracking(),this},n.prototype.undo=function(e){e===void 0&&(e=!0);var t=this,r=t.em,i=t.um;return!r.isEditing()&&i.undo(e),this},n.prototype.undoAll=function(){return this.um.undoAll(),this},n.prototype.redo=function(e){e===void 0&&(e=!0);var t=this,r=t.em,i=t.um;return!r.isEditing()&&i.redo(e),this},n.prototype.redoAll=function(){return this.um.redoAll(),this},n.prototype.hasUndo=function(){return!!this.um.isAvailable("undo")},n.prototype.hasRedo=function(){return!!this.um.isAvailable("redo")},n.prototype.isRegistered=function(e){return!!this.getInstance().objectRegistry.isRegistered(e)},n.prototype.getStack=function(){return this.um.stack},n.prototype.getStackGroup=function(){var e=[],t=[];return this.getStack().forEach(function(r){var i=r.get("magicFusionIndex");t.indexOf(i)<0&&(t.push(i),e.push(r))}),e},n.prototype.skip=function(e){var t=!!this.um.isTracking();t&&this.stop(),e(),t&&this.start()},n.prototype.getGroupedStack=function(){var e={},t=this.getStack(),r=function(i,s){var u=i.attributes,c=u.type,f=u.after,h=u.before,v=u.object,m=u.options,_=m===void 0?{}:m;return{index:s,type:c,after:f,before:h,object:v,options:_}};return t.forEach(function(i,s){var u=i.get("magicFusionIndex"),c=r(i,s);e[u]?e[u].push(c):e[u]=[c]}),Object.keys(e).map(function(i){var s=e[i];return{index:s[s.length-1].index,actions:s,labels:(0,U.unique)(s.reduce(function(u,c){var f,h=(f=c.options)===null||f===void 0?void 0:f.action;return h&&u.push(h),u},[]))}})},n.prototype.goToGroup=function(e){var t=this;if(e){var r=this.getPointer(),i=e.index-r;(0,U.times)(Math.abs(i),function(){t[i<0?"undo":"redo"](!1)})}},n.prototype.getPointer=function(){return this.getStack().pointer},n.prototype.clear=function(){return this.um.clear(),this},n.prototype.getInstance=function(){return this.um},n.prototype.destroy=function(){this.clear().removeAll()},n}($o);const $N=WN;var KN={stylePrefix:"rte-",adjustToolbar:!0,actions:["bold","italic","underline","strikethrough","link","wrap"],custom:!1};const GN=KN;var ql=function(){return ql=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},ql.apply(this,arguments)},Sp;(function(o){o[o.ACTIVE=1]="ACTIVE",o[o.INACTIVE=0]="INACTIVE",o[o.DISABLED=-1]="DISABLED"})(Sp||(Sp={}));var Lv="_rte",Ws={ACTIVE:1,INACTIVE:0,DISABLED:-1},Qf=function(o,n){n===void 0&&(n="A");var e=o.selection()||{},t=e.anchorNode,r=e.focusNode,i=t==null?void 0:t.parentNode,s=r==null?void 0:r.parentNode;return(i==null?void 0:i.nodeName)==n||(s==null?void 0:s.nodeName)==n},Op="data-selectme",ec={bold:{name:"bold",icon:"<b>B</b>",attributes:{title:"Bold"},result:function(o){return o.exec("bold")}},italic:{name:"italic",icon:"<i>I</i>",attributes:{title:"Italic"},result:function(o){return o.exec("italic")}},underline:{name:"underline",icon:"<u>U</u>",attributes:{title:"Underline"},result:function(o){return o.exec("underline")}},strikethrough:{name:"strikethrough",icon:"<s>S</s>",attributes:{title:"Strike-through"},result:function(o){return o.exec("strikeThrough")}},link:{icon:`<svg viewBox="0 0 24 24">
          <path fill="currentColor" d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z" />
        </svg>`,name:"link",attributes:{style:"font-size:1.4rem;padding:0 4px 2px;",title:"Link"},state:function(o){return o&&o.selection()&&Qf(o)?Ws.ACTIVE:Ws.INACTIVE},result:function(o){Qf(o)?o.exec("unlink"):o.insertHTML('<a href="" '.concat(Op,">").concat(o.selection(),"</a>"),{select:!0})}},wrap:{name:"wrap",icon:`<svg viewBox="0 0 24 24">
            <path fill="currentColor" d="M20.71,4.63L19.37,3.29C19,2.9 18.35,2.9 17.96,3.29L9,12.25L11.75,15L20.71,6.04C21.1,5.65 21.1,5 20.71,4.63M7,14A3,3 0 0,0 4,17C4,18.31 2.84,19 2,19C2.92,20.22 4.5,21 6,21A4,4 0 0,0 10,17A3,3 0 0,0 7,14Z" />
        </svg>`,attributes:{title:"Wrap for style"},state:function(o){return o!=null&&o.selection()&&Qf(o,"SPAN")?Ws.DISABLED:Ws.INACTIVE},result:function(o){!Qf(o,"SPAN")&&o.insertHTML("<span ".concat(Op,">").concat(o.selection(),"</span>"),{select:!0})}}},YN=function(){function o(n,e,t){t===void 0&&(t={});var r=this;if(this.em=n,this.settings=t,e[Lv])return e[Lv];e[Lv]=this,this.setEl(e),this.updateActiveActions=this.updateActiveActions.bind(this),this.__onKeydown=this.__onKeydown.bind(this),this.__onPaste=this.__onPaste.bind(this);var i=(t.actions||[]).map(function(h){var v=h;return(0,U.isString)(h)?v=ql({},ec[h]):ec[h.name]&&(v=ql(ql({},ec[h.name]),h)),v}),s=i.length?i:Object.keys(ec).map(function(h){return ec[h]});t.classes=ql({actionbar:"actionbar",button:"action",active:"active",disabled:"disabled",inactive:"inactive"},t.classes);var u=t.classes,c=t.actionbar;if(this.actionbar=c,this.classes=u,this.actions=s,!c){if(!this.isCustom(t.module)){var f=t.actionbarContainer;c=document.createElement("div"),c.className=u.actionbar,f==null||f.appendChild(c),this.actionbar=c}s.forEach(function(h){return r.addAction(h)})}return t.styleWithCSS&&this.exec("styleWithCSS"),this}return o.prototype.isCustom=function(n){var e=n||this.em.RichTextEditor;return!!(e!=null&&e.config.custom||e!=null&&e.customRte)},o.prototype.destroy=function(){},o.prototype.setEl=function(n){this.el=n,this.doc=n.ownerDocument},o.prototype.updateActiveActions=function(){var n=this,e=this.getActions();e.forEach(function(t){var r=t.update,i=t.btn,s=n.classes,u=s.active,c=s.inactive,f=s.disabled,h=t.state,v=t.name,m=n.doc,_=Sp.INACTIVE;if(i&&(i.className=i.className.replace(u,"").trim(),i.className=i.className.replace(c,"").trim(),i.className=i.className.replace(f,"").trim()),h){var C=h(n,m);if(_=C,i)switch(C){case Ws.ACTIVE:i.className+=" ".concat(u);break;case Ws.INACTIVE:i.className+=" ".concat(c);break;case Ws.DISABLED:i.className+=" ".concat(f);break}}else m.queryCommandSupported(v)&&m.queryCommandState(v)&&(i&&(i.className+=" ".concat(u)),_=Sp.ACTIVE);t.currentState=_,r==null||r(n,t)}),e.length&&this.em.RichTextEditor.__dbdTrgCustom()},o.prototype.enable=function(n){return this.enabled?this:this.__toggleEffects(!0,n)},o.prototype.disable=function(){return this.__toggleEffects(!1)},o.prototype.__toggleEffects=function(n,e){n===void 0&&(n=!1),e===void 0&&(e={});var t=n?wt.on:wt.AU,r=this,i=r.el,s=r.doc,u=this.actionbarEl();if(u&&(u.style.display=n?"":"none"),i.contentEditable="".concat(!!n),t(i,"mouseup keyup",this.updateActiveActions),t(s,"keydown",this.__onKeydown),t(s,"paste",this.__onPaste),this.enabled=n,n){var c=e.event;if(this.syncActions(),this.updateActiveActions(),c){var f=null;if(s.caretRangeFromPoint){var h=(0,wt.G2)(c);f=s.caretRangeFromPoint(h.clientX,h.clientY)}else c.rangeParent&&(f=s.createRange(),f.setStart(c.rangeParent,c.rangeOffset));var v=s.getSelection();v==null||v.removeAllRanges(),f&&(v==null||v.addRange(f))}i.focus()}return this},o.prototype.__onKeydown=function(n){var e=this.em,t=e.RichTextEditor.getConfig().onKeydown;if(t)return t({ev:n,rte:this,editor:e.getEditor()});var r=this.doc,i=["insertOrderedList","insertUnorderedList"];n.key==="Enter"&&!i.some(function(s){return r.queryCommandState(s)})&&(r.execCommand("insertLineBreak"),n.preventDefault())},o.prototype.__onPaste=function(n){var e=this.em,t=e.RichTextEditor.getConfig().onPaste;if(t)return t({ev:n,rte:this,editor:e.getEditor()});var r=n.clipboardData,i=r.getData("text"),s=r.getData("text/html");if(i&&!s){n.preventDefault();var u=i.replace(/(?:\r\n|\r|\n)/g,"<br/>");this.doc.execCommand("insertHTML",!1,u)}},o.prototype.syncActions=function(){var n=this;this.getActions().forEach(function(e){if(n.actionbar&&(!e.state||e.state&&e.state(n,n.doc)>=0)){var t=e.event||"click",r=e.btn;r&&(r["on".concat(t)]=function(){e.result(n,e),n.updateActiveActions()})}})},o.prototype.addAction=function(n,e){e===void 0&&(e={});var t=e.sync,r=this.actionbarEl();if(r){var i=n.icon,s=n.attributes,u=s===void 0?{}:s,c=document.createElement("span");c.className=this.classes.button,n.btn=c;for(var f in u)c.setAttribute(f,u[f]);typeof i=="string"?c.innerHTML=i:c.appendChild(i),r.appendChild(c)}t&&(this.actions.push(n),this.syncActions())},o.prototype.getActions=function(){return this.actions},o.prototype.selection=function(){return this.doc.getSelection()},o.prototype.exec=function(n,e){this.doc.execCommand(n,!1,e)},o.prototype.actionbarEl=function(){return this.actionbar},o.prototype.insertHTML=function(n,e){var t=e===void 0?{}:e,r=t.select,i=this,s=i.em,u=i.doc,c=i.el,f=u.getSelection();if(f&&f.rangeCount){var h=(0,Xe.getComponentModel)(c)||s.getSelected(),v=u.createElement("div"),m=f.getRangeAt(0);m.deleteContents(),(0,U.isString)(n)?v.innerHTML=n:n&&v.appendChild(n),Array.prototype.slice.call(v.childNodes).forEach(function(_){m.insertNode(_)}),f.removeAllRanges(),f.addRange(m),c.focus(),r&&h&&(h.once("rte:disable",function(){var _=h.find("[".concat(Op,"]"))[0];_&&(s.setSelected(_),_.removeAttributes(Op))}),h.trigger("disable"))}},o}();const XN=YN;var qN=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),ob=function(o,n,e,t){function r(i){return i instanceof e?i:new e(function(s){s(i)})}return new(e||(e=Promise))(function(i,s){function u(h){try{f(t.next(h))}catch(v){s(v)}}function c(h){try{f(t.throw(h))}catch(v){s(v)}}function f(h){h.done?i(h.value):r(h.value).then(u,c)}f((t=t.apply(o,n||[])).next())})},ib=function(o,n){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},t,r,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(f){return function(h){return c([f,h])}}function c(f){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,f[0]&&(e=0)),e;)try{if(t=1,r&&(i=f[0]&2?r.return:f[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,f[1])).done)return i;switch(r=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return e.label++,{value:f[1],done:!1};case 5:e.label++,r=f[1],f=[0];continue;case 7:f=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){e=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){e.label=f[1];break}if(f[0]===6&&e.label<i[1]){e.label=i[1],i=f;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(f);break}i[2]&&e.ops.pop(),e.trys.pop();continue}f=n.call(o,e)}catch(h){f=[6,h],r=0}finally{t=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},JN=function(o,n,e){if(e||arguments.length===2)for(var t=0,r=n.length,i;t<r;t++)(i||!(t in n))&&(i||(i=Array.prototype.slice.call(n,0,t)),i[t]=n[t]);return o.concat(i||Array.prototype.slice.call(n))},jv="".concat(dd.refresh," frame:scroll ").concat(no.I.update),ZN="rte:enable",QN="rte:disable",eR="rte:custom",tR={enable:ZN,disable:QN,custom:eR},nR=function(o){qN(n,o);function n(e){var t=o.call(this,e,"RichTextEditor",GN)||this;t.events=tR;var r=t.config,i=r.pStylePrefix;i&&(r.stylePrefix=i+r.stylePrefix),t.pfx=r.stylePrefix,t.actions=r.actions||[];var s=new gt.Kx;return t.model=s,s.on("change:currentView",t.__trgCustom,t),t.__dbdTrgCustom=(0,U.debounce)(function(){return t.__trgCustom()},0),t}return n.prototype.onLoad=function(){if((0,Xe.hasWin)()){var e=this.config,t=e.pStylePrefix,r=e.custom,i=(0,wt.a_)("div",{class:(0,wt.cx)("".concat(t,"rte-toolbar"),!r&&"".concat(t,"one-bg ").concat(t,"rte-toolbar-ui"))});this.toolbar=i,this.initRte((0,wt.a_)("div")),(0,wt.on)(i,"mousedown",function(s){return s.stopPropagation()})}},n.prototype.__trgCustom=function(){var e=this,t=e.model,r=e.em,i=e.events;r.trigger(i.custom,{enabled:!!t.get("currentView"),container:this.getToolbarEl(),actions:this.getAll()})},n.prototype.destroy=function(){var e,t,r;(e=this.globalRte)===null||e===void 0||e.destroy(),(r=(t=this.customRte)===null||t===void 0?void 0:t.destroy)===null||r===void 0||r.call(t),this.model.stopListening().clear({silent:!0}),this.__dbdTrgCustom.cancel(),(0,wt.YZ)(this.toolbar)},n.prototype.postRender=function(e){var t=e.model.get("Canvas");this.toolbar.style.pointerEvents="all",this.hideToolbar(),t.getToolsEl().appendChild(this.toolbar)},n.prototype.initRte=function(e){var t=this.globalRte,r=this,i=r.em,s=r.pfx,u=r.actionbar,c=r.config,f=this.actions||JN([],c.actions,!0),h={actionbar:"".concat(s,"actionbar"),button:"".concat(s,"action"),active:"".concat(s,"active"),inactive:"".concat(s,"inactive"),disabled:"".concat(s,"disabled")};return t?(t.em=i,t.setEl(e)):(t=new XN(i,e,{classes:h,actions:f,actionbar:u,actionbarContainer:this.toolbar,module:this}),this.globalRte=t),t.actionbar&&(this.actionbar=t.actionbar),t.actions&&(this.actions=t.actions),t},n.prototype.add=function(e,t){var r;t===void 0&&(t={}),t.name=e,(r=this.globalRte)===null||r===void 0||r.addAction(t,{sync:!0})},n.prototype.get=function(e){var t,r;return(t=this.globalRte)===null||t===void 0||t.getActions().forEach(function(i){i.name==e&&(r=i)}),r},n.prototype.getAll=function(){var e;return((e=this.globalRte)===null||e===void 0?void 0:e.getActions())||[]},n.prototype.remove=function(e){var t,r=this.getAll(),i=this.get(e);if(i){var s=i.btn,u=r.indexOf(i);(t=s==null?void 0:s.parentNode)===null||t===void 0||t.removeChild(s),r.splice(u,1)}return i},n.prototype.run=function(e){var t=this.globalRte,r=(0,U.isString)(e)?this.get(e):e;t&&r&&(r.result(t,r),t.updateActiveActions())},n.prototype.getToolbarEl=function(){return this.toolbar},n.prototype.updatePosition=function(){var e=this,t=e.em,r=e.toolbar,i="px",s=t.Canvas,u=r.style,c=s.getTargetToElementFixed(this.lastEl,r,{event:"rteToolbarPosUpdate",left:0});["top","left","bottom","right"].forEach(function(f){var h=c[f];(0,Xe.isDef)(h)&&(u[f]=(0,U.isString)(h)?h:(h||0)+i)})},n.prototype.enable=function(e,t){return ob(this,arguments,void 0,function(r,i,s){var u,c,f,h,v;return s===void 0&&(s={}),ib(this,function(m){switch(m.label){case 0:return this.lastEl=r.el,u=this,c=u.customRte,f=u.em,h=r.getChildrenContainer(),this.toolbar.style.display="",[4,c?c.enable(h,i):this.initRte(h).enable(s)];case 1:return v=m.sent(),f&&(setTimeout(this.updatePosition.bind(this),0),f.off(jv,this.updatePosition,this),f.on(jv,this.updatePosition,this),f.trigger("rte:enable",r,v)),this.model.set({currentView:r}),[2,v]}})})},n.prototype.getContent=function(e,t){return ob(this,void 0,void 0,function(){var r;return ib(this,function(i){switch(i.label){case 0:return r=this.customRte,r&&t&&(0,U.isFunction)(r.getContent)?[4,r.getContent(e.el,t)]:[3,2];case 1:return[2,i.sent()];case 2:return[2,e.getChildrenContainer().innerHTML]}})})},n.prototype.hideToolbar=function(){var e=this.toolbar.style,t="-1000px";e.top=t,e.left=t,e.display="none"},n.prototype.disable=function(e,t,r){r===void 0&&(r={});var i=this.em,s=this.customRte,u=e.getChildrenContainer();s?s.disable(u,t):t&&t.disable(),this.hideToolbar(),i&&(i.off(jv,this.updatePosition,this),!r.fromMove&&i.trigger("rte:disable",e,t)),this.model.unset("currentView")},n}($o);const rR=nR,oR={sectors:[{name:"General",open:!1,properties:["display","float","position","top","right","left","bottom"]},{name:"Flex",open:!1,properties:["flex-direction","flex-wrap","justify-content","align-items","align-content","order","flex-basis","flex-grow","flex-shrink","align-self"]},{name:"Dimension",open:!1,properties:["width","height","max-width","min-height","margin","padding"]},{name:"Typography",open:!1,properties:["font-family","font-size","font-weight","letter-spacing","color","line-height","text-align","text-shadow"]},{name:"Decorations",open:!1,properties:["background-color","border-radius","border","box-shadow","background"]},{name:"Extra",open:!1,properties:["opacity","transition","transform"]}],appendTo:"",stylePrefix:"sm-",custom:!1,hideNotStylable:!0,highlightChanged:!0,highlightComputed:!0,showComputed:!0,clearProperties:!0,avoidComputed:["width","height"]};var iR=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),yo=function(){return yo=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},yo.apply(this,arguments)},aR=function(o,n){var e={};for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&n.indexOf(t)<0&&(e[t]=o[t]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(o);r<t.length;r++)n.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(o,t[r])&&(e[t[r]]=o[t[r]]);return e},ab=function(o,n,e){if(e||arguments.length===2)for(var t=0,r=n.length,i;t<r;t++)(i||!(t in n))&&(i||(i=Array.prototype.slice.call(n,0,t)),i[t]=n[t]);return o.concat(i||Array.prototype.slice.call(n))},dy=function(o){iR(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.getDefaults=function(){return(0,U.result)(this.prototype,"defaults")},n.prototype.defaults=function(){return{name:"",property:"",type:"",defaults:"",info:"",value:"",icon:"",functionName:"",status:"",visible:!0,fixedValues:["initial","inherit"],full:!1,important:!1,toRequire:!1,requires:void 0,requiresParent:null,parentTarget:null}},n.prototype.initialize=function(e,t){e===void 0&&(e={}),t===void 0&&(t={}),this.em=t.em;var r=this.getId()||"",i=this.get("name")||this.get("label")||"";!this.get("property")&&this.set("property",(i||r).replace(/ /g,"-"));var s=this.get("property");!this.get("id")&&this.set("id",s),!i&&this.set("name",(0,Xe.capitalize)(s).replace(/-/g," ")),this.on("change",this.__upTargets),n.callInit(this,e,t)},n.prototype.__getParentProp=function(){var e,t;return(t=(e=this.collection)===null||e===void 0?void 0:e.opts)===null||t===void 0?void 0:t.parentProp},n.prototype.__upTargets=function(e,t){var r,i=this;t===void 0&&(t={});var s=this.em,u=s.Styles,c=this.getName(),f=t.__clear,h=f?"":this.__getFullValue(t),v=this.__getParentProp(),m=this.changedAttributes(),_=(0,U.keys)(m).reduce(function(D,V){return D[V]=i.previous(V),D},{}),C=ab(ab([],(0,U.keys)(this.__getClearProps()),!0),["__p"],!1),T=(0,U.keys)(m),k=!t.__up&&!v&&(f||C.some(function(D){return T.indexOf(D)>=0})),P=this.get("onChange"),L={property:this,from:_,to:m,value:h,opts:t};u.__trgEv(u.events.propertyUpdate,L),P&&P(L),k&&this.__upTargetsStyle((r={},r[c]=h,r),t)},n.prototype.__upTargetsStyle=function(e,t){var r,i=(r=this.em)===null||r===void 0?void 0:r.get("StyleManager");i==null||i.addStyleTargets(yo(yo({},e),{__p:!!t.avoidStore}),t)},n.prototype._up=function(e,t){t===void 0&&(t={}),t.noTarget&&(t.__up=!0);var r=t.partial,i=aR(t,["partial"]);return e.__p=!!(i.avoidStore||r),this.set(e,yo(yo({},i),{avoidStore:e.__p}))},n.prototype.up=function(e,t){t===void 0&&(t={}),this.set(e,yo(yo({},t),{__up:!0}))},n.prototype.init=function(){},n.prototype.getId=function(){return this.get("id")},n.prototype.getType=function(){return this.get("type")},n.prototype.getName=function(){return this.get("property")},n.prototype.getLabel=function(e){var t;e===void 0&&(e={});var r=e.locale,i=r===void 0?!0:r,s=this.getId(),u=this.get("name")||this.get("label");return i&&((t=this.em)===null||t===void 0?void 0:t.t("styleManager.properties.".concat(s)))||u},n.prototype.getValue=function(e){e===void 0&&(e={});var t=e.noDefault,r=this.get("value");return!this.hasValue()&&!t?this.getDefaultValue():r},n.prototype.hasValue=function(e){e===void 0&&(e={});var t=e.noParent,r=t&&this.getParentTarget(),i=this.get("value");return!(0,U.isUndefined)(i)&&i!==""&&!r},n.prototype.hasValueParent=function(){return this.hasValue()&&!this.hasValue({noParent:!0})},n.prototype.getStyle=function(e){var t;e===void 0&&(e={});var r=this.getName(),i=e.camelCase?(0,Xe.camelCase)(r):r;return t={},t[i]=this.__getFullValue(e),t},n.prototype.getDefaultValue=function(){var e=this.get("default");return"".concat((0,U.isUndefined)(e)?this.get("defaults"):e)},n.prototype.upValue=function(e,t){t===void 0&&(t={});var r=e===null||e===""?this.__getClearProps():this.__parseValue(e,t);return this._up(r,t)},n.prototype.isVisible=function(){return!!this.get("visible")},n.prototype.clear=function(e){return e===void 0&&(e={}),this._up(this.__getClearProps(),yo(yo({},e),{__clear:!0})),this},n.prototype.canClear=function(){var e=this.getParent();return e?e.__canClearProp(this):this.hasValue({noParent:!0})},n.prototype.getParent=function(){return this.__getParentProp()},n.prototype.isFull=function(){return!!this.get("full")},n.prototype.__parseValue=function(e,t){return this.parseValue(e,t)},n.prototype.__getClearProps=function(){return{value:""}},n.prototype.setValue=function(e,t,r){t===void 0&&(t=!0),r===void 0&&(r={});var i=this.parseValue(e),s=!t;!s&&this.set({value:void 0},{avoidStore:s,silent:!0}),this.set(i,yo({avoidStore:s},r))},n.prototype.setValueFromInput=function(e,t,r){r===void 0&&(r={}),this.setValue(e,t,yo(yo({},r),{fromInput:1}))},n.prototype.parseValue=function(e,t){t===void 0&&(t={});var r={value:e},i="!important",s=this.get("functionName")||"";if((0,U.isString)(e)&&e.indexOf(i)!==-1&&(r.value=e.replace(i,"").trim(),r.important=!0),!s&&!t.complete)return r;var u=[],c="".concat(r.value).trim(),f=c.indexOf("(")+1,h=s||c.substring(0,f-1);if(h&&(r.functionName=h),!s||c.indexOf("".concat(s,"("))===0){var v=c.lastIndexOf(")");u.push(f),v>=0&&u.push(v),r.value=String.prototype.substring.apply(c,u)}if(t.numeric){var m=parseFloat(r.value);r.unit=r.value.replace(m,""),r.value=m}return r},n.prototype.__getFullValue=function(e){var t=e===void 0?{}:e,r=t.withDefault;return!this.hasValue()&&r?this.getDefaultValue():this.getFullValue()},n.prototype.getFullValue=function(e,t){t===void 0&&(t={});var r=this.get("functionName"),i=this.getDefaultValue(),s=(0,U.isUndefined)(e)?this.get("value"):e,u=!(0,U.isUndefined)(s)&&s!=="";if(s&&i&&s===i)return i;if(r&&u){var c=r==="url"?"'".concat(s.replace(/'|"/g,""),"'"):s;s="".concat(r,"(").concat(c,")")}return u&&this.get("important")&&!t.skipImportant&&(s="".concat(s," !important")),s||""},n.prototype.__setParentTarget=function(e){this.up({parentTarget:e})},n.prototype.getParentTarget=function(){return this.get("parentTarget")||null},n.prototype.__parseFn=function(e){e===void 0&&(e="");var t=e.indexOf("(")+1,r=e.lastIndexOf(")");return{name:e.substring(0,t-1).trim(),value:String.prototype.substring.apply(e,[t,r>=0?r:void 0]).trim()}},n.prototype.__checkVisibility=function(e){var t=e.target,r=e.component,i=e.sectors,s=r||t;if(!s)return!1;var u=this.getId(),c=this.getName(),f=this.get("toRequire"),h=this.get("requires"),v=this.get("requiresParent"),m=s.get("unstylable"),_=s.get("stylable-require"),C=s.get("stylable");if((0,U.isArray)(C)&&(C=C.indexOf(c)>=0),(0,U.isArray)(m)&&(C=m.indexOf(c)<0),f&&(C=!t||_&&(_.indexOf(u)>=0||_.indexOf(c)>=0)),i&&h){var T=(0,U.keys)(h);i.forEach(function(D){D.getProperties().forEach(function(V){if((0,U.includes)(T,V.id)){var re=h[V.id];C=C&&(0,U.includes)(re,V.get("value"))}})})}if(v){var k=r&&r.parent(),P=k&&k.getEl();if(P){var L=(0,Xe.hasWin)()?window.getComputedStyle(P):{};(0,U.each)(v,function(D,V){C=C&&L[V]&&(0,U.includes)(D,L[V])})}else C=!1}return!!C},n}(gt.Kx);const jn=dy;dy.callParentInit=function(o,n,e,t){t===void 0&&(t={}),o.prototype.initialize.apply(n,[e,yo(yo({},t),{skipInit:1})])};dy.callInit=function(o,n,e){e===void 0&&(e={}),!e.skipInit&&o.init(n,e)};var sR=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Tp=function(){return Tp=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},Tp.apply(this,arguments)},lR=function(o){sR(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype.defaults=function(){return{values:{}}},n.prototype.initialize=function(){var e=this.collection;this.prop=e==null?void 0:e.prop},n.prototype.getId=function(){return this.cid},n.prototype.getIndex=function(){var e=this.collection;return e?e.indexOf(this):-1},n.prototype.getValues=function(e){e===void 0&&(e={});var t=this.get("values");return e.camelCase?Object.keys(t).reduce(function(r,i){return r[(0,Xe.camelCase)(i)]=t[i],r},{}):t},n.prototype.getLabel=function(){var e;return(e=this.prop)===null||e===void 0?void 0:e.getLayerLabel(this)},n.prototype.isSelected=function(){var e;return((e=this.prop)===null||e===void 0?void 0:e.getSelectedLayer())===this},n.prototype.select=function(){var e;return(e=this.prop)===null||e===void 0?void 0:e.selectLayer(this)},n.prototype.remove=function(){var e;return(e=this.prop)===null||e===void 0?void 0:e.removeLayer(this)},n.prototype.move=function(e){var t;return(t=this.prop)===null||t===void 0?void 0:t.moveLayer(this,e)},n.prototype.getStylePreview=function(e){var t;return e===void 0&&(e={}),(t=this.prop)===null||t===void 0?void 0:t.getStylePreview(this,e)},n.prototype.hasPreview=function(){var e;return!!(!((e=this.prop)===null||e===void 0)&&e.get("preview"))},n.prototype.upValues=function(e){return e===void 0&&(e={}),this.set("values",Tp(Tp({},this.getValues()),e))},n}(gt.Kx);const uR=lR;var cR=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),f1=function(o){cR(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype.initialize=function(e,t){t===void 0&&(t={}),this.prop=t.prop},n}(gt.pM);const fR=f1;f1.prototype.model=uR;var dR=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Jl=function(){return Jl=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},Jl.apply(this,arguments)},sb=function(o,n,e){if(e||arguments.length===2)for(var t=0,r=n.length,i;t<r;t++)(i||!(t in n))&&(i||(i=Array.prototype.slice.call(n,0,t)),i[t]=n[t]);return o.concat(i||Array.prototype.slice.call(n))},d1=function(o){return o==="integer"||o==="number"},pR=function(o){dR(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype.defaults=function(){return Jl(Jl({},jn.getDefaults()),{detached:!1,properties:[],separator:" ",join:null,fromStyle:null,toStyle:null,full:!0})},n.prototype.initialize=function(e,t){e===void 0&&(e={}),t===void 0&&(t={}),jn.callParentInit(jn,this,e,t);var r=this.em,i=new hy(this.get("properties")||[],{em:r,parentProp:this});this.set("properties",i,{silent:!0}),this.listenTo(i,"change",this.__upProperties),jn.callInit(this,e,t)},Object.defineProperty(n.prototype,"properties",{get:function(){return this.get("properties")||[]},enumerable:!1,configurable:!0}),n.prototype.getProperties=function(){return sb([],this.get("properties").models,!0)},n.prototype.getProperty=function(e){return this.properties.filter(function(t){return t.getId()===e||t.getName()===e})[0]},n.prototype.getPropertyAt=function(e){return this.get("properties").at(e)},n.prototype.isDetached=function(){return!!this.get("detached")},n.prototype.getValues=function(e){var t=e===void 0?{}:e,r=t.byName;return this.getProperties().reduce(function(i,s){var u=r?s.getName():s.getId();return i[u]="".concat(s.__getFullValue()),i},{})},n.prototype.getSeparator=function(){return this.getSplitSeparator()},n.prototype.getJoin=function(){return this.__getJoin()},n.prototype.getStyleFromProps=function(e){var t;e===void 0&&(e={});var r=this.getName(),i=this.__getJoin(),s=this.get("toStyle"),u=this.getValues(),c={};if(s)c=s(u,{join:i,name:r,property:this});else if(u=this.getValues({byName:!0}),this.isDetached())c=u;else{var f=this.getProperties().map(function(h){return h.__getFullValue({withDefault:1})}).filter(Boolean).join(i);c=(t={},t[r]=f,t)}return this.isDetached()?c[r]="":(c[r]=c[r]||"",c=Jl(Jl({},c),this.getProperties().reduce(function(h,v){return h[v.getName()]="",h},{}))),e.camelCase?Object.keys(c).reduce(function(h,v){return h[(0,Xe.camelCase)(v)]=c[v],h},{}):c},n.prototype.getSplitSeparator=function(){return new RegExp("".concat(this.get("separator"),"(?![^\\(]*\\))"))},n.prototype.__upProperties=function(e,t){if(t===void 0&&(t={}),!(t.__up||t.__clearIn)){var r=this.__getParentProp();if(r)return r.__upProperties(this,t);this.__upTargetsStyleProps(t,e)}},n.prototype.__upTargetsStyleProps=function(e,t){var r;e===void 0&&(e={});var i=this.getStyleFromProps();if(this.isDetached()&&t){var s=t.getName();i=(r={},r[s]=i[s],r)}this.__upTargetsStyle(i,e)},n.prototype._up=function(e,t){return t===void 0&&(t={}),this.__setProperties(this.__getSplitValue(e.value),t),jn.prototype._up.call(this,e,t),this},n.prototype.getStyle=function(e){return this.getStyleFromProps(e)},n.prototype.__getFullValue=function(e){if(e===void 0&&(e={}),this.isDetached()||e.__clear)return"";var t=this.getStyleFromProps()[this.getName()]||"";return Vg(t)},n.prototype.__getJoin=function(){var e=this.get("join");return(0,U.isString)(e)?e:this.get("separator")},n.prototype.__styleHasProps=function(e){e===void 0&&(e={});var t=this.getName(),r=this.getProperties(),i=r.map(function(u){return u.getName()}),s=sb([t],i,!0);return s.some(function(u){return!(0,U.isUndefined)(e[u])&&e[u]!==""})},n.prototype.__splitValue=function(e,t){return Vg(e).split(t).map(function(r){return r.trim()}).filter(Boolean)},n.prototype.__splitStyleName=function(e,t,r){return this.__splitValue(e[t]||"",r)},n.prototype.__getSplitValue=function(e,t){e===void 0&&(e="");var r=t===void 0?{}:t,i=r.byName,s=this.getProperties(),u=s.length===4&&s.every(function(h){return d1(h.getType())}),c=this.__splitValue(e,this.getSplitSeparator()),f={};return s.forEach(function(h,v){var m=c[v],_=(0,U.isUndefined)(m)?"":m;if(u){var C=c.length;_=c[v]||c[v%C+(C!=1&&C%2?1:0)]||_}var T=i?h.getName():h.getId();f[T]=_||""}),f},n.prototype.__getPropsFromStyle=function(e,t){if(e===void 0&&(e={}),t===void 0&&(t={}),!this.__styleHasProps(e))return null;var r=t.byName,i=this.getName(),s=this.getProperties(),u=this.getSplitSeparator(),c=this.get("fromStyle"),f=c?c(e,{property:this,name:i,separator:u}):{};return c||(f=this.__getSplitValue(e[i]||"",{byName:r}),s.forEach(function(h){var v=e[h.getName()],m=r?h.getName():h.getId();!(0,U.isUndefined)(v)&&v!==""&&(f[m]=v)})),f},n.prototype.__setProperties=function(e,t){e===void 0&&(e={}),t===void 0&&(t={}),this.getProperties().forEach(function(i){var s=e[i.getId()];i.__getFullValue()!==s&&i.upValue(s,t)});var r=(0,U.keys)(e).map(function(i){return e[i]}).join(" ");this.set("value",r,{silent:!0})},n.prototype.clear=function(){var e=this;return this.getProperties().map(function(t){return t.clear({__clearIn:!e.isDetached()})}),jn.prototype.clear.call(this),this},n.prototype.hasValue=function(e){return this.getProperties().some(function(t){return t.hasValue(e)})},n.prototype.getFullValue=function(){return this.__getFullValue()},n.prototype.__canClearProp=function(e){return this.isDetached()&&e.hasValue({noParent:!0})},n}(jn);const Dl=pR;var hR=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Io=function(){return Io=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},Io.apply(this,arguments)},vR=function(o,n){var e={};for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&n.indexOf(t)<0&&(e[t]=o[t]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(o);r<t.length;r++)n.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(o,t[r])&&(e[t[r]]=o[t[r]]);return e},gR=/,(?![^\(]*\))/,mR=/\s(?![^(]*\))/,yR=function(o){hR(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype.defaults=function(){return Io(Io({},Dl.getDefaults()),{layers:[],emptyValue:"unset",layerSeparator:", ",layerJoin:"",prepend:0,preview:!1,layerLabel:null,selectedLayer:null})},n.prototype.initialize=function(e,t){e===void 0&&(e={}),t===void 0&&(t={}),Dl.callParentInit(Dl,this,e,t);var r=this.get("layers"),i=new fR(r,{prop:this});i.property=this,i.properties=this.get("properties"),this.set("layers",i,{silent:!0}),this.on("change:selectedLayer",this.__upSelected),this.listenTo(i,"add remove",this.__upLayers),Dl.callInit(this,e,t)},Object.defineProperty(n.prototype,"layers",{get:function(){return this.get("layers")},enumerable:!1,configurable:!0}),n.prototype.getLayers=function(){return this.layers.models},n.prototype.hasLayers=function(){return this.getLayers().length>0},n.prototype.getLayer=function(e){return e===void 0&&(e=0),this.layers.at(e)||void 0},n.prototype.getSelectedLayer=function(){var e=this.get("selectedLayer");return e&&e.getIndex()>=0?e:void 0},n.prototype.selectLayer=function(e){return this.set("selectedLayer",e,{__select:!0})},n.prototype.selectLayerAt=function(e){e===void 0&&(e=0);var t=this.getLayer(e);return t&&this.selectLayer(t)},n.prototype.moveLayer=function(e,t){t===void 0&&(t=0);var r=this.layers,i=e?e.getIndex():-1;i>=0&&(0,U.isNumber)(t)&&t>=0&&t<r.length&&i!==t&&(this.removeLayer(e),r.add(e,{at:t}))},n.prototype.addLayer=function(e,t){e===void 0&&(e={}),t===void 0&&(t={});var r={};this.getProperties().forEach(function(s){var u=s.getId(),c=e[u];r[u]=(0,U.isUndefined)(c)?s.getDefaultValue():c});var i=this.layers.push({values:r},t);return i},n.prototype.removeLayer=function(e){return this.layers.remove(e)},n.prototype.removeLayerAt=function(e){e===void 0&&(e=0);var t=this.getLayer(e);return t?this.removeLayer(t):null},n.prototype.getLayerLabel=function(e){var t="";if(e){var r=this.get("layerLabel"),i=e.getValues(),s=e.getIndex();if(r)t=r(e,{index:s,values:i,property:this});else{var u=[];this.getProperties().map(function(c){u.push(i[c.getId()])}),t=u.filter(Boolean).join(" ")}}return t},n.prototype.getStyleFromLayer=function(e,t){var r;t===void 0&&(t={});var i=this.__getJoin(),s=this.__getJoinLayers(),u=this.get("toStyle"),c=this.getName(),f=e.getValues(),h;if(u)h=u(f,{join:i,joinLayers:s,name:c,layer:e,property:this});else{var v=this.getProperties().map(function(m){var _=m.getName(),C=f[m.getId()],T=(0,U.isUndefined)(C)?m.getDefaultValue():C;if(t.number&&d1(m.getType())){var k=m.parseValue(C,t.number);T="".concat(k.value).concat(k.unit)}return{name:_,value:T}});h=this.isDetached()?v.reduce(function(m,_){return m[_.name]=_.value,m},{}):(r={},r[this.getName()]=v.map(function(m){return m.value}).join(i),r)}return t.camelCase?Object.keys(h).reduce(function(m,_){return m[(0,Xe.camelCase)(_)]=h[_],m},{}):h},n.prototype.getStylePreview=function(e,t){t===void 0&&(t={});var r={},i=this.get("preview");return i&&(r=this.getStyleFromLayer(e,t)),r},n.prototype.getLayerSeparator=function(){var e=this.get("layerSeparator");return(0,U.isString)(e)?new RegExp("".concat(e,"(?![^\\(]*\\))")):e},n.prototype.hasEmptyValue=function(){return!this.hasLayers()&&!!this.attributes.isEmptyValue},n.prototype.__upProperties=function(e,t){var r;t===void 0&&(t={});var i=this.getSelectedLayer();i&&(i.upValues((r={},r[e.getId()]=e.__getFullValue(),r)),!t.__up&&this.__upTargetsStyleProps(t))},n.prototype.__upLayers=function(e,t,r){this.__upTargetsStyleProps(r||t)},n.prototype.__upTargets=function(e,t){if(t===void 0&&(t={}),!t.__select)return jn.prototype.__upTargets.call(this,e,t)},n.prototype.__upTargetsStyleProps=function(e){e===void 0&&(e={}),this.__upTargetsStyle(this.getStyleFromLayers(e),e)},n.prototype.__upTargetsStyle=function(e,t){return jn.prototype.__upTargetsStyle.call(this,e,t)},n.prototype.__upSelected=function(e,t){var r=e===void 0?{}:e,i=r.noEvent;t===void 0&&(t={});var s=this.em.Styles,u=this.getSelectedLayer(),c=u==null?void 0:u.getValues();c&&this.getProperties().forEach(function(f){var h,v=(h=c[f.getId()])!==null&&h!==void 0?h:"";f.__getFullValue()!==v&&f.upValue(v,Io(Io({},t),{__up:!0}))}),!i&&s.__trgEv(s.events.layerSelect,{property:this})},n.prototype._up=function(e,t){t===void 0&&(t={});var r=e.__layers,i=r===void 0?[]:r,s=vR(e,["__layers"]);return!this.isDetached()&&this.__setLayers(i),this.__upSelected({noEvent:!0},t),jn.prototype._up.call(this,s,t),this},n.prototype.__setLayers=function(e,t){e===void 0&&(e=[]),t===void 0&&(t={});var r=this.layers,i=e.map(function(s){return{values:s}});r.length===i.length?i.map(function(s,u){var c;return(c=r.at(u))===null||c===void 0?void 0:c.upValues(s.values)}):r.reset(i),this.set({isEmptyValue:!!t.isEmptyValue}),this.__upSelected({noEvent:!0})},n.prototype.__parseValue=function(e){var t=this,r=this.parseValue(e);return r.__layers=e.split(gR).map(function(i){return i.trim()}).map(function(i){return t.__parseLayer(i)}).filter(Boolean),r},n.prototype.__parseLayer=function(e){var t=this.get("parseLayer"),r=e.split(mR),i=this.getProperties();return t?t({value:e,values:r}):i.reduce(function(s,u,c){var f=r[c];return s[u.getId()]=(0,U.isUndefined)(f)?u.getDefaultValue():f,s},{})},n.prototype.__getLayersFromStyle=function(e){var t=this;if(e===void 0&&(e={}),!this.__styleHasProps(e))return null;if(this.isEmptyValueStyle(e))return[];var r=this.getName(),i=this.getProperties(),s=this.getLayerSeparator(),u=this.attributes.fromStyle,c=u?u(e,{property:this,name:r,separatorLayers:s}):[];if(!u){var f=this.__splitStyleName(e,r,s).map(function(h){return h.split(t.getSplitSeparator())}).map(function(h){var v={};return i.forEach(function(m,_){var C=h[_];v[m.getId()]=(0,U.isUndefined)(C)?m.getDefaultValue():C}),v});i.forEach(function(h){var v=h.getId();t.__splitStyleName(e,h.getName(),s).map(function(m){var _;return _={},_[v]=m||h.getDefaultValue(),_}).forEach(function(m,_){f[_]=f[_]?Io(Io({},f[_]),m):m})}),c=f}return(0,U.isArray)(c)?c:[c]},n.prototype.getStyle=function(e){return e===void 0&&(e={}),this.getStyleFromLayers(e)},n.prototype.getStyleFromLayers=function(e){var t=this;e===void 0&&(e={});var r={},i=this.getName(),s=this.getLayers(),u=this.getProperties(),c=s.map(function(h){return t.getStyleFromLayer(h,e)});if(c.forEach(function(h){(0,U.keys)(h).map(function(v){r[v]||(r[v]=[]),r[v].push(h[v])})}),(0,U.keys)(r).map(function(h){r[h]=r[h].join(t.__getJoinLayers())}),this.isDetached())r[i]="",!s.length&&u.map(function(h){r[h.getName()]=""});else{var f=u.reduce(function(h,v){return h[v.getName()]="",h},{});r[i]=r[i]||"",r=Io(Io({},r),f)}return Io(Io({},r),e.__clear?{}:this.getEmptyValueStyle())},n.prototype.isEmptyValueStyle=function(e){e===void 0&&(e={});var t=this.getEmptyValueStyle({force:!0}),r=(0,U.keys)(t);return!!r.length&&r.every(function(i){return t[i]===e[i]})},n.prototype.getEmptyValueStyle=function(e){e===void 0&&(e={});var t=this.attributes.emptyValue;if(t&&(!this.hasLayers()||e.force)){var r=this.getName(),i=this.getProperties(),s=(0,U.isString)(t)?t:t({property:this});if((0,U.isString)(s)){var u={};return this.isDetached()?i.map(function(c){u[c.getName()]=s}):u[r]=s,u}else return s}else return{}},n.prototype.__getJoinLayers=function(){var e=this.get("layerJoin"),t=this.get("layerSeparator");return e||((0,U.isString)(t)?t:e)},n.prototype.__getFullValue=function(){if(this.get("detached"))return"";var e=this.getStyleFromLayers();return Vg(e[this.getName()])},n.prototype.hasValue=function(e){e===void 0&&(e={});var t=e.noParent,r=t&&this.getParentTarget();return(this.hasLayers()||this.hasEmptyValue())&&!r},n.prototype.clear=function(e){return e===void 0&&(e={}),this.layers.reset(),this.__upTargetsStyleProps(Io(Io({},e),{__clear:!0})),jn.prototype.clear.call(this),this},n.prototype.__canClearProp=function(){return!1},n.prototype.__getLayers=function(){return this.layers},n}(Dl);const wR=yR;var _R=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Ep=function(){return Ep=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},Ep.apply(this,arguments)},bR=function(o,n){var e={};for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&n.indexOf(t)<0&&(e[t]=o[t]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(o);r<t.length;r++)n.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(o,t[r])&&(e[t[r]]=o[t[r]]);return e},xR=function(o,n,e){if(e||arguments.length===2)for(var t=0,r=n.length,i;t<r;t++)(i||!(t in n))&&(i||(i=Array.prototype.slice.call(n,0,t)),i[t]=n[t]);return o.concat(i||Array.prototype.slice.call(n))},Iv="data-clear-style",CR=function(o){_R(n,o);function n(e){e===void 0&&(e={});var t=o.call(this,e)||this;(0,U.bindAll)(t,"__change","__updateStyle");var r=e.config||{},i=r.em;t.config=r,t.em=i,t.pfx=r.stylePrefix||"",t.ppfx=r.pStylePrefix||"",t.__destroyFn=t.destroy?t.destroy.bind(t):function(){};var s=t.model;s.view=t,t.onValueChange=(0,U.debounce)(t.onValueChange.bind(t),10),t.updateStatus=(0,U.debounce)(t.updateStatus.bind(t),0),t.listenTo(s,"destroy remove",t.remove),t.listenTo(s,"change:visible",t.updateVisibility),t.listenTo(s,"change:name change:className change:full",t.render),t.listenTo(s,"change:value",t.onValueChange),t.listenTo(s,"change:parentTarget",t.updateStatus),t.listenTo(i,"change:device",t.onValueChange);var u=t.init&&t.init.bind(t);return u&&u(),t}return n.prototype.events=function(){var e;return e={change:"inputValueChanged"},e["click [".concat(Iv,"]")]="clear",e},n.prototype.template=function(e){var t=this,r=t.pfx,i=t.ppfx;return`
      <div class="`.concat(r,`label" data-sm-label></div>
      <div class="`).concat(i,`fields" data-sm-fields></div>
    `)},n.prototype.templateLabel=function(e){var t=this,r=t.pfx,i=t.em,s=e.parent,u=e.attributes,c=u.icon,f=c===void 0?"":c,h=u.info,v=h===void 0?"":h,m=i==null?void 0:i.getConfig().icons,_=(m==null?void 0:m.close)||"";return`
      <span class="`.concat(r,"icon ").concat(f,'" title="').concat(v,`">
        `).concat(e.getLabel(),`
      </span>
      `).concat(s?"":'<div class="'.concat(r,'clear" style="display: none" ').concat(Iv,">").concat(_,"</div>"),`
    `)},n.prototype.templateInput=function(e){return`
      <div class="`.concat(this.ppfx,`field">
        <input placeholder="`).concat(e.getDefaultValue(),`"/>
      </div>
    `)},n.prototype.remove=function(){var e=this;return gt.Ss.prototype.remove.apply(this,arguments),["em","input","$input","view"].forEach(function(t){return e[t]=null}),this.__destroyFn(this._getClbOpts()),this},n.prototype.updateStatus=function(){var e,t=this,r=t.model,i=t.pfx,s=t.ppfx,u=t.config,c="".concat(s,"four-color"),f="".concat(s,"color-warn"),h=this.$el.children(".".concat(i,"label")),v=this.getClearEl(),m=v?v.style:{};h.removeClass("".concat(c," ").concat(f)),m.display="none",r.hasValue({noParent:!0})&&u.highlightChanged?(h.addClass(c),u.clearProperties&&(m.display="")):r.hasValue()&&u.highlightComputed&&h.addClass(f),(e=this.parent)===null||e===void 0||e.updateStatus()},n.prototype.clear=function(e){e&&e.stopPropagation(),this.model.clear()},n.prototype.getClearEl=function(){return this.clearEl||(this.clearEl=this.el.querySelector("[".concat(Iv,"]"))),this.clearEl},n.prototype.inputValueChanged=function(e){e&&e.stopPropagation(),!this.emit&&this.model.upValue(e.target.value)},n.prototype.onValueChange=function(e,t,r){this.setValue(this.model.getFullValue(void 0,{skipImportant:!0})),this.updateStatus()},n.prototype.setValue=function(e){var t=this.model,r=(0,U.isUndefined)(e)||e===""?t.getDefaultValue():e;if(this.update)return this.__update(r);this.__setValueInput(r)},n.prototype.__setValueInput=function(e){var t=this.getInputEl();t&&(t.value=e)},n.prototype.getInputEl=function(){return this.input||(this.input=this.el.querySelector("input")),this.input},n.prototype.updateVisibility=function(){this.el.style.display=this.model.isVisible()?"":"none"},n.prototype.clearCached=function(){delete this.clearEl,delete this.input,delete this.$input},n.prototype.__unset=function(){var e=this.unset&&this.unset.bind(this);e&&e(this._getClbOpts())},n.prototype.__update=function(e){var t=this.update&&this.update.bind(this);t&&t(Ep(Ep({},this._getClbOpts()),{value:e}))},n.prototype.__change=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.emit&&this.emit.bind(this);r&&r.apply(void 0,xR([this._getClbOpts()],e,!1))},n.prototype.__updateStyle=function(e,t){t===void 0&&(t={});var r=t.complete,i=t.partial;bR(t,["complete","partial"]);var s=this.model,u=r!==!1&&i!==!0;(0,Xe.isObject)(e)?s.__upTargetsStyle(e,{avoidStore:!u}):s.upValue(e,{partial:!u})},n.prototype._getClbOpts=function(){var e=this,t=e.model,r=e.el,i=e.createdEl;return{el:r,createdEl:i,property:t,props:t.attributes,change:this.__change,updateStyle:this.__updateStyle}},n.prototype.render=function(){this.clearCached();var e=this,t=e.pfx,r=e.model,i=e.el,s=e.$el,u=r.getName(),c=r.getType(),f=r.get("className")||"",h="".concat(t,"property"),v=c==="number"?"".concat(t).concat(c," ").concat(t,"integer"):"".concat(t).concat(c);this.createdEl&&this.__destroyFn(this._getClbOpts()),s.empty().append(this.template(r)),s.find("[data-sm-label]").append(this.templateLabel(r));var m=this.create&&this.create.bind(this);this.createdEl=m&&m(this._getClbOpts()),s.find("[data-sm-fields]").append(this.createdEl||this.templateInput(r)),i.className="".concat(h," ").concat(v," ").concat(h,"__").concat(u," ").concat(f).trim(),i.className+=r.isFull()?" ".concat(h,"--full"):"";var _=this.onRender&&this.onRender.bind(this);return _&&_(),this.setValue(r.getValue()),this},n.prototype.onRender=function(){},n}(gt.Ss);const wa=CR;var SR=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),OR=function(o){SR(n,o);function n(e){var t=o.call(this,e)||this;t.config=e.config||{},t.pfx=t.config.stylePrefix||"",t.properties=[],t.parent=e.parent;var r=t.collection;return t.listenTo(r,"add",t.addTo),t.listenTo(r,"reset",t.render),t}return n.prototype.addTo=function(e,t,r){this.add(e,null,r)},n.prototype.add=function(e,t,r){r===void 0&&(r={});var i=this,s=i.parent,u=i.config,c=t||this.el,f=new e.typeView({model:e,config:u});s&&(f.parent=s),f.render();var h=f.el;this.properties.push(f),(0,wt.Sc)(c,h,r.at)},n.prototype.remove=function(){return gt.Ss.prototype.remove.apply(this,arguments),this.clearItems(),this},n.prototype.clearItems=function(){this.properties.forEach(function(e){return e.remove()}),this.properties=[]},n.prototype.render=function(){var e=this,t=this,r=t.$el,i=t.pfx;this.clearItems();var s=document.createDocumentFragment();return this.collection.forEach(function(u){return e.add(u,s)}),r.empty(),r.append(s),r.attr("class","".concat(i,"properties")),this},n}(gt.Ss);const py=OR;var TR=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Pp=function(){return Pp=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},Pp.apply(this,arguments)},ER=function(o){TR(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype.templateInput=function(){var e=this.pfx;return`
      <div class="`.concat(e,"field ").concat(e,`composite">
        <span id="`).concat(e,`input-holder"></span>
      </div>
    `)},n.prototype.remove=function(){var e;return(e=this.props)===null||e===void 0||e.remove(),wa.prototype.remove.apply(this,arguments),this},n.prototype.onValueChange=function(){},n.prototype.onRender=function(){var e=this.pfx,t=this.model,r=t.get("properties");if(r.length&&!this.props){var i=t.isDetached(),s=new py({config:Pp(Pp({},this.config),{highlightComputed:i,highlightChanged:i}),collection:r,parent:this});s.render(),this.$el.find("#".concat(e,"input-holder")).append(s.el),this.props=s}},n.prototype.clearCached=function(){wa.prototype.clearCached.apply(this,arguments),delete this.props},n}(wa);const lc=ER;var PR=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),kR=function(o){PR(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype.events=function(){return{click:"select","click [data-close-layer]":"removeItem","mousedown [data-move-layer]":"initSorter","touchstart [data-move-layer]":"initSorter"}},n.prototype.template=function(){var e=this,t=e.pfx,r=e.ppfx,i=e.em,s=i==null?void 0:i.getConfig().icons,u=(s==null?void 0:s.close)||"",c=(s==null?void 0:s.move)||"";return`
      <div class="`.concat(t,`label-wrp">
        <div id="`).concat(t,'move" class="').concat(r,`no-touch-actions" data-move-layer>
          `).concat(c,`
        </div>
        <div id="`).concat(t,`label" data-label></div>
        <div id="`).concat(t,'preview-box" class="').concat(t,`layer-preview" style="display: none" data-preview-box>
          <div id="`).concat(t,'preview" class="').concat(t,`layer-preview-cnt" data-preview></div>
        </div>
        <div id="`).concat(t,'close-layer" class="').concat(t,`btn-close" data-close-layer>
          `).concat(u,`
        </div>
      </div>
      <div id="`).concat(t,`inputs" data-properties></div>
    `)},n.prototype.initialize=function(e){e===void 0&&(e={});var t=this.model,r=e.config||{};this.em=r.em,this.config=r,this.sorter=e.sorter,this.pfx=r.stylePrefix||"",this.ppfx=r.pStylePrefix||"",this.propertyView=e.propertyView;var i=this.propertyView.model;this.listenTo(t,"destroy remove",this.remove),this.listenTo(t,"change:values",this.updateLabel),this.listenTo(i,"change:selectedLayer",this.updateVisibility),t.view=this,t.set({droppable:0,draggable:1}),this.$el.data("model",t)},n.prototype.initSorter=function(){var e;(e=this.sorter)===null||e===void 0||e.startSort(this.el)},n.prototype.removeItem=function(e){e&&e.stopPropagation(),this.model.remove()},n.prototype.select=function(){this.model.select()},n.prototype.getPropertiesWrapper=function(){return this.propsWrapEl||(this.propsWrapEl=this.el.querySelector("[data-properties]")),this.propsWrapEl},n.prototype.getPreviewEl=function(){return this.previewEl||(this.previewEl=this.el.querySelector("[data-preview]")),this.previewEl},n.prototype.getLabelEl=function(){return this.labelEl||(this.labelEl=this.el.querySelector("[data-label]")),this.labelEl},n.prototype.updateLabel=function(){var e=this.model,t=e.getLabel();if(this.getLabelEl().innerHTML=t,e.hasPreview()){var r=this.getPreviewEl(),i=e.getStylePreview({number:{min:-3,max:3}}),s=(0,U.keys)(i).map(function(u){return"".concat(u,":").concat(i[u])}).join(";");r.setAttribute("style",s)}},n.prototype.updateVisibility=function(){var e,t=this,r=t.pfx,i=t.model,s=t.propertyView,u=this.getPropertiesWrapper(),c=i.isSelected();u.style.display=c?"":"none",this.$el[c?"addClass":"removeClass"]("".concat(r,"active")),c&&u.appendChild((e=s.props)===null||e===void 0?void 0:e.el)},n.prototype.render=function(){var e=this,t=e.el,r=e.pfx,i=e.model;return t.innerHTML=this.template(),t.className="".concat(r,"layer"),i.hasPreview()&&(t.querySelector("[data-preview-box]").style.display=""),this.updateLabel(),this.updateVisibility(),this},n}(gt.Ss);const AR=kR;var MR=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),DR=function(o){MR(n,o);function n(e){var t=o.call(this,e)||this,r=t.collection,i=e.config||{},s=i.em,u=i.stylePrefix||"",c=i.pStylePrefix||"";t.config=i,t.pfx=u,t.ppfx=c,t.propertyView=e.propertyView,t.className="".concat(u,"layers ").concat(c,"field"),t.listenTo(r,"add",t.addTo),t.listenTo(r,"reset",t.reset),t.items=[];var f=s==null?void 0:s.Utils;return t.sorter=f?new f.Sorter({container:t.el,ignoreViewChildren:1,containerSel:".".concat(u,"layers"),itemSel:".".concat(u,"layer"),pfx:i.pStylePrefix,em:s}):"",r.view=t,t.$el.data("model",r),t.$el.data("collection",r),t}return n.prototype.addTo=function(e){var t=this.collection.indexOf(e);this.addToCollection(e,null,t)},n.prototype.addToCollection=function(e,t,r){var i=t||null,s=this,u=s.propertyView,c=s.config,f=s.sorter,h=s.$el,v=new AR({model:e,config:c,sorter:f,propertyView:u}),m=v.render().el;if(this.items.push(v),i)i.appendChild(m);else if(typeof r<"u"){var _="before";h.children().length===r&&(r--,_="after"),r<0?h.append(m):h.children().eq(r)[_](m)}else h.append(m);return m},n.prototype.reset=function(e,t){this.clearItems(),this.render()},n.prototype.remove=function(){return this.clearItems(),gt.Ss.prototype.remove.apply(this,arguments),this},n.prototype.clearItems=function(){this.items.forEach(function(e){return e.remove()}),this.items=[]},n.prototype.render=function(){var e=this,t=this,r=t.$el,i=t.sorter,s=document.createDocumentFragment();return r.empty(),this.collection.forEach(function(u){return e.addToCollection(u,s)}),r.append(s),r.attr("class",this.className),i&&(i.plh=null),this},n}(gt.Ss);const LR=DR;var jR=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Zl=function(){return Zl=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},Zl.apply(this,arguments)},IR=function(o){jR(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype.events=function(){return Zl(Zl({},lc.prototype.events()),{"click [data-add-layer]":"addLayer",change:""})},n.prototype.templateInput=function(){var e=this,t=e.pfx,r=e.em,i=r==null?void 0:r.getConfig().icons,s=(i==null?void 0:i.plus)||"+";return`
      <div class="`.concat(t,"field ").concat(t,`stack">
        <button type="button" id="`).concat(t,`add" data-add-layer>
          `).concat(s,`
        </button>
        <div data-layers-wrapper></div>
      </div>
    `)},n.prototype.init=function(){var e=this.model;this.listenTo(e.layers,"change reset",this.updateStatus),this.listenTo(e,"change:isEmptyValue",this.updateStatus)},n.prototype.addLayer=function(){this.model.addLayer({},{at:0})},n.prototype.setValue=function(){},n.prototype.remove=function(){var e;return(e=this.layersView)===null||e===void 0||e.remove(),lc.prototype.remove.apply(this,arguments),this},n.prototype.clearCached=function(){lc.prototype.clearCached.apply(this,arguments),delete this.layersView},n.prototype.onRender=function(){var e=this,t=e.model,r=e.el,i=e.config,s=t.get("properties");if(s.length&&!this.props){var u=new py({config:Zl(Zl({},i),{highlightComputed:!1,highlightChanged:!1}),collection:s,parent:this});u.render();var c=new LR({collection:t.layers,config:i,propertyView:this});c.render();var f=r.querySelector("[data-layers-wrapper]");f.appendChild(c.el),this.props=u,this.layersView=c}},n}(lc);const NR=IR;var RR=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),kp=function(){return kp=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},kp.apply(this,arguments)},FR=function(o){RR(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype.events=function(){return kp(kp({},wa.prototype.events()),{"click [data-clear-asset]":"clear","click [data-open-assets]":"openAssetManager"})},n.prototype.templateInput=function(){var e,t=this,r=t.pfx,i=t.em,s=(e=this.em)===null||e===void 0?void 0:e.getConfig().icons,u=s==null?void 0:s.close;return`
      <div class="`.concat(r,"field ").concat(r,`file">
        <div id='`).concat(r,`input-holder'>
          <div class="`).concat(r,`btn-c">
            <button class="`).concat(r,'btn" id="').concat(r,`images" type="button" data-open-assets>
              `).concat(i.t("styleManager.fileButton"),`
            </button>
          </div>
          <div style="clear:both;"></div>
        </div>
        <div id="`).concat(r,'preview-box" class="').concat(r,`preview-file" data-preview-box>
          <div id="`).concat(r,'preview-file" class="').concat(r,`preview-file-cnt" data-preview></div>
          <div id="`).concat(r,'close" class="').concat(r,'preview-file-close" data-clear-asset>').concat(u,`</div>
        </div>
      </div>
    `)},n.prototype.__setValueInput=function(e){var t=this,r=t.model,i=t.el,s=r.getDefaultValue(),u=i.querySelector("[data-preview-box]"),c=i.querySelector("[data-preview]");u.style.display=!e||e===s?"none":"",c.style.backgroundImage=e||r.getDefaultValue()},n.prototype.openAssetManager=function(){var e=this,t,r=(t=this.em)===null||t===void 0?void 0:t.Assets;r==null||r.open({select:function(i,s){var u=(0,U.isString)(i)?i:i.get("src");e.model.upValue(u,{partial:!s}),s&&r.close()},types:["image"],accept:"image/*"})},n}(wa);const VR=FR;var zR=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),HR=function(o){zR(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype.templateInput=function(e){return""},n.prototype.init=function(){var e=this.model;this.listenTo(e,"change:unit",this.onValueChange),this.listenTo(e,"change:units",this.render)},n.prototype.setValue=function(e){},n.prototype.onRender=function(){var e=this,t=e.ppfx,r=e.model,i=e.el;if(!this.inputInst){var s=r.input;s.ppfx=t,s.render();var u=i.querySelector(".".concat(t,"fields"));u.appendChild(s.el),this.input=s.inputEl.get(0),this.inputInst=s}},n.prototype.clearCached=function(){wa.prototype.clearCached.apply(this,arguments),this.inputInst=null},n}(wa);const va=HR;var UR=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),BR=function(o){UR(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype.setValue=function(e){var t;(t=this.inputInst)===null||t===void 0||t.setValue(e,{fromTarget:1,def:this.model.getDefaultValue()})},n.prototype.remove=function(){var e=this;va.prototype.remove.apply(this,arguments);var t=this.inputInst;return t&&t.remove&&t.remove(),["inputInst","$color"].forEach(function(r){return e[r]=null}),this},n.prototype.__handleChange=function(e,t){this.model.upValue(e,{partial:t})},n.prototype.onRender=function(){var e;if(!this.inputInst){this.__handleChange=this.__handleChange.bind(this);var t=this,r=t.ppfx,i=t.model,s=t.em,u=t.el,c=new VS({target:s,model:i,ppfx:r,onChange:this.__handleChange}),f=c.render();u.querySelector(".".concat(r,"fields")).appendChild(f.el),this.input=(e=f.inputEl)===null||e===void 0?void 0:e.get(0),this.inputInst=f}},n}(va);const WR=BR;var $R=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Ap=function(){return Ap=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},Ap.apply(this,arguments)},lb=function(o,n,e){if(e||arguments.length===2)for(var t=0,r=n.length,i;t<r;t++)(i||!(t in n))&&(i||(i=Array.prototype.slice.call(n,0,t)),i[t]=n[t]);return o.concat(i||Array.prototype.slice.call(n))},KR=function(o){$R(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype.defaults=function(){return Ap(Ap({},jn.getDefaults()),{options:[],full:0})},n.prototype.getOptions=function(){var e=this.attributes,t=e.options,r=e.list;return(t&&t.length?t:r)||[]},n.prototype.getOption=function(e){var t=this,r=(0,Xe.isDef)(e)?e:this.getValue();return this.getOptions().filter(function(i){return t.getOptionId(i)===r})[0]||null},n.prototype.setOptions=function(e){return e===void 0&&(e=[]),this.set("options",e),this},n.prototype.addOption=function(e){if(e){var t=this.getOptions();this.setOptions(lb(lb([],t,!0),[e],!1))}return this},n.prototype.getOptionId=function(e){return(0,Xe.isDef)(e.id)?e.id:e.value},n.prototype.getOptionLabel=function(e,t){var r;t===void 0&&(t={});var i=t.locale,s=i===void 0?!0:i,u=((0,U.isString)(e)?this.getOption(e):e)||{},c=this.getOptionId(u),f=u.label||u.name||c,h=t.property||this.getId();return s&&((r=this.em)===null||r===void 0?void 0:r.t("styleManager.options.".concat(h,".").concat(c)))||f},n.prototype.initialize=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];jn.prototype.initialize.apply(this,e),this.listenTo(this,"change:options",this.__onOptionChange)},n.prototype.__onOptionChange=function(){this.set("list",this.get("options"))},n}(jn);const rm=KR;var GR=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),YR=function(o){GR(n,o);function n(e){var t=o.call(this,e)||this;return t.listenTo(t.model,"change:options",t.updateOptions),t}return n.prototype.templateInput=function(){var e=this,t=e.pfx,r=e.ppfx;return`
      <div class="`.concat(r,"field ").concat(r,`select">
        <span id="`).concat(t,`input-holder"></span>
        <div class="`).concat(r,`sel-arrow">
          <div class="`).concat(r,`d-s-arrow"></div>
        </div>
      </div>
    `)},n.prototype.updateOptions=function(){delete this.input,this.onRender()},n.prototype.onRender=function(){var e=this.pfx,t=this.model,r=t.getOptions();if(!this.input){var i=[];r.forEach(function(u){var c=t.getOptionId(u),f=t.getOptionLabel(c),h=u.style?u.style.replace(/"/g,"&quot;"):"",v=h?'style="'.concat(h,'"'):"",m=c.replace(/"/g,"&quot;");i.push('<option value="'.concat(m,'" ').concat(v,">").concat(f,"</option>"))});var s=this.el.querySelector("#".concat(e,"input-holder"));s.innerHTML="<select>".concat(i.join(""),"</select>"),this.input=s.firstChild}},n.prototype.__setValueInput=function(e){var t=this.model,r=this.getInputEl(),i=t.getOptions()[0],s=i?t.getOptionId(i):"";r&&(r.value=e||s)},n}(wa);const p1=YR;var XR=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Mp=function(){return Mp=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},Mp.apply(this,arguments)},qR=function(o){XR(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype.defaults=function(){return Mp(Mp({},rm.getDefaults()),{full:1})},n}(rm);const JR=qR;var ZR=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),QR=function(o){ZR(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype.templateInput=function(){var e=this.ppfx;return'<div class="'.concat(e,"field ").concat(e,'field-radio"></div>')},n.prototype.onRender=function(){var e=this,t=e.pfx,r=e.ppfx,i=this.model,s="".concat(r,"radio-item-label"),u=i.getName(),c=i.getOptions(),f="".concat(t,"radio ").concat(t,"radio-").concat(u),h=i.cid;if(!this.input){var v=[];c.forEach(function(_){var C=_.className?"".concat(_.className," ").concat(t,"icon ").concat(s):"",T=i.getOptionId(_),k="".concat(u,"-").concat(T,"-").concat(h),P=C?"":i.getOptionLabel(T),L=_.title?'title="'.concat(_.title,'"'):"",D=i.getValue()===T?"checked":"";v.push(`
          <div class="`.concat(r,`radio-item">
            <input type="radio" class="`).concat(f,'" id="').concat(k,'" name="').concat(u,"-").concat(h,'" value="').concat(T,'" ').concat(D,`/>
            <label class="`).concat(C||s,'" ').concat(L,' for="').concat(k,'">').concat(P,`</label>
          </div>
        `))});var m=this.el.querySelector(".".concat(r,"field"));m.innerHTML='<div class="'.concat(r,'radio-items">').concat(v.join(""),"</div>"),this.input=m.firstChild}},n.prototype.__setValueInput=function(e){var t,r=this.model,i=e||r.getDefaultValue(),s=(t=this.getInputEl())===null||t===void 0?void 0:t.querySelector('[value="'.concat(i,'"]'));s&&(s.checked=!0)},n}(p1);const eF=QR;var tF=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Vs=function(){return Vs=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},Vs.apply(this,arguments)},nF=function(o){tF(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype.defaults=function(){return Vs(Vs({},jn.getDefaults()),{units:[],unit:"",min:"",max:"",step:1})},n.prototype.getUnits=function(){return this.get("units")||[]},n.prototype.getUnit=function(){return this.get("unit")},n.prototype.getMin=function(){return this.get("min")},n.prototype.getMax=function(){return this.get("max")},n.prototype.getStep=function(){return this.get("step")},n.prototype.upUnit=function(e,t){return t===void 0&&(t={}),this._up({unit:e},t)},n.prototype.initialize=function(e,t){e===void 0&&(e={}),t===void 0&&(t={}),jn.callParentInit(jn,this,e,t);var r=this.get("unit"),i=this.getUnits();this.input=(0,Xe.hasWin)()?new HS({model:this}):void 0,i.length&&!r&&this.set("unit",i[0],{silent:!0}),jn.callInit(this,e,t)},n.prototype.__getClearProps=function(){return Vs(Vs({},jn.prototype.__getClearProps()),{unit:""})},n.prototype.parseValue=function(e,t){t===void 0&&(t={});var r=jn.prototype.parseValue.apply(this,arguments),i=this.input.validateInputValue(r.value,Vs({deepCheck:1},t)),s=i.value,u=i.unit;return r.value=s,r.unit=u,r},n.prototype.getFullValue=function(){var e=this.get("value"),t=this.get("unit"),r=(0,U.isUndefined)(e)?"":"".concat(e),i=!(0,U.isUndefined)(t)&&r?t:"",s="".concat(r).concat(i);return jn.prototype.getFullValue.apply(this,[s])},n}(jn);const Dp=nF;var rF=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Lp=function(){return Lp=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},Lp.apply(this,arguments)},oF=function(o){rF(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype.defaults=function(){return Lp(Lp({},Dp.getDefaults()),{showInput:1})},n}(Dp);const iF=oF;var aF=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),jp=function(){return jp=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},jp.apply(this,arguments)},sF=function(o){aF(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype.events=function(){return jp(jp({},va.prototype.events()),{"change [type=range]":"inputValueChanged","input [type=range]":"inputValueChangedSoft",change:""})},n.prototype.templateInput=function(e){var t=this.ppfx;return`
      <div class="`.concat(t,"field ").concat(t,`field-range">
        <input type="range" min="`).concat(e.get("min"),'" max="').concat(e.get("max"),'" step="').concat(e.get("step"),`"/>
      </div>
    `)},n.prototype.getSliderEl=function(){return this.slider||(this.slider=this.el.querySelector("input[type=range]")),this.slider},n.prototype.inputValueChanged=function(e){e.stopPropagation(),this.model.upValue(this.getSliderEl().value)},n.prototype.inputValueChangedSoft=function(e){e.stopPropagation(),this.model.upValue(this.getSliderEl().value,{partial:!0})},n.prototype.setValue=function(e){var t=this.model,r=t.parseValue(e);this.getSliderEl().value=e===""?t.getDefaultValue():parseFloat(r.value),va.prototype.setValue.apply(this,arguments)},n.prototype.onRender=function(){va.prototype.onRender.apply(this,arguments),this.model.get("showInput")||(this.inputInst.el.style.display="none")},n.prototype.clearCached=function(){va.prototype.clearCached.apply(this,arguments),delete this.slider},n}(va);const lF=sF;var uF=gt.pM.extend(ZS),cF=uF.extend({extendViewApi:1,init:function(){var o=this,n=o.opts,e=o.em,t=n.module||(e==null?void 0:e.get("StyleManager"));t&&(t.__listenAdd(this,t.events.propertyAdd),t.__listenRemove(this,t.events.propertyRemove))},types:[{id:"stack",model:wR,view:NR,isType:function(o){if(o&&o.type=="stack")return o}},{id:"composite",model:Dl,view:lc,isType:function(o){if(o&&o.type=="composite")return o}},{id:"file",model:jn,view:VR,isType:function(o){if(o&&o.type=="file")return o}},{id:"color",model:jn,view:WR,isType:function(o){if(o&&o.type=="color")return o}},{id:"select",model:rm,view:p1,isType:function(o){if(o&&o.type=="select")return o}},{id:"radio",model:JR,view:eF,isType:function(o){if(o&&o.type=="radio")return o}},{id:"slider",model:iF,view:lF,isType:function(o){if(o&&o.type=="slider")return o}},{id:"integer",model:Dp,view:va,isType:function(o){if(o&&o.type=="integer")return o}},{id:"number",model:Dp,view:va,isType:function(o){if(o&&o.type=="number")return o}},{id:"base",model:jn,view:wa,isType:function(o){return o.type="base",o}}]});const hy=cF;var fF=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Ip=function(){return Ip=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},Ip.apply(this,arguments)},dF=function(o,n){var e={};for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&n.indexOf(t)<0&&(e[t]=o[t]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(o);r<t.length;r++)n.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(o,t[r])&&(e[t[r]]=o[t[r]]);return e},pF=function(o,n,e){if(e||arguments.length===2)for(var t=0,r=n.length,i;t<r;t++)(i||!(t in n))&&(i||(i=Array.prototype.slice.call(n,0,t)),i[t]=n[t]);return o.concat(i||Array.prototype.slice.call(n))},hF=function(o){fF(n,o);function n(e,t){t===void 0&&(t={});var r=o.call(this,e)||this,i=t.em;r.em=i;var s=e||{},u=r.buildProperties(s.buildProps),c=r.get("name")||"",f=[];!r.get("id")&&r.set("id",c.replace(/ /g,"_").toLowerCase()),u?f=r.extendProperties(u):f=r.get("properties").map(function(v){return(0,U.isString)(v)?r.buildProperties(v)[0]:v}).filter(Boolean),f=f.map(function(v){return r.checkExtend(v)});var h=new hy(f,{em:i});return h.sector=r,r.set("properties",h),r}return n.prototype.defaults=function(){return{id:"",name:"",open:!0,visible:!0,extendBuilded:!0,properties:[]}},Object.defineProperty(n.prototype,"properties",{get:function(){return this.get("properties")},enumerable:!1,configurable:!0}),n.prototype.getId=function(){return this.get("id")},n.prototype.getName=function(){var e,t=this.getId();return((e=this.em)===null||e===void 0?void 0:e.t("styleManager.sectors.".concat(t)))||this.get("name")},n.prototype.setName=function(e){return this.set("name",e)},n.prototype.isOpen=function(){return!!this.get("open")},n.prototype.setOpen=function(e){return this.set("open",e)},n.prototype.isVisible=function(){return!!this.get("visible")},n.prototype.getProperties=function(e){e===void 0&&(e={});var t=this.properties,r=t.models?pF([],t.models,!0):t;return r.filter(function(i){var s=!0;if(e.withValue&&(s=i.hasValue({noParent:!0})),e.withParentValue){var u=i.hasValue({noParent:!0});s=!u&&i.hasValue()}return s})},n.prototype.getProperty=function(e){return this.getProperties().filter(function(t){return t.get("id")===e})[0]||void 0},n.prototype.addProperty=function(e,t){return this.properties.add(this.checkExtend(e),t)},n.prototype.extendProperties=function(e,t,r){r===void 0&&(r=!1);for(var i=e.length,s=t||this.get("properties"),u=this.get("extendBuilded"),c=[],f=0,h=s.length;f<h;f++){for(var v=s[f],m=0,_=0;_<i;_++){var C=e[_];if(v.property==C.property||v.id==C.property){var T=v.properties;T&&T.length&&(v.properties=this.extendProperties(C.properties||[],T,1)),e[_]=u?(0,U.extend)(C,v):v,c[_]=e[_],m=1;continue}}m||(e.push(v),c.push(v))}return r?c.filter(function(k){return k}):e},n.prototype.checkExtend=function(e){var t=((0,U.isString)(e)?{extend:e}:e)||{},r=t.extend,i=dF(t,["extend"]);return r?Ip(Ip({},this.buildProperties([r])[0]||{}),i):e},n.prototype.buildProperties=function(e){var t,r=e||[];if(!r.length)return[];var i=(t=this.em)===null||t===void 0?void 0:t.Styles.builtIn;return i==null?void 0:i.build(r)},n}(gt.Kx);const h1=hF;var vF=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Np=function(){return Np=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},Np.apply(this,arguments)},gF=function(o){vF(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.prototype.initialize=function(e,t){t===void 0&&(t={});var r=t.module,i=t.em;this.em=i,this.module=r,this.listenTo(this,"reset",this.onReset)},n.prototype.model=function(e,t){t===void 0&&(t={});var r=t.collection.em;return new h1(e,Np(Np({},t),{em:r}))},n.prototype.onReset=function(e,t){t===void 0&&(t={});var r=t.previousModels||[];r.forEach(function(i){return i.get("properties").reset()})},n}(gt.pM);const mF=gF;var Ka=function(){return Ka=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},Ka.apply(this,arguments)},yF=function(o,n){var e={};for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&n.indexOf(t)<0&&(e[t]=o[t]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(o);r<t.length;r++)n.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(o,t[r])&&(e[t[r]]=o[t[r]]);return e},Ds=function(o,n,e){if(e||arguments.length===2)for(var t=0,r=n.length,i;t<r;t++)(i||!(t in n))&&(i||(i=Array.prototype.slice.call(n,0,t)),i[t]=n[t]);return o.concat(i||Array.prototype.slice.call(n))},br=function(o){return o.map(function(n){return{id:n}})},wF=function(){function o(){this.props={},this.typeNumber="number",this.typeColor="color",this.typeRadio="radio",this.typeSelect="select",this.typeFile="file",this.typeSlider="slider",this.typeComposite="composite",this.typeStack="stack",this.unitsSize=["px","%","em","rem","vh","vw"],this.unitsSizeNoPerc=["px","em","rem","vh","vw"],this.unitsTime=["s","ms"],this.unitsAngle=["deg","rad","grad"],this.fixedValues=["initial","inherit","auto"];var n=", sans-serif",e=["flex-start","flex-end","center"],t=Ds(Ds([],e,!0),["baseline","stretch"],!1);this.optsBgSize=br(["auto","cover","contain"]),this.optsBgAttach=br(["scroll","fixed","local"]),this.optsBgRepeat=br(["repeat","repeat-x","repeat-y","no-repeat"]),this.optsWrap=br(["nowrap","wrap","wrap-reverse"]),this.optsOverflow=br(["visible","hidden","scroll","auto"]),this.optsDir=br(["row","row-reverse","column","column-reverse"]),this.opstDisplay=br(["block","inline","inline-block","flex","none"]),this.optsTransitFn=br(["linear","ease","ease-in","ease-out","ease-in-out"]),this.optsCursor=br(["auto","pointer","copy","crosshair","grab","grabbing","help","move","text"]),this.optsFloat=br(["none","left","right"]),this.optsPos=br(["static","relative","absolute","fixed"]),this.optsTextAlign=br(["left","center","right","justify"]),this.optsFlexAlign=br(t),this.optsJustCont=br(Ds(Ds([],e,!0),["space-between","space-around","space-evenly"],!1)),this.optsAlignCont=br(Ds(Ds([],e,!0),["space-between","space-around","stretch"],!1)),this.optsAlignSelf=br(Ds(["auto"],t,!0)),this.optsTransitProp=br(["all","width","height","background-color","transform","box-shadow","opacity"]),this.optsBorderStyle=br(["none","solid","dotted","dashed","double","groove","ridge","inset","outset"]),this.optsBgPos=br(["left top","left center","left bottom","right top","right center","right bottom","center top","center center","center bottom"]),this.optsWeight=[{id:"100",label:"Thin"},{id:"200",label:"Extra-Light"},{id:"300",label:"Light"},{id:"400",label:"Normal"},{id:"500",label:"Medium"},{id:"600",label:"Semi-Bold"},{id:"700",label:"Bold"},{id:"800",label:"Extra-Bold"},{id:"900",label:"Ultra-Bold"}],this.optsShadowType=[{id:"",label:"Outside"},{id:"inset",label:"Inside"}],this.optsFonts=["Arial, Helvetica"+n,"Arial Black, Gadget"+n,"Brush Script MT"+n,"Comic Sans MS, cursive"+n,"Courier New, Courier, monospace","Georgia, serif","Helvetica"+n,"Impact, Charcoal"+n,"Lucida Sans Unicode, Lucida Grande"+n,"Tahoma, Geneva"+n,"Times New Roman, Times, serif","Trebuchet MS, Helvetica"+n,"Verdana, Geneva"+n].map(function(r){return{id:r,label:r.split(",")[0]}}),this.fixedFontSizes=["medium","xx-small","x-small","small","large","x-large","xx-large","smaller","larger","length","initial","inherit"],this.fixedLetSpace=["normal","initial","inherit"],this.requireFlex={display:["flex"]},this.init()}return o.prototype.__sub=function(n){var e=this;return function(){return n.map(function(t){if((0,U.isString)(t))return e.get(t);var r=t.extend,i=yF(t,["extend"]);return Ka(Ka({},e.get(r)),i)})}},o.prototype.init=function(){var n=this,e=this,t=e.fixedValues,r=e.requireFlex,i=e.typeNumber;this.props={};var s=[["text-shadow-h",{type:i,default:"0",units:this.unitsSizeNoPerc}],["top",{default:"auto",units:this.unitsSize,fixedValues:t},"text-shadow-h"],["right",{},"top"],["bottom",{},"top"],["left",{},"top"],["margin-top",{default:"0"},"top"],["margin-right",{},"margin-top"],["margin-bottom",{},"margin-top"],["margin-left",{},"margin-top"],["padding-top",{min:0},"margin-top"],["padding-right",{},"padding-top"],["padding-bottom",{},"padding-top"],["padding-left",{},"padding-top"],["width",{min:0},"top"],["min-width",{},"width"],["max-width",{},"width"],["height",{},"width"],["min-height",{},"width"],["max-height",{},"width"],["flex-basis",{requiresParent:r},"width"],["font-size",{default:"medium",fixedValues:this.fixedFontSizes},"width"],["letter-spacing",{default:"normal",fixedValues:this.fixedLetSpace},"top"],["line-height",{},"letter-spacing"],["text-shadow-v",{},"text-shadow-h"],["text-shadow-blur",{min:0},"text-shadow-h"],["border-radius-c",{property:"border-radius",fixedValues:void 0},"padding-top"],["border-top-left-radius",{},"border-radius-c"],["border-top-right-radius",{},"border-radius-c"],["border-bottom-left-radius",{},"border-radius-c"],["border-bottom-right-radius",{},"border-radius-c"],["border-width",{units:this.unitsSizeNoPerc},"border-radius-c"],["box-shadow-h",{},"text-shadow-h"],["box-shadow-v",{},"text-shadow-h"],["box-shadow-blur",{default:"5px"},"text-shadow-blur"],["box-shadow-spread",{},"text-shadow-h"],["transition-duration",{default:"2s",units:this.unitsTime},"border-radius-c"],["perspective",{},"border-radius-c"],["order",{type:i,default:"0",requiresParent:r}],["flex-grow",{},"order"],["flex-shrink",{default:"1"},"order"],["float",{type:this.typeRadio,default:"none",options:this.optsFloat}],["position",{default:"static",options:this.optsPos},"float"],["text-align",{default:"left",options:this.optsTextAlign},"float"],["color",{type:this.typeColor,default:"black",full:!0}],["text-shadow-color",{},"color"],["border-color",{},"color"],["box-shadow-color",{},"color"],["background-color",{default:"none"},"color"],["background-image",{type:this.typeFile,functionName:"url",default:"none",full:!0}],["opacity",{type:this.typeSlider,default:"1",min:0,max:1,step:.01,full:!0}],["display",{type:this.typeSelect,default:"block",options:this.opstDisplay}],["flex-direction",{default:"row",options:this.optsDir,requires:r},"display"],["flex-wrap",{default:"nowrap",options:this.optsWrap},"flex-direction"],["justify-content",{default:"flex-start",options:this.optsJustCont},"flex-wrap"],["align-items",{default:"stretch",options:this.optsFlexAlign},"flex-wrap"],["align-content",{options:this.optsAlignCont},"align-items"],["align-self",{default:"auto",options:this.optsAlignSelf,requiresParent:r},"display"],["font-family",{default:"Arial, Helvetica, sans-serif",options:this.optsFonts},"display"],["font-weight",{default:"400",options:this.optsWeight},"display"],["border-style",{default:"solid",options:this.optsBorderStyle},"display"],["box-shadow-type",{default:"",options:this.optsShadowType},"display"],["background-repeat",{default:"repeat",options:this.optsBgRepeat},"display"],["background-position",{default:"left top",options:this.optsBgPos},"display"],["background-attachment",{default:"scroll",options:this.optsBgAttach},"display"],["background-size",{default:"auto",options:this.optsBgSize},"display"],["transition-property",{default:"width",options:this.optsTransitProp},"display"],["transition-timing-function",{default:"ease",options:this.optsTransitFn},"display"],["cursor",{default:"auto",options:this.optsCursor},"display"],["overflow",{default:"visible",options:this.optsOverflow},"display"],["overflow-x",{},"overflow"],["overflow-y",{},"overflow"],["margin",{type:this.typeComposite,properties:this.__sub([{extend:"margin-top",id:"margin-top-sub"},{extend:"margin-right",id:"margin-right-sub"},{extend:"margin-bottom",id:"margin-bottom-sub"},{extend:"margin-left",id:"margin-left-sub"}])}],["padding",{properties:this.__sub([{extend:"padding-top",id:"padding-top-sub"},{extend:"padding-right",id:"padding-right-sub"},{extend:"padding-bottom",id:"padding-bottom-sub"},{extend:"padding-left",id:"padding-left-sub"}])},"margin"],["border",{properties:this.__sub([{extend:"border-width",id:"border-width-sub"},{extend:"border-style",id:"border-style-sub"},{extend:"border-color",id:"border-color-sub"}])},"margin"],["border-radius",{properties:this.__sub([{extend:"border-top-left-radius",id:"border-top-left-radius-sub"},{extend:"border-top-right-radius",id:"border-top-right-radius-sub"},{extend:"border-bottom-right-radius",id:"border-bottom-right-radius-sub"},{extend:"border-bottom-left-radius",id:"border-bottom-left-radius-sub"}])},"margin"],["transition",{type:this.typeStack,properties:this.__sub([{extend:"transition-property",id:"transition-property-sub"},{extend:"transition-duration",id:"transition-duration-sub"},{extend:"transition-timing-function",id:"transition-timing-function-sub"}])}],["box-shadow",{preview:!0,layerLabel:function(u,c){var f=c.values,h=f["box-shadow-h"],v=f["box-shadow-v"],m=f["box-shadow-blur"],_=f["box-shadow-spread"];return"".concat(h," ").concat(v," ").concat(m," ").concat(_)},properties:this.__sub(["box-shadow-h","box-shadow-v","box-shadow-blur","box-shadow-spread","box-shadow-color","box-shadow-type"])},"transition"],["text-shadow",{default:"none",layerLabel:function(u,c){var f=c.values,h=f["text-shadow-h"],v=f["text-shadow-v"],m=f["text-shadow-blur"];return"".concat(h," ").concat(v," ").concat(m)},properties:this.__sub(["text-shadow-h","text-shadow-v","text-shadow-blur","text-shadow-color"])},"box-shadow"],["background",{detached:!0,layerLabel:function(u,c){var f=c.values,h=f["background-repeat-sub"]||"",v=f["background-position-sub"]||"",m=f["background-attachment-sub"]||"",_=f["background-size-sub"]||"";return[h,v,m,_].join(" ")},properties:this.__sub([{extend:"background-image",id:"background-image-sub"},{extend:"background-repeat",id:"background-repeat-sub"},{extend:"background-position",id:"background-position-sub"},{extend:"background-attachment",id:"background-attachment-sub"},{extend:"background-size",id:"background-size-sub"}])},"box-shadow"],["transform",{type:"stack",layerSeparator:" ",fromStyle:function(u,c){var f=c.property,h=c.name,v=u[h]||"",m=f.getLayerSeparator();return v?v.split(m).map(function(_){var C=f.__parseFn(_),T=C.name,k=C.value;return{"transform-type":T,"transform-value":k}}):[]},toStyle:function(u,c){var f,h=c.name;return f={},f[h]="".concat(u["transform-type"],"(").concat(u["transform-value"],")"),f},properties:[{property:"transform-type",name:"Type",type:this.typeSelect,default:"rotateZ",full:!0,options:[{id:"scaleX",propValue:{units:[""],step:.01}},{id:"scaleY",propValue:{units:[""],step:.01}},{id:"scaleZ",propValue:{units:[""],step:.01}},{id:"rotateX",propValue:{units:this.unitsAngle,step:1}},{id:"rotateY",propValue:{units:this.unitsAngle,step:1}},{id:"rotateZ",propValue:{units:this.unitsAngle,step:1}},{id:"translateX",propValue:{units:this.unitsSize,step:1}},{id:"translateY",propValue:{units:this.unitsSize,step:1}}],onChange:function(u){var c=u.property,f=u.to;if(f.value){var h=c.getOption(),v=Ka({},h.propValue||{}),m=c.getParent().getProperty("transform-value"),_=m.getUnit();(!_||(v==null?void 0:v.units.indexOf(_))<0)&&(v.unit=(v==null?void 0:v.units[0])||""),m.up(v)}}},{property:"transform-value",type:this.typeNumber,default:"0",full:!0}]}]];return s.forEach(function(u){var c=u[0],f=u[1],h=u[2];n.add(c,f||{},{from:h})}),this},o.prototype.add=function(n,e,t){e===void 0&&(e={}),t===void 0&&(t={});var r=t.from||"",i=this.props[r||n]||{},s=Ka(Ka(Ka({},i),{property:n}),e);return s.properties&&(0,U.isFunction)(s.properties)&&(s.properties=s.properties()),this.props[n]=s,s},o.prototype.get=function(n){return this.props[n]},o.prototype.build=function(n){var e=this,t=[],r=(0,U.isString)(n)?[n]:n;return r.forEach(function(i){t.push(e.get(i)||{property:i})}),t},o}();const _F=wF;var bF=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),xF=function(o,n){return Object.defineProperty?Object.defineProperty(o,"raw",{value:n}):o.raw=n,o},CF=function(o){bF(n,o);function n(e){var t=o.call(this,e)||this,r=e.config||{},i=t.model,s=r.em;return t.config=r,t.em=s,t.pfx=r.stylePrefix||"",t.listenTo(i,"destroy remove",t.remove),t.listenTo(i,"change:open",t.updateOpen),t.listenTo(i,"change:visible",t.updateVisibility),t}return n.prototype.template=function(e){var t,r=e.pfx,i=e.label,s=(t=this.em)===null||t===void 0?void 0:t.getConfig().icons,u=(s==null?void 0:s.caret)||"",c="".concat(r,"sector-");return Vo(ub||(ub=xF([`
      <div class="`,`title" data-sector-title>
        <div class="`,'caret">$',`</div>
        <div class="`,'label">',`</div>
      </div>
    `],[`
      <div class="`,`title" data-sector-title>
        <div class="`,'caret">$',`</div>
        <div class="`,'label">',`</div>
      </div>
    `])),c,c,u,c,i)},n.prototype.events=function(){return{"click [data-sector-title]":"toggle"}},n.prototype.updateOpen=function(){var e=this,t=e.$el,r=e.model,i=e.pfx,s=r.isOpen();t[s?"addClass":"removeClass"]("".concat(i,"open")),this.getPropertiesEl().style.display=s?"":"none"},n.prototype.updateVisibility=function(){this.el.style.display=this.model.isVisible()?"":"none"},n.prototype.getPropertiesEl=function(){var e=this,t=e.$el,r=e.pfx;return t.find(".".concat(r,"properties")).get(0)},n.prototype.toggle=function(){var e=this.model;e.setOpen(!e.get("open"))},n.prototype.renderProperties=function(){var e=this,t=e.model,r=e.config,i=t.get("properties");if(i){var s=new py({collection:i,config:r});this.$el.append(s.render().el)}},n.prototype.render=function(){var e=this,t=e.pfx,r=e.model,i=e.$el,s=r.getId(),u=r.getName();return i.html(this.template({pfx:t,label:u})),this.renderProperties(),i.attr("class","".concat(t,"sector ").concat(t,"sector__").concat(s," no-select")),this.updateOpen(),this},n}(gt.Ss);const SF=CF;var ub,OF=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),TF=function(o){OF(n,o);function n(e){e===void 0&&(e={});var t=o.call(this,e)||this,r=e.module,i=e.config,s=t.collection;return t.pfx=(i==null?void 0:i.stylePrefix)||"",t.ppfx=(i==null?void 0:i.pStylePrefix)||"",t.config=i,t.module=r,t.listenTo(s,"add",t.addTo),t.listenTo(s,"reset",t.render),t}return n.prototype.remove=function(){var e=this;return gt.Ss.prototype.remove.apply(this,arguments),["config","module","em"].forEach(function(t){return e[t]={}}),this},n.prototype.addTo=function(e,t,r){r===void 0&&(r={}),this.addToCollection(e,null,r)},n.prototype.addToCollection=function(e,t,r){r===void 0&&(r={});var i=this,s=i.config,u=i.el,c=t||u,f=new SF({model:e,config:s}).render().el;return(0,wt.Sc)(c,f,r.at),f},n.prototype.render=function(){var e=this,t=this,r=t.$el,i=t.pfx,s=t.ppfx;r.empty();var u=document.createDocumentFragment();return this.collection.each(function(c){return e.addToCollection(c,u)}),r.append(u),r.addClass("".concat(i,"sectors ").concat(s,"one-bg ").concat(s,"two-color")),this},n}(gt.Ss);const EF=TF;var PF=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Ga=function(){return Ga=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},Ga.apply(this,arguments)},cb=function(o,n,e){if(e||arguments.length===2)for(var t=0,r=n.length,i;t<r;t++)(i||!(t in n))&&(i||(i=Array.prototype.slice.call(n,0,t)),i[t]=n[t]);return o.concat(i||Array.prototype.slice.call(n))},v1="style",sf="".concat(v1,":"),vy="".concat(sf,"sector"),kF="".concat(vy,":add"),AF="".concat(vy,":remove"),MF="".concat(vy,":update"),gy="".concat(sf,"property"),DF="".concat(gy,":add"),LF="".concat(gy,":remove"),jF="".concat(gy,":update"),g1="".concat(sf,"layer:select"),om="".concat(sf,"target"),IF="".concat(sf,"custom"),fb=function(o){return o||o===0},NF={all:v1,sectorAdd:kF,sectorRemove:AF,sectorUpdate:MF,propertyAdd:DF,propertyRemove:LF,propertyUpdate:jF,layerSelect:g1,target:om,custom:IF},RF=function(o){PF(n,o);function n(e){var t=o.call(this,e,"StyleManager",new mF([],{em:e}),NF,oR)||this;t.Sector=h1,t.storageKey="",(0,U.bindAll)(t,"__clearStateTarget");var r=t.config,i=r.pStylePrefix;i&&(r.stylePrefix=i+r.stylePrefix),t.builtIn=new _F,t.properties=new hy([],{em:e,module:t}),t.sectors=t.all;var s=new gt.Kx({targets:[]});t.model=s;var u=no.I.update,c="component:toggled ".concat(u,":classes change:state change:device frame:resized selector:type");t.upAll=(0,U.debounce)(function(){return t.__upSel()},0),s.listenTo(e,c,t.upAll),s.listenTo(e,"component:toggled",t.__clearStateTarget);var f=(0,U.debounce)(function(){t.__upProps(),t.__trgCustom()},0);s.listenTo(e,"styleable:change undo redo",f);var h=(0,U.debounce)(function(){return t.__trgCustom()},0);return s.listenTo(e,"".concat(g1," ").concat(om),h),s.on("change:lastTarget",function(){return e.trigger(om,t.getSelected())}),t}return n.prototype.__upSel=function(){this.select(this.em.getSelectedAll())},n.prototype.__trgCustom=function(e){e===void 0&&(e={}),this.__ctn=this.__ctn||e.container,this.em.trigger(this.events.custom,{container:this.__ctn})},n.prototype.__trgEv=function(e){for(var t,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];(t=this.em).trigger.apply(t,cb([e],r,!1))},n.prototype.__clearStateTarget=function(){var e=this,t=this.em,r=this.__getStateTarget();r&&(t==null||t.skip(function(){t.Css.remove(r),e.model.set({stateTarget:null})}))},n.prototype.onLoad=function(){this.sectors.add(this.config.sectors,{silent:!0})},n.prototype.postRender=function(){this.__appendTo()},n.prototype.addSector=function(e,t,r){r===void 0&&(r={});var i=this.getSector(e);return i||(t.id=e,i=this.sectors.add(t,r)),i},n.prototype.getSector=function(e,t){t===void 0&&(t={});var r=this.sectors.where({id:e})[0];return!r&&t.warn&&this._logNoSector(e),r||null},n.prototype.getSectors=function(e){e===void 0&&(e={});var t=this.sectors,r=t&&t.models?e.array?cb([],t.models,!0):t:[];return e.visible?r.filter(function(i){return i.isVisible()}):r},n.prototype.removeSector=function(e){return this.getSectors().remove(this.getSector(e,{warn:!0}))},n.prototype.addProperty=function(e,t,r){r===void 0&&(r={});var i=this.getSector(e,{warn:!0}),s;return i&&(s=i.addProperty(t,r)),s},n.prototype.getProperty=function(e,t){var r=this.getSector(e,{warn:!0}),i;return r&&(i=r.properties.filter(function(s){return s.get("property")===t||s.get("id")===t})[0]),i},n.prototype.getProperties=function(e){var t,r=this.getSector(e,{warn:!0});return r&&(t=r.properties),t},n.prototype.removeProperty=function(e,t){var r=this.getProperties(e);return r?r.remove(this.getProperty(e,t)):null},n.prototype.select=function(e,t){var r=this;t===void 0&&(t={});var i=this.em,s=(0,U.isArray)(e)?e:[e],u=t.stylable,c=i.Css,f=[];s.filter(Boolean).forEach(function(T){var k=T;if((0,U.isString)(T)){var P=c.getRule(T)||c.setRule(T);!(0,U.isUndefined)(u)&&P.set({stylable:u}),k=P}f.push(k)});var h=t.component||f.filter(function(T){return(0,Xe.isComponent)(T)}).reverse()[0];f=f.map(function(T){return r.getModelToStyle(T)});var v=i.getState(),m=f.slice().reverse()[0],_=this.getParentRules(m,{state:v,component:h}),C=this.__getStateTarget();return i.skip(function(){var T;if(v&&(!((T=m==null?void 0:m.getState)===null||T===void 0)&&T.call(m))){var k=m.getStyle();C?C.setStyle(k):C=c.getAll().add({selectors:"gjs-selected",style:k,shallow:!0,important:!0})}else C&&(c.remove(C),C=void 0)}),this.model.set({targets:f,lastTarget:m,lastTargetParents:_,stateTarget:C,component:h}),this.__upProps(t),f},n.prototype.getSelected=function(){return this.model.get("lastTarget")},n.prototype.getSelectedAll=function(){return this.model.get("targets")},n.prototype.getSelectedParents=function(){return this.model.get("lastTargetParents")||[]},n.prototype.__getStateTarget=function(){return this.model.get("stateTarget")},n.prototype.addStyleTargets=function(e,t){this.getSelectedAll().map(function(s){return s.addStyle(e,t)});var r=this.getSelected();r&&this.__emitCmpStyleUpdate(e);var i=this.__getStateTarget();r&&(i==null||i.setStyle(r.getStyle(),t))},n.prototype.getBuiltIn=function(e){return this.builtIn.get(e)},n.prototype.getBuiltInAll=function(){return this.builtIn.props},n.prototype.addBuiltIn=function(e,t){return this.builtIn.add(e,t)},n.prototype.getModelToStyle=function(e,t){t===void 0&&(t={});var r=this.em,i=t.skipAdd;if(r&&(e!=null&&e.toHTML)){var s=r.getConfig(),u=r.UndoManager,c=r.Css,f=r.Selectors,h=f?f.getConfig():{},v=s.devicePreviewMode?"":r.get("state"),m=e.get("classes"),_=m.getStyleable(),C=_.length,T=!h.componentFirst||t.useClasses,k={noCount:1},P={state:v,addOpts:k};u.skip(function(){var L;if(C&&T){var D=r.getCurrentMedia();L=c.get(_,v,D),!L&&!i&&(L=c.add(_,v,D,{},k))}else if(s.avoidInlineStyle){var V=e.getId();L=c.getIdRule(V,P),!L&&!i&&(L=c.setIdRule(V,{},P)),e.is("wrapper")&&L.set("wrapper",1,k)}L&&(e=L)})}return e},n.prototype.getParentRules=function(e,t){var r=t===void 0?{}:t,i=r.state,s=r.component,u=this.em,c=[];if(u&&e){var f=s,h=u.Css,v=u.CodeManager.getGenerator("css"),m=e.toHTML?e:e.getComponent(),_={array:!0},C=[],T=[],k=[],P=[],L=[],D=function(pe){return pe.length?h.getRules().filter(function(ne){var me=ne.getSelectors().map(function(Y){return Y.getFullName()});return me.length===0?!1:me.every(function(Y){return pe.indexOf(Y)>=0})}):[]},V=function(pe){return pe?h.getRules().filter(function(ne){return ne.selectorsToString()===pe}):[]};if(m)C=h.getRules("#".concat(m.getId())),T=V(m.get("tagName")),P=f?D(f.getSelectors().getFullName(_)):[],L=P.concat(T).concat(C);else{C=f?h.getRules("#".concat(f.getId())):[],T=V((f==null?void 0:f.get("tagName"))||"");var re=(f==null?void 0:f.getSelectors().getFullName(_))||[],_e=re.filter(function(pe){return e.getSelectors().getFullName(_).findIndex(function(ne){return ne===pe})===-1});k=D(_e.concat(e.getSelectors().getFullName(_))),L=T.concat(C).concat(k)}var Q=L.filter(function(pe){return(0,U.isUndefined)(i)?1:pe.get("state")===i}).sort(v.sortRules).reverse();c=Q.slice(Q.indexOf(e)+1)}return c},n.prototype.addType=function(e,t){this.properties.addType(e,t)},n.prototype.getType=function(e){return this.properties.getType(e)},n.prototype.getTypes=function(){return this.properties.getTypes()},n.prototype.createType=function(e,t){var r=t===void 0?{}:t,i=r.model,s=i===void 0?{}:i,u=r.view,c=u===void 0?{}:u,f=this.config,h=this.getType(e);if(h)return new h.view(Ga({model:new h.model(s),config:f},c))},n.prototype.render=function(){var e=this,t=e.config,r=e.em,i=e.SectView,s=i&&i.el;return this.SectView=new EF({el:s,em:r,config:t,module:this,collection:this.sectors}),this.SectView.render().el},n.prototype._logNoSector=function(e){var t=this.em;t&&t.logWarning("'".concat(e,"' sector not found"))},n.prototype.__emitCmpStyleUpdate=function(e,t){t===void 0&&(t={});var r=this.em;if(!e.__p){var i=this.getSelectedAll(),s=t.components||r.getSelectedAll(),u=Array.isArray(s)?s:[s],c=Ga({},e);delete c.__p,u.forEach(function(f){return!i.includes(f)&&f.__onStyleChange(c)})}},n.prototype.__upProps=function(e){var t=this;e===void 0&&(e={});var r=this.getSelected();if(r){var i=this.sectors,s=this.model.get("component"),u=this.getSelectedParents(),c=r.getStyle(),f=u.map(function(h){return{target:h,style:h.getStyle()}});i.map(function(h){h.getProperties().map(function(v){t.__upProp(v,c,f,e)})}),i.forEach(function(h){var v=h.getProperties();v.forEach(function(_){var C=_.__checkVisibility({target:r,component:s,sectors:i});_.set("visible",C)});var m=v.some(function(_){return _.isVisible()});h.set("visible",m)})}},n.prototype.__upProp=function(e,t,r,i){var s=this,u=e.getName(),c=t[u],f=fb(c),h=e.getType()==="stack",v=e.getType()==="composite",m=Ga(Ga({},i),{__up:!0}),_=!v&&!h,C=e,T=e,k=h?C.__getLayersFromStyle(t):[],P=v?T.__getPropsFromStyle(t):{},L=f?c:null,D=null;if(h&&k===null||v&&P===null){var V=h?"__getLayersFromStyle":"__getPropsFromStyle",re=r.filter(function(me){return C[V](me.style)!==null})[0];if(re){L=re.style[u],D=re.target;var _e=C[V](re.style);h?k=_e:P=_e}}else if(!f){L=null;var re=r.filter(function(Y){return fb(Y.style[u])})[0];re&&(L=re.style[u],D=re.target)}if(e.__setParentTarget(D),_&&e.__getFullValue()!==L&&e.upValue(L,m),h&&C.__setLayers(k||[],{isEmptyValue:C.isEmptyValueStyle(t)}),v){var Q=T.getProperties();if(T.isDetached()){var pe=T.__getPropsFromStyle(t,{byName:!0})||{},ne=r.map(function(me){return Ga(Ga({},me),{style:T.__getPropsFromStyle(me.style,{byName:!0})||{}})});Q.map(function(me){return s.__upProp(me,pe,ne,i)})}else T.__setProperties(P||{},m),T.getProperties().map(function(me){return me.__setParentTarget(D)})}},n.prototype.destroy=function(){var e;[this.properties,this.sectors].forEach(function(t){t.reset(),t.stopListening()}),(e=this.SectView)===null||e===void 0||e.remove(),this.model.stopListening(),this.upAll.cancel()},n}(vs);const FF=RF;var VF=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),eo=function(){return eo=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},eo.apply(this,arguments)},Nv=function(o,n,e,t){function r(i){return i instanceof e?i:new e(function(s){s(i)})}return new(e||(e=Promise))(function(i,s){function u(h){try{f(t.next(h))}catch(v){s(v)}}function c(h){try{f(t.throw(h))}catch(v){s(v)}}function f(h){h.done?i(h.value):r(h.value).then(u,c)}f((t=t.apply(o,n||[])).next())})},Rv=function(o,n){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},t,r,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(f){return function(h){return c([f,h])}}function c(f){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,f[0]&&(e=0)),e;)try{if(t=1,r&&(i=f[0]&2?r.return:f[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,f[1])).done)return i;switch(r=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return e.label++,{value:f[1],done:!1};case 5:e.label++,r=f[1],f=[0];continue;case 7:f=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){e=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){e.label=f[1];break}if(f[0]===6&&e.label<i[1]){e.label=i[1],i=f;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(f);break}i[2]&&e.ops.pop(),e.trys.pop();continue}f=n.call(o,e)}catch(h){f=[6,h],r=0}finally{t=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},zF=function(o,n){var e={};for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&n.indexOf(t)<0&&(e[t]=o[t]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(o);r<t.length;r++)n.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(o,t[r])&&(e[t[r]]=o[t[r]]);return e},HF=function(o,n,e){if(e||arguments.length===2)for(var t=0,r=n.length,i;t<r;t++)(i||!(t in n))&&(i||(i=Array.prototype.slice.call(n,0,t)),i[t]=n[t]);return o.concat(i||Array.prototype.slice.call(n))};lk().$=Hn.default;var UF=[m2,i2,j2,$N,Oj,Lk,cj,FF,QL,$2,RN,hN,rR,Qj,_I,ZA,cI,IL],BF=[BI,wL,ZI,rL];uk({$:Hn.default});var db={debug:console.log,info:console.info,warning:console.warn,error:console.error},WF=function(o){VF(n,o);function n(e){e===void 0&&(e={});var t=o.call(this)||this;t.__skip=!1,t.defaultRunning=!1,t.destroyed=!1,t._config=e;var r=t.config;t.set("Config",e),t.set("modules",[]),t.set("toLoad",[]),t.set("storables",[]),t.set("selected",new dk),t.set("dmode",r.dragMode);var i=r.el,s=r.log,u=s===!0?(0,U.keys)(db):(0,U.isArray)(s)?s:[];return(0,U.bindAll)(t,"initBaseColorPicker"),i&&r.fromElement&&(r.components=i.innerHTML),t.attrsOrig=i?(0,U.toArray)(i.attributes).reduce(function(c,f){return c[f.nodeName]=f.nodeValue,c},{}):"",r.components&&!r.pageManager&&(r.pageManager={pages:[{component:r.components}]}),UF.forEach(function(c){return t.loadModule(c)}),BF.forEach(function(c){return t.loadStorableModule(c)}),t.on("change:componentHovered",t.componentHovered,t),t.on("change:changesCount",t.updateChanges,t),t.on("change:readyLoad change:readyCanvas",t._checkReady,t),u.forEach(function(c){return t.listenLog(c)}),[{from:"change:selectedComponent",to:"component:toggled"}].forEach(function(c){var f=c.from,h=c.to;t.listenTo(t,f,function(){for(var v=[],m=0;m<arguments.length;m++)v[m]=arguments[m];t.trigger.apply(t,HF([h],v,!1)),t.logWarning("The event '".concat(f,"' is deprecated, replace it with '").concat(h,"'"))})}),t}return n.prototype.defaults=function(){return{editing:0,selected:0,clipboard:null,dmode:0,componentHovered:null,previousModel:null,changesCount:0,storables:[],modules:[],toLoad:[],opened:{},device:""}},Object.defineProperty(n.prototype,"storables",{get:function(){return this.get("storables")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"modules",{get:function(){return this.get("modules")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"toLoad",{get:function(){return this.get("toLoad")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"selected",{get:function(){return this.get("selected")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"shallow",{get:function(){return this.get("shallow")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"I18n",{get:function(){return this.get("I18n")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Utils",{get:function(){return this.get("Utils")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Commands",{get:function(){return this.get("Commands")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Keymaps",{get:function(){return this.get("Keymaps")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Modal",{get:function(){return this.get("Modal")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Panels",{get:function(){return this.get("Panels")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"CodeManager",{get:function(){return this.get("CodeManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"UndoManager",{get:function(){return this.get("UndoManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"RichTextEditor",{get:function(){return this.get("RichTextEditor")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Canvas",{get:function(){return this.get("Canvas")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Editor",{get:function(){return this.get("Editor")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Components",{get:function(){return this.get("DomComponents")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Css",{get:function(){return this.get("CssComposer")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Blocks",{get:function(){return this.get("BlockManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Selectors",{get:function(){return this.get("SelectorManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Storage",{get:function(){return this.get("StorageManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Traits",{get:function(){return this.get("TraitManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Parser",{get:function(){return this.get("Parser")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Layers",{get:function(){return this.get("LayerManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Assets",{get:function(){return this.get("AssetManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Devices",{get:function(){return this.get("DeviceManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Pages",{get:function(){return this.get("PageManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Styles",{get:function(){return this.get("StyleManager")},enumerable:!1,configurable:!0}),n.prototype._checkReady=function(){this.get("readyLoad")&&this.get("readyCanvas")&&!this.get("ready")&&this.set("ready",!0)},n.prototype.getContainer=function(){return this.config.el},n.prototype.listenLog=function(e){this.listenTo(this,"log:".concat(e),db[e])},Object.defineProperty(n.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),n.prototype.getConfig=function(e){var t=this.config;return(0,U.isUndefined)(e)?t:t[e]},n.prototype.loadOnStart=function(){var e=this,t=this.config,r=t.projectData,i=t.headless,s=this.Storage;this.toLoad.reverse().forEach(function(f){return f.onLoad()});var u=function(){e.modules.forEach(function(f){return f.postLoad&&f.postLoad(e)}),e.set("readyLoad",1)};i?(r&&this.loadData(r),u()):this._storageTimeout=setTimeout(function(){return Nv(e,void 0,void 0,function(){var f;return Rv(this,function(h){switch(h.label){case 0:return r?(this.loadData(r),[3,5]):[3,1];case 1:if(!(s!=null&&s.canAutoload()))return[3,5];h.label=2;case 2:return h.trys.push([2,4,,5]),[4,this.load()];case 3:return h.sent(),[3,5];case 4:return f=h.sent(),this.logError(f),[3,5];case 5:return u(),[2]}})})});var c=new n({noticeOnUnload:!1,storageManager:!1,undoManager:!1});c.Pages.onLoad(),c.Canvas.postLoad(),this.set("shallow",c)},n.prototype.updateChanges=function(e,t,r){var i=this,s=this.Storage,u=this.getDirtyCount();r.isClear||(this.updateItr&&clearTimeout(this.updateItr),this.updateItr=setTimeout(function(){return i.trigger("update")})),this.config.noticeOnUnload&&(window.onbeforeunload=u?function(){return!0}:null),s.isAutosave()&&u>=s.getStepsBeforeSave()&&this.store().catch(function(c){return i.logError(c)})},n.prototype.loadModule=function(e){var t=new e(this);return this.set(t.name,t),t.onLoad&&this.toLoad.push(t),this.modules.push(t),t},n.prototype.loadStorableModule=function(e){var t=this.loadModule(e);return this.storables.push(t),t},n.prototype.init=function(e,t){t===void 0&&(t={}),this.destroyed&&(this.initialize(t),this.destroyed=!1),this.set("Editor",e)},n.prototype.getEditor=function(){return this.get("Editor")},n.prototype.handleUpdates=function(e,t,r){var i=this;r===void 0&&(r={}),!(this.__skip||r.temporary||r.noCount||r.avoidStore||!this.get("ready"))&&(this.timedInterval&&clearTimeout(this.timedInterval),this.timedInterval=setTimeout(function(){var s=i.getDirtyCount()||0;r.unset;var u=zF(r,["unset"]);i.set("changesCount",s+1,u)},0))},n.prototype.changesUp=function(e){this.handleUpdates(0,0,e)},n.prototype.componentHovered=function(e,t,r){var i=this.previous("componentHovered");i&&this.trigger("component:unhovered",i,r),t&&this.trigger("component:hovered",t,r)},n.prototype.getSelected=function(){return this.selected.lastComponent()},n.prototype.getSelectedAll=function(){return this.selected.allComponents()},n.prototype.setSelected=function(e,t){var r=this;t===void 0&&(t={});var i=t.event,s=i&&(i.ctrlKey||i.metaKey),u=(i||{}).shiftKey,c=((0,U.isArray)(e)?e:[e]).map(function(m){var _,C;return((C=(_=m==null?void 0:m.delegate)===null||_===void 0?void 0:_.select)===null||C===void 0?void 0:C.call(_,m))||m}).filter(Boolean),f=this.getSelectedAll(),h=this.getConfig().multipleSelection,v=(0,U.isArray)(e);(v||!e)&&this.removeSelected(f.filter(function(m){return!(0,U.contains)(c,m)})),c.forEach(function(m){if(m&&(r.trigger("component:select:before",m,t),!m.get("selectable")||t.abort))if(t.useValid){for(var _=m.parent();_&&!_.get("selectable");)_=_.parent();m=_}else return;if(s&&h)return r.toggleSelected(m);if(u&&h){r.clearSelection(r.Canvas.getWindow());var C=m.collection,T=m.index(),k,P;if(r.getSelectedAll().forEach(function(L){var D=L.collection,V=L.index();D===C&&(V<T?k=(0,U.isUndefined)(k)?V:Math.max(k,V):V>T&&(P=(0,U.isUndefined)(P)?V:Math.min(P,V)))}),!(0,U.isUndefined)(k))for(;k!==T;)r.addSelected(C.at(k)),k++;if(!(0,U.isUndefined)(P))for(;P!==T;)r.addSelected(C.at(P)),P--;return r.addSelected(m)}!v&&r.removeSelected(f.filter(function(L){return L!==m})),r.addSelected(m,t)})},n.prototype.addSelected=function(e,t){var r=this;t===void 0&&(t={});var i=(0,U.isArray)(e)?e:[e];i.forEach(function(s){var u=r.selected;if(!(!s||!s.get("selectable")||s.parents().some(function(f){return u.hasComponent(f)}))){t.forceChange&&r.removeSelected(s,t);var c=u.allComponents().filter(function(f){return(0,U.contains)(f.parents(),s)});c.forEach(function(f){return r.removeSelected(f,t)}),u.addComponent(s,t),r.trigger("component:select",s,t),r.Canvas.addSpot({type:mi.F.Select,component:s})}})},n.prototype.removeSelected=function(e,t){var r=this;t===void 0&&(t={}),this.selected.removeComponent(e,t);var i=(0,U.isArray)(e)?e:[e];i.forEach(function(s){return r.Canvas.removeSpots({type:mi.F.Select,component:s})})},n.prototype.toggleSelected=function(e,t){var r=this;t===void 0&&(t={});var i=(0,U.isArray)(e)?e:[e];i.forEach(function(s){r.selected.hasComponent(s)?r.removeSelected(s,t):r.addSelected(s,t)})},n.prototype.setHovered=function(e,t){var r=this;t===void 0&&(t={});var i=function(c,f){var h=r,v=h.config,m=h.Canvas,_=r.getHovered(),C=r.getSelectedAll(),T=mi.F.Hover,k=mi.F.Spacing;r.set("componentHovered",c||null,f),_&&(m.removeSpots({type:T,component:_}),m.removeSpots({type:k,component:_})),c&&(m.addSpot({type:T,component:c}),(!C.includes(c)||v.showOffsetsSelected)&&m.addSpot({type:k,component:c}))};if(!e)return i();var s="component:hover";if(t.forceChange&&i(),this.trigger("".concat(s,":before"),e,t),!e.get("hoverable"))if(t.useValid&&!t.abort){for(var u=e.parent();u&&!u.get("hoverable");)u=u.parent();e=u}else return;t.abort||(i(e,t),this.trigger(s,e,t))},n.prototype.getHovered=function(){return this.get("componentHovered")},n.prototype.setComponents=function(e,t){return t===void 0&&(t={}),this.Components.setComponents(e,t)},n.prototype.getComponents=function(){var e=this.Components,t=this.CodeManager;if(!(!e||!t)){var r=e.getComponents();return t.getCode(r,"json")}},n.prototype.setStyle=function(e,t){t===void 0&&(t={});var r=this.Css;return r.clear(t),r.getAll().add(e,t),this},n.prototype.addStyle=function(e,t){t===void 0&&(t={});var r=this.getStyle().add(e,t);return(0,U.isArray)(r)?r:[r]},n.prototype.getStyle=function(){return this.Css.getAll()},n.prototype.setState=function(e){return this.set("state",e),this},n.prototype.getState=function(){return this.get("state")||""},n.prototype.getHtml=function(e){e===void 0&&(e={});var t=this.config,r=t.optsHtml,i=t.jsInHtml?this.getJs(e):"",s=e.component||this.Components.getComponent(),u=s?this.CodeManager.getCode(s,"html",eo(eo({},r),e)):"";return u+=i?"<script>".concat(i,"<\/script>"):"",u},n.prototype.getCss=function(e){e===void 0&&(e={});var t=this.config,r=t.optsCss,i=e.avoidProtected,s=(0,U.isUndefined)(e.keepUnusedStyles)?t.keepUnusedStyles:e.keepUnusedStyles,u=this.Css,c=e.component||this.Components.getComponent(),f=i?"":t.protectedCss,h=c&&this.CodeManager.getCode(c,"css",eo(eo({cssc:u,keepUnusedStyles:s},r),e));return c?e.json?h:f+h:""},n.prototype.getJs=function(e){e===void 0&&(e={});var t=e.component||this.Components.getWrapper();return t?this.CodeManager.getCode(t,"js").trim():""},n.prototype.store=function(e){return Nv(this,void 0,void 0,function(){var t;return Rv(this,function(r){switch(r.label){case 0:return t=this.storeData(),[4,this.Storage.store(t,e)];case 1:return r.sent(),this.clearDirtyCount(),[2,t]}})})},n.prototype.load=function(e){return Nv(this,arguments,void 0,function(t,r){var i;return r===void 0&&(r={}),Rv(this,function(s){switch(s.label){case 0:return[4,this.Storage.load(t)];case 1:return i=s.sent(),this.loadData(i),[4,(0,Xe.wait)()];case 2:return s.sent(),r.clear&&(this.UndoManager.clear(),this.clearDirtyCount()),[2,i]}})})},n.prototype.storeData=function(){var e={},t=this.getEditing();return t&&t.trigger("sync:content",{noCount:!0}),this.storables.forEach(function(r){e=eo(eo({},e),r.store(1))}),JSON.parse(JSON.stringify(e))},n.prototype.loadData=function(e){return e===void 0&&(e={}),(0,Xe.isEmptyObj)(e)||(this.storables.forEach(function(t){return t.clear()}),this.storables.forEach(function(t){return t.load(e)})),e},n.prototype.getDeviceModel=function(){var e=this.get("device");return this.Devices.get(e)},n.prototype.runDefault=function(e){e===void 0&&(e={});var t=this.get("Commands").get(this.config.defaultCommand);!t||this.defaultRunning||(t.stop(this,this,e),t.run(this,this,e),this.defaultRunning=!0)},n.prototype.stopDefault=function(e){e===void 0&&(e={});var t=this.get("Commands");if(t){var r=t.get(this.config.defaultCommand);!r||!this.defaultRunning||(r.stop(this,this,e),this.defaultRunning=!1)}},n.prototype.refreshCanvas=function(e){e===void 0&&(e={}),this.Canvas.refresh({spots:e.tools})},n.prototype.clearSelection=function(e){var t,r=e||window;(t=r.getSelection())===null||t===void 0||t.removeAllRanges()},n.prototype.getCurrentMedia=function(){var e=this.config,t=this.getDeviceModel(),r=e.mediaCondition,i=e.devicePreviewMode,s=t&&t.get("widthMedia");return t&&s&&!i?"(".concat(r,": ").concat(s,")"):""},n.prototype.getWrapper=function(){return this.Components.getWrapper()},n.prototype.setCurrentFrame=function(e){return this.set("currentFrame",e)},n.prototype.getCurrentFrame=function(){return this.get("currentFrame")},n.prototype.getCurrentFrameModel=function(){var e;return(e=this.getCurrentFrame()||{})===null||e===void 0?void 0:e.model},n.prototype.getIcon=function(e){var t=this.config.icons||{};return t[e]||""},n.prototype.getDirtyCount=function(){return this.get("changesCount")},n.prototype.clearDirtyCount=function(){return this.set({changesCount:0},{isClear:!0})},n.prototype.getZoomDecimal=function(){return this.Canvas.getZoomDecimal()},n.prototype.getZoomMultiplier=function(){return this.Canvas.getZoomMultiplier()},n.prototype.setDragMode=function(e){return this.set("dmode",e)},n.prototype.getDragMode=function(e){var t=(e==null?void 0:e.getDragMode())||this.get("dmode");return t||""},n.prototype.t=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.get("I18n");return r==null?void 0:r.t.apply(r,e)},n.prototype.inAbsoluteMode=function(e){return this.getDragMode(e)==="absolute"},n.prototype.destroyAll=function(){var e=this,t=this,r=t.config,i=t.view,s=this.getEditor(),u=(r.grapesjs||{}).editors,c=u===void 0?[]:u,f=this.get("shallow");this._storageTimeout&&clearTimeout(this._storageTimeout),f==null||f.destroyAll(),this.stopListening(),this.stopDefault(),(this.modules||[]).slice().reverse().forEach(function(h){return h.destroy()}),i!=null&&i.remove&&i.remove(),this.clear({silent:!0}),this.destroyed=!0,["_config","view","_previousAttributes","_events","_listeners"].forEach(function(h){return e[h]={}}),c.splice(c.indexOf(s),1),(0,Xe.hasWin)()&&(0,Hn.default)(r.el).empty().attr(this.attrsOrig)},n.prototype.getEditing=function(){var e=this.get("editing");return e&&e.model||void 0},n.prototype.setEditing=function(e){return this.set("editing",e),this},n.prototype.isEditing=function(){return!!this.get("editing")},n.prototype.log=function(e,t){t===void 0&&(t={});var r=t.ns,i=t.level,s=i===void 0?"debug":i;if(this.trigger("log",e,t),s&&this.trigger("log:".concat(s),e,t),r){var u="log-".concat(r);this.trigger(u,e,t),s&&this.trigger("".concat(u,":").concat(s),e,t)}},n.prototype.logInfo=function(e,t){this.log(e,eo(eo({},t),{level:"info"}))},n.prototype.logWarning=function(e,t){this.log(e,eo(eo({},t),{level:"warning"}))},n.prototype.logError=function(e,t){this.log(e,eo(eo({},t),{level:"error"}))},n.prototype.initBaseColorPicker=function(e,t){t===void 0&&(t={});var r=this.config,i=r.colorPicker,s=i===void 0?{}:i,u=r.el,c=r.stylePrefix;return(0,Hn.default)(e).spectrum(eo(eo({containerClassName:"".concat(c,"one-bg ").concat(c,"two-color"),appendTo:u||"body",maxSelectionSize:8,showPalette:!0,palette:[],showAlpha:!0,chooseText:"Ok",cancelText:"⨯"},t),s))},n.prototype.skip=function(e){this.__skip=!0;var t=this.UndoManager;t?t.skip(e):e(),this.__skip=!1},n.prototype.data=function(e,t,r){var i="_gjs-data";if(e[i]||(e[i]={}),(0,U.isUndefined)(r))return e[i][t];e[i][t]=r},n}(gt.Kx);const $F=WF;var KF=function(){var o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),GF=function(o){KF(n,o);function n(e){var t=o.call(this,{model:e})||this,r=e.Panels,i=e.UndoManager;return e.view=t,e.once("change:ready",function(){r.active(),r.disableButtons(),i.clear(),setTimeout(function(){e.trigger("load",e.Editor),e.clearDirtyCount()})}),t}return n.prototype.render=function(){var e=this,t=this,r=t.$el,i=t.model,s=i.Panels,u=i.Canvas,c=i.config,f=i.modules,h=c.stylePrefix,v=["".concat(h,"editor")];!c.customUI&&v.push("".concat(h,"one-bg ").concat(h,"two-color"));var m=(0,Hn.default)(c.el||"body ".concat(c.container));c.cssIcons&&(0,Xe.appendStyles)(c.cssIcons,{unique:!0,prepand:!0}),r.empty(),c.width&&m.css("width",c.width),c.height&&m.css("height",c.height),r.append(u.render()),r.append(s.render());var _=i.shallow,C=_.Canvas.render();return C.style.display="none",r.append(C),r.attr("class",v.join(" ")),m.addClass("".concat(h,"editor-cont")).empty().append(r),f.forEach(function(T){var k;return(k=T.postRender)===null||k===void 0?void 0:k.call(T,e)}),this},n}(gt.Ss);const YF=GF;var Ac=function(){return Ac=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},Ac.apply(this,arguments)},pb=function(o,n,e,t){function r(i){return i instanceof e?i:new e(function(s){s(i)})}return new(e||(e=Promise))(function(i,s){function u(h){try{f(t.next(h))}catch(v){s(v)}}function c(h){try{f(t.throw(h))}catch(v){s(v)}}function f(h){h.done?i(h.value):r(h.value).then(u,c)}f((t=t.apply(o,n||[])).next())})},hb=function(o,n){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},t,r,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(f){return function(h){return c([f,h])}}function c(f){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,f[0]&&(e=0)),e;)try{if(t=1,r&&(i=f[0]&2?r.return:f[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,f[1])).done)return i;switch(r=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return e.label++,{value:f[1],done:!1};case 5:e.label++,r=f[1],f=[0];continue;case 7:f=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){e=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){e.label=f[1];break}if(f[0]===6&&e.label<i[1]){e.label=i[1],i=f;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(f);break}i[2]&&e.ops.pop(),e.trys.pop();continue}f=n.call(o,e)}catch(h){f=[6,h],r=0}finally{t=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},XF=function(o,n,e){if(e||arguments.length===2)for(var t=0,r=n.length,i;t<r;t++)(i||!(t in n))&&(i||(i=Array.prototype.slice.call(n,0,t)),i[t]=n[t]);return o.concat(i||Array.prototype.slice.call(n))},qF=function(){function o(n,e){n===void 0&&(n={}),e===void 0&&(e={});var t;this.html=Vo,this.config=Ac(Ac(Ac({},Jw),n),{pStylePrefix:(t=n.stylePrefix)!==null&&t!==void 0?t:Jw.stylePrefix}),this.em=new $F(this.config),this.$=e.$,this.em.init(this),this.editor=this.em}return Object.defineProperty(o.prototype,"Config",{get:function(){return this.em.config},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"I18n",{get:function(){return this.em.I18n},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Utils",{get:function(){return this.em.Utils},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Commands",{get:function(){return this.em.Commands},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Keymaps",{get:function(){return this.em.Keymaps},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Modal",{get:function(){return this.em.Modal},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Panels",{get:function(){return this.em.Panels},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Canvas",{get:function(){return this.em.Canvas},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Parser",{get:function(){return this.em.Parser},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"CodeManager",{get:function(){return this.em.CodeManager},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"UndoManager",{get:function(){return this.em.UndoManager},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"RichTextEditor",{get:function(){return this.em.RichTextEditor},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Pages",{get:function(){return this.em.Pages},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Components",{get:function(){return this.em.Components},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"DomComponents",{get:function(){return this.em.Components},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Layers",{get:function(){return this.em.Layers},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"LayerManager",{get:function(){return this.em.Layers},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Css",{get:function(){return this.em.Css},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"CssComposer",{get:function(){return this.em.Css},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Storage",{get:function(){return this.em.Storage},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"StorageManager",{get:function(){return this.em.Storage},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Assets",{get:function(){return this.em.Assets},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"AssetManager",{get:function(){return this.em.Assets},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Blocks",{get:function(){return this.em.Blocks},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"BlockManager",{get:function(){return this.em.Blocks},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Traits",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"TraitManager",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Selectors",{get:function(){return this.em.Selectors},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"SelectorManager",{get:function(){return this.em.Selectors},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Styles",{get:function(){return this.em.Styles},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"StyleManager",{get:function(){return this.em.Styles},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Devices",{get:function(){return this.em.Devices},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"DeviceManager",{get:function(){return this.em.Devices},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"EditorModel",{get:function(){return this.em},enumerable:!1,configurable:!0}),o.prototype.getConfig=function(n){return this.em.getConfig(n)},o.prototype.getHtml=function(n){return this.em.getHtml(n)},o.prototype.getCss=function(n){return this.em.getCss(n)},o.prototype.getJs=function(n){return this.em.getJs(n)},o.prototype.getComponents=function(){return this.Components.getComponents()},o.prototype.getWrapper=function(){return this.Components.getWrapper()},o.prototype.setComponents=function(n,e){return e===void 0&&(e={}),this.em.setComponents(n,e),this},o.prototype.addComponents=function(n,e){return this.getWrapper().append(n,e)},o.prototype.getStyle=function(){return this.em.Css.getAll()},o.prototype.setStyle=function(n,e){return e===void 0&&(e={}),this.em.setStyle(n,e),this},o.prototype.addStyle=function(n,e){return e===void 0&&(e={}),this.em.addStyle(n,e)},o.prototype.getSelected=function(){return this.em.getSelected()},o.prototype.getSelectedAll=function(){return this.em.getSelectedAll()},o.prototype.getSelectedToStyle=function(){var n=this.em.getSelected();if(n)return this.StyleManager.getModelToStyle(n)},o.prototype.select=function(n,e){return this.em.setSelected(n,e),this},o.prototype.selectAdd=function(n){return this.em.addSelected(n),this},o.prototype.selectRemove=function(n){return this.em.removeSelected(n),this},o.prototype.selectToggle=function(n){return this.em.toggleSelected(n),this},o.prototype.getEditing=function(){return this.em.getEditing()},o.prototype.setDevice=function(n){return this.em.set("device",n),this},o.prototype.getDevice=function(){return this.em.get("device")},o.prototype.runCommand=function(n,e){return e===void 0&&(e={}),this.Commands.run(n,e)},o.prototype.stopCommand=function(n,e){return e===void 0&&(e={}),this.Commands.stop(n,e)},o.prototype.store=function(n){return pb(this,void 0,void 0,function(){return hb(this,function(e){switch(e.label){case 0:return[4,this.em.store(n)];case 1:return[2,e.sent()]}})})},o.prototype.load=function(n){return pb(this,arguments,void 0,function(e,t){return t===void 0&&(t={}),hb(this,function(r){switch(r.label){case 0:return[4,this.em.load(e,t)];case 1:return[2,r.sent()]}})})},o.prototype.getProjectData=function(){return this.em.storeData()},o.prototype.loadProjectData=function(n){return this.em.loadData(n)},o.prototype.storeData=function(){return this.em.storeData()},o.prototype.loadData=function(n){return this.em.loadData(n)},o.prototype.getContainer=function(){return this.config.el},o.prototype.getDirtyCount=function(){return this.em.getDirtyCount()},o.prototype.clearDirtyCount=function(){return this.em.clearDirtyCount()},o.prototype.refresh=function(n){this.em.refreshCanvas(n)},o.prototype.setCustomRte=function(n){this.RichTextEditor.customRte=n},o.prototype.setCustomParserCss=function(n){return this.Parser.getConfig().parserCss=n,this},o.prototype.setDragMode=function(n){return this.em.setDragMode(n),this},o.prototype.log=function(n,e){return e===void 0&&(e={}),this.em.log(n,e),this},o.prototype.t=function(){for(var n,e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(n=this.em).t.apply(n,e)},o.prototype.on=function(n,e){return this.em.on(n,e),this},o.prototype.once=function(n,e){return this.em.once(n,e),this},o.prototype.off=function(n,e){return this.em.off(n,e),this},o.prototype.trigger=function(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return this.em.trigger.apply(this.em,XF([n],e,!0)),this},o.prototype.destroy=function(){this.em&&(this.em.destroyAll(),this.editorView=void 0)},o.prototype.getEl=function(){var n;return(n=this.editorView)===null||n===void 0?void 0:n.el},o.prototype.getModel=function(){return this.em},o.prototype.render=function(){var n;return(n=this.editorView)===null||n===void 0||n.remove(),this.editorView=new YF(this.em),this.editorView.render().el},o.prototype.onReady=function(n){this.em.get("ready")?n(this):this.em.on("load",n)},o}();const JF=qF;var ZF=function(o,n){var e=n.get(o);if(!e){var t=(0,Xe.getGlobal)()[o];e=(t==null?void 0:t.default)||t}return e},m1=function(o,n){return(0,U.isString)(o)?ZF(o,n):(o==null?void 0:o.default)||o},y1=function(o,n){o.getModel().logWarning("Plugin ".concat(n," not found"),{context:"plugins",plugin:n})},QF=function(){function o(){this.plugins={}}return o.prototype.add=function(n,e){var t=this.get(n);return t||(this.plugins[n]=e,e)},o.prototype.get=function(n){return this.plugins[n]},o.prototype.getAll=function(){return this.plugins},o}();const eV=QF,tV=function(){var o=function(){for(var e,t=window.navigator.userAgent,r=[["edge",/Edge\/([0-9\._]+)/],["ie",/MSIE\s(7\.0)/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/]],i=0;i<r.length;i++){var s=r[i];if(e=s[1].exec(t),e)break}return!!e};if((0,Xe.hasWin)()&&o()){var n=DOMImplementation.prototype.createHTMLDocument;DOMImplementation.prototype.createHTMLDocument=function(e){return e||(e=""),n.apply(document.implementation,[e])}}};var Rp=function(){return Rp=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},Rp.apply(this,arguments)};tV();var im=new eV,vb=[],w1=function(o,n){var e=m1(o,im);return function(t){e?e(t,n||{}):y1(t,o)}},_1={$:Hn.default,editors:vb,plugins:im,usePlugin:w1,version:"0.21.13",init:function(o){o===void 0&&(o={});var n=o.headless,e=o.container;if(!e&&!n)throw new Error("'container' is required");var t=Rp(Rp({autorender:!0,plugins:[],pluginsOpts:{}},o),{grapesjs:this,el:n?void 0:(0,U.isElement)(e)?e:document.querySelector(e)}),r=new JF(t,{$:Hn.default}),i=r.getModel();return t.plugins.forEach(function(s){var u=m1(s,im),c=t.pluginsOpts[s]||{};u?u(r,c):y1(r,s)}),i.loadOnStart(),t.autorender&&!n&&r.render(),vb.push(r),r}};const nV=_1;var rV=BC.Ay,Fp={exports:{}};Fp.exports;(function(o,n){(function(e,t){o.exports=t()})(RO,function(){function e(w,y){var x=Object.keys(w);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(w);y&&(O=O.filter(function(M){return Object.getOwnPropertyDescriptor(w,M).enumerable})),x.push.apply(x,O)}return x}function t(w){for(var y=1;y<arguments.length;y++){var x=arguments[y]!=null?arguments[y]:{};y%2?e(Object(x),!0).forEach(function(O){c(w,O,x[O])}):Object.getOwnPropertyDescriptors?Object.defineProperties(w,Object.getOwnPropertyDescriptors(x)):e(Object(x)).forEach(function(O){Object.defineProperty(w,O,Object.getOwnPropertyDescriptor(x,O))})}return w}function r(w){return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},r(w)}function i(w,y){if(!(w instanceof y))throw new TypeError("Cannot call a class as a function")}function s(w,y){for(var x=0;x<y.length;x++){var O=y[x];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(w,T(O.key),O)}}function u(w,y,x){return y&&s(w.prototype,y),x&&s(w,x),Object.defineProperty(w,"prototype",{writable:!1}),w}function c(w,y,x){return(y=T(y))in w?Object.defineProperty(w,y,{value:x,enumerable:!0,configurable:!0,writable:!0}):w[y]=x,w}function f(w,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(y&&y.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),Object.defineProperty(w,"prototype",{writable:!1}),y&&v(w,y)}function h(w){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(y){return y.__proto__||Object.getPrototypeOf(y)},h(w)}function v(w,y){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(x,O){return x.__proto__=O,x},v(w,y)}function m(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}function _(w){var y=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var x,O=h(w);if(y){var M=h(this).constructor;x=Reflect.construct(O,arguments,M)}else x=O.apply(this,arguments);return function(N,K){if(K&&(typeof K=="object"||typeof K=="function"))return K;if(K!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return m(N)}(this,x)}}function C(){return C=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(w,y,x){var O=function(N,K){for(;!Object.prototype.hasOwnProperty.call(N,K)&&(N=h(N))!==null;);return N}(w,y);if(O){var M=Object.getOwnPropertyDescriptor(O,y);return M.get?M.get.call(arguments.length<3?w:x):M.value}},C.apply(this,arguments)}function T(w){var y=function(x,O){if(typeof x!="object"||x===null)return x;var M=x[Symbol.toPrimitive];if(M!==void 0){var N=M.call(x,O||"default");if(typeof N!="object")return N;throw new TypeError("@@toPrimitive must return a primitive value.")}return(O==="string"?String:Number)(x)}(w,"string");return typeof y=="symbol"?y:y+""}var k=function(w){return!(!w||!w.Window)&&w instanceof w.Window},P=void 0,L=void 0;function D(w){P=w;var y=w.document.createTextNode("");y.ownerDocument!==w.document&&typeof w.wrap=="function"&&w.wrap(y)===y&&(w=w.wrap(w)),L=w}function V(w){return k(w)?w:(w.ownerDocument||w).defaultView||L.window}typeof window<"u"&&window&&D(window);var re=function(w){return!!w&&r(w)==="object"},_e=function(w){return typeof w=="function"},Q={window:function(w){return w===L||k(w)},docFrag:function(w){return re(w)&&w.nodeType===11},object:re,func:_e,number:function(w){return typeof w=="number"},bool:function(w){return typeof w=="boolean"},string:function(w){return typeof w=="string"},element:function(w){if(!w||r(w)!=="object")return!1;var y=V(w)||L;return/object|function/.test(typeof Element>"u"?"undefined":r(Element))?w instanceof Element||w instanceof y.Element:w.nodeType===1&&typeof w.nodeName=="string"},plainObject:function(w){return re(w)&&!!w.constructor&&/function Object\b/.test(w.constructor.toString())},array:function(w){return re(w)&&w.length!==void 0&&_e(w.splice)}};function pe(w){var y=w.interaction;if(y.prepared.name==="drag"){var x=y.prepared.axis;x==="x"?(y.coords.cur.page.y=y.coords.start.page.y,y.coords.cur.client.y=y.coords.start.client.y,y.coords.velocity.client.y=0,y.coords.velocity.page.y=0):x==="y"&&(y.coords.cur.page.x=y.coords.start.page.x,y.coords.cur.client.x=y.coords.start.client.x,y.coords.velocity.client.x=0,y.coords.velocity.page.x=0)}}function ne(w){var y=w.iEvent,x=w.interaction;if(x.prepared.name==="drag"){var O=x.prepared.axis;if(O==="x"||O==="y"){var M=O==="x"?"y":"x";y.page[M]=x.coords.start.page[M],y.client[M]=x.coords.start.client[M],y.delta[M]=0}}}var me={id:"actions/drag",install:function(w){var y=w.actions,x=w.Interactable,O=w.defaults;x.prototype.draggable=me.draggable,y.map.drag=me,y.methodDict.drag="draggable",O.actions.drag=me.defaults},listeners:{"interactions:before-action-move":pe,"interactions:action-resume":pe,"interactions:action-move":ne,"auto-start:check":function(w){var y=w.interaction,x=w.interactable,O=w.buttons,M=x.options.drag;if(M&&M.enabled&&(!y.pointerIsDown||!/mouse|pointer/.test(y.pointerType)||O&x.options.drag.mouseButtons))return w.action={name:"drag",axis:M.lockAxis==="start"?M.startAxis:M.lockAxis},!1}},draggable:function(w){return Q.object(w)?(this.options.drag.enabled=w.enabled!==!1,this.setPerAction("drag",w),this.setOnEvents("drag",w),/^(xy|x|y|start)$/.test(w.lockAxis)&&(this.options.drag.lockAxis=w.lockAxis),/^(xy|x|y)$/.test(w.startAxis)&&(this.options.drag.startAxis=w.startAxis),this):Q.bool(w)?(this.options.drag.enabled=w,this):this.options.drag},beforeMove:pe,move:ne,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"},filterEventType:function(w){return w.search("drag")===0}},Y=me,W={init:function(w){var y=w;W.document=y.document,W.DocumentFragment=y.DocumentFragment||te,W.SVGElement=y.SVGElement||te,W.SVGSVGElement=y.SVGSVGElement||te,W.SVGElementInstance=y.SVGElementInstance||te,W.Element=y.Element||te,W.HTMLElement=y.HTMLElement||W.Element,W.Event=y.Event,W.Touch=y.Touch||te,W.PointerEvent=y.PointerEvent||y.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function te(){}var q=W,ge={init:function(w){var y=q.Element,x=w.navigator||{};ge.supportsTouch="ontouchstart"in w||Q.func(w.DocumentTouch)&&q.document instanceof w.DocumentTouch,ge.supportsPointerEvent=x.pointerEnabled!==!1&&!!q.PointerEvent,ge.isIOS=/iP(hone|od|ad)/.test(x.platform),ge.isIOS7=/iP(hone|od|ad)/.test(x.platform)&&/OS 7[^\d]/.test(x.appVersion),ge.isIe9=/MSIE 9/.test(x.userAgent),ge.isOperaMobile=x.appName==="Opera"&&ge.supportsTouch&&/Presto/.test(x.userAgent),ge.prefixedMatchesSelector="matches"in y.prototype?"matches":"webkitMatchesSelector"in y.prototype?"webkitMatchesSelector":"mozMatchesSelector"in y.prototype?"mozMatchesSelector":"oMatchesSelector"in y.prototype?"oMatchesSelector":"msMatchesSelector",ge.pEventTypes=ge.supportsPointerEvent?q.PointerEvent===w.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,ge.wheelEvent=q.document&&"onmousewheel"in q.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null},R=ge;function ke(w,y){if(w.contains)return w.contains(y);for(;y;){if(y===w)return!0;y=y.parentNode}return!1}function he(w,y){for(;Q.element(w);){if($e(w,y))return w;w=Le(w)}return null}function Le(w){var y=w.parentNode;if(Q.docFrag(y)){for(;(y=y.host)&&Q.docFrag(y););return y}return y}function $e(w,y){return L!==P&&(y=y.replace(/\/deep\//g," ")),w[R.prefixedMatchesSelector](y)}var be=function(w){return w.parentNode||w.host};function Re(w,y){for(var x,O=[],M=w;(x=be(M))&&M!==y&&x!==M.ownerDocument;)O.unshift(M),M=x;return O}function rt(w,y,x){for(;Q.element(w);){if($e(w,y))return!0;if((w=Le(w))===x)return $e(w,y)}return!1}function He(w){return w.correspondingUseElement||w}function _t(w){var y=w instanceof q.SVGElement?w.getBoundingClientRect():w.getClientRects()[0];return y&&{left:y.left,right:y.right,top:y.top,bottom:y.bottom,width:y.width||y.right-y.left,height:y.height||y.bottom-y.top}}function Te(w){var y,x=_t(w);if(!R.isIOS7&&x){var O={x:(y=(y=V(w))||L).scrollX||y.document.documentElement.scrollLeft,y:y.scrollY||y.document.documentElement.scrollTop};x.left+=O.x,x.right+=O.x,x.top+=O.y,x.bottom+=O.y}return x}function Ne(w){for(var y=[];w;)y.push(w),w=Le(w);return y}function Ye(w){return!!Q.string(w)&&(q.document.querySelector(w),!0)}function Fe(w,y){for(var x in y)w[x]=y[x];return w}function vt(w,y,x){return w==="parent"?Le(x):w==="self"?y.getRect(x):he(x,w)}function nt(w,y,x,O){var M=w;return Q.string(M)?M=vt(M,y,x):Q.func(M)&&(M=M.apply(void 0,O)),Q.element(M)&&(M=Te(M)),M}function bt(w){return w&&{x:"x"in w?w.x:w.left,y:"y"in w?w.y:w.top}}function Yt(w){return!w||"x"in w&&"y"in w||((w=Fe({},w)).x=w.left||0,w.y=w.top||0,w.width=w.width||(w.right||0)-w.x,w.height=w.height||(w.bottom||0)-w.y),w}function Mt(w,y,x){w.left&&(y.left+=x.x),w.right&&(y.right+=x.x),w.top&&(y.top+=x.y),w.bottom&&(y.bottom+=x.y),y.width=y.right-y.left,y.height=y.bottom-y.top}function un(w,y,x){var O=x&&w.options[x];return bt(nt(O&&O.origin||w.options.origin,w,y,[w&&y]))||{x:0,y:0}}function tn(w,y){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(ie){return!0},O=arguments.length>3?arguments[3]:void 0;if(O=O||{},Q.string(w)&&w.search(" ")!==-1&&(w=Rt(w)),Q.array(w))return w.forEach(function(ie){return tn(ie,y,x,O)}),O;if(Q.object(w)&&(y=w,w=""),Q.func(y)&&x(w))O[w]=O[w]||[],O[w].push(y);else if(Q.array(y))for(var M=0,N=y;M<N.length;M++){var K=N[M];tn(w,K,x,O)}else if(Q.object(y))for(var Z in y)tn(Rt(Z).map(function(ie){return"".concat(w).concat(ie)}),y[Z],x,O);return O}function Rt(w){return w.trim().split(/ +/)}var E=function(w,y){return Math.sqrt(w*w+y*y)},H=["webkit","moz"];function J(w,y){w.__set||(w.__set={});var x=function(M){if(H.some(function(N){return M.indexOf(N)===0}))return 1;typeof w[M]!="function"&&M!=="__set"&&Object.defineProperty(w,M,{get:function(){return M in w.__set?w.__set[M]:w.__set[M]=y[M]},set:function(N){w.__set[M]=N},configurable:!0})};for(var O in y)x(O);return w}function we(w,y){w.page=w.page||{},w.page.x=y.page.x,w.page.y=y.page.y,w.client=w.client||{},w.client.x=y.client.x,w.client.y=y.client.y,w.timeStamp=y.timeStamp}function xe(w){w.page.x=0,w.page.y=0,w.client.x=0,w.client.y=0}function ee(w){return w instanceof q.Event||w instanceof q.Touch}function se(w,y,x){return w=w||"page",(x=x||{}).x=y[w+"X"],x.y=y[w+"Y"],x}function ae(w,y){return y=y||{x:0,y:0},R.isOperaMobile&&ee(w)?(se("screen",w,y),y.x+=window.scrollX,y.y+=window.scrollY):se("page",w,y),y}function et(w){return Q.number(w.pointerId)?w.pointerId:w.identifier}function ct(w,y,x){var O=y.length>1?X(y):y[0];ae(O,w.page),function(M,N){N=N||{},R.isOperaMobile&&ee(M)?se("screen",M,N):se("client",M,N)}(O,w.client),w.timeStamp=x}function ot(w){var y=[];return Q.array(w)?(y[0]=w[0],y[1]=w[1]):w.type==="touchend"?w.touches.length===1?(y[0]=w.touches[0],y[1]=w.changedTouches[0]):w.touches.length===0&&(y[0]=w.changedTouches[0],y[1]=w.changedTouches[1]):(y[0]=w.touches[0],y[1]=w.touches[1]),y}function X(w){for(var y={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},x=0;x<w.length;x++){var O=w[x];for(var M in y)y[M]+=O[M]}for(var N in y)y[N]/=w.length;return y}function fe(w){if(!w.length)return null;var y=ot(w),x=Math.min(y[0].pageX,y[1].pageX),O=Math.min(y[0].pageY,y[1].pageY),M=Math.max(y[0].pageX,y[1].pageX),N=Math.max(y[0].pageY,y[1].pageY);return{x,y:O,left:x,top:O,right:M,bottom:N,width:M-x,height:N-O}}function z(w,y){var x=y+"X",O=y+"Y",M=ot(w),N=M[0][x]-M[1][x],K=M[0][O]-M[1][O];return E(N,K)}function je(w,y){var x=y+"X",O=y+"Y",M=ot(w),N=M[1][x]-M[0][x],K=M[1][O]-M[0][O];return 180*Math.atan2(K,N)/Math.PI}function Se(w){return Q.string(w.pointerType)?w.pointerType:Q.number(w.pointerType)?[void 0,void 0,"touch","pen","mouse"][w.pointerType]:/touch/.test(w.type||"")||w instanceof q.Touch?"touch":"mouse"}function Be(w){var y=Q.func(w.composedPath)?w.composedPath():w.path;return[He(y?y[0]:w.target),He(w.currentTarget)]}var qe=function(){function w(y){i(this,w),this.immediatePropagationStopped=!1,this.propagationStopped=!1,this._interaction=y}return u(w,[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),w}();Object.defineProperty(qe.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}});var st=function(w,y){for(var x=0;x<y.length;x++){var O=y[x];w.push(O)}return w},ut=function(w){return st([],w)},Ot=function(w,y){for(var x=0;x<w.length;x++)if(y(w[x],x,w))return x;return-1},Ht=function(w,y){return w[Ot(w,y)]},Bt=function(w){f(x,w);var y=_(x);function x(O,M,N){var K;i(this,x),(K=y.call(this,M._interaction)).dropzone=void 0,K.dragEvent=void 0,K.relatedTarget=void 0,K.draggable=void 0,K.propagationStopped=!1,K.immediatePropagationStopped=!1;var Z=N==="dragleave"?O.prev:O.cur,ie=Z.element,Ce=Z.dropzone;return K.type=N,K.target=ie,K.currentTarget=ie,K.dropzone=Ce,K.dragEvent=M,K.relatedTarget=M.target,K.draggable=M.interactable,K.timeStamp=M.timeStamp,K}return u(x,[{key:"reject",value:function(){var O=this,M=this._interaction.dropState;if(this.type==="dropactivate"||this.dropzone&&M.cur.dropzone===this.dropzone&&M.cur.element===this.target)if(M.prev.dropzone=this.dropzone,M.prev.element=this.target,M.rejected=!0,M.events.enter=null,this.stopImmediatePropagation(),this.type==="dropactivate"){var N=M.activeDrops,K=Ot(N,function(ie){var Ce=ie.dropzone,le=ie.element;return Ce===O.dropzone&&le===O.target});M.activeDrops.splice(K,1);var Z=new x(M,this.dragEvent,"dropdeactivate");Z.dropzone=this.dropzone,Z.target=this.target,this.dropzone.fire(Z)}else this.dropzone.fire(new x(M,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),x}(qe);function Kt(w,y){for(var x=0,O=w.slice();x<O.length;x++){var M=O[x],N=M.dropzone,K=M.element;y.dropzone=N,y.target=K,N.fire(y),y.propagationStopped=y.immediatePropagationStopped=!1}}function hn(w,y){for(var x=function(N,K){for(var Z=[],ie=0,Ce=N.interactables.list;ie<Ce.length;ie++){var le=Ce[ie];if(le.options.drop.enabled){var De=le.options.drop.accept;if(!(Q.element(De)&&De!==K||Q.string(De)&&!$e(K,De)||Q.func(De)&&!De({dropzone:le,draggableElement:K})))for(var Ue=0,at=le.getAllElements();Ue<at.length;Ue++){var Qe=at[Ue];Qe!==K&&Z.push({dropzone:le,element:Qe,rect:le.getRect(Qe)})}}}return Z}(w,y),O=0;O<x.length;O++){var M=x[O];M.rect=M.dropzone.getRect(M.element)}return x}function Bn(w,y,x){for(var O=w.dropState,M=w.interactable,N=w.element,K=[],Z=0,ie=O.activeDrops;Z<ie.length;Z++){var Ce=ie[Z],le=Ce.dropzone,De=Ce.element,Ue=Ce.rect,at=le.dropCheck(y,x,M,N,De,Ue);K.push(at?De:null)}var Qe=function(dt){for(var Et,St,It,Xt=[],nn=0;nn<dt.length;nn++){var Wt=dt[nn],Zt=dt[Et];if(Wt&&nn!==Et)if(Zt){var Rr=be(Wt),dn=be(Zt);if(Rr!==Wt.ownerDocument)if(dn!==Wt.ownerDocument)if(Rr!==dn){Xt=Xt.length?Xt:Re(Zt);var ur=void 0;if(Zt instanceof q.HTMLElement&&Wt instanceof q.SVGElement&&!(Wt instanceof q.SVGSVGElement)){if(Wt===dn)continue;ur=Wt.ownerSVGElement}else ur=Wt;for(var Pr=Re(ur,Zt.ownerDocument),Xo=0;Pr[Xo]&&Pr[Xo]===Xt[Xo];)Xo++;var Ma=[Pr[Xo-1],Pr[Xo],Xt[Xo]];if(Ma[0])for(var Da=Ma[0].lastChild;Da;){if(Da===Ma[1]){Et=nn,Xt=Pr;break}if(Da===Ma[2])break;Da=Da.previousSibling}}else It=Zt,(parseInt(V(St=Wt).getComputedStyle(St).zIndex,10)||0)>=(parseInt(V(It).getComputedStyle(It).zIndex,10)||0)&&(Et=nn);else Et=nn}else Et=nn}return Et}(K);return O.activeDrops[Qe]||null}function G(w,y,x){var O=w.dropState,M={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return x.type==="dragstart"&&(M.activate=new Bt(O,x,"dropactivate"),M.activate.target=null,M.activate.dropzone=null),x.type==="dragend"&&(M.deactivate=new Bt(O,x,"dropdeactivate"),M.deactivate.target=null,M.deactivate.dropzone=null),O.rejected||(O.cur.element!==O.prev.element&&(O.prev.dropzone&&(M.leave=new Bt(O,x,"dragleave"),x.dragLeave=M.leave.target=O.prev.element,x.prevDropzone=M.leave.dropzone=O.prev.dropzone),O.cur.dropzone&&(M.enter=new Bt(O,x,"dragenter"),x.dragEnter=O.cur.element,x.dropzone=O.cur.dropzone)),x.type==="dragend"&&O.cur.dropzone&&(M.drop=new Bt(O,x,"drop"),x.dropzone=O.cur.dropzone,x.relatedTarget=O.cur.element),x.type==="dragmove"&&O.cur.dropzone&&(M.move=new Bt(O,x,"dropmove"),x.dropzone=O.cur.dropzone)),M}function ve(w,y){var x=w.dropState,O=x.activeDrops,M=x.cur,N=x.prev;y.leave&&N.dropzone.fire(y.leave),y.enter&&M.dropzone.fire(y.enter),y.move&&M.dropzone.fire(y.move),y.drop&&M.dropzone.fire(y.drop),y.deactivate&&Kt(O,y.deactivate),x.prev.dropzone=M.dropzone,x.prev.element=M.element}function Ee(w,y){var x=w.interaction,O=w.iEvent,M=w.event;if(O.type==="dragmove"||O.type==="dragend"){var N=x.dropState;y.dynamicDrop&&(N.activeDrops=hn(y,x.element));var K=O,Z=Bn(x,K,M);N.rejected=N.rejected&&!!Z&&Z.dropzone===N.cur.dropzone&&Z.element===N.cur.element,N.cur.dropzone=Z&&Z.dropzone,N.cur.element=Z&&Z.element,N.events=G(x,0,K)}}var Ke={id:"actions/drop",install:function(w){var y=w.actions,x=w.interactStatic,O=w.Interactable,M=w.defaults;w.usePlugin(Y),O.prototype.dropzone=function(N){return function(K,Z){if(Q.object(Z)){if(K.options.drop.enabled=Z.enabled!==!1,Z.listeners){var ie=tn(Z.listeners),Ce=Object.keys(ie).reduce(function(De,Ue){return De[/^(enter|leave)/.test(Ue)?"drag".concat(Ue):/^(activate|deactivate|move)/.test(Ue)?"drop".concat(Ue):Ue]=ie[Ue],De},{}),le=K.options.drop.listeners;le&&K.off(le),K.on(Ce),K.options.drop.listeners=Ce}return Q.func(Z.ondrop)&&K.on("drop",Z.ondrop),Q.func(Z.ondropactivate)&&K.on("dropactivate",Z.ondropactivate),Q.func(Z.ondropdeactivate)&&K.on("dropdeactivate",Z.ondropdeactivate),Q.func(Z.ondragenter)&&K.on("dragenter",Z.ondragenter),Q.func(Z.ondragleave)&&K.on("dragleave",Z.ondragleave),Q.func(Z.ondropmove)&&K.on("dropmove",Z.ondropmove),/^(pointer|center)$/.test(Z.overlap)?K.options.drop.overlap=Z.overlap:Q.number(Z.overlap)&&(K.options.drop.overlap=Math.max(Math.min(1,Z.overlap),0)),"accept"in Z&&(K.options.drop.accept=Z.accept),"checker"in Z&&(K.options.drop.checker=Z.checker),K}return Q.bool(Z)?(K.options.drop.enabled=Z,K):K.options.drop}(this,N)},O.prototype.dropCheck=function(N,K,Z,ie,Ce,le){return function(De,Ue,at,Qe,dt,Et,St){var It=!1;if(!(St=St||De.getRect(Et)))return!!De.options.drop.checker&&De.options.drop.checker(Ue,at,It,De,Et,Qe,dt);var Xt=De.options.drop.overlap;if(Xt==="pointer"){var nn=un(Qe,dt,"drag"),Wt=ae(Ue);Wt.x+=nn.x,Wt.y+=nn.y;var Zt=Wt.x>St.left&&Wt.x<St.right,Rr=Wt.y>St.top&&Wt.y<St.bottom;It=Zt&&Rr}var dn=Qe.getRect(dt);if(dn&&Xt==="center"){var ur=dn.left+dn.width/2,Pr=dn.top+dn.height/2;It=ur>=St.left&&ur<=St.right&&Pr>=St.top&&Pr<=St.bottom}return dn&&Q.number(Xt)&&(It=Math.max(0,Math.min(St.right,dn.right)-Math.max(St.left,dn.left))*Math.max(0,Math.min(St.bottom,dn.bottom)-Math.max(St.top,dn.top))/(dn.width*dn.height)>=Xt),De.options.drop.checker&&(It=De.options.drop.checker(Ue,at,It,De,Et,Qe,dt)),It}(this,N,K,Z,ie,Ce,le)},x.dynamicDrop=function(N){return Q.bool(N)?(w.dynamicDrop=N,x):w.dynamicDrop},Fe(y.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),y.methodDict.drop="dropzone",w.dynamicDrop=!1,M.actions.drop=Ke.defaults},listeners:{"interactions:before-action-start":function(w){var y=w.interaction;y.prepared.name==="drag"&&(y.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(w,y){var x=w.interaction,O=(w.event,w.iEvent);if(x.prepared.name==="drag"){var M=x.dropState;M.activeDrops=[],M.events={},M.activeDrops=hn(y,x.element),M.events=G(x,0,O),M.events.activate&&(Kt(M.activeDrops,M.events.activate),y.fire("actions/drop:start",{interaction:x,dragEvent:O}))}},"interactions:action-move":Ee,"interactions:after-action-move":function(w,y){var x=w.interaction,O=w.iEvent;if(x.prepared.name==="drag"){var M=x.dropState;ve(x,M.events),y.fire("actions/drop:move",{interaction:x,dragEvent:O}),M.events={}}},"interactions:action-end":function(w,y){if(w.interaction.prepared.name==="drag"){var x=w.interaction,O=w.iEvent;Ee(w,y),ve(x,x.dropState.events),y.fire("actions/drop:end",{interaction:x,dragEvent:O})}},"interactions:stop":function(w){var y=w.interaction;if(y.prepared.name==="drag"){var x=y.dropState;x&&(x.activeDrops=null,x.events=null,x.cur.dropzone=null,x.cur.element=null,x.prev.dropzone=null,x.prev.element=null,x.rejected=!1)}}},getActiveDrops:hn,getDrop:Bn,getDropEvents:G,fireDropEvents:ve,filterEventType:function(w){return w.search("drag")===0||w.search("drop")===0},defaults:{enabled:!1,accept:null,overlap:"pointer"}},pt=Ke;function Dt(w){var y=w.interaction,x=w.iEvent,O=w.phase;if(y.prepared.name==="gesture"){var M=y.pointers.map(function(Ce){return Ce.pointer}),N=O==="start",K=O==="end",Z=y.interactable.options.deltaSource;if(x.touches=[M[0],M[1]],N)x.distance=z(M,Z),x.box=fe(M),x.scale=1,x.ds=0,x.angle=je(M,Z),x.da=0,y.gesture.startDistance=x.distance,y.gesture.startAngle=x.angle;else if(K||y.pointers.length<2){var ie=y.prevEvent;x.distance=ie.distance,x.box=ie.box,x.scale=ie.scale,x.ds=0,x.angle=ie.angle,x.da=0}else x.distance=z(M,Z),x.box=fe(M),x.scale=x.distance/y.gesture.startDistance,x.angle=je(M,Z),x.ds=x.scale-y.gesture.scale,x.da=x.angle-y.gesture.angle;y.gesture.distance=x.distance,y.gesture.angle=x.angle,Q.number(x.scale)&&x.scale!==1/0&&!isNaN(x.scale)&&(y.gesture.scale=x.scale)}}var Ut={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(w){var y=w.actions,x=w.Interactable,O=w.defaults;x.prototype.gesturable=function(M){return Q.object(M)?(this.options.gesture.enabled=M.enabled!==!1,this.setPerAction("gesture",M),this.setOnEvents("gesture",M),this):Q.bool(M)?(this.options.gesture.enabled=M,this):this.options.gesture},y.map.gesture=Ut,y.methodDict.gesture="gesturable",O.actions.gesture=Ut.defaults},listeners:{"interactions:action-start":Dt,"interactions:action-move":Dt,"interactions:action-end":Dt,"interactions:new":function(w){w.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(w){if(!(w.interaction.pointers.length<2)){var y=w.interactable.options.gesture;if(y&&y.enabled)return w.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""},filterEventType:function(w){return w.search("gesture")===0}},bn=Ut;function Nn(w,y,x,O,M,N,K){if(!y)return!1;if(y===!0){var Z=Q.number(N.width)?N.width:N.right-N.left,ie=Q.number(N.height)?N.height:N.bottom-N.top;if(K=Math.min(K,Math.abs((w==="left"||w==="right"?Z:ie)/2)),Z<0&&(w==="left"?w="right":w==="right"&&(w="left")),ie<0&&(w==="top"?w="bottom":w==="bottom"&&(w="top")),w==="left"){var Ce=Z>=0?N.left:N.right;return x.x<Ce+K}if(w==="top"){var le=ie>=0?N.top:N.bottom;return x.y<le+K}if(w==="right")return x.x>(Z>=0?N.right:N.left)-K;if(w==="bottom")return x.y>(ie>=0?N.bottom:N.top)-K}return!!Q.element(O)&&(Q.element(y)?y===O:rt(O,y,M))}function yn(w){var y=w.iEvent,x=w.interaction;if(x.prepared.name==="resize"&&x.resizeAxes){var O=y;x.interactable.options.resize.square?(x.resizeAxes==="y"?O.delta.x=O.delta.y:O.delta.y=O.delta.x,O.axes="xy"):(O.axes=x.resizeAxes,x.resizeAxes==="x"?O.delta.y=0:x.resizeAxes==="y"&&(O.delta.x=0))}}var Wn,ln,Pn={id:"actions/resize",before:["actions/drag"],install:function(w){var y=w.actions,x=w.browser,O=w.Interactable,M=w.defaults;Pn.cursors=function(N){return N.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"}}(x),Pn.defaultMargin=x.supportsTouch||x.supportsPointerEvent?20:10,O.prototype.resizable=function(N){return function(K,Z,ie){return Q.object(Z)?(K.options.resize.enabled=Z.enabled!==!1,K.setPerAction("resize",Z),K.setOnEvents("resize",Z),Q.string(Z.axis)&&/^x$|^y$|^xy$/.test(Z.axis)?K.options.resize.axis=Z.axis:Z.axis===null&&(K.options.resize.axis=ie.defaults.actions.resize.axis),Q.bool(Z.preserveAspectRatio)?K.options.resize.preserveAspectRatio=Z.preserveAspectRatio:Q.bool(Z.square)&&(K.options.resize.square=Z.square),K):Q.bool(Z)?(K.options.resize.enabled=Z,K):K.options.resize}(this,N,w)},y.map.resize=Pn,y.methodDict.resize="resizable",M.actions.resize=Pn.defaults},listeners:{"interactions:new":function(w){w.interaction.resizeAxes="xy"},"interactions:action-start":function(w){(function(y){var x=y.iEvent,O=y.interaction;if(O.prepared.name==="resize"&&O.prepared.edges){var M=x,N=O.rect;O._rects={start:Fe({},N),corrected:Fe({},N),previous:Fe({},N),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},M.edges=O.prepared.edges,M.rect=O._rects.corrected,M.deltaRect=O._rects.delta}})(w),yn(w)},"interactions:action-move":function(w){(function(y){var x=y.iEvent,O=y.interaction;if(O.prepared.name==="resize"&&O.prepared.edges){var M=x,N=O.interactable.options.resize.invert,K=N==="reposition"||N==="negate",Z=O.rect,ie=O._rects,Ce=ie.start,le=ie.corrected,De=ie.delta,Ue=ie.previous;if(Fe(Ue,le),K){if(Fe(le,Z),N==="reposition"){if(le.top>le.bottom){var at=le.top;le.top=le.bottom,le.bottom=at}if(le.left>le.right){var Qe=le.left;le.left=le.right,le.right=Qe}}}else le.top=Math.min(Z.top,Ce.bottom),le.bottom=Math.max(Z.bottom,Ce.top),le.left=Math.min(Z.left,Ce.right),le.right=Math.max(Z.right,Ce.left);for(var dt in le.width=le.right-le.left,le.height=le.bottom-le.top,le)De[dt]=le[dt]-Ue[dt];M.edges=O.prepared.edges,M.rect=le,M.deltaRect=De}})(w),yn(w)},"interactions:action-end":function(w){var y=w.iEvent,x=w.interaction;if(x.prepared.name==="resize"&&x.prepared.edges){var O=y;O.edges=x.prepared.edges,O.rect=x._rects.corrected,O.deltaRect=x._rects.delta}},"auto-start:check":function(w){var y=w.interaction,x=w.interactable,O=w.element,M=w.rect,N=w.buttons;if(M){var K=Fe({},y.coords.cur.page),Z=x.options.resize;if(Z&&Z.enabled&&(!y.pointerIsDown||!/mouse|pointer/.test(y.pointerType)||N&Z.mouseButtons)){if(Q.object(Z.edges)){var ie={left:!1,right:!1,top:!1,bottom:!1};for(var Ce in ie)ie[Ce]=Nn(Ce,Z.edges[Ce],K,y._latestPointer.eventTarget,O,M,Z.margin||Pn.defaultMargin);ie.left=ie.left&&!ie.right,ie.top=ie.top&&!ie.bottom,(ie.left||ie.right||ie.top||ie.bottom)&&(w.action={name:"resize",edges:ie})}else{var le=Z.axis!=="y"&&K.x>M.right-Pn.defaultMargin,De=Z.axis!=="x"&&K.y>M.bottom-Pn.defaultMargin;(le||De)&&(w.action={name:"resize",axes:(le?"x":"")+(De?"y":"")})}return!w.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(w){var y=w.edges,x=w.axis,O=w.name,M=Pn.cursors,N=null;if(x)N=M[O+x];else if(y){for(var K="",Z=0,ie=["top","bottom","left","right"];Z<ie.length;Z++){var Ce=ie[Z];y[Ce]&&(K+=Ce)}N=M[K]}return N},filterEventType:function(w){return w.search("resize")===0},defaultMargin:null},Br=Pn,on={id:"actions",install:function(w){w.usePlugin(bn),w.usePlugin(Br),w.usePlugin(Y),w.usePlugin(pt)}},An=0,$t={request:function(w){return Wn(w)},cancel:function(w){return ln(w)},init:function(w){if(Wn=w.requestAnimationFrame,ln=w.cancelAnimationFrame,!Wn)for(var y=["ms","moz","webkit","o"],x=0;x<y.length;x++){var O=y[x];Wn=w["".concat(O,"RequestAnimationFrame")],ln=w["".concat(O,"CancelAnimationFrame")]||w["".concat(O,"CancelRequestAnimationFrame")]}Wn=Wn&&Wn.bind(w),ln=ln&&ln.bind(w),Wn||(Wn=function(M){var N=Date.now(),K=Math.max(0,16-(N-An)),Z=w.setTimeout(function(){M(N+K)},K);return An=N+K,Z},ln=function(M){return clearTimeout(M)})}},At={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(w){At.isScrolling=!0,$t.cancel(At.i),w.autoScroll=At,At.interaction=w,At.prevTime=At.now(),At.i=$t.request(At.scroll)},stop:function(){At.isScrolling=!1,At.interaction&&(At.interaction.autoScroll=null),$t.cancel(At.i)},scroll:function(){var w=At.interaction,y=w.interactable,x=w.element,O=w.prepared.name,M=y.options[O].autoScroll,N=Ft(M.container,y,x),K=At.now(),Z=(K-At.prevTime)/1e3,ie=M.speed*Z;if(ie>=1){var Ce={x:At.x*ie,y:At.y*ie};if(Ce.x||Ce.y){var le=Dr(N);Q.window(N)?N.scrollBy(Ce.x,Ce.y):N&&(N.scrollLeft+=Ce.x,N.scrollTop+=Ce.y);var De=Dr(N),Ue={x:De.x-le.x,y:De.y-le.y};(Ue.x||Ue.y)&&y.fire({type:"autoscroll",target:x,interactable:y,delta:Ue,interaction:w,container:N})}At.prevTime=K}At.isScrolling&&($t.cancel(At.i),At.i=$t.request(At.scroll))},check:function(w,y){var x;return(x=w.options[y].autoScroll)==null?void 0:x.enabled},onInteractionMove:function(w){var y=w.interaction,x=w.pointer;if(y.interacting()&&At.check(y.interactable,y.prepared.name))if(y.simulation)At.x=At.y=0;else{var O,M,N,K,Z=y.interactable,ie=y.element,Ce=y.prepared.name,le=Z.options[Ce].autoScroll,De=Ft(le.container,Z,ie);if(Q.window(De))K=x.clientX<At.margin,O=x.clientY<At.margin,M=x.clientX>De.innerWidth-At.margin,N=x.clientY>De.innerHeight-At.margin;else{var Ue=_t(De);K=x.clientX<Ue.left+At.margin,O=x.clientY<Ue.top+At.margin,M=x.clientX>Ue.right-At.margin,N=x.clientY>Ue.bottom-At.margin}At.x=M?1:K?-1:0,At.y=N?1:O?-1:0,At.isScrolling||(At.margin=le.margin,At.speed=le.speed,At.start(y))}}};function Ft(w,y,x){return(Q.string(w)?vt(w,y,x):w)||V(x)}function Dr(w){return Q.window(w)&&(w=window.document.body),{x:w.scrollLeft,y:w.scrollTop}}var Lr={id:"auto-scroll",install:function(w){var y=w.defaults,x=w.actions;w.autoScroll=At,At.now=function(){return w.now()},x.phaselessTypes.autoscroll=!0,y.perAction.autoScroll=At.defaults},listeners:{"interactions:new":function(w){w.interaction.autoScroll=null},"interactions:destroy":function(w){w.interaction.autoScroll=null,At.stop(),At.interaction&&(At.interaction=null)},"interactions:stop":At.stop,"interactions:action-move":function(w){return At.onInteractionMove(w)}}},$n=Lr;function Tn(w,y){var x=!1;return function(){return x||(L.console.warn(y),x=!0),w.apply(this,arguments)}}function sr(w,y){return w.name=y.name,w.axis=y.axis,w.edges=y.edges,w}function an(w){return Q.bool(w)?(this.options.styleCursor=w,this):w===null?(delete this.options.styleCursor,this):this.options.styleCursor}function xt(w){return Q.func(w)?(this.options.actionChecker=w,this):w===null?(delete this.options.actionChecker,this):this.options.actionChecker}var Qn={id:"auto-start/interactableMethods",install:function(w){var y=w.Interactable;y.prototype.getAction=function(x,O,M,N){var K=function(Z,ie,Ce,le,De){var Ue=Z.getRect(le),at=ie.buttons||{0:1,1:4,3:8,4:16}[ie.button],Qe={action:null,interactable:Z,interaction:Ce,element:le,rect:Ue,buttons:at};return De.fire("auto-start:check",Qe),Qe.action}(this,O,M,N,w);return this.options.actionChecker?this.options.actionChecker(x,O,K,this,N,M):K},y.prototype.ignoreFrom=Tn(function(x){return this._backCompatOption("ignoreFrom",x)},"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),y.prototype.allowFrom=Tn(function(x){return this._backCompatOption("allowFrom",x)},"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),y.prototype.actionChecker=xt,y.prototype.styleCursor=an}};function xn(w,y,x,O,M){return y.testIgnoreAllow(y.options[w.name],x,O)&&y.options[w.name].enabled&&pr(y,x,w,M)?w:null}function er(w,y,x,O,M,N,K){for(var Z=0,ie=O.length;Z<ie;Z++){var Ce=O[Z],le=M[Z],De=Ce.getAction(y,x,w,le);if(De){var Ue=xn(De,Ce,le,N,K);if(Ue)return{action:Ue,interactable:Ce,element:le}}}return{action:null,interactable:null,element:null}}function qt(w,y,x,O,M){var N=[],K=[],Z=O;function ie(le){N.push(le),K.push(Z)}for(;Q.element(Z);){N=[],K=[],M.interactables.forEachMatch(Z,ie);var Ce=er(w,y,x,N,K,O,M);if(Ce.action&&!Ce.interactable.options[Ce.action.name].manualStart)return Ce;Z=Le(Z)}return{action:null,interactable:null,element:null}}function fn(w,y,x){var O=y.action,M=y.interactable,N=y.element;O=O||{name:null},w.interactable=M,w.element=N,sr(w.prepared,O),w.rect=M&&O.name?M.getRect(N):null,jt(w,x),x.fire("autoStart:prepared",{interaction:w})}function pr(w,y,x,O){var M=w.options,N=M[x.name].max,K=M[x.name].maxPerElement,Z=O.autoStart.maxInteractions,ie=0,Ce=0,le=0;if(!(N&&K&&Z))return!1;for(var De=0,Ue=O.interactions.list;De<Ue.length;De++){var at=Ue[De],Qe=at.prepared.name;if(at.interacting()&&(++ie>=Z||at.interactable===w&&((Ce+=Qe===x.name?1:0)>=N||at.element===y&&(le++,Qe===x.name&&le>=K))))return!1}return Z>0}function Wr(w,y){return Q.number(w)?(y.autoStart.maxInteractions=w,this):y.autoStart.maxInteractions}function Ze(w,y,x){var O=x.autoStart.cursorElement;O&&O!==w&&(O.style.cursor=""),w.ownerDocument.documentElement.style.cursor=y,w.style.cursor=y,x.autoStart.cursorElement=y?w:null}function jt(w,y){var x=w.interactable,O=w.element,M=w.prepared;if(w.pointerType==="mouse"&&x&&x.options.styleCursor){var N="";if(M.name){var K=x.options[M.name].cursorChecker;N=Q.func(K)?K(M,x,O,w._interacting):y.actions.map[M.name].getCursor(M)}Ze(w.element,N||"",y)}else y.autoStart.cursorElement&&Ze(y.autoStart.cursorElement,"",y)}var io={id:"auto-start/base",before:["actions"],install:function(w){var y=w.interactStatic,x=w.defaults;w.usePlugin(Qn),x.base.actionChecker=null,x.base.styleCursor=!0,Fe(x.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),y.maxInteractions=function(O){return Wr(O,w)},w.autoStart={maxInteractions:1/0,withinInteractionLimit:pr,cursorElement:null}},listeners:{"interactions:down":function(w,y){var x=w.interaction,O=w.pointer,M=w.event,N=w.eventTarget;x.interacting()||fn(x,qt(x,O,M,N,y),y)},"interactions:move":function(w,y){(function(x,O){var M=x.interaction,N=x.pointer,K=x.event,Z=x.eventTarget;M.pointerType!=="mouse"||M.pointerIsDown||M.interacting()||fn(M,qt(M,N,K,Z,O),O)})(w,y),function(x,O){var M=x.interaction;if(M.pointerIsDown&&!M.interacting()&&M.pointerWasMoved&&M.prepared.name){O.fire("autoStart:before-start",x);var N=M.interactable,K=M.prepared.name;K&&N&&(N.options[K].manualStart||!pr(N,M.element,M.prepared,O)?M.stop():(M.start(M.prepared,N,M.element),jt(M,O)))}}(w,y)},"interactions:stop":function(w,y){var x=w.interaction,O=x.interactable;O&&O.options.styleCursor&&Ze(x.element,"",y)}},maxInteractions:Wr,withinInteractionLimit:pr,validateAction:xn},B=io,ue={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(w,y){var x=w.interaction,O=w.eventTarget,M=w.dx,N=w.dy;if(x.prepared.name==="drag"){var K=Math.abs(M),Z=Math.abs(N),ie=x.interactable.options.drag,Ce=ie.startAxis,le=K>Z?"x":K<Z?"y":"xy";if(x.prepared.axis=ie.lockAxis==="start"?le[0]:ie.lockAxis,le!=="xy"&&Ce!=="xy"&&Ce!==le){x.prepared.name=null;for(var De=O,Ue=function(Qe){if(Qe!==x.interactable){var dt=x.interactable.options.drag;if(!dt.manualStart&&Qe.testIgnoreAllow(dt,De,O)){var Et=Qe.getAction(x.downPointer,x.downEvent,x,De);if(Et&&Et.name==="drag"&&function(St,It){if(!It)return!1;var Xt=It.options.drag.startAxis;return St==="xy"||Xt==="xy"||Xt===St}(le,Qe)&&B.validateAction(Et,Qe,De,O,y))return Qe}}};Q.element(De);){var at=y.interactables.forEachMatch(De,Ue);if(at){x.prepared.name="drag",x.interactable=at,x.element=De;break}De=Le(De)}}}}}};function Ve(w){var y=w.prepared&&w.prepared.name;if(!y)return null;var x=w.interactable.options;return x[y].hold||x[y].delay}var tt={id:"auto-start/hold",install:function(w){var y=w.defaults;w.usePlugin(B),y.perAction.hold=0,y.perAction.delay=0},listeners:{"interactions:new":function(w){w.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(w){var y=w.interaction,x=Ve(y);x>0&&(y.autoStartHoldTimer=setTimeout(function(){y.start(y.prepared,y.interactable,y.element)},x))},"interactions:move":function(w){var y=w.interaction,x=w.duplicate;y.autoStartHoldTimer&&y.pointerWasMoved&&!x&&(clearTimeout(y.autoStartHoldTimer),y.autoStartHoldTimer=null)},"autoStart:before-start":function(w){var y=w.interaction;Ve(y)>0&&(y.prepared.name=null)}},getHoldDuration:Ve},it=tt,Gt={id:"auto-start",install:function(w){w.usePlugin(B),w.usePlugin(it),w.usePlugin(ue)}},Jt=function(w){return/^(always|never|auto)$/.test(w)?(this.options.preventDefault=w,this):Q.bool(w)?(this.options.preventDefault=w?"always":"never",this):this.options.preventDefault};function Cn(w){var y=w.interaction,x=w.event;y.interactable&&y.interactable.checkAndPreventDefault(x)}var sn={id:"core/interactablePreventDefault",install:function(w){var y=w.Interactable;y.prototype.preventDefault=Jt,y.prototype.checkAndPreventDefault=function(x){return function(O,M,N){var K=O.options.preventDefault;if(K!=="never")if(K!=="always"){if(M.events.supportsPassive&&/^touch(start|move)$/.test(N.type)){var Z=V(N.target).document,ie=M.getDocOptions(Z);if(!ie||!ie.events||ie.events.passive!==!1)return}/^(mouse|pointer|touch)*(down|start)/i.test(N.type)||Q.element(N.target)&&$e(N.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||N.preventDefault()}else N.preventDefault()}(this,w,x)},w.interactions.docEvents.push({type:"dragstart",listener:function(x){for(var O=0,M=w.interactions.list;O<M.length;O++){var N=M[O];if(N.element&&(N.element===x.target||ke(N.element,x.target)))return void N.interactable.checkAndPreventDefault(x)}}})},listeners:["down","move","up","cancel"].reduce(function(w,y){return w["interactions:".concat(y)]=Cn,w},{})};function hr(w,y){if(y.phaselessTypes[w])return!0;for(var x in y.map)if(w.indexOf(x)===0&&w.substr(x.length)in y.phases)return!0;return!1}function ao(w){var y={};for(var x in w){var O=w[x];Q.plainObject(O)?y[x]=ao(O):Q.array(O)?y[x]=ut(O):y[x]=O}return y}var Ko=function(){function w(y){i(this,w),this.states=[],this.startOffset={left:0,right:0,top:0,bottom:0},this.startDelta=void 0,this.result=void 0,this.endResult=void 0,this.startEdges=void 0,this.edges=void 0,this.interaction=void 0,this.interaction=y,this.result=To(),this.edges={left:!1,right:!1,top:!1,bottom:!1}}return u(w,[{key:"start",value:function(y,x){var O,M,N=y.phase,K=this.interaction,Z=function(Ce){var le=Ce.interactable.options[Ce.prepared.name],De=le.modifiers;return De&&De.length?De:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map(function(Ue){var at=le[Ue];return at&&at.enabled&&{options:at,methods:at._methods}}).filter(function(Ue){return!!Ue})}(K);this.prepareStates(Z),this.startEdges=Fe({},K.edges),this.edges=Fe({},this.startEdges),this.startOffset=(O=K.rect,M=x,O?{left:M.x-O.left,top:M.y-O.top,right:O.right-M.x,bottom:O.bottom-M.y}:{left:0,top:0,right:0,bottom:0}),this.startDelta={x:0,y:0};var ie=this.fillArg({phase:N,pageCoords:x,preEnd:!1});return this.result=To(),this.startAll(ie),this.result=this.setAll(ie)}},{key:"fillArg",value:function(y){var x=this.interaction;return y.interaction=x,y.interactable=x.interactable,y.element=x.element,y.rect||(y.rect=x.rect),y.edges||(y.edges=this.startEdges),y.startOffset=this.startOffset,y}},{key:"startAll",value:function(y){for(var x=0,O=this.states;x<O.length;x++){var M=O[x];M.methods.start&&(y.state=M,M.methods.start(y))}}},{key:"setAll",value:function(y){var x=y.phase,O=y.preEnd,M=y.skipModifiers,N=y.rect,K=y.edges;y.coords=Fe({},y.pageCoords),y.rect=Fe({},N),y.edges=Fe({},K);for(var Z=M?this.states.slice(M):this.states,ie=To(y.coords,y.rect),Ce=0;Ce<Z.length;Ce++){var le,De=Z[Ce],Ue=De.options,at=Fe({},y.coords),Qe=null;(le=De.methods)!=null&&le.set&&this.shouldDo(Ue,O,x)&&(y.state=De,Qe=De.methods.set(y),Mt(y.edges,y.rect,{x:y.coords.x-at.x,y:y.coords.y-at.y})),ie.eventProps.push(Qe)}Fe(this.edges,y.edges),ie.delta.x=y.coords.x-y.pageCoords.x,ie.delta.y=y.coords.y-y.pageCoords.y,ie.rectDelta.left=y.rect.left-N.left,ie.rectDelta.right=y.rect.right-N.right,ie.rectDelta.top=y.rect.top-N.top,ie.rectDelta.bottom=y.rect.bottom-N.bottom;var dt=this.result.coords,Et=this.result.rect;if(dt&&Et){var St=ie.rect.left!==Et.left||ie.rect.right!==Et.right||ie.rect.top!==Et.top||ie.rect.bottom!==Et.bottom;ie.changed=St||dt.x!==ie.coords.x||dt.y!==ie.coords.y}return ie}},{key:"applyToInteraction",value:function(y){var x=this.interaction,O=y.phase,M=x.coords.cur,N=x.coords.start,K=this.result,Z=this.startDelta,ie=K.delta;O==="start"&&Fe(this.startDelta,K.delta);for(var Ce=0,le=[[N,Z],[M,ie]];Ce<le.length;Ce++){var De=le[Ce],Ue=De[0],at=De[1];Ue.page.x+=at.x,Ue.page.y+=at.y,Ue.client.x+=at.x,Ue.client.y+=at.y}var Qe=this.result.rectDelta,dt=y.rect||x.rect;dt.left+=Qe.left,dt.right+=Qe.right,dt.top+=Qe.top,dt.bottom+=Qe.bottom,dt.width=dt.right-dt.left,dt.height=dt.bottom-dt.top}},{key:"setAndApply",value:function(y){var x=this.interaction,O=y.phase,M=y.preEnd,N=y.skipModifiers,K=this.setAll(this.fillArg({preEnd:M,phase:O,pageCoords:y.modifiedCoords||x.coords.cur.page}));if(this.result=K,!K.changed&&(!N||N<this.states.length)&&x.interacting())return!1;if(y.modifiedCoords){var Z=x.coords.cur.page,ie={x:y.modifiedCoords.x-Z.x,y:y.modifiedCoords.y-Z.y};K.coords.x+=ie.x,K.coords.y+=ie.y,K.delta.x+=ie.x,K.delta.y+=ie.y}this.applyToInteraction(y)}},{key:"beforeEnd",value:function(y){var x=y.interaction,O=y.event,M=this.states;if(M&&M.length){for(var N=!1,K=0;K<M.length;K++){var Z=M[K];y.state=Z;var ie=Z.options,Ce=Z.methods,le=Ce.beforeEnd&&Ce.beforeEnd(y);if(le)return this.endResult=le,!1;N=N||!N&&this.shouldDo(ie,!0,y.phase,!0)}N&&x.move({event:O,preEnd:!0})}}},{key:"stop",value:function(y){var x=y.interaction;if(this.states&&this.states.length){var O=Fe({states:this.states,interactable:x.interactable,element:x.element,rect:null},y);this.fillArg(O);for(var M=0,N=this.states;M<N.length;M++){var K=N[M];O.state=K,K.methods.stop&&K.methods.stop(O)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(y){this.states=[];for(var x=0;x<y.length;x++){var O=y[x],M=O.options,N=O.methods,K=O.name;this.states.push({options:M,methods:N,index:x,name:K})}return this.states}},{key:"restoreInteractionCoords",value:function(y){var x=y.interaction,O=x.coords,M=x.rect,N=x.modification;if(N.result){for(var K=N.startDelta,Z=N.result,ie=Z.delta,Ce=Z.rectDelta,le=0,De=[[O.start,K],[O.cur,ie]];le<De.length;le++){var Ue=De[le],at=Ue[0],Qe=Ue[1];at.page.x-=Qe.x,at.page.y-=Qe.y,at.client.x-=Qe.x,at.client.y-=Qe.y}M.left-=Ce.left,M.right-=Ce.right,M.top-=Ce.top,M.bottom-=Ce.bottom}}},{key:"shouldDo",value:function(y,x,O,M){return!(!y||y.enabled===!1||M&&!y.endOnly||y.endOnly&&!x||O==="start"&&!y.setStart)}},{key:"copyFrom",value:function(y){this.startOffset=y.startOffset,this.startDelta=y.startDelta,this.startEdges=y.startEdges,this.edges=y.edges,this.states=y.states.map(function(x){return ao(x)}),this.result=To(Fe({},y.result.coords),Fe({},y.result.rect))}},{key:"destroy",value:function(){for(var y in this)this[y]=null}}]),w}();function To(w,y){return{rect:y,coords:w,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function Or(w,y){var x=w.defaults,O={start:w.start,set:w.set,beforeEnd:w.beforeEnd,stop:w.stop},M=function(N){var K=N||{};for(var Z in K.enabled=K.enabled!==!1,x)Z in K||(K[Z]=x[Z]);var ie={options:K,methods:O,name:y,enable:function(){return K.enabled=!0,ie},disable:function(){return K.enabled=!1,ie}};return ie};return y&&typeof y=="string"&&(M._defaults=x,M._methods=O),M}function Go(w){var y=w.iEvent,x=w.interaction.modification.result;x&&(y.modifiers=x.eventProps)}var zi={id:"modifiers/base",before:["actions"],install:function(w){w.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(w){var y=w.interaction;y.modification=new Ko(y)},"interactions:before-action-start":function(w){var y=w.interaction,x=w.interaction.modification;x.start(w,y.coords.start.page),y.edges=x.edges,x.applyToInteraction(w)},"interactions:before-action-move":function(w){var y=w.interaction,x=y.modification,O=x.setAndApply(w);return y.edges=x.edges,O},"interactions:before-action-end":function(w){var y=w.interaction,x=y.modification,O=x.beforeEnd(w);return y.edges=x.startEdges,O},"interactions:action-start":Go,"interactions:action-move":Go,"interactions:action-end":Go,"interactions:after-action-start":function(w){return w.interaction.modification.restoreInteractionCoords(w)},"interactions:after-action-move":function(w){return w.interaction.modification.restoreInteractionCoords(w)},"interactions:stop":function(w){return w.interaction.modification.stop(w)}}},xi=zi,li={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}},Eo=function(w){f(x,w);var y=_(x);function x(O,M,N,K,Z,ie,Ce){var le;i(this,x),(le=y.call(this,O)).relatedTarget=null,le.screenX=void 0,le.screenY=void 0,le.button=void 0,le.buttons=void 0,le.ctrlKey=void 0,le.shiftKey=void 0,le.altKey=void 0,le.metaKey=void 0,le.page=void 0,le.client=void 0,le.delta=void 0,le.rect=void 0,le.x0=void 0,le.y0=void 0,le.t0=void 0,le.dt=void 0,le.duration=void 0,le.clientX0=void 0,le.clientY0=void 0,le.velocity=void 0,le.speed=void 0,le.swipe=void 0,le.axes=void 0,le.preEnd=void 0,Z=Z||O.element;var De=O.interactable,Ue=(De&&De.options||li).deltaSource,at=un(De,Z,N),Qe=K==="start",dt=K==="end",Et=Qe?m(le):O.prevEvent,St=Qe?O.coords.start:dt?{page:Et.page,client:Et.client,timeStamp:O.coords.cur.timeStamp}:O.coords.cur;return le.page=Fe({},St.page),le.client=Fe({},St.client),le.rect=Fe({},O.rect),le.timeStamp=St.timeStamp,dt||(le.page.x-=at.x,le.page.y-=at.y,le.client.x-=at.x,le.client.y-=at.y),le.ctrlKey=M.ctrlKey,le.altKey=M.altKey,le.shiftKey=M.shiftKey,le.metaKey=M.metaKey,le.button=M.button,le.buttons=M.buttons,le.target=Z,le.currentTarget=Z,le.preEnd=ie,le.type=Ce||N+(K||""),le.interactable=De,le.t0=Qe?O.pointers[O.pointers.length-1].downTime:Et.t0,le.x0=O.coords.start.page.x-at.x,le.y0=O.coords.start.page.y-at.y,le.clientX0=O.coords.start.client.x-at.x,le.clientY0=O.coords.start.client.y-at.y,le.delta=Qe||dt?{x:0,y:0}:{x:le[Ue].x-Et[Ue].x,y:le[Ue].y-Et[Ue].y},le.dt=O.coords.delta.timeStamp,le.duration=le.timeStamp-le.t0,le.velocity=Fe({},O.coords.velocity[Ue]),le.speed=E(le.velocity.x,le.velocity.y),le.swipe=dt||K==="inertiastart"?le.getSwipe():null,le}return u(x,[{key:"getSwipe",value:function(){var O=this._interaction;if(O.prevEvent.speed<600||this.timeStamp-O.prevEvent.timeStamp>150)return null;var M=180*Math.atan2(O.prevEvent.velocityY,O.prevEvent.velocityX)/Math.PI;M<0&&(M+=360);var N=112.5<=M&&M<247.5,K=202.5<=M&&M<337.5;return{up:K,down:!K&&22.5<=M&&M<157.5,left:N,right:!N&&(292.5<=M||M<67.5),angle:M,speed:O.prevEvent.speed,velocity:{x:O.prevEvent.velocityX,y:O.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}]),x}(qe);Object.defineProperties(Eo.prototype,{pageX:{get:function(){return this.page.x},set:function(w){this.page.x=w}},pageY:{get:function(){return this.page.y},set:function(w){this.page.y=w}},clientX:{get:function(){return this.client.x},set:function(w){this.client.x=w}},clientY:{get:function(){return this.client.y},set:function(w){this.client.y=w}},dx:{get:function(){return this.delta.x},set:function(w){this.delta.x=w}},dy:{get:function(){return this.delta.y},set:function(w){this.delta.y=w}},velocityX:{get:function(){return this.velocity.x},set:function(w){this.velocity.x=w}},velocityY:{get:function(){return this.velocity.y},set:function(w){this.velocity.y=w}}});var Yo=u(function w(y,x,O,M,N){i(this,w),this.id=void 0,this.pointer=void 0,this.event=void 0,this.downTime=void 0,this.downTarget=void 0,this.id=y,this.pointer=x,this.event=O,this.downTime=M,this.downTarget=N}),Hi=function(w){return w.interactable="",w.element="",w.prepared="",w.pointerIsDown="",w.pointerWasMoved="",w._proxy="",w}({}),Rn=function(w){return w.start="",w.move="",w.end="",w.stop="",w.interacting="",w}({}),qn=0,aa=function(){function w(y){var x=this,O=y.pointerType,M=y.scopeFire;i(this,w),this.interactable=null,this.element=null,this.rect=null,this._rects=void 0,this.edges=null,this._scopeFire=void 0,this.prepared={name:null,axis:null,edges:null},this.pointerType=void 0,this.pointers=[],this.downEvent=null,this.downPointer={},this._latestPointer={pointer:null,event:null,eventTarget:null},this.prevEvent=null,this.pointerIsDown=!1,this.pointerWasMoved=!1,this._interacting=!1,this._ending=!1,this._stopped=!0,this._proxy=void 0,this.simulation=null,this.doMove=Tn(function(le){this.move(le)},"The interaction.doMove() method has been renamed to interaction.move()"),this.coords={start:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},prev:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},cur:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},delta:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},velocity:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},this._id=qn++,this._scopeFire=M,this.pointerType=O;var N=this;this._proxy={};var K=function(le){Object.defineProperty(x._proxy,le,{get:function(){return N[le]}})};for(var Z in Hi)K(Z);var ie=function(le){Object.defineProperty(x._proxy,le,{value:function(){return N[le].apply(N,arguments)}})};for(var Ce in Rn)ie(Ce);this._scopeFire("interactions:new",{interaction:this})}return u(w,[{key:"pointerMoveTolerance",get:function(){return 1}},{key:"pointerDown",value:function(y,x,O){var M=this.updatePointer(y,x,O,!0),N=this.pointers[M];this._scopeFire("interactions:down",{pointer:y,event:x,eventTarget:O,pointerIndex:M,pointerInfo:N,type:"down",interaction:this})}},{key:"start",value:function(y,x,O){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<(y.name==="gesture"?2:1)||!x.options[y.name].enabled)&&(sr(this.prepared,y),this.interactable=x,this.element=O,this.rect=x.getRect(O),this.edges=this.prepared.edges?Fe({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(y,x,O){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(y,x,O,!1);var M,N,K=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(M=this.coords.cur.client.x-this.coords.start.client.x,N=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=E(M,N)>this.pointerMoveTolerance);var Z,ie,Ce,le=this.getPointerIndex(y),De={pointer:y,pointerIndex:le,pointerInfo:this.pointers[le],event:x,type:"move",eventTarget:O,dx:M,dy:N,duplicate:K,interaction:this};K||(Z=this.coords.velocity,ie=this.coords.delta,Ce=Math.max(ie.timeStamp/1e3,.001),Z.page.x=ie.page.x/Ce,Z.page.y=ie.page.y/Ce,Z.client.x=ie.client.x/Ce,Z.client.y=ie.client.y/Ce,Z.timeStamp=Ce),this._scopeFire("interactions:move",De),K||this.simulation||(this.interacting()&&(De.type=null,this.move(De)),this.pointerWasMoved&&we(this.coords.prev,this.coords.cur))}},{key:"move",value:function(y){y&&y.event||xe(this.coords.delta),(y=Fe({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},y||{})).phase="move",this._doPhase(y)}},{key:"pointerUp",value:function(y,x,O,M){var N=this.getPointerIndex(y);N===-1&&(N=this.updatePointer(y,x,O,!1));var K=/cancel$/i.test(x.type)?"cancel":"up";this._scopeFire("interactions:".concat(K),{pointer:y,pointerIndex:N,pointerInfo:this.pointers[N],event:x,eventTarget:O,type:K,curEventTarget:M,interaction:this}),this.simulation||this.end(x),this.removePointer(y,x)}},{key:"documentBlur",value:function(y){this.end(y),this._scopeFire("interactions:blur",{event:y,type:"blur",interaction:this})}},{key:"end",value:function(y){var x;this._ending=!0,y=y||this._latestPointer.event,this.interacting()&&(x=this._doPhase({event:y,interaction:this,phase:"end"})),this._ending=!1,x===!0&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(y){var x=et(y);return this.pointerType==="mouse"||this.pointerType==="pen"?this.pointers.length-1:Ot(this.pointers,function(O){return O.id===x})}},{key:"getPointerInfo",value:function(y){return this.pointers[this.getPointerIndex(y)]}},{key:"updatePointer",value:function(y,x,O,M){var N,K,Z,ie=et(y),Ce=this.getPointerIndex(y),le=this.pointers[Ce];return M=M!==!1&&(M||/(down|start)$/i.test(x.type)),le?le.pointer=y:(le=new Yo(ie,y,x,null,null),Ce=this.pointers.length,this.pointers.push(le)),ct(this.coords.cur,this.pointers.map(function(De){return De.pointer}),this._now()),N=this.coords.delta,K=this.coords.prev,Z=this.coords.cur,N.page.x=Z.page.x-K.page.x,N.page.y=Z.page.y-K.page.y,N.client.x=Z.client.x-K.client.x,N.client.y=Z.client.y-K.client.y,N.timeStamp=Z.timeStamp-K.timeStamp,M&&(this.pointerIsDown=!0,le.downTime=this.coords.cur.timeStamp,le.downTarget=O,J(this.downPointer,y),this.interacting()||(we(this.coords.start,this.coords.cur),we(this.coords.prev,this.coords.cur),this.downEvent=x,this.pointerWasMoved=!1)),this._updateLatestPointer(y,x,O),this._scopeFire("interactions:update-pointer",{pointer:y,event:x,eventTarget:O,down:M,pointerInfo:le,pointerIndex:Ce,interaction:this}),Ce}},{key:"removePointer",value:function(y,x){var O=this.getPointerIndex(y);if(O!==-1){var M=this.pointers[O];this._scopeFire("interactions:remove-pointer",{pointer:y,event:x,eventTarget:null,pointerIndex:O,pointerInfo:M,interaction:this}),this.pointers.splice(O,1),this.pointerIsDown=!1}}},{key:"_updateLatestPointer",value:function(y,x,O){this._latestPointer.pointer=y,this._latestPointer.event=x,this._latestPointer.eventTarget=O}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(y,x,O,M){return new Eo(this,y,this.prepared.name,x,this.element,O,M)}},{key:"_fireEvent",value:function(y){var x;(x=this.interactable)==null||x.fire(y),(!this.prevEvent||y.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=y)}},{key:"_doPhase",value:function(y){var x=y.event,O=y.phase,M=y.preEnd,N=y.type,K=this.rect;if(K&&O==="move"&&(Mt(this.edges,K,this.coords.delta[this.interactable.options.deltaSource]),K.width=K.right-K.left,K.height=K.bottom-K.top),this._scopeFire("interactions:before-action-".concat(O),y)===!1)return!1;var Z=y.iEvent=this._createPreparedEvent(x,O,M,N);return this._scopeFire("interactions:action-".concat(O),y),O==="start"&&(this.prevEvent=Z),this._fireEvent(Z),this._scopeFire("interactions:after-action-".concat(O),y),!0}},{key:"_now",value:function(){return Date.now()}}]),w}();function $r(w){Po(w.interaction)}function Po(w){if(!function(x){return!(!x.offset.pending.x&&!x.offset.pending.y)}(w))return!1;var y=w.offset.pending;return Fn(w.coords.cur,y),Fn(w.coords.delta,y),Mt(w.edges,w.rect,y),y.x=0,y.y=0,!0}function Tr(w){var y=w.x,x=w.y;this.offset.pending.x+=y,this.offset.pending.y+=x,this.offset.total.x+=y,this.offset.total.y+=x}function Fn(w,y){var x=w.page,O=w.client,M=y.x,N=y.y;x.x+=M,x.y+=N,O.x+=M,O.y+=N}Rn.offsetBy="";var Ta={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(w){w.Interaction.prototype.offsetBy=Tr},listeners:{"interactions:new":function(w){w.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(w){return function(y){y.pointerIsDown&&(Fn(y.coords.cur,y.offset.total),y.offset.pending.x=0,y.offset.pending.y=0)}(w.interaction)},"interactions:before-action-start":$r,"interactions:before-action-move":$r,"interactions:before-action-end":function(w){var y=w.interaction;if(Po(y))return y.move({offset:!0}),y.end(),!1},"interactions:stop":function(w){var y=w.interaction;y.offset.total.x=0,y.offset.total.y=0,y.offset.pending.x=0,y.offset.pending.y=0}}},ko=Ta,so=function(){function w(y){i(this,w),this.active=!1,this.isModified=!1,this.smoothEnd=!1,this.allowResume=!1,this.modification=void 0,this.modifierCount=0,this.modifierArg=void 0,this.startCoords=void 0,this.t0=0,this.v0=0,this.te=0,this.targetOffset=void 0,this.modifiedOffset=void 0,this.currentOffset=void 0,this.lambda_v0=0,this.one_ve_v0=0,this.timeout=void 0,this.interaction=void 0,this.interaction=y}return u(w,[{key:"start",value:function(y){var x=this.interaction,O=Ao(x);if(!O||!O.enabled)return!1;var M=x.coords.velocity.client,N=E(M.x,M.y),K=this.modification||(this.modification=new Ko(x));if(K.copyFrom(x.modification),this.t0=x._now(),this.allowResume=O.allowResume,this.v0=N,this.currentOffset={x:0,y:0},this.startCoords=x.coords.cur.page,this.modifierArg=K.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"}),this.t0-x.coords.cur.timeStamp<50&&N>O.minSpeed&&N>O.endSpeed)this.startInertia();else{if(K.result=K.setAll(this.modifierArg),!K.result.changed)return!1;this.startSmoothEnd()}return x.modification.result.rect=null,x.offsetBy(this.targetOffset),x._doPhase({interaction:x,event:y,phase:"inertiastart"}),x.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),x.modification.result.rect=null,this.active=!0,x.simulation=this,!0}},{key:"startInertia",value:function(){var y=this,x=this.interaction.coords.velocity.client,O=Ao(this.interaction),M=O.resistance,N=-Math.log(O.endSpeed/this.v0)/M;this.targetOffset={x:(x.x-N)/M,y:(x.y-N)/M},this.te=N,this.lambda_v0=M/this.v0,this.one_ve_v0=1-O.endSpeed/this.v0;var K=this.modification,Z=this.modifierArg;Z.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},K.result=K.setAll(Z),K.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+K.result.delta.x,y:this.targetOffset.y+K.result.delta.y}),this.onNextFrame(function(){return y.inertiaTick()})}},{key:"startSmoothEnd",value:function(){var y=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame(function(){return y.smoothEndTick()})}},{key:"onNextFrame",value:function(y){var x=this;this.timeout=$t.request(function(){x.active&&y()})}},{key:"inertiaTick",value:function(){var y,x,O,M,N,K,Z,ie=this,Ce=this.interaction,le=Ao(Ce).resistance,De=(Ce._now()-this.t0)/1e3;if(De<this.te){var Ue,at=1-(Math.exp(-le*De)-this.lambda_v0)/this.one_ve_v0;this.isModified?(y=0,x=0,O=this.targetOffset.x,M=this.targetOffset.y,N=this.modifiedOffset.x,K=this.modifiedOffset.y,Ue={x:Kr(Z=at,y,O,N),y:Kr(Z,x,M,K)}):Ue={x:this.targetOffset.x*at,y:this.targetOffset.y*at};var Qe={x:Ue.x-this.currentOffset.x,y:Ue.y-this.currentOffset.y};this.currentOffset.x+=Qe.x,this.currentOffset.y+=Qe.y,Ce.offsetBy(Qe),Ce.move(),this.onNextFrame(function(){return ie.inertiaTick()})}else Ce.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var y=this,x=this.interaction,O=x._now()-this.t0,M=Ao(x).smoothEndDuration;if(O<M){var N={x:Ui(O,0,this.targetOffset.x,M),y:Ui(O,0,this.targetOffset.y,M)},K={x:N.x-this.currentOffset.x,y:N.y-this.currentOffset.y};this.currentOffset.x+=K.x,this.currentOffset.y+=K.y,x.offsetBy(K),x.move({skipModifiers:this.modifierCount}),this.onNextFrame(function(){return y.smoothEndTick()})}else x.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(y){var x=y.pointer,O=y.event,M=y.eventTarget,N=this.interaction;N.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),N.updatePointer(x,O,M,!0),N._doPhase({interaction:N,event:O,phase:"resume"}),we(N.coords.prev,N.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,$t.cancel(this.timeout)}}]),w}();function Ao(w){var y=w.interactable,x=w.prepared;return y&&y.options&&x.name&&y.options[x.name].inertia}var lo={id:"inertia",before:["modifiers","actions"],install:function(w){var y=w.defaults;w.usePlugin(ko),w.usePlugin(xi),w.actions.phases.inertiastart=!0,w.actions.phases.resume=!0,y.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(w){var y=w.interaction;y.inertia=new so(y)},"interactions:before-action-end":function(w){var y=w.interaction,x=w.event;return(!y._interacting||y.simulation||!y.inertia.start(x))&&null},"interactions:down":function(w){var y=w.interaction,x=w.eventTarget,O=y.inertia;if(O.active)for(var M=x;Q.element(M);){if(M===y.element){O.resume(w);break}M=Le(M)}},"interactions:stop":function(w){var y=w.interaction.inertia;y.active&&y.stop()},"interactions:before-action-resume":function(w){var y=w.interaction.modification;y.stop(w),y.start(w,w.interaction.coords.cur.page),y.applyToInteraction(w)},"interactions:before-action-inertiastart":function(w){return w.interaction.modification.setAndApply(w)},"interactions:action-resume":Go,"interactions:action-inertiastart":Go,"interactions:after-action-inertiastart":function(w){return w.interaction.modification.restoreInteractionCoords(w)},"interactions:after-action-resume":function(w){return w.interaction.modification.restoreInteractionCoords(w)}}};function Kr(w,y,x,O){var M=1-w;return M*M*y+2*M*w*x+w*w*O}function Ui(w,y,x,O){return-x*(w/=O)*(w-2)+y}var Bi=lo;function ui(w,y){for(var x=0;x<y.length;x++){var O=y[x];if(w.immediatePropagationStopped)break;O(w)}}var uo=function(){function w(y){i(this,w),this.options=void 0,this.types={},this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.global=void 0,this.options=Fe({},y||{})}return u(w,[{key:"fire",value:function(y){var x,O=this.global;(x=this.types[y.type])&&ui(y,x),!y.propagationStopped&&O&&(x=O[y.type])&&ui(y,x)}},{key:"on",value:function(y,x){var O=tn(y,x);for(y in O)this.types[y]=st(this.types[y]||[],O[y])}},{key:"off",value:function(y,x){var O=tn(y,x);for(y in O){var M=this.types[y];if(M&&M.length)for(var N=0,K=O[y];N<K.length;N++){var Z=K[N],ie=M.indexOf(Z);ie!==-1&&M.splice(ie,1)}}}},{key:"getRect",value:function(y){return null}}]),w}(),Ci=function(){function w(y){i(this,w),this.currentTarget=void 0,this.originalEvent=void 0,this.type=void 0,this.originalEvent=y,J(this,y)}return u(w,[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}]),w}();function jr(w){return Q.object(w)?{capture:!!w.capture,passive:!!w.passive}:{capture:!!w,passive:!1}}function Pt(w,y){return w===y||(typeof w=="boolean"?!!y.capture===w&&!y.passive:!!w.capture==!!y.capture&&!!w.passive==!!y.passive)}var Lt={id:"events",install:function(w){var y,x=[],O={},M=[],N={add:K,remove:Z,addDelegate:function(le,De,Ue,at,Qe){var dt=jr(Qe);if(!O[Ue]){O[Ue]=[];for(var Et=0;Et<M.length;Et++){var St=M[Et];K(St,Ue,ie),K(St,Ue,Ce,!0)}}var It=O[Ue],Xt=Ht(It,function(nn){return nn.selector===le&&nn.context===De});Xt||(Xt={selector:le,context:De,listeners:[]},It.push(Xt)),Xt.listeners.push({func:at,options:dt})},removeDelegate:function(le,De,Ue,at,Qe){var dt,Et=jr(Qe),St=O[Ue],It=!1;if(St)for(dt=St.length-1;dt>=0;dt--){var Xt=St[dt];if(Xt.selector===le&&Xt.context===De){for(var nn=Xt.listeners,Wt=nn.length-1;Wt>=0;Wt--){var Zt=nn[Wt];if(Zt.func===at&&Pt(Zt.options,Et)){nn.splice(Wt,1),nn.length||(St.splice(dt,1),Z(De,Ue,ie),Z(De,Ue,Ce,!0)),It=!0;break}}if(It)break}}},delegateListener:ie,delegateUseCapture:Ce,delegatedEvents:O,documents:M,targets:x,supportsOptions:!1,supportsPassive:!1};function K(le,De,Ue,at){if(le.addEventListener){var Qe=jr(at),dt=Ht(x,function(Et){return Et.eventTarget===le});dt||(dt={eventTarget:le,events:{}},x.push(dt)),dt.events[De]||(dt.events[De]=[]),Ht(dt.events[De],function(Et){return Et.func===Ue&&Pt(Et.options,Qe)})||(le.addEventListener(De,Ue,N.supportsOptions?Qe:Qe.capture),dt.events[De].push({func:Ue,options:Qe}))}}function Z(le,De,Ue,at){if(le.addEventListener&&le.removeEventListener){var Qe=Ot(x,function(Rr){return Rr.eventTarget===le}),dt=x[Qe];if(dt&&dt.events)if(De!=="all"){var Et=!1,St=dt.events[De];if(St){if(Ue==="all"){for(var It=St.length-1;It>=0;It--){var Xt=St[It];Z(le,De,Xt.func,Xt.options)}return}for(var nn=jr(at),Wt=0;Wt<St.length;Wt++){var Zt=St[Wt];if(Zt.func===Ue&&Pt(Zt.options,nn)){le.removeEventListener(De,Ue,N.supportsOptions?nn:nn.capture),St.splice(Wt,1),St.length===0&&(delete dt.events[De],Et=!0);break}}}Et&&!Object.keys(dt.events).length&&x.splice(Qe,1)}else for(De in dt.events)dt.events.hasOwnProperty(De)&&Z(le,De,"all")}}function ie(le,De){for(var Ue=jr(De),at=new Ci(le),Qe=O[le.type],dt=Be(le)[0],Et=dt;Q.element(Et);){for(var St=0;St<Qe.length;St++){var It=Qe[St],Xt=It.selector,nn=It.context;if($e(Et,Xt)&&ke(nn,dt)&&ke(nn,Et)){var Wt=It.listeners;at.currentTarget=Et;for(var Zt=0;Zt<Wt.length;Zt++){var Rr=Wt[Zt];Pt(Rr.options,Ue)&&Rr.func(at)}}}Et=Le(Et)}}function Ce(le){return ie(le,!0)}return(y=w.document)==null||y.createElement("div").addEventListener("test",null,{get capture(){return N.supportsOptions=!0},get passive(){return N.supportsPassive=!0}}),w.events=N,N}},en={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(w){for(var y=0,x=en.methodOrder;y<x.length;y++){var O=x[y],M=en[O](w);if(M)return M}return null},simulationResume:function(w){var y=w.pointerType,x=w.eventType,O=w.eventTarget,M=w.scope;if(!/down|start/i.test(x))return null;for(var N=0,K=M.interactions.list;N<K.length;N++){var Z=K[N],ie=O;if(Z.simulation&&Z.simulation.allowResume&&Z.pointerType===y)for(;ie;){if(ie===Z.element)return Z;ie=Le(ie)}}return null},mouseOrPen:function(w){var y,x=w.pointerId,O=w.pointerType,M=w.eventType,N=w.scope;if(O!=="mouse"&&O!=="pen")return null;for(var K=0,Z=N.interactions.list;K<Z.length;K++){var ie=Z[K];if(ie.pointerType===O){if(ie.simulation&&!Vt(ie,x))continue;if(ie.interacting())return ie;y||(y=ie)}}if(y)return y;for(var Ce=0,le=N.interactions.list;Ce<le.length;Ce++){var De=le[Ce];if(!(De.pointerType!==O||/down/i.test(M)&&De.simulation))return De}return null},hasPointer:function(w){for(var y=w.pointerId,x=0,O=w.scope.interactions.list;x<O.length;x++){var M=O[x];if(Vt(M,y))return M}return null},idle:function(w){for(var y=w.pointerType,x=0,O=w.scope.interactions.list;x<O.length;x++){var M=O[x];if(M.pointers.length===1){var N=M.interactable;if(N&&(!N.options.gesture||!N.options.gesture.enabled))continue}else if(M.pointers.length>=2)continue;if(!M.interacting()&&y===M.pointerType)return M}return null}};function Vt(w,y){return w.pointers.some(function(x){return x.id===y})}var En=en,Mn=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function vr(w,y){return function(x){var O=y.interactions.list,M=Se(x),N=Be(x),K=N[0],Z=N[1],ie=[];if(/^touch/.test(x.type)){y.prevTouchTime=y.now();for(var Ce=0,le=x.changedTouches;Ce<le.length;Ce++){var De=le[Ce],Ue={pointer:De,pointerId:et(De),pointerType:M,eventType:x.type,eventTarget:K,curEventTarget:Z,scope:y},at=co(Ue);ie.push([Ue.pointer,Ue.eventTarget,Ue.curEventTarget,at])}}else{var Qe=!1;if(!R.supportsPointerEvent&&/mouse/.test(x.type)){for(var dt=0;dt<O.length&&!Qe;dt++)Qe=O[dt].pointerType!=="mouse"&&O[dt].pointerIsDown;Qe=Qe||y.now()-y.prevTouchTime<500||x.timeStamp===0}if(!Qe){var Et={pointer:x,pointerId:et(x),pointerType:M,eventType:x.type,curEventTarget:Z,eventTarget:K,scope:y},St=co(Et);ie.push([Et.pointer,Et.eventTarget,Et.curEventTarget,St])}}for(var It=0;It<ie.length;It++){var Xt=ie[It],nn=Xt[0],Wt=Xt[1],Zt=Xt[2];Xt[3][w](nn,x,Wt,Zt)}}}function co(w){var y=w.pointerType,x=w.scope,O={interaction:En.search(w),searchDetails:w};return x.fire("interactions:find",O),O.interaction||x.interactions.new({pointerType:y})}function gr(w,y){var x=w.doc,O=w.scope,M=w.options,N=O.interactions.docEvents,K=O.events,Z=K[y];for(var ie in O.browser.isIOS&&!M.events&&(M.events={passive:!1}),K.delegatedEvents)Z(x,ie,K.delegateListener),Z(x,ie,K.delegateUseCapture,!0);for(var Ce=M&&M.events,le=0;le<N.length;le++){var De=N[le];Z(x,De.type,De.listener,Ce)}}var Ir={id:"core/interactions",install:function(w){for(var y={},x=0;x<Mn.length;x++){var O=Mn[x];y[O]=vr(O,w)}var M,N=R.pEventTypes;function K(){for(var Z=0,ie=w.interactions.list;Z<ie.length;Z++){var Ce=ie[Z];if(Ce.pointerIsDown&&Ce.pointerType==="touch"&&!Ce._interacting)for(var le=function(){var at=Ue[De];w.documents.some(function(Qe){return ke(Qe.doc,at.downTarget)})||Ce.removePointer(at.pointer,at.event)},De=0,Ue=Ce.pointers;De<Ue.length;De++)le()}}(M=q.PointerEvent?[{type:N.down,listener:K},{type:N.down,listener:y.pointerDown},{type:N.move,listener:y.pointerMove},{type:N.up,listener:y.pointerUp},{type:N.cancel,listener:y.pointerUp}]:[{type:"mousedown",listener:y.pointerDown},{type:"mousemove",listener:y.pointerMove},{type:"mouseup",listener:y.pointerUp},{type:"touchstart",listener:K},{type:"touchstart",listener:y.pointerDown},{type:"touchmove",listener:y.pointerMove},{type:"touchend",listener:y.pointerUp},{type:"touchcancel",listener:y.pointerUp}]).push({type:"blur",listener:function(Z){for(var ie=0,Ce=w.interactions.list;ie<Ce.length;ie++)Ce[ie].documentBlur(Z)}}),w.prevTouchTime=0,w.Interaction=function(Z){f(Ce,Z);var ie=_(Ce);function Ce(){return i(this,Ce),ie.apply(this,arguments)}return u(Ce,[{key:"pointerMoveTolerance",get:function(){return w.interactions.pointerMoveTolerance},set:function(le){w.interactions.pointerMoveTolerance=le}},{key:"_now",value:function(){return w.now()}}]),Ce}(aa),w.interactions={list:[],new:function(Z){Z.scopeFire=function(Ce,le){return w.fire(Ce,le)};var ie=new w.Interaction(Z);return w.interactions.list.push(ie),ie},listeners:y,docEvents:M,pointerMoveTolerance:1},w.usePlugin(sn)},listeners:{"scope:add-document":function(w){return gr(w,"add")},"scope:remove-document":function(w){return gr(w,"remove")},"interactable:unset":function(w,y){for(var x=w.interactable,O=y.interactions.list.length-1;O>=0;O--){var M=y.interactions.list[O];M.interactable===x&&(M.stop(),y.fire("interactions:destroy",{interaction:M}),M.destroy(),y.interactions.list.length>2&&y.interactions.list.splice(O,1))}}},onDocSignal:gr,doOnInteractions:vr,methodNames:Mn},Gr=Ir,tr=function(w){return w[w.On=0]="On",w[w.Off=1]="Off",w}(tr||{}),Si=function(){function w(y,x,O,M){i(this,w),this.target=void 0,this.options=void 0,this._actions=void 0,this.events=new uo,this._context=void 0,this._win=void 0,this._doc=void 0,this._scopeEvents=void 0,this._actions=x.actions,this.target=y,this._context=x.context||O,this._win=V(Ye(y)?this._context:y),this._doc=this._win.document,this._scopeEvents=M,this.set(x)}return u(w,[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}},{key:"setOnEvents",value:function(y,x){return Q.func(x.onstart)&&this.on("".concat(y,"start"),x.onstart),Q.func(x.onmove)&&this.on("".concat(y,"move"),x.onmove),Q.func(x.onend)&&this.on("".concat(y,"end"),x.onend),Q.func(x.oninertiastart)&&this.on("".concat(y,"inertiastart"),x.oninertiastart),this}},{key:"updatePerActionListeners",value:function(y,x,O){var M,N=this,K=(M=this._actions.map[y])==null?void 0:M.filterEventType,Z=function(ie){return(K==null||K(ie))&&hr(ie,N._actions)};(Q.array(x)||Q.object(x))&&this._onOff(tr.Off,y,x,void 0,Z),(Q.array(O)||Q.object(O))&&this._onOff(tr.On,y,O,void 0,Z)}},{key:"setPerAction",value:function(y,x){var O=this._defaults;for(var M in x){var N=M,K=this.options[y],Z=x[N];N==="listeners"&&this.updatePerActionListeners(y,K.listeners,Z),Q.array(Z)?K[N]=ut(Z):Q.plainObject(Z)?(K[N]=Fe(K[N]||{},ao(Z)),Q.object(O.perAction[N])&&"enabled"in O.perAction[N]&&(K[N].enabled=Z.enabled!==!1)):Q.bool(Z)&&Q.object(O.perAction[N])?K[N].enabled=Z:K[N]=Z}}},{key:"getRect",value:function(y){return y=y||(Q.element(this.target)?this.target:null),Q.string(this.target)&&(y=y||this._context.querySelector(this.target)),Te(y)}},{key:"rectChecker",value:function(y){var x=this;return Q.func(y)?(this.getRect=function(O){var M=Fe({},y.apply(x,O));return"width"in M||(M.width=M.right-M.left,M.height=M.bottom-M.top),M},this):y===null?(delete this.getRect,this):this.getRect}},{key:"_backCompatOption",value:function(y,x){if(Ye(x)||Q.object(x)){for(var O in this.options[y]=x,this._actions.map)this.options[O][y]=x;return this}return this.options[y]}},{key:"origin",value:function(y){return this._backCompatOption("origin",y)}},{key:"deltaSource",value:function(y){return y==="page"||y==="client"?(this.options.deltaSource=y,this):this.options.deltaSource}},{key:"getAllElements",value:function(){var y=this.target;return Q.string(y)?Array.from(this._context.querySelectorAll(y)):Q.func(y)&&y.getAllElements?y.getAllElements():Q.element(y)?[y]:[]}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(y){return this._context===y.ownerDocument||ke(this._context,y)}},{key:"testIgnoreAllow",value:function(y,x,O){return!this.testIgnore(y.ignoreFrom,x,O)&&this.testAllow(y.allowFrom,x,O)}},{key:"testAllow",value:function(y,x,O){return!y||!!Q.element(O)&&(Q.string(y)?rt(O,y,x):!!Q.element(y)&&ke(y,O))}},{key:"testIgnore",value:function(y,x,O){return!(!y||!Q.element(O))&&(Q.string(y)?rt(O,y,x):!!Q.element(y)&&ke(y,O))}},{key:"fire",value:function(y){return this.events.fire(y),this}},{key:"_onOff",value:function(y,x,O,M,N){Q.object(x)&&!Q.array(x)&&(M=O,O=null);var K=tn(x,O,N);for(var Z in K){Z==="wheel"&&(Z=R.wheelEvent);for(var ie=0,Ce=K[Z];ie<Ce.length;ie++){var le=Ce[ie];hr(Z,this._actions)?this.events[y===tr.On?"on":"off"](Z,le):Q.string(this.target)?this._scopeEvents[y===tr.On?"addDelegate":"removeDelegate"](this.target,this._context,Z,le,M):this._scopeEvents[y===tr.On?"add":"remove"](this.target,Z,le,M)}}return this}},{key:"on",value:function(y,x,O){return this._onOff(tr.On,y,x,O)}},{key:"off",value:function(y,x,O){return this._onOff(tr.Off,y,x,O)}},{key:"set",value:function(y){var x=this._defaults;for(var O in Q.object(y)||(y={}),this.options=ao(x.base),this._actions.methodDict){var M=O,N=this._actions.methodDict[M];this.options[M]={},this.setPerAction(M,Fe(Fe({},x.perAction),x.actions[M])),this[N](y[M])}for(var K in y)K!=="getRect"?Q.func(this[K])&&this[K](y[K]):this.rectChecker(y.getRect);return this}},{key:"unset",value:function(){if(Q.string(this.target))for(var y in this._scopeEvents.delegatedEvents)for(var x=this._scopeEvents.delegatedEvents[y],O=x.length-1;O>=0;O--){var M=x[O],N=M.selector,K=M.context,Z=M.listeners;N===this.target&&K===this._context&&x.splice(O,1);for(var ie=Z.length-1;ie>=0;ie--)this._scopeEvents.removeDelegate(this.target,this._context,y,Z[ie][0],Z[ie][1])}else this._scopeEvents.remove(this.target,"all")}}]),w}(),Wi=function(){function w(y){var x=this;i(this,w),this.list=[],this.selectorMap={},this.scope=void 0,this.scope=y,y.addListeners({"interactable:unset":function(O){var M=O.interactable,N=M.target,K=Q.string(N)?x.selectorMap[N]:N[x.scope.id],Z=Ot(K,function(ie){return ie===M});K.splice(Z,1)}})}return u(w,[{key:"new",value:function(y,x){x=Fe(x||{},{actions:this.scope.actions});var O=new this.scope.Interactable(y,x,this.scope.document,this.scope.events);return this.scope.addDocument(O._doc),this.list.push(O),Q.string(y)?(this.selectorMap[y]||(this.selectorMap[y]=[]),this.selectorMap[y].push(O)):(O.target[this.scope.id]||Object.defineProperty(y,this.scope.id,{value:[],configurable:!0}),y[this.scope.id].push(O)),this.scope.fire("interactable:new",{target:y,options:x,interactable:O,win:this.scope._win}),O}},{key:"getExisting",value:function(y,x){var O=x&&x.context||this.scope.document,M=Q.string(y),N=M?this.selectorMap[y]:y[this.scope.id];if(N)return Ht(N,function(K){return K._context===O&&(M||K.inContext(y))})}},{key:"forEachMatch",value:function(y,x){for(var O=0,M=this.list;O<M.length;O++){var N=M[O],K=void 0;if((Q.string(N.target)?Q.element(y)&&$e(y,N.target):y===N.target)&&N.inContext(y)&&(K=x(N)),K!==void 0)return K}}}]),w}(),nr=function(){function w(){var y=this;i(this,w),this.id="__interact_scope_".concat(Math.floor(100*Math.random())),this.isInitialized=!1,this.listenerMaps=[],this.browser=R,this.defaults=ao(li),this.Eventable=uo,this.actions={map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}},this.interactStatic=function(O){var M=function N(K,Z){var ie=O.interactables.getExisting(K,Z);return ie||((ie=O.interactables.new(K,Z)).events.global=N.globalEvents),ie};return M.getPointerAverage=X,M.getTouchBBox=fe,M.getTouchDistance=z,M.getTouchAngle=je,M.getElementRect=Te,M.getElementClientRect=_t,M.matchesSelector=$e,M.closest=he,M.globalEvents={},M.version="1.10.27",M.scope=O,M.use=function(N,K){return this.scope.usePlugin(N,K),this},M.isSet=function(N,K){return!!this.scope.interactables.get(N,K&&K.context)},M.on=Tn(function(N,K,Z){if(Q.string(N)&&N.search(" ")!==-1&&(N=N.trim().split(/ +/)),Q.array(N)){for(var ie=0,Ce=N;ie<Ce.length;ie++){var le=Ce[ie];this.on(le,K,Z)}return this}if(Q.object(N)){for(var De in N)this.on(De,N[De],K);return this}return hr(N,this.scope.actions)?this.globalEvents[N]?this.globalEvents[N].push(K):this.globalEvents[N]=[K]:this.scope.events.add(this.scope.document,N,K,{options:Z}),this},"The interact.on() method is being deprecated"),M.off=Tn(function(N,K,Z){if(Q.string(N)&&N.search(" ")!==-1&&(N=N.trim().split(/ +/)),Q.array(N)){for(var ie=0,Ce=N;ie<Ce.length;ie++){var le=Ce[ie];this.off(le,K,Z)}return this}if(Q.object(N)){for(var De in N)this.off(De,N[De],K);return this}var Ue;return hr(N,this.scope.actions)?N in this.globalEvents&&(Ue=this.globalEvents[N].indexOf(K))!==-1&&this.globalEvents[N].splice(Ue,1):this.scope.events.remove(this.scope.document,N,K,Z),this},"The interact.off() method is being deprecated"),M.debug=function(){return this.scope},M.supportsTouch=function(){return R.supportsTouch},M.supportsPointerEvent=function(){return R.supportsPointerEvent},M.stop=function(){for(var N=0,K=this.scope.interactions.list;N<K.length;N++)K[N].stop();return this},M.pointerMoveTolerance=function(N){return Q.number(N)?(this.scope.interactions.pointerMoveTolerance=N,this):this.scope.interactions.pointerMoveTolerance},M.addDocument=function(N,K){this.scope.addDocument(N,K)},M.removeDocument=function(N){this.scope.removeDocument(N)},M}(this),this.InteractEvent=Eo,this.Interactable=void 0,this.interactables=new Wi(this),this._win=void 0,this.document=void 0,this.window=void 0,this.documents=[],this._plugins={list:[],map:{}},this.onWindowUnload=function(O){return y.removeDocument(O.target)};var x=this;this.Interactable=function(O){f(N,O);var M=_(N);function N(){return i(this,N),M.apply(this,arguments)}return u(N,[{key:"_defaults",get:function(){return x.defaults}},{key:"set",value:function(K){return C(h(N.prototype),"set",this).call(this,K),x.fire("interactable:set",{options:K,interactable:this}),this}},{key:"unset",value:function(){C(h(N.prototype),"unset",this).call(this);var K=x.interactables.list.indexOf(this);K<0||(x.interactables.list.splice(K,1),x.fire("interactable:unset",{interactable:this}))}}]),N}(Si)}return u(w,[{key:"addListeners",value:function(y,x){this.listenerMaps.push({id:x,map:y})}},{key:"fire",value:function(y,x){for(var O=0,M=this.listenerMaps;O<M.length;O++){var N=M[O].map[y];if(N&&N(x,this,y)===!1)return!1}}},{key:"init",value:function(y){return this.isInitialized?this:function(x,O){return x.isInitialized=!0,Q.window(O)&&D(O),q.init(O),R.init(O),$t.init(O),x.window=O,x.document=O.document,x.usePlugin(Gr),x.usePlugin(Lt),x}(this,y)}},{key:"pluginIsInstalled",value:function(y){var x=y.id;return x?!!this._plugins.map[x]:this._plugins.list.indexOf(y)!==-1}},{key:"usePlugin",value:function(y,x){if(!this.isInitialized)return this;if(this.pluginIsInstalled(y))return this;if(y.id&&(this._plugins.map[y.id]=y),this._plugins.list.push(y),y.install&&y.install(this,x),y.listeners&&y.before){for(var O=0,M=this.listenerMaps.length,N=y.before.reduce(function(Z,ie){return Z[ie]=!0,Z[gs(ie)]=!0,Z},{});O<M;O++){var K=this.listenerMaps[O].id;if(K&&(N[K]||N[gs(K)]))break}this.listenerMaps.splice(O,0,{id:y.id,map:y.listeners})}else y.listeners&&this.listenerMaps.push({id:y.id,map:y.listeners});return this}},{key:"addDocument",value:function(y,x){if(this.getDocIndex(y)!==-1)return!1;var O=V(y);x=x?Fe({},x):{},this.documents.push({doc:y,options:x}),this.events.documents.push(y),y!==this.document&&this.events.add(O,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:y,window:O,scope:this,options:x})}},{key:"removeDocument",value:function(y){var x=this.getDocIndex(y),O=V(y),M=this.documents[x].options;this.events.remove(O,"unload",this.onWindowUnload),this.documents.splice(x,1),this.events.documents.splice(x,1),this.fire("scope:remove-document",{doc:y,window:O,scope:this,options:M})}},{key:"getDocIndex",value:function(y){for(var x=0;x<this.documents.length;x++)if(this.documents[x].doc===y)return x;return-1}},{key:"getDocOptions",value:function(y){var x=this.getDocIndex(y);return x===-1?null:this.documents[x].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),w}();function gs(w){return w&&w.replace(/\/.*$/,"")}var sa=new nr,lr=sa.interactStatic,ms=typeof globalThis<"u"?globalThis:window;sa.init(ms);var ys=Object.freeze({__proto__:null,edgeTarget:function(){},elements:function(){},grid:function(w){var y=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter(function(O){var M=O[0],N=O[1];return M in w||N in w}),x=function(O,M){for(var N=w.range,K=w.limits,Z=K===void 0?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:K,ie=w.offset,Ce=ie===void 0?{x:0,y:0}:ie,le={range:N,grid:w,x:null,y:null},De=0;De<y.length;De++){var Ue=y[De],at=Ue[0],Qe=Ue[1],dt=Math.round((O-Ce.x)/w[at]),Et=Math.round((M-Ce.y)/w[Qe]);le[at]=Math.max(Z.left,Math.min(Z.right,dt*w[at]+Ce.x)),le[Qe]=Math.max(Z.top,Math.min(Z.bottom,Et*w[Qe]+Ce.y))}return le};return x.grid=w,x.coordFields=y,x}}),Ea={id:"snappers",install:function(w){var y=w.interactStatic;y.snappers=Fe(y.snappers||{},ys),y.createSnapGrid=y.snappers.grid}},ol=Ea,il={start:function(w){var y=w.state,x=w.rect,O=w.edges,M=w.pageCoords,N=y.options,K=N.ratio,Z=N.enabled,ie=y.options,Ce=ie.equalDelta,le=ie.modifiers;K==="preserve"&&(K=x.width/x.height),y.startCoords=Fe({},M),y.startRect=Fe({},x),y.ratio=K,y.equalDelta=Ce;var De=y.linkedEdges={top:O.top||O.left&&!O.bottom,left:O.left||O.top&&!O.right,bottom:O.bottom||O.right&&!O.top,right:O.right||O.bottom&&!O.left};if(y.xIsPrimaryAxis=!(!O.left&&!O.right),y.equalDelta){var Ue=(De.left?1:-1)*(De.top?1:-1);y.edgeSign={x:Ue,y:Ue}}else y.edgeSign={x:De.left?-1:1,y:De.top?-1:1};if(Z!==!1&&Fe(O,De),le!=null&&le.length){var at=new Ko(w.interaction);at.copyFrom(w.interaction.modification),at.prepareStates(le),y.subModification=at,at.startAll(t({},w))}},set:function(w){var y=w.state,x=w.rect,O=w.coords,M=y.linkedEdges,N=Fe({},O),K=y.equalDelta?Pa:al;if(Fe(w.edges,M),K(y,y.xIsPrimaryAxis,O,x),!y.subModification)return null;var Z=Fe({},x);Mt(M,Z,{x:O.x-N.x,y:O.y-N.y});var ie=y.subModification.setAll(t(t({},w),{},{rect:Z,edges:M,pageCoords:O,prevCoords:O,prevRect:Z})),Ce=ie.delta;return ie.changed&&(K(y,Math.abs(Ce.x)>Math.abs(Ce.y),ie.coords,ie.rect),Fe(O,ie.coords)),ie.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function Pa(w,y,x){var O=w.startCoords,M=w.edgeSign;y?x.y=O.y+(x.x-O.x)*M.y:x.x=O.x+(x.y-O.y)*M.x}function al(w,y,x,O){var M=w.startRect,N=w.startCoords,K=w.ratio,Z=w.edgeSign;if(y){var ie=O.width/K;x.y=N.y+(ie-M.height)*Z.y}else{var Ce=O.height*K;x.x=N.x+(Ce-M.width)*Z.x}}var ws=Or(il,"aspectRatio"),_s=function(){};_s._defaults={};var $i=_s;function Mo(w,y,x){return Q.func(w)?nt(w,y.interactable,y.element,[x.x,x.y,y]):nt(w,y.interactable,y.element)}var Do={start:function(w){var y=w.rect,x=w.startOffset,O=w.state,M=w.interaction,N=w.pageCoords,K=O.options,Z=K.elementRect,ie=Fe({left:0,top:0,right:0,bottom:0},K.offset||{});if(y&&Z){var Ce=Mo(K.restriction,M,N);if(Ce){var le=Ce.right-Ce.left-y.width,De=Ce.bottom-Ce.top-y.height;le<0&&(ie.left+=le,ie.right+=le),De<0&&(ie.top+=De,ie.bottom+=De)}ie.left+=x.left-y.width*Z.left,ie.top+=x.top-y.height*Z.top,ie.right+=x.right-y.width*(1-Z.right),ie.bottom+=x.bottom-y.height*(1-Z.bottom)}O.offset=ie},set:function(w){var y=w.coords,x=w.interaction,O=w.state,M=O.options,N=O.offset,K=Mo(M.restriction,x,y);if(K){var Z=function(ie){return!ie||"left"in ie&&"top"in ie||((ie=Fe({},ie)).left=ie.x||0,ie.top=ie.y||0,ie.right=ie.right||ie.left+ie.width,ie.bottom=ie.bottom||ie.top+ie.height),ie}(K);y.x=Math.max(Math.min(Z.right-N.right,y.x),Z.left+N.left),y.y=Math.max(Math.min(Z.bottom-N.bottom,y.y),Z.top+N.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}},sl=Or(Do,"restrict"),ll={top:1/0,left:1/0,bottom:-1/0,right:-1/0},ka={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function Oi(w,y){for(var x=0,O=["top","left","bottom","right"];x<O.length;x++){var M=O[x];M in w||(w[M]=y[M])}return w}var wn={noInner:ll,noOuter:ka,start:function(w){var y,x=w.interaction,O=w.startOffset,M=w.state,N=M.options;N&&(y=bt(Mo(N.offset,x,x.coords.start.page))),y=y||{x:0,y:0},M.offset={top:y.y+O.top,left:y.x+O.left,bottom:y.y-O.bottom,right:y.x-O.right}},set:function(w){var y=w.coords,x=w.edges,O=w.interaction,M=w.state,N=M.offset,K=M.options;if(x){var Z=Fe({},y),ie=Mo(K.inner,O,Z)||{},Ce=Mo(K.outer,O,Z)||{};Oi(ie,ll),Oi(Ce,ka),x.top?y.y=Math.min(Math.max(Ce.top+N.top,Z.y),ie.top+N.top):x.bottom&&(y.y=Math.max(Math.min(Ce.bottom+N.bottom,Z.y),ie.bottom+N.bottom)),x.left?y.x=Math.min(Math.max(Ce.left+N.left,Z.x),ie.left+N.left):x.right&&(y.x=Math.max(Math.min(Ce.right+N.right,Z.x),ie.right+N.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}},Ki=Or(wn,"restrictEdges"),ci=Fe({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(w){}},Do.defaults),Gi=Or({start:Do.start,set:Do.set,defaults:ci},"restrictRect"),ul={width:-1/0,height:-1/0},bs={width:1/0,height:1/0},xs=Or({start:function(w){return wn.start(w)},set:function(w){var y=w.interaction,x=w.state,O=w.rect,M=w.edges,N=x.options;if(M){var K=Yt(Mo(N.min,y,w.coords))||ul,Z=Yt(Mo(N.max,y,w.coords))||bs;x.options={endOnly:N.endOnly,inner:Fe({},wn.noInner),outer:Fe({},wn.noOuter)},M.top?(x.options.inner.top=O.bottom-K.height,x.options.outer.top=O.bottom-Z.height):M.bottom&&(x.options.inner.bottom=O.top+K.height,x.options.outer.bottom=O.top+Z.height),M.left?(x.options.inner.left=O.right-K.width,x.options.outer.left=O.right-Z.width):M.right&&(x.options.inner.right=O.left+K.width,x.options.outer.right=O.left+Z.width),wn.set(w),x.options=N}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}},"restrictSize"),Yi={start:function(w){var y,x=w.interaction,O=w.interactable,M=w.element,N=w.rect,K=w.state,Z=w.startOffset,ie=K.options,Ce=ie.offsetWithOrigin?function(Ue){var at=Ue.interaction.element,Qe=bt(nt(Ue.state.options.origin,null,null,[at])),dt=Qe||un(Ue.interactable,at,Ue.interaction.prepared.name);return dt}(w):{x:0,y:0};if(ie.offset==="startCoords")y={x:x.coords.start.page.x,y:x.coords.start.page.y};else{var le=nt(ie.offset,O,M,[x]);(y=bt(le)||{x:0,y:0}).x+=Ce.x,y.y+=Ce.y}var De=ie.relativePoints;K.offsets=N&&De&&De.length?De.map(function(Ue,at){return{index:at,relativePoint:Ue,x:Z.left-N.width*Ue.x+y.x,y:Z.top-N.height*Ue.y+y.y}}):[{index:0,relativePoint:null,x:y.x,y:y.y}]},set:function(w){var y=w.interaction,x=w.coords,O=w.state,M=O.options,N=O.offsets,K=un(y.interactable,y.element,y.prepared.name),Z=Fe({},x),ie=[];M.offsetWithOrigin||(Z.x-=K.x,Z.y-=K.y);for(var Ce=0,le=N;Ce<le.length;Ce++)for(var De=le[Ce],Ue=Z.x-De.x,at=Z.y-De.y,Qe=0,dt=M.targets.length;Qe<dt;Qe++){var Et=M.targets[Qe],St=void 0;(St=Q.func(Et)?Et(Ue,at,y._proxy,De,Qe):Et)&&ie.push({x:(Q.number(St.x)?St.x:Ue)+De.x,y:(Q.number(St.y)?St.y:at)+De.y,range:Q.number(St.range)?St.range:M.range,source:Et,index:Qe,offset:De})}for(var It={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},Xt=0;Xt<ie.length;Xt++){var nn=ie[Xt],Wt=nn.range,Zt=nn.x-Z.x,Rr=nn.y-Z.y,dn=E(Zt,Rr),ur=dn<=Wt;Wt===1/0&&It.inRange&&It.range!==1/0&&(ur=!1),It.target&&!(ur?It.inRange&&Wt!==1/0?dn/Wt<It.distance/It.range:Wt===1/0&&It.range!==1/0||dn<It.distance:!It.inRange&&dn<It.distance)||(It.target=nn,It.distance=dn,It.range=Wt,It.inRange=ur,It.delta.x=Zt,It.delta.y=Rr)}return It.inRange&&(x.x=It.target.x,x.y=It.target.y),O.closest=It,It},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}},Xi=Or(Yi,"snap"),la={start:function(w){var y=w.state,x=w.edges,O=y.options;if(!x)return null;w.state={options:{targets:null,relativePoints:[{x:x.left?0:1,y:x.top?0:1}],offset:O.offset||"self",origin:{x:0,y:0},range:O.range}},y.targetFields=y.targetFields||[["width","height"],["x","y"]],Yi.start(w),y.offsets=w.state.offsets,w.state=y},set:function(w){var y=w.interaction,x=w.state,O=w.coords,M=x.options,N=x.offsets,K={x:O.x-N[0].x,y:O.y-N[0].y};x.options=Fe({},M),x.options.targets=[];for(var Z=0,ie=M.targets||[];Z<ie.length;Z++){var Ce=ie[Z],le=void 0;if(le=Q.func(Ce)?Ce(K.x,K.y,y):Ce){for(var De=0,Ue=x.targetFields;De<Ue.length;De++){var at=Ue[De],Qe=at[0],dt=at[1];if(Qe in le||dt in le){le.x=le[Qe],le.y=le[dt];break}}x.options.targets.push(le)}}var Et=Yi.set(w);return x.options=M,Et},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}},cl=Or(la,"snapSize"),fi={aspectRatio:ws,restrictEdges:Ki,restrict:sl,restrictRect:Gi,restrictSize:xs,snapEdges:Or({start:function(w){var y=w.edges;return y?(w.state.targetFields=w.state.targetFields||[[y.left?"left":"right",y.top?"top":"bottom"]],la.start(w)):null},set:la.set,defaults:Fe(ao(la.defaults),{targets:void 0,range:void 0,offset:{x:0,y:0}})},"snapEdges"),snap:Xi,snapSize:cl,spring:$i,avoid:$i,transform:$i,rubberband:$i},Cs={id:"modifiers",install:function(w){var y=w.interactStatic;for(var x in w.usePlugin(xi),w.usePlugin(ol),y.modifiers=fi,fi){var O=fi[x],M=O._defaults,N=O._methods;M._methods=N,w.defaults.perAction[x]=M}}},fl=Cs,Ti=function(w){f(x,w);var y=_(x);function x(O,M,N,K,Z,ie){var Ce;if(i(this,x),J(m(Ce=y.call(this,Z)),N),N!==M&&J(m(Ce),M),Ce.timeStamp=ie,Ce.originalEvent=N,Ce.type=O,Ce.pointerId=et(M),Ce.pointerType=Se(M),Ce.target=K,Ce.currentTarget=null,O==="tap"){var le=Z.getPointerIndex(M);Ce.dt=Ce.timeStamp-Z.pointers[le].downTime;var De=Ce.timeStamp-Z.tapTime;Ce.double=!!Z.prevTap&&Z.prevTap.type!=="doubletap"&&Z.prevTap.target===Ce.target&&De<500}else O==="doubletap"&&(Ce.dt=M.timeStamp-Z.tapTime,Ce.double=!0);return Ce}return u(x,[{key:"_subtractOrigin",value:function(O){var M=O.x,N=O.y;return this.pageX-=M,this.pageY-=N,this.clientX-=M,this.clientY-=N,this}},{key:"_addOrigin",value:function(O){var M=O.x,N=O.y;return this.pageX+=M,this.pageY+=N,this.clientX+=M,this.clientY+=N,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}]),x}(qe),Er={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(w){w.pointerEvents=Er,w.defaults.actions.pointerEvents=Er.defaults,Fe(w.actions.phaselessTypes,Er.types)},listeners:{"interactions:new":function(w){var y=w.interaction;y.prevTap=null,y.tapTime=0},"interactions:update-pointer":function(w){var y=w.down,x=w.pointerInfo;!y&&x.hold||(x.hold={duration:1/0,timeout:null})},"interactions:move":function(w,y){var x=w.interaction,O=w.pointer,M=w.event,N=w.eventTarget;w.duplicate||x.pointerIsDown&&!x.pointerWasMoved||(x.pointerIsDown&&Aa(w),Nr({interaction:x,pointer:O,event:M,eventTarget:N,type:"move"},y))},"interactions:down":function(w,y){(function(x,O){for(var M=x.interaction,N=x.pointer,K=x.event,Z=x.eventTarget,ie=x.pointerIndex,Ce=M.pointers[ie].hold,le=Ne(Z),De={interaction:M,pointer:N,event:K,eventTarget:Z,type:"hold",targets:[],path:le,node:null},Ue=0;Ue<le.length;Ue++){var at=le[Ue];De.node=at,O.fire("pointerEvents:collect-targets",De)}if(De.targets.length){for(var Qe=1/0,dt=0,Et=De.targets;dt<Et.length;dt++){var St=Et[dt].eventable.options.holdDuration;St<Qe&&(Qe=St)}Ce.duration=Qe,Ce.timeout=setTimeout(function(){Nr({interaction:M,eventTarget:Z,pointer:N,event:K,type:"hold"},O)},Qe)}})(w,y),Nr(w,y)},"interactions:up":function(w,y){Aa(w),Nr(w,y),function(x,O){var M=x.interaction,N=x.pointer,K=x.event,Z=x.eventTarget;M.pointerWasMoved||Nr({interaction:M,eventTarget:Z,pointer:N,event:K,type:"tap"},O)}(w,y)},"interactions:cancel":function(w,y){Aa(w),Nr(w,y)}},PointerEvent:Ti,fire:Nr,collectEventTargets:qi,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function Nr(w,y){var x=w.interaction,O=w.pointer,M=w.event,N=w.eventTarget,K=w.type,Z=w.targets,ie=Z===void 0?qi(w,y):Z,Ce=new Ti(K,O,M,N,x,y.now());y.fire("pointerEvents:new",{pointerEvent:Ce});for(var le={interaction:x,pointer:O,event:M,eventTarget:N,targets:ie,type:K,pointerEvent:Ce},De=0;De<ie.length;De++){var Ue=ie[De];for(var at in Ue.props||{})Ce[at]=Ue.props[at];var Qe=un(Ue.eventable,Ue.node);if(Ce._subtractOrigin(Qe),Ce.eventable=Ue.eventable,Ce.currentTarget=Ue.node,Ue.eventable.fire(Ce),Ce._addOrigin(Qe),Ce.immediatePropagationStopped||Ce.propagationStopped&&De+1<ie.length&&ie[De+1].node!==Ce.currentTarget)break}if(y.fire("pointerEvents:fired",le),K==="tap"){var dt=Ce.double?Nr({interaction:x,pointer:O,event:M,eventTarget:N,type:"doubletap"},y):Ce;x.prevTap=dt,x.tapTime=dt.timeStamp}return Ce}function qi(w,y){var x=w.interaction,O=w.pointer,M=w.event,N=w.eventTarget,K=w.type,Z=x.getPointerIndex(O),ie=x.pointers[Z];if(K==="tap"&&(x.pointerWasMoved||!ie||ie.downTarget!==N))return[];for(var Ce=Ne(N),le={interaction:x,pointer:O,event:M,eventTarget:N,type:K,path:Ce,targets:[],node:null},De=0;De<Ce.length;De++){var Ue=Ce[De];le.node=Ue,y.fire("pointerEvents:collect-targets",le)}return K==="hold"&&(le.targets=le.targets.filter(function(at){var Qe,dt;return at.eventable.options.holdDuration===((Qe=x.pointers[Z])==null||(dt=Qe.hold)==null?void 0:dt.duration)})),le.targets}function Aa(w){var y=w.interaction,x=w.pointerIndex,O=y.pointers[x].hold;O&&O.timeout&&(clearTimeout(O.timeout),O.timeout=null)}var Yr=Object.freeze({__proto__:null,default:Er});function Ei(w){var y=w.interaction;y.holdIntervalHandle&&(clearInterval(y.holdIntervalHandle),y.holdIntervalHandle=null)}var I={id:"pointer-events/holdRepeat",install:function(w){w.usePlugin(Er);var y=w.pointerEvents;y.defaults.holdRepeatInterval=0,y.types.holdrepeat=w.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce(function(w,y){return w["pointerEvents:".concat(y)]=Ei,w},{"pointerEvents:new":function(w){var y=w.pointerEvent;y.type==="hold"&&(y.count=(y.count||0)+1)},"pointerEvents:fired":function(w,y){var x=w.interaction,O=w.pointerEvent,M=w.eventTarget,N=w.targets;if(O.type==="hold"&&N.length){var K=N[0].eventable.options.holdRepeatInterval;K<=0||(x.holdIntervalHandle=setTimeout(function(){y.pointerEvents.fire({interaction:x,eventTarget:M,type:"hold",pointer:O,event:O},y)},K))}}})},$=I,ce={id:"pointer-events/interactableTargets",install:function(w){var y=w.Interactable;y.prototype.pointerEvents=function(O){return Fe(this.events.options,O),this};var x=y.prototype._backCompatOption;y.prototype._backCompatOption=function(O,M){var N=x.call(this,O,M);return N===this&&(this.events.options[O]=M),N}},listeners:{"pointerEvents:collect-targets":function(w,y){var x=w.targets,O=w.node,M=w.type,N=w.eventTarget;y.interactables.forEachMatch(O,function(K){var Z=K.events,ie=Z.options;Z.types[M]&&Z.types[M].length&&K.testIgnoreAllow(ie,O,N)&&x.push({node:O,eventable:Z,props:{interactable:K}})})},"interactable:new":function(w){var y=w.interactable;y.events.getRect=function(x){return y.getRect(x)}},"interactable:set":function(w,y){var x=w.interactable,O=w.options;Fe(x.events.options,y.pointerEvents.defaults),Fe(x.events.options,O.pointerEvents||{})}}},ye=ce,Ae={id:"pointer-events",install:function(w){w.usePlugin(Yr),w.usePlugin($),w.usePlugin(ye)}},Pe=Ae,Ge={id:"reflow",install:function(w){var y=w.Interactable;w.actions.phases.reflow=!0,y.prototype.reflow=function(x){return function(O,M,N){for(var K=O.getAllElements(),Z=N.window.Promise,ie=Z?[]:null,Ce=function(){var De=K[le],Ue=O.getRect(De);if(!Ue)return 1;var at,Qe=Ht(N.interactions.list,function(St){return St.interacting()&&St.interactable===O&&St.element===De&&St.prepared.name===M.name});if(Qe)Qe.move(),ie&&(at=Qe._reflowPromise||new Z(function(St){Qe._reflowResolve=St}));else{var dt=Yt(Ue),Et=function(St){return{coords:St,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}}({page:{x:dt.x,y:dt.y},client:{x:dt.x,y:dt.y},timeStamp:N.now()});at=function(St,It,Xt,nn,Wt){var Zt=St.interactions.new({pointerType:"reflow"}),Rr={interaction:Zt,event:Wt,pointer:Wt,eventTarget:Xt,phase:"reflow"};Zt.interactable=It,Zt.element=Xt,Zt.prevEvent=Wt,Zt.updatePointer(Wt,Wt,Xt,!0),xe(Zt.coords.delta),sr(Zt.prepared,nn),Zt._doPhase(Rr);var dn=St.window,ur=dn.Promise,Pr=ur?new ur(function(Xo){Zt._reflowResolve=Xo}):void 0;return Zt._reflowPromise=Pr,Zt.start(nn,It,Xt),Zt._interacting?(Zt.move(Rr),Zt.end(Wt)):(Zt.stop(),Zt._reflowResolve()),Zt.removePointer(Wt,Wt),Pr}(N,O,De,M,Et)}ie&&ie.push(at)},le=0;le<K.length&&!Ce();le++);return ie&&Z.all(ie).then(function(){return O})}(this,x,w)}},listeners:{"interactions:stop":function(w,y){var x=w.interaction;x.pointerType==="reflow"&&(x._reflowResolve&&x._reflowResolve(),function(O,M){O.splice(O.indexOf(M),1)}(y.interactions.list,x))}}},ft=Ge;if(lr.use(sn),lr.use(ko),lr.use(Pe),lr.use(Bi),lr.use(fl),lr.use(Gt),lr.use(on),lr.use($n),lr.use(ft),lr.default=lr,r(o)==="object"&&o)try{o.exports=lr}catch{}return lr.default=lr,lr})})(Fp,Fp.exports);var oV=Fp.exports;const iV=wb(oV);var aV=Object.defineProperty,sV=(o,n,e)=>n in o?aV(o,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[n]=e,zn=(o,n,e)=>sV(o,typeof n!="symbol"?n+"":n,e);const Vp={x:0,y:0,width:0,height:0,unit:"px"},Al=(o,n,e)=>Math.min(Math.max(o,n),e),lV=(...o)=>o.filter(n=>n&&typeof n=="string").join(" "),gb=(o,n)=>o===n||o.width===n.width&&o.height===n.height&&o.x===n.x&&o.y===n.y&&o.unit===n.unit;function uV(o,n,e,t){const r=na(o,e,t);return o.width&&(r.height=r.width/n),o.height&&(r.width=r.height*n),r.y+r.height>t&&(r.height=t-r.y,r.width=r.height*n),r.x+r.width>e&&(r.width=e-r.x,r.height=r.width/n),o.unit==="%"?Ya(r,e,t):r}function cV(o,n,e){const t=na(o,n,e);return t.x=(n-t.width)/2,t.y=(e-t.height)/2,o.unit==="%"?Ya(t,n,e):t}function Ya(o,n,e){return o.unit==="%"?{...Vp,...o,unit:"%"}:{unit:"%",x:o.x?o.x/n*100:0,y:o.y?o.y/e*100:0,width:o.width?o.width/n*100:0,height:o.height?o.height/e*100:0}}function na(o,n,e){return o.unit?o.unit==="px"?{...Vp,...o,unit:"px"}:{unit:"px",x:o.x?o.x*n/100:0,y:o.y?o.y*e/100:0,width:o.width?o.width*n/100:0,height:o.height?o.height*e/100:0}:{...Vp,...o,unit:"px"}}function mb(o,n,e,t,r,i=0,s=0,u=t,c=r){const f={...o};let h=Math.min(i,t),v=Math.min(s,r),m=Math.min(u,t),_=Math.min(c,r);n&&(n>1?(h=s?s*n:h,v=h/n,m=u*n):(v=i?i/n:v,h=v*n,_=c/n)),f.y<0&&(f.height=Math.max(f.height+f.y,v),f.y=0),f.x<0&&(f.width=Math.max(f.width+f.x,h),f.x=0);const C=t-(f.x+f.width);C<0&&(f.x=Math.min(f.x,t-h),f.width+=C);const T=r-(f.y+f.height);if(T<0&&(f.y=Math.min(f.y,r-v),f.height+=T),f.width<h&&((e==="sw"||e=="nw")&&(f.x-=h-f.width),f.width=h),f.height<v&&((e==="nw"||e=="ne")&&(f.y-=v-f.height),f.height=v),f.width>m&&((e==="sw"||e=="nw")&&(f.x-=m-f.width),f.width=m),f.height>_&&((e==="nw"||e=="ne")&&(f.y-=_-f.height),f.height=_),n){const k=f.width/f.height;if(k<n){const P=Math.max(f.width/n,v);(e==="nw"||e=="ne")&&(f.y-=P-f.height),f.height=P}else if(k>n){const P=Math.max(f.height*n,h);(e==="sw"||e=="nw")&&(f.x-=P-f.width),f.width=P}}return f}function fV(o,n,e,t){const r={...o};return n==="ArrowLeft"?t==="nw"?(r.x-=e,r.y-=e,r.width+=e,r.height+=e):t==="w"?(r.x-=e,r.width+=e):t==="sw"?(r.x-=e,r.width+=e,r.height+=e):t==="ne"?(r.y+=e,r.width-=e,r.height-=e):t==="e"?r.width-=e:t==="se"&&(r.width-=e,r.height-=e):n==="ArrowRight"&&(t==="nw"?(r.x+=e,r.y+=e,r.width-=e,r.height-=e):t==="w"?(r.x+=e,r.width-=e):t==="sw"?(r.x+=e,r.width-=e,r.height-=e):t==="ne"?(r.y-=e,r.width+=e,r.height+=e):t==="e"?r.width+=e:t==="se"&&(r.width+=e,r.height+=e)),n==="ArrowUp"?t==="nw"?(r.x-=e,r.y-=e,r.width+=e,r.height+=e):t==="n"?(r.y-=e,r.height+=e):t==="ne"?(r.y-=e,r.width+=e,r.height+=e):t==="sw"?(r.x+=e,r.width-=e,r.height-=e):t==="s"?r.height-=e:t==="se"&&(r.width-=e,r.height-=e):n==="ArrowDown"&&(t==="nw"?(r.x+=e,r.y+=e,r.width-=e,r.height-=e):t==="n"?(r.y+=e,r.height-=e):t==="ne"?(r.y+=e,r.width-=e,r.height-=e):t==="sw"?(r.x-=e,r.width+=e,r.height+=e):t==="s"?r.height+=e:t==="se"&&(r.width+=e,r.height+=e)),r}const Ml={capture:!0,passive:!1};let dV=0;const Ua=class Li extends We.PureComponent{constructor(){super(...arguments),zn(this,"docMoveBound",!1),zn(this,"mouseDownOnCrop",!1),zn(this,"dragStarted",!1),zn(this,"evData",{startClientX:0,startClientY:0,startCropX:0,startCropY:0,clientX:0,clientY:0,isResize:!0}),zn(this,"componentRef",We.createRef()),zn(this,"mediaRef",We.createRef()),zn(this,"resizeObserver"),zn(this,"initChangeCalled",!1),zn(this,"instanceId",`rc-${dV++}`),zn(this,"state",{cropIsActive:!1,newCropIsBeingDrawn:!1}),zn(this,"onCropPointerDown",n=>{const{crop:e,disabled:t}=this.props,r=this.getBox();if(!e)return;const i=na(e,r.width,r.height);if(t)return;n.cancelable&&n.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const s=n.target.dataset.ord,u=!!s;let c=n.clientX,f=n.clientY,h=i.x,v=i.y;if(s){const m=n.clientX-r.x,_=n.clientY-r.y;let C=0,T=0;s==="ne"||s=="e"?(C=m-(i.x+i.width),T=_-i.y,h=i.x,v=i.y+i.height):s==="se"||s==="s"?(C=m-(i.x+i.width),T=_-(i.y+i.height),h=i.x,v=i.y):s==="sw"||s=="w"?(C=m-i.x,T=_-(i.y+i.height),h=i.x+i.width,v=i.y):(s==="nw"||s=="n")&&(C=m-i.x,T=_-i.y,h=i.x+i.width,v=i.y+i.height),c=h+r.x+C,f=v+r.y+T}this.evData={startClientX:c,startClientY:f,startCropX:h,startCropY:v,clientX:n.clientX,clientY:n.clientY,isResize:u,ord:s},this.mouseDownOnCrop=!0,this.setState({cropIsActive:!0})}),zn(this,"onComponentPointerDown",n=>{const{crop:e,disabled:t,locked:r,keepSelection:i,onChange:s}=this.props,u=this.getBox();if(t||r||i&&e)return;n.cancelable&&n.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const c=n.clientX-u.x,f=n.clientY-u.y,h={unit:"px",x:c,y:f,width:0,height:0};this.evData={startClientX:n.clientX,startClientY:n.clientY,startCropX:c,startCropY:f,clientX:n.clientX,clientY:n.clientY,isResize:!0},this.mouseDownOnCrop=!0,s(na(h,u.width,u.height),Ya(h,u.width,u.height)),this.setState({cropIsActive:!0,newCropIsBeingDrawn:!0})}),zn(this,"onDocPointerMove",n=>{const{crop:e,disabled:t,onChange:r,onDragStart:i}=this.props,s=this.getBox();if(t||!e||!this.mouseDownOnCrop)return;n.cancelable&&n.preventDefault(),this.dragStarted||(this.dragStarted=!0,i&&i(n));const{evData:u}=this;u.clientX=n.clientX,u.clientY=n.clientY;let c;u.isResize?c=this.resizeCrop():c=this.dragCrop(),gb(e,c)||r(na(c,s.width,s.height),Ya(c,s.width,s.height))}),zn(this,"onComponentKeyDown",n=>{const{crop:e,disabled:t,onChange:r,onComplete:i}=this.props;if(t)return;const s=n.key;let u=!1;if(!e)return;const c=this.getBox(),f=this.makePixelCrop(c),h=(navigator.platform.match("Mac")?n.metaKey:n.ctrlKey)?Li.nudgeStepLarge:n.shiftKey?Li.nudgeStepMedium:Li.nudgeStep;if(s==="ArrowLeft"?(f.x-=h,u=!0):s==="ArrowRight"?(f.x+=h,u=!0):s==="ArrowUp"?(f.y-=h,u=!0):s==="ArrowDown"&&(f.y+=h,u=!0),u){n.cancelable&&n.preventDefault(),f.x=Al(f.x,0,c.width-f.width),f.y=Al(f.y,0,c.height-f.height);const v=na(f,c.width,c.height),m=Ya(f,c.width,c.height);r(v,m),i&&i(v,m)}}),zn(this,"onHandlerKeyDown",(n,e)=>{const{aspect:t=0,crop:r,disabled:i,minWidth:s=0,minHeight:u=0,maxWidth:c,maxHeight:f,onChange:h,onComplete:v}=this.props,m=this.getBox();if(i||!r)return;if(n.key==="ArrowUp"||n.key==="ArrowDown"||n.key==="ArrowLeft"||n.key==="ArrowRight")n.stopPropagation(),n.preventDefault();else return;const _=(navigator.platform.match("Mac")?n.metaKey:n.ctrlKey)?Li.nudgeStepLarge:n.shiftKey?Li.nudgeStepMedium:Li.nudgeStep,C=na(r,m.width,m.height),T=fV(C,n.key,_,e),k=mb(T,t,e,m.width,m.height,s,u,c,f);if(!gb(r,k)){const P=Ya(k,m.width,m.height);h(k,P),v&&v(k,P)}}),zn(this,"onDocPointerDone",n=>{const{crop:e,disabled:t,onComplete:r,onDragEnd:i}=this.props,s=this.getBox();this.unbindDocMove(),!(t||!e)&&this.mouseDownOnCrop&&(this.mouseDownOnCrop=!1,this.dragStarted=!1,i&&i(n),r&&r(na(e,s.width,s.height),Ya(e,s.width,s.height)),this.setState({cropIsActive:!1,newCropIsBeingDrawn:!1}))}),zn(this,"onDragFocus",()=>{var n;(n=this.componentRef.current)==null||n.scrollTo(0,0)})}get document(){return document}getBox(){const n=this.mediaRef.current;if(!n)return{x:0,y:0,width:0,height:0};const{x:e,y:t,width:r,height:i}=n.getBoundingClientRect();return{x:e,y:t,width:r,height:i}}componentDidUpdate(n){const{crop:e,onComplete:t}=this.props;if(t&&!n.crop&&e){const{width:r,height:i}=this.getBox();r&&i&&t(na(e,r,i),Ya(e,r,i))}}componentWillUnmount(){this.resizeObserver&&this.resizeObserver.disconnect(),this.unbindDocMove()}bindDocMove(){this.docMoveBound||(this.document.addEventListener("pointermove",this.onDocPointerMove,Ml),this.document.addEventListener("pointerup",this.onDocPointerDone,Ml),this.document.addEventListener("pointercancel",this.onDocPointerDone,Ml),this.docMoveBound=!0)}unbindDocMove(){this.docMoveBound&&(this.document.removeEventListener("pointermove",this.onDocPointerMove,Ml),this.document.removeEventListener("pointerup",this.onDocPointerDone,Ml),this.document.removeEventListener("pointercancel",this.onDocPointerDone,Ml),this.docMoveBound=!1)}getCropStyle(){const{crop:n}=this.props;if(n)return{top:`${n.y}${n.unit}`,left:`${n.x}${n.unit}`,width:`${n.width}${n.unit}`,height:`${n.height}${n.unit}`}}dragCrop(){const{evData:n}=this,e=this.getBox(),t=this.makePixelCrop(e),r=n.clientX-n.startClientX,i=n.clientY-n.startClientY;return t.x=Al(n.startCropX+r,0,e.width-t.width),t.y=Al(n.startCropY+i,0,e.height-t.height),t}getPointRegion(n,e,t,r){const{evData:i}=this,s=i.clientX-n.x,u=i.clientY-n.y;let c;r&&e?c=e==="nw"||e==="n"||e==="ne":c=u<i.startCropY;let f;return t&&e?f=e==="nw"||e==="w"||e==="sw":f=s<i.startCropX,f?c?"nw":"sw":c?"ne":"se"}resolveMinDimensions(n,e,t=0,r=0){const i=Math.min(t,n.width),s=Math.min(r,n.height);return!e||!i&&!s?[i,s]:e>1?i?[i,i/e]:[s*e,s]:s?[s*e,s]:[i,i/e]}resizeCrop(){const{evData:n}=this,{aspect:e=0,maxWidth:t,maxHeight:r}=this.props,i=this.getBox(),[s,u]=this.resolveMinDimensions(i,e,this.props.minWidth,this.props.minHeight);let c=this.makePixelCrop(i);const f=this.getPointRegion(i,n.ord,s,u),h=n.ord||f;let v=n.clientX-n.startClientX,m=n.clientY-n.startClientY;(s&&h==="nw"||h==="w"||h==="sw")&&(v=Math.min(v,-s)),(u&&h==="nw"||h==="n"||h==="ne")&&(m=Math.min(m,-u));const _={unit:"px",x:0,y:0,width:0,height:0};f==="ne"?(_.x=n.startCropX,_.width=v,e?(_.height=_.width/e,_.y=n.startCropY-_.height):(_.height=Math.abs(m),_.y=n.startCropY-_.height)):f==="se"?(_.x=n.startCropX,_.y=n.startCropY,_.width=v,e?_.height=_.width/e:_.height=m):f==="sw"?(_.x=n.startCropX+v,_.y=n.startCropY,_.width=Math.abs(v),e?_.height=_.width/e:_.height=m):f==="nw"&&(_.x=n.startCropX+v,_.width=Math.abs(v),e?(_.height=_.width/e,_.y=n.startCropY-_.height):(_.height=Math.abs(m),_.y=n.startCropY+m));const C=mb(_,e,f,i.width,i.height,s,u,t,r);return e||Li.xyOrds.indexOf(h)>-1?c=C:Li.xOrds.indexOf(h)>-1?(c.x=C.x,c.width=C.width):Li.yOrds.indexOf(h)>-1&&(c.y=C.y,c.height=C.height),c.x=Al(c.x,0,i.width-c.width),c.y=Al(c.y,0,i.height-c.height),c}renderCropSelection(){const{ariaLabels:n=Li.defaultProps.ariaLabels,disabled:e,locked:t,renderSelectionAddon:r,ruleOfThirds:i,crop:s}=this.props,u=this.getCropStyle();if(s)return mn.createElement("div",{style:u,className:"ReactCrop__crop-selection",onPointerDown:this.onCropPointerDown,"aria-label":n.cropArea,tabIndex:0,onKeyDown:this.onComponentKeyDown,role:"group"},!e&&!t&&mn.createElement("div",{className:"ReactCrop__drag-elements",onFocus:this.onDragFocus},mn.createElement("div",{className:"ReactCrop__drag-bar ord-n","data-ord":"n"}),mn.createElement("div",{className:"ReactCrop__drag-bar ord-e","data-ord":"e"}),mn.createElement("div",{className:"ReactCrop__drag-bar ord-s","data-ord":"s"}),mn.createElement("div",{className:"ReactCrop__drag-bar ord-w","data-ord":"w"}),mn.createElement("div",{className:"ReactCrop__drag-handle ord-nw","data-ord":"nw",tabIndex:0,"aria-label":n.nwDragHandle,onKeyDown:c=>this.onHandlerKeyDown(c,"nw"),role:"button"}),mn.createElement("div",{className:"ReactCrop__drag-handle ord-n","data-ord":"n",tabIndex:0,"aria-label":n.nDragHandle,onKeyDown:c=>this.onHandlerKeyDown(c,"n"),role:"button"}),mn.createElement("div",{className:"ReactCrop__drag-handle ord-ne","data-ord":"ne",tabIndex:0,"aria-label":n.neDragHandle,onKeyDown:c=>this.onHandlerKeyDown(c,"ne"),role:"button"}),mn.createElement("div",{className:"ReactCrop__drag-handle ord-e","data-ord":"e",tabIndex:0,"aria-label":n.eDragHandle,onKeyDown:c=>this.onHandlerKeyDown(c,"e"),role:"button"}),mn.createElement("div",{className:"ReactCrop__drag-handle ord-se","data-ord":"se",tabIndex:0,"aria-label":n.seDragHandle,onKeyDown:c=>this.onHandlerKeyDown(c,"se"),role:"button"}),mn.createElement("div",{className:"ReactCrop__drag-handle ord-s","data-ord":"s",tabIndex:0,"aria-label":n.sDragHandle,onKeyDown:c=>this.onHandlerKeyDown(c,"s"),role:"button"}),mn.createElement("div",{className:"ReactCrop__drag-handle ord-sw","data-ord":"sw",tabIndex:0,"aria-label":n.swDragHandle,onKeyDown:c=>this.onHandlerKeyDown(c,"sw"),role:"button"}),mn.createElement("div",{className:"ReactCrop__drag-handle ord-w","data-ord":"w",tabIndex:0,"aria-label":n.wDragHandle,onKeyDown:c=>this.onHandlerKeyDown(c,"w"),role:"button"})),r&&mn.createElement("div",{className:"ReactCrop__selection-addon",onPointerDown:c=>c.stopPropagation()},r(this.state)),i&&mn.createElement(mn.Fragment,null,mn.createElement("div",{className:"ReactCrop__rule-of-thirds-hz"}),mn.createElement("div",{className:"ReactCrop__rule-of-thirds-vt"})))}makePixelCrop(n){const e={...Vp,...this.props.crop||{}};return na(e,n.width,n.height)}render(){const{aspect:n,children:e,circularCrop:t,className:r,crop:i,disabled:s,locked:u,style:c,ruleOfThirds:f}=this.props,{cropIsActive:h,newCropIsBeingDrawn:v}=this.state,m=i?this.renderCropSelection():null,_=lV("ReactCrop",r,h&&"ReactCrop--active",s&&"ReactCrop--disabled",u&&"ReactCrop--locked",v&&"ReactCrop--new-crop",i&&n&&"ReactCrop--fixed-aspect",i&&t&&"ReactCrop--circular-crop",i&&f&&"ReactCrop--rule-of-thirds",!this.dragStarted&&i&&!i.width&&!i.height&&"ReactCrop--invisible-crop",t&&"ReactCrop--no-animate");return mn.createElement("div",{ref:this.componentRef,className:_,style:c},mn.createElement("div",{ref:this.mediaRef,className:"ReactCrop__child-wrapper",onPointerDown:this.onComponentPointerDown},e),i?mn.createElement("svg",{className:"ReactCrop__crop-mask",width:"100%",height:"100%"},mn.createElement("defs",null,mn.createElement("mask",{id:`hole-${this.instanceId}`},mn.createElement("rect",{width:"100%",height:"100%",fill:"white"}),t?mn.createElement("ellipse",{cx:`${i.x+i.width/2}${i.unit}`,cy:`${i.y+i.height/2}${i.unit}`,rx:`${i.width/2}${i.unit}`,ry:`${i.height/2}${i.unit}`,fill:"black"}):mn.createElement("rect",{x:`${i.x}${i.unit}`,y:`${i.y}${i.unit}`,width:`${i.width}${i.unit}`,height:`${i.height}${i.unit}`,fill:"black"}))),mn.createElement("rect",{fill:"black",fillOpacity:.5,width:"100%",height:"100%",mask:`url(#hole-${this.instanceId})`})):void 0,m)}};zn(Ua,"xOrds",["e","w"]),zn(Ua,"yOrds",["n","s"]),zn(Ua,"xyOrds",["nw","ne","se","sw"]),zn(Ua,"nudgeStep",1),zn(Ua,"nudgeStepMedium",10),zn(Ua,"nudgeStepLarge",100),zn(Ua,"defaultProps",{ariaLabels:{cropArea:"Use the arrow keys to move the crop selection area",nwDragHandle:"Use the arrow keys to move the north west drag handle to change the crop selection area",nDragHandle:"Use the up and down arrow keys to move the north drag handle to change the crop selection area",neDragHandle:"Use the arrow keys to move the north east drag handle to change the crop selection area",eDragHandle:"Use the up and down arrow keys to move the east drag handle to change the crop selection area",seDragHandle:"Use the arrow keys to move the south east drag handle to change the crop selection area",sDragHandle:"Use the up and down arrow keys to move the south drag handle to change the crop selection area",swDragHandle:"Use the arrow keys to move the south west drag handle to change the crop selection area",wDragHandle:"Use the up and down arrow keys to move the west drag handle to change the crop selection area"}});let pV=Ua;function hV({isOpen:o,onClose:n,imageUrl:e,targetWidth:t,targetHeight:r,onCropComplete:i}){const[s,u]=We.useState(),[c,f]=We.useState(null),h=We.useRef(null),v=We.useCallback(_=>{const{width:C,height:T}=_.currentTarget,k=cV(uV({unit:"%",width:90},t/r,C,T),C,T);u(k)},[t,r]),m=async()=>{if(!c||!h.current)return;const _=h.current,C=document.createElement("canvas"),T=C.getContext("2d");C.width=t,C.height=r;const k=_.naturalWidth/_.width,P=_.naturalHeight/_.height,L=c.x*k,D=c.y*P,V=c.width*k,re=c.height*P;T.drawImage(_,L,D,V,re,0,0,t,r),C.toBlob(_e=>{_e&&(i(_e),n())},"image/jpeg",.95)};return o?Ie.jsx("div",{className:"image-crop-modal-backdrop",children:Ie.jsxs("div",{className:"image-crop-modal",children:[Ie.jsxs("div",{className:"image-crop-modal-header",children:[Ie.jsx("h2",{children:"Crop Image"}),Ie.jsxs("p",{children:["Adjust the crop area to match the target dimensions: ",t," × ",r]})]}),Ie.jsx("div",{className:"image-crop-modal-content",children:Ie.jsx(pV,{crop:s,onChange:_=>u(_),onComplete:_=>f(_),aspect:t/r,className:"image-crop-container",children:Ie.jsx("img",{ref:h,src:e,onLoad:v,alt:"Crop preview"})})}),Ie.jsxs("div",{className:"image-crop-modal-footer",children:[Ie.jsx("button",{className:"btn btn-secondary",onClick:n,children:"Cancel"}),Ie.jsx("button",{className:"btn btn-primary",onClick:m,disabled:!c,children:"Apply Crop"})]})]})}):null}const vV=({isOpen:o,onClose:n})=>{const[e,t]=We.useState([]),[r,i]=We.useState(""),[s,u]=We.useState(""),[c,f]=We.useState(!1);We.useEffect(()=>{o&&h()},[o]);const h=async()=>{f(!0),u("");try{const _=await fetch("/api/messages");if(!_.ok)throw new Error(`HTTP error! status: ${_.status}`);const C=await _.json();t(C)}catch(_){u("Failed to load messages"),console.error("Error fetching messages:",_)}finally{f(!1)}},v=async _=>{if(_.preventDefault(),!!r.trim()){f(!0),u("");try{const C=await fetch("/api/messages",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({text:r.trim()})});if(!C.ok)throw new Error(`HTTP error! status: ${C.status}`);const T=await C.json();t(T),i("")}catch(C){u("Failed to add message"),console.error("Error adding message:",C)}finally{f(!1)}}},m=async _=>{f(!0),u("");try{const C=await fetch(`/api/messages/${_}`,{method:"DELETE",headers:{Accept:"application/json"}});if(!C.ok)throw new Error(`HTTP error! status: ${C.status}`);const T=await C.json();t(T)}catch(C){u("Failed to delete message"),console.error("Error deleting message:",C)}finally{f(!1)}};return o?Ie.jsx("div",{className:"message-manager-modal",children:Ie.jsxs("div",{className:"message-manager-content",children:[Ie.jsxs("div",{className:"message-manager-header",children:[Ie.jsx("h2",{children:"Custom Messages"}),Ie.jsxs("div",{className:"header-buttons",children:[Ie.jsx("button",{className:"exit-button",onClick:n,disabled:c,children:"Exit to Builder"}),Ie.jsx("button",{className:"close-button",onClick:n,disabled:c,children:"×"})]})]}),s&&Ie.jsx("div",{className:"error-message",children:s}),Ie.jsxs("form",{onSubmit:v,className:"add-message-form",children:[Ie.jsx("input",{type:"text",value:r,onChange:_=>i(_.target.value),placeholder:"Enter new message...",className:"message-input",disabled:c}),Ie.jsx("button",{type:"submit",className:"add-button",disabled:c,children:c?"Adding...":"Add Message"})]}),Ie.jsx("div",{className:"messages-list",children:c&&e.length===0?Ie.jsx("div",{className:"loading-message",children:"Loading messages..."}):e.map((_,C)=>Ie.jsxs("div",{className:"message-item",children:[Ie.jsx("span",{className:"message-text",children:_}),Ie.jsx("button",{onClick:()=>m(C),className:"delete-button",title:"Delete message",disabled:c,children:"🗑️"})]},C))})]})}):null},gV=`
  .panel__right.gjs-pn-panel.gjs-pn-layers {
    display: none !important;
  }
  
  .dimension-wizard-backdrop {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 9999;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .dimension-wizard-modal {
    background: white;
    border-radius: 8px;
    padding: 2rem;
    min-width: 400px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
  }
  
  .dimension-wizard-title {
    font-size: 1.5rem;
    font-weight: 600;
    margin-bottom: 1rem;
    text-align: center;
    color: #333;
  }
  
  .dimension-wizard-description {
    color: #666;
    text-align: center;
    margin-bottom: 2rem;
    line-height: 1.5;
  }
  
  .dimension-input-group {
    display: flex;
    gap: 1rem;
    align-items: center;
    justify-content: center;
    margin-bottom: 2rem;
  }
  
  .dimension-input {
    width: 100px;
    padding: 0.5rem;
    border: 2px solid #ddd;
    border-radius: 4px;
    text-align: center;
    font-size: 1rem;
  }
  
  .dimension-input:focus {
    outline: none;
    border-color: #007bff;
  }
  
  .dimension-label {
    font-weight: 500;
    color: #333;
  }
  
  .dimension-wizard-buttons {
    display: flex;
    gap: 1rem;
    justify-content: center;
  }
  
  .dimension-presets {
    margin-bottom: 1.5rem;
  }
  
  .dimension-presets-title {
    font-weight: 500;
    margin-bottom: 0.5rem;
    text-align: center;
    color: #333;
  }
  
  .dimension-presets-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 0.5rem;
  }
  
  .dimension-preset-btn {
    padding: 0.5rem;
    border: 1px solid #ddd;
    background: #f8f9fa;
    border-radius: 4px;
    cursor: pointer;
    font-size: 0.9rem;
    transition: all 0.2s;
  }
  
  .dimension-preset-btn:hover {
    background: #e9ecef;
    border-color: #adb5bd;
  }

  .image-status-badge {
    position: absolute;
    top: 8px;
    right: 8px;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    color: white;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
  }

  .image-status-badge.native {
    background-color: #28a745;
  }

  .image-status-badge.cropped {
    background-color: #fd7e14;
  }

  .gjs-block[data-type="image"] {
    position: relative;
  }

  .rotate-handle {
    position: absolute;
    width: 10px;
    height: 10px;
    border: 1px solid #007bff;
    background-color: #007bff;
    border-radius: 50%;
    cursor: grab;
    z-index: 1000;
    pointer-events: all;
    box-shadow: 0 1px 3px rgba(0,0,0,0.3);
  }

  .rotate-handle:hover {
    background-color: #0056b3;
    border-color: #0056b3;
    transform: scale(1.2);
  }

  .rotate-handle:active {
    cursor: grabbing;
  }
`,mV={container:"#gjs",height:"100%",storageManager:!1,draggable:!0,resizable:!0,wrapper:{removable:!1,copyable:!1,draggable:!1,style:{"min-height":"100%",height:"100%",margin:"0",padding:"0",position:"relative"}},deviceManager:{devices:[{name:"Desktop",width:""},{name:"Mobile",width:"320px",widthMedia:"480px"}]},canvas:{styles:["https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css",{selectors:["body"],style:{"min-height":"100%",height:"100%",margin:"0",padding:"0",position:"relative"}}],scripts:["https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"],customBadgeLabel:!1,enableSelection:!0,enableDragging:!0,enableResizing:!0,dragMode:"absolute"},layerManager:{appendTo:".layers-container",container:".panel__right",wrapper:!1,panel:!1},panels:{defaults:[{id:"layers",el:".panel__right",buttons:[],appendTo:".panel__right",visible:!0,header:!1,resizable:!1,panel:!1}]},assetManager:{upload:"/api/upload-image",uploadName:"files",uploadPath:"/static/uploads/",assets:[]},styleManager:{appendTo:"#style",sectors:[{name:"Text",open:!1,buildProps:["font-family","font-size","font-weight","letter-spacing","color","line-height","text-align","text-decoration","text-shadow"]},{name:"Background",open:!1,buildProps:["background-color","background-image","background-repeat","background-position","background-size","background-attachment"]},{name:"Transform",open:!1,buildProps:["transform"]}]},blockManager:{appendTo:"#blocks"}},yV=o=>Math.round(parseInt(o)/20)*20,Fv=o=>{if(!o||typeof o.getStyle!="function")return;const n=o.getStyle();n&&["top","left","width","height"].forEach(e=>{const t=parseInt(n[e]);isNaN(t)||o.addStyle({[e]:yV(t)+"px"})})},wV=o=>{const e=(o.style.transform||"").match(/rotate\(([^)]+)\)/);return e?parseFloat(e[1]):0},_V=(o,n)=>{const t=(o.style.transform||"").replace(/rotate\([^)]*\)/,"").trim();o.style.transform=`${t} rotate(${n}deg)`.trim()},bV=o=>{const n=document.createElement("div");return n.className="rotate-handle",n.setAttribute("data-component-id",o.getId()),n},yb=(o,n)=>{if(!(!o||!n))try{const e=n.getBoundingClientRect(),t=document.querySelector("#gjs iframe");if(!t)return;const r=t.getBoundingClientRect(),i=r.left+e.left+e.width/2-5,s=r.top+e.top-15;o.style.left=`${i}px`,o.style.top=`${s}px`}catch(e){console.warn("Error positioning rotation handle:",e)}};function xV(){const o=ty(),n=We.useRef(null),e=We.useRef(null),[t,r]=We.useState([]),[i,s]=We.useState(null),[u,c]=We.useState(!1),[f,h]=We.useState(!1),[v,m]=We.useState(1920),[_,C]=We.useState(1080),[T,k]=We.useState(!1),[P,L]=We.useState(1),[D,V]=We.useState(!1),[re,_e]=We.useState(null),[Q,pe]=We.useState(null),[ne,me]=We.useState(null),[Y,W]=We.useState(!1),[te,q]=We.useState(5),[ge,R]=We.useState(5),ke=We.useRef(null),he=[{name:"Full HD",width:1920,height:1080},{name:"4K UHD",width:3840,height:2160},{name:"HD Ready",width:1366,height:768},{name:"iPad",width:1024,height:768}],Le=We.useCallback(E=>{if(!n.current)return;const J=n.current.Canvas.getFrameEl();J&&J.contentDocument&&J.contentDocument.body&&(J.contentDocument.body.style.transform=`scale(${E})`,J.contentDocument.body.style.transformOrigin="top left")},[]),$e=()=>{const E=Math.min(P+.1,3);L(E),Le(E)},be=()=>{const E=Math.max(P-.1,.1);L(E),Le(E)};We.useEffect(()=>{T&&Le(P)},[T,P,Le]),We.useEffect(()=>{if(!n.current){localStorage.removeItem("currentDisplayTemplate"),console.log("CanvasBuilder initialized - cleared localStorage");const E=rV.init({...mV,dragMode:"absolute",blockManager:{appendTo:"#blocks",blocks:[{id:"name",label:"Name",content:'<span data-placeholder="name">{{name}}</span>',category:"Race Data",attributes:{class:"gjs-block",title:"Drag Name"}},{id:"first_name",label:"First Name",content:'<span data-placeholder="first_name">{{first_name}}</span>',category:"Race Data",attributes:{class:"gjs-block",title:"Drag First Name"}},{id:"last_name",label:"Last Name",content:'<span data-placeholder="last_name">{{last_name}}</span>',category:"Race Data",attributes:{class:"gjs-block",title:"Drag Last Name"}},{id:"age",label:"Age",content:'<span data-placeholder="age">{{age}}</span>',category:"Race Data",attributes:{class:"gjs-block",title:"Drag Age"}},{id:"gender",label:"Gender",content:'<span data-placeholder="gender">{{gender}}</span>',category:"Race Data",attributes:{class:"gjs-block",title:"Drag Gender"}},{id:"city",label:"City",content:'<span data-placeholder="city">{{city}}</span>',category:"Race Data",attributes:{class:"gjs-block",title:"Drag City"}},{id:"state",label:"State",content:'<span data-placeholder="state">{{state}}</span>',category:"Race Data",attributes:{class:"gjs-block",title:"Drag State"}},{id:"country",label:"Country",content:'<span data-placeholder="country">{{country}}</span>',category:"Race Data",attributes:{class:"gjs-block",title:"Drag Country"}},{id:"division",label:"Division",content:'<span data-placeholder="division">{{division}}</span>',category:"Race Data",attributes:{class:"gjs-block",title:"Drag Division"}},{id:"team_name",label:"Team Name",content:'<span data-placeholder="team_name">{{team_name}}</span>',category:"Race Data",attributes:{class:"gjs-block",title:"Drag Team Name"}},{id:"pace",label:"Pace",content:'<span data-placeholder="pace">{{pace}}</span>',category:"Race Results",attributes:{class:"gjs-block",title:"Drag Pace"}},{id:"gun_pace",label:"Gun Pace",content:'<span data-placeholder="gun_pace">{{gun_pace}}</span>',category:"Race Results",attributes:{class:"gjs-block",title:"Drag Gun Pace"}},{id:"chip_time",label:"Chip Time",content:'<span data-placeholder="chip_time">{{chip_time}}</span>',category:"Race Results",attributes:{class:"gjs-block",title:"Drag Chip Time"}},{id:"gun_time",label:"Gun Time",content:'<span data-placeholder="gun_time">{{gun_time}}</span>',category:"Race Results",attributes:{class:"gjs-block",title:"Drag Gun Time"}},{id:"overall_rank",label:"Overall Rank",content:'<span data-placeholder="overall_rank">{{overall_rank}}</span>',category:"Race Results",attributes:{class:"gjs-block",title:"Drag Overall Rank"}},{id:"custom-message",label:"Custom Message",content:'<span data-placeholder="message">{{message}}</span>',category:"Race Data",attributes:{class:"gjs-block",title:"Drag Custom Message"}},{id:"image",label:"Image",content:{type:"image"},category:"Images",attributes:{class:"gjs-block",title:"Drag Image"},onDrop:async(se,ae,et)=>{if(ae&&ae.get("classes")&&ae.get("classes").includes("layout-root")){const ct=parseInt(ae.getAttributes()["data-design-w"])||0,ot=parseInt(ae.getAttributes()["data-design-h"])||0;if(!ct||!ot)return console.error("Target dimensions not found"),!0;const X=se.get("content");if(!X||!X.src)return console.error("No image source found"),!0;try{const fe=new Image,z=new Promise((qe,st)=>{fe.onload=()=>qe({width:fe.width,height:fe.height}),fe.onerror=st});fe.src=X.src;const je=await z;console.log("Image dimensions:",je),console.log("Target dimensions:",{width:ct,height:ot});const Se=ct/ot,Be=je.width/je.height;if(je.width===ct&&je.height===ot){console.log("Exact dimension match - accepting image");const qe=new FormData;qe.append("file",await fetch(X.src).then(Ot=>Ot.blob()));const st=await fetch("/api/upload-image",{method:"POST",body:qe});if(!st.ok)throw new Error("Failed to upload image");const ut=await st.json();return ae.setStyle({"background-image":`url(${ut.url})`,"background-size":"cover","background-position":"center","background-repeat":"no-repeat"}),ae.addAttributes({"data-original-width":je.width,"data-original-height":je.height,"data-bg-native":"true"}),!1}return je.width>=ct&&je.height>=ot&&Math.abs(Se-Be)<.01?(console.log("Larger image with matching aspect ratio - opening crop modal"),et.set("cropImageData",{imageUrl:X.src,targetWidth:ct,targetHeight:ot,target:ae}),et.trigger("crop-modal:open"),!0):(console.log("Image dimensions or aspect ratio mismatch"),alert(`Image must be ${ct}×${ot} or larger with same ratio.`),!0)}catch(fe){return console.error("Failed to load image:",fe),!0}}return!0}}]}});n.current=E;const H=document.createElement("style");H.textContent=gV,document.head.appendChild(H);const J=()=>{const se=document.querySelector(".panel__right.gjs-pn-panel.gjs-pn-layers");se&&se.remove()};J(),setTimeout(J,100),E.getWrapper(),E.StyleManager.addSector("page-background",{name:"Page Background",open:!0,buildProps:["background-color","background-image","background-size","background-position","background-repeat"]}),E.StyleManager.addProperty("page-background",{property:"background-image",type:"asset",full:!0,functionName:"url",default:"none"});const we=se=>{if(!se||!n.current||typeof se.getStyle!="function"||!se.getStyle())return;const ae=n.current.getWrapper(),et=ae.getStyle(),ct=ae.getAttributes(),ot=parseInt(ct["data-design-w"]||et.width||v),X=parseInt(ct["data-design-h"]||et.height||_),fe=se.getStyle();if(!fe)return;let z=parseInt(fe.left||0),je=parseInt(fe.top||0),Se=parseInt(fe.width||se.view.el.offsetWidth||0),Be=parseInt(fe.height||se.view.el.offsetHeight||0);(isNaN(Se)||Se===0)&&(Se=1),(isNaN(Be)||Be===0)&&(Be=1),z=Math.max(0,Math.min(z,ot-Se)),je=Math.max(0,Math.min(je,X-Be)),z+Se>ot&&(Se=ot-z),je+Be>X&&(Be=X-je);const qe=fe.transform||"";se.addStyle({left:`${z}px`,top:`${je}px`,width:`${Se}px`,height:`${Be}px`,transform:qe})},xe=se=>{Fv(se),we(se)},ee=se=>{ne===se&&Q&&se.view&&se.view.el&&setTimeout(()=>{yb(Q,se.view.el)},10)};E.on("component:drag:end",se=>{xe(se),ee(se)}),E.on("component:resize:end",se=>{xe(se),ee(se)}),E.off("component:drag:end",Fv),E.off("component:resize:end",Fv),E.on("component:selected",_t),E.on("component:deselected",He),E.on("component:add",se=>{se.set({draggable:!0,resizable:{handles:["tl","tr","bl","br","ml","mr","mt","mb"],minWidth:20,minHeight:20},style:{position:"absolute",cursor:"move","user-select":"none"}}),se.set("traits",[{type:"number",name:"top",label:"Top",default:0},{type:"number",name:"left",label:"Left",default:0}]),setTimeout(()=>{rt(se)},100)}),E.on("component:styleUpdate",(se,ae,et)=>{if(ae==="transform"&&se.view&&se.view.el){const ct=se.view.el;et&&et.includes("rotate")&&(ct.style.transform=et)}}),Te(E),E.Commands.add("show-layers",{run:se=>{const ae=se.Panels.getPanel("layers");ae&&ae.set("visible",!0)},stop:se=>{const ae=se.Panels.getPanel("layers");ae&&ae.set("visible",!1)}}),E.Commands.add("show-styles",{run:se=>{const ae=se.Panels.getPanel("styles");ae&&ae.set("visible",!0)},stop:se=>{const ae=se.Panels.getPanel("styles");ae&&ae.set("visible",!1)}}),E.Commands.add("align-center",{run:se=>{const ae=se.getSelected();ae&&ae.addStyle({display:"flex","justify-content":"center","align-items":"center","text-align":"center"})}}),E.Commands.add("align-left",{run:se=>{const ae=se.getSelected();ae&&ae.addStyle({display:"flex","justify-content":"flex-start","align-items":"center","text-align":"left"})}}),E.Commands.add("align-right",{run:se=>{const ae=se.getSelected();ae&&ae.addStyle({display:"flex","justify-content":"flex-end","align-items":"center","text-align":"right"})}}),E.on("load",()=>{const se=E.getWrapper();console.log("Editor loaded - Components count:",se.components().length),console.log("Editor loaded - Wrapper HTML:",se.toHTML());try{const ae=E.getDocument();ae&&ae.body&&(ae.body.style.minHeight="100%",ae.body.style.height="100%",ae.body.style.margin="0",ae.body.style.padding="0",ae.body.style.position="relative")}catch(ae){console.warn("Could not access editor document:",ae)}}),E.BlockManager.add("image",{id:"image",label:"Image",content:{type:"image"},category:"Images",attributes:{class:"gjs-block",title:"Drag Image"},render:({el:se,model:ae})=>{var X;const et=document.createElement("div");et.className="gjs-block",et.setAttribute("data-type","image");const ct=document.createElement("img");ct.src=ae.get("content").src,ct.alt="Image block";const ot=(X=ae.get("attributes"))==null?void 0:X["data-bg-native"];if(ot){const fe=document.createElement("div");fe.className=`image-status-badge ${ot==="true"?"native":"cropped"}`,fe.innerHTML=ot==="true"?"✓":"⚠",et.appendChild(fe)}et.appendChild(ct),se.appendChild(et)}}),E.on("crop-modal:open",()=>{const se=E.get("cropImageData");se&&(_e(se),V(!0))})}},[]),We.useEffect(()=>{Re()},[]),We.useEffect(()=>{const E=H=>{u&&!H.target.closest(".btn-group")&&c(!1)};return document.addEventListener("click",E),()=>document.removeEventListener("click",E)},[u]),We.useEffect(()=>()=>{Q&&Q.remove()},[Q]);const Re=async()=>{try{const H=await(await fetch("/api/templates")).json();r(H)}catch(E){console.error("Failed to fetch templates:",E)}},rt=E=>{if(!E.view||!E.view.el)return;const H=E.view.el;!H||typeof H.hasAttribute!="function"||H.hasAttribute("data-rotation-initialized")||H.setAttribute("data-rotation-initialized","true")},He=()=>{Q&&(Q.remove(),pe(null)),me(null)},_t=E=>{Q&&(Q.remove(),pe(null)),me(E);const H=[...E.get("toolbar")||[]],J=(we,xe,ee)=>{H.find(se=>se.id===we)||H.push({id:we,command:xe,label:ee})};if(J("duplicate","core:clone","Dup"),J("delete","core:delete","Del"),J("align-l","align-left","L"),J("align-c","align-center","C"),J("align-r","align-right","R"),E.getAttributes&&E.getAttributes()["data-placeholder"]==="message"&&J("edit-msg","edit-custom-message","✎"),E.set("toolbar",H),E.set("draggable",!0),E.set("resizable",{handles:["tl","tr","bl","br","ml","mr","mt","mb"],minWidth:20,minHeight:20}),E.set("movable",!0),E.addStyle({cursor:"move","user-select":"none"}),E.view&&E.view.el){const we=bV(E);document.body.appendChild(we),pe(we),setTimeout(()=>{yb(we,E.view.el)},10),iV(we).draggable({listeners:{start(xe){const ee=E.view.el,se=ee.getBoundingClientRect(),ae=document.querySelector("#gjs iframe"),et=ae?ae.getBoundingClientRect():{left:0,top:0},ct=et.left+se.left+se.width/2,ot=et.top+se.top+se.height/2;xe.target.setAttribute("data-center-x",ct),xe.target.setAttribute("data-center-y",ot),xe.target.setAttribute("data-start-angle",wV(ee))},move(xe){const ee=parseFloat(xe.target.getAttribute("data-center-x")),se=parseFloat(xe.target.getAttribute("data-center-y"));parseFloat(xe.target.getAttribute("data-start-angle")||"0");const ae=xe.clientX,et=xe.clientY,ct=Math.atan2(et-se,ae-ee)*(180/Math.PI)+90,ot=E.view.el;_V(ot,ct);const z=`${(E.getStyle("transform")||"").replace(/rotate\([^)]*\)/,"").trim()} rotate(${ct}deg)`.trim();E.addStyle({transform:z})},end(xe){n.current.trigger("component:update",E)}}})}},Te=E=>{E.Commands.add("save-template",{run:Ne}),E.Commands.add("save-as-template",{run:Ye}),E.Commands.add("fullscreen",{run:Fe}),E.Commands.add("align-left",{run(H){const J=H.getSelected();J&&J.addStyle({"text-align":"left"})}}),E.Commands.add("align-center",{run(H){const J=H.getSelected();J&&J.addStyle({"text-align":"center"})}}),E.Commands.add("align-right",{run(H){const J=H.getSelected();J&&J.addStyle({"text-align":"right"})}}),E.Commands.add("edit-custom-message",{run(H){const J=H.getSelected();if(!J)return;const we=J.getAttributes&&J.getAttributes(),xe=we&&we["data-messages"]||"",ee=prompt("Custom messages (comma separated)",xe);ee!==null&&J.addAttributes({"data-messages":ee})}})},Ne=async()=>{var J,we;console.log("Current template name at save:",i),console.log("Template selector value:",(J=e.current)==null?void 0:J.value);let E=i;if(!E&&((we=e.current)!=null&&we.value)&&(E=e.current.value,s(E)),E){console.log("Saving template:",E);try{const xe=n.current.getWrapper(),ee=xe.getStyle(),se=ee["background-color"]||ee.background||"transparent",ae=xe.getAttributes(),et=parseInt(ae["data-design-w"])||v,ct=parseInt(ae["data-design-h"])||_;let ot=xe.toHTML();const X=n.current.getCss(),fe=document.createElement("div");fe.innerHTML=ot;const z=fe.querySelector(".layout-root");z&&(z.style.backgroundColor=se,z.setAttribute("data-design-w",et),z.setAttribute("data-design-h",ct)),ot=fe.innerHTML;const je=`<style>
          .layout-root {
            background-color: ${se};
            width: ${et}px;
            height: ${ct}px;
          }
          ${X}
        </style>${ot}`;await fetch("/api/templates",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:E,html:je,canvasWidth:et,canvasHeight:ct})}),await Re(),console.log("Successfully saved template:",E);return}catch(xe){console.error("Failed to save template:",xe)}}console.log("No template name found, prompting for new name");const H=prompt("Template name");if(H)try{const xe=n.current.getWrapper(),ee=xe.getStyle(),se=ee["background-color"]||ee.background||"transparent",ae=xe.getAttributes(),et=parseInt(ae["data-design-w"])||v,ct=parseInt(ae["data-design-h"])||_;let ot=xe.toHTML();const X=n.current.getCss(),fe=document.createElement("div");fe.innerHTML=ot;const z=fe.querySelector(".layout-root");z&&(z.style.backgroundColor=se,z.setAttribute("data-design-w",et),z.setAttribute("data-design-h",ct)),ot=fe.innerHTML;const je=`<style>
        .layout-root {
          background-color: ${se};
          width: ${et}px;
          height: ${ct}px;
        }
        ${X}
      </style>${ot}`;await fetch("/api/templates",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:H,html:je,canvasWidth:et,canvasHeight:ct})}),s(H),await Re()}catch(xe){console.error("Failed to save template:",xe)}},Ye=async()=>{const E=prompt("Save template as:");if(E)try{const H=n.current.getWrapper(),J=H.getStyle(),we=J["background-color"]||J.background||"transparent",xe=H.getAttributes(),ee=parseInt(xe["data-design-w"])||v,se=parseInt(xe["data-design-h"])||_;let ae=H.toHTML();const et=n.current.getCss(),ct=document.createElement("div");ct.innerHTML=ae;const ot=ct.querySelector(".layout-root");ot&&(ot.style.backgroundColor=we,ot.setAttribute("data-design-w",ee),ot.setAttribute("data-design-h",se)),ae=ct.innerHTML;const X=`<style>
        .layout-root {
          background-color: ${we};
          width: ${ee}px;
          height: ${se}px;
        }
        ${et}
      </style>${ae}`;await fetch("/api/templates",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:E,html:X,canvasWidth:ee,canvasHeight:se})}),s(E),await Re()}catch(H){console.error("Failed to save template:",H)}},Fe=()=>{if(n.current)try{const E=n.current.getWrapper();let H=E.toHTML();const J=n.current.getCss(),we=document.createElement("div");we.innerHTML=H;let xe=we.querySelector(".layout-root");xe||(xe=document.createElement("div"),xe.className="layout-root",xe.style.cssText="position:relative;width:100%;height:100%;");const ee=E.getStyle(),se={"background-color":ee["background-color"]||"transparent","background-image":ee["background-image"]||"none","background-size":ee["background-size"]||"auto","background-position":ee["background-position"]||"0% 0%","background-repeat":ee["background-repeat"]||"repeat","background-attachment":ee["background-attachment"]||"scroll"};Object.entries(se).forEach(([qe,st])=>{st&&!(qe==="background-image"&&st==="none"||qe==="background-size"&&st==="auto"||qe==="background-position"&&st==="0% 0%"||qe==="background-repeat"&&st==="repeat"||qe==="background-attachment"&&st==="scroll")&&(xe.style[qe]=st)});const ae=[];we.childNodes.forEach(qe=>{qe.nodeType===1&&!qe.classList.contains("layout-root")&&qe.tagName!=="STYLE"&&ae.push(qe)}),ae.forEach(qe=>{xe.appendChild(qe)}),we.contains(xe)||we.appendChild(xe),H=we.innerHTML;const ct=n.current.Canvas.getFrameEl(),ot=E.getAttributes(),X=parseInt(ot["data-design-w"])||v,fe=parseInt(ot["data-design-h"])||_;console.log("Canvas dimensions detected:",{canvasWidth:X,canvasHeight:fe}),console.log("Corrected HTML preview:",H.substring(0,300)+"..."),console.log("Background styles captured:",se);const z={html:H,css:J,canvasWidth:X,canvasHeight:fe,backgroundStyles:se,timestamp:Date.now()};localStorage.setItem("currentDisplayTemplate",JSON.stringify(z)),console.log("Template saved with corrected structure and background styles:",se);const Se=`${window.location.origin}/display`,Be=window.open(Se,"raceDisplayMode","fullscreen=yes,scrollbars=no,resizable=yes,status=no,toolbar=no,menubar=no,location=no");Be?(Be.focus(),Be.addEventListener("load",()=>{try{Be.document.documentElement.requestFullscreen&&Be.document.documentElement.requestFullscreen()}catch{console.log("Auto-fullscreen not available, user can manually toggle with ⛶ button")}}),console.log("Display Mode opened in new window")):(console.warn("Popup blocked, falling back to same window navigation"),o("/display"))}catch(E){console.error("Failed to enter display mode:",E)}},vt=async E=>{const H=E.target.value;if(console.log("Loading template:",H),!H){console.log("No template selected, resetting current template name"),s(null);return}try{const we=await(await fetch(`/api/templates/${H}`)).json();if(n.current){s(H),console.log("Set current template name to:",H);const xe=document.createElement("div");xe.innerHTML=we.html||"";const ee=xe.querySelector("style"),se=ee?ee.innerHTML:"";ee&&ee.remove();const ae=xe.querySelector(".layout-root"),et=ae?ae.style.backgroundColor:"transparent",ct=we.canvasWidth||parseInt(ae==null?void 0:ae.getAttribute("data-design-w"))||1920,ot=we.canvasHeight||parseInt(ae==null?void 0:ae.getAttribute("data-design-h"))||1080;m(ct),C(ot);const fe=n.current.Canvas.getFrameEl();if(fe){fe.style.width=`${ct}px`,fe.style.height=`${ot}px`;try{const qe=fe.contentDocument;qe&&qe.body&&(qe.body.style.width=`${ct}px`,qe.body.style.height=`${ot}px`)}catch(qe){console.warn("Could not access iframe content:",qe)}}n.current.setComponents(xe.innerHTML),n.current.setStyle(se);const je=(qe=>{const st={};if(!qe)return st;try{const ut=/background-[a-z-]+\s*:\s*[^;}]+/gi,Ot=qe.match(ut)||[];for(const Ht of Ot){const Bt=Ht.indexOf(":");if(Bt>0){const Kt=Ht.substring(0,Bt).trim(),hn=Ht.substring(Bt+1).trim();Kt&&hn&&(st[Kt]=hn)}}console.log("CSS Background matches found:",Ot)}catch(ut){console.warn("Error parsing CSS for background styles:",ut)}return st})(se);console.log("Extracted background styles from CSS:",je);const Se=n.current.getWrapper();if(Se){const qe={"background-color":et||"transparent",width:`${ct}px`,height:`${ot}px`,overflow:"hidden",...je};console.log("Applying wrapper styles:",qe),Se.addStyle(qe),Se.addAttributes({"data-design-w":ct,"data-design-h":ot})}const Be=n.current.getWrapper().find(".layout-root")[0];Be&&(Be.addStyle({"background-color":et||"transparent",width:`${ct}px`,height:`${ot}px`}),Be.addAttributes({"data-design-w":ct,"data-design-h":ot})),k(!0),console.log("Successfully loaded template:",H,"with dimensions:",ct,"x",ot)}}catch(J){console.error("Failed to load template:",J),s(null)}},nt=()=>{h(!0)},bt=()=>{if(!v||!_||v<100||_<100){alert("Please enter valid dimensions (minimum 100px each)");return}if(h(!1),n.current){n.current.setComponents(""),n.current.setStyle(""),s(null),e.current&&(e.current.value="");const H=n.current.Canvas.getFrameEl();if(H){H.style.width=`${v}px`,H.style.height=`${_}px`;try{const ee=H.contentDocument;ee&&ee.body&&(ee.body.style.width=`${v}px`,ee.body.style.height=`${_}px`)}catch(ee){console.warn("Could not access iframe content:",ee)}}const J=n.current.getWrapper();J.setStyle({width:`${v}px`,height:`${_}px`,position:"relative",overflow:"hidden"}),J.addAttributes({"data-design-w":v,"data-design-h":_}),J.find(".layout-root").forEach(ee=>ee.remove()),J.append(`
        <div class="layout-root" 
             style="position:relative;width:100%;height:100%;box-sizing:border-box;"
             data-design-w="${v}"
             data-design-h="${_}">
          <div class="safe-zone-overlay" 
               style="position:absolute;top:5%;left:5%;width:90%;height:90%;
                      border:2px dashed rgba(255,165,0,0.6);box-sizing:border-box;
                      pointer-events:none;z-index:1000;">
          </div>
          <div style="color: #666; font-size: 18px; position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); text-align:center; pointer-events:none;">
             ${v} × ${_}
             <br><small style="color:#ff6600;">Orange: Safe Zone (95%)</small>
          </div>
        </div>
      `)[0].set({draggable:!1,resizable:!1,selectable:!0,hoverable:!0,removable:!1,copyable:!1}),n.current.select(J),k(!0)}},Yt=()=>{h(!1)},Mt=E=>{m(E.width),C(E.height)},un=async()=>{if(!i){alert("No template selected to delete");return}if(confirm(`Are you sure you want to delete the template "${i}"?`))try{await fetch(`/api/templates/${i}`,{method:"DELETE"}),n.current&&(n.current.setComponents(""),n.current.setStyle("")),s(null),e.current&&(e.current.value=""),await Re()}catch(E){console.error("Failed to delete template:",E),alert("Failed to delete template")}},tn=async E=>{try{const H=new FormData;H.append("file",E);const J=await fetch("/api/upload-image",{method:"POST",body:H});if(!J.ok)throw new Error("Failed to upload cropped image");const we=await J.json();re!=null&&re.target&&(re.target.setStyle({"background-image":`url(${we.url})`,"background-size":"cover","background-position":"center","background-repeat":"no-repeat"}),re.target.addAttributes({"data-bg-native":"cropped"}))}catch(H){console.error("Failed to upload cropped image:",H),alert("Failed to upload cropped image")}},Rt=E=>{R(E),ke.current&&clearTimeout(ke.current),ke.current=setTimeout(async()=>{try{(await fetch("/api/display-settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({duration:E})})).ok&&q(E)}catch(H){console.error("Failed to save display settings:",H),R(te)}},500)};return We.useEffect(()=>()=>{ke.current&&clearTimeout(ke.current)},[]),We.useEffect(()=>{(async()=>{try{const H=await fetch("/api/display-settings");if(H.ok){const J=await H.json();q(J.duration),R(J.duration)}}catch(H){console.error("Failed to load display settings:",H)}})()},[]),Ie.jsxs("div",{className:"canvas-builder",children:[f&&Ie.jsx("div",{className:"dimension-wizard-backdrop",children:Ie.jsxs("div",{className:"dimension-wizard-modal",children:[Ie.jsx("h2",{className:"dimension-wizard-title",children:"Set Target Display Dimensions"}),Ie.jsx("p",{className:"dimension-wizard-description",children:"Enter the pixel dimensions of your target display screen. This will set up your canvas for optimal design."}),Ie.jsxs("div",{className:"dimension-presets",children:[Ie.jsx("div",{className:"dimension-presets-title",children:"Common Presets:"}),Ie.jsx("div",{className:"dimension-presets-grid",children:he.map((E,H)=>Ie.jsxs("button",{className:"dimension-preset-btn",onClick:()=>Mt(E),children:[E.name,Ie.jsx("br",{}),Ie.jsxs("small",{children:[E.width," × ",E.height]})]},H))})]}),Ie.jsxs("div",{className:"dimension-input-group",children:[Ie.jsxs("div",{children:[Ie.jsx("label",{className:"dimension-label",children:"Width:"}),Ie.jsx("input",{type:"number",className:"dimension-input",value:v,onChange:E=>m(parseInt(E.target.value)||0),min:"100",max:"7680"}),Ie.jsx("small",{children:"px"})]}),Ie.jsx("div",{className:"dimension-label",children:"×"}),Ie.jsxs("div",{children:[Ie.jsx("label",{className:"dimension-label",children:"Height:"}),Ie.jsx("input",{type:"number",className:"dimension-input",value:_,onChange:E=>C(parseInt(E.target.value)||0),min:"100",max:"4320"}),Ie.jsx("small",{children:"px"})]})]}),Ie.jsxs("div",{className:"dimension-wizard-buttons",children:[Ie.jsx("button",{className:"btn btn-secondary",onClick:Yt,children:"Cancel"}),Ie.jsx("button",{className:"btn btn-primary",onClick:bt,children:"Create Canvas"})]})]})}),Ie.jsxs("div",{className:"canvas-builder__toolbar",children:[Ie.jsx("button",{className:"btn btn-secondary me-2",onClick:()=>n.current.runCommand("core:undo"),children:"Undo"}),Ie.jsx("button",{className:"btn btn-secondary me-2",onClick:()=>n.current.runCommand("core:redo"),children:"Redo"}),Ie.jsx("button",{className:"btn btn-secondary me-2",onClick:()=>n.current.runCommand("open-assets"),children:"Images"}),Ie.jsx("button",{className:"btn btn-secondary me-2",onClick:()=>n.current.runCommand("fullscreen"),children:"Display Mode"}),Ie.jsx("button",{className:"btn btn-secondary me-2",onClick:be,children:"−"}),Ie.jsx("button",{className:"btn btn-secondary me-2",onClick:$e,children:"+"}),Ie.jsxs("span",{className:"me-3 align-self-center",style:{minWidth:"80px"},children:[Math.round(P*100),"%"]}),Ie.jsxs("div",{className:"btn-group me-2",role:"group",children:[Ie.jsx("button",{className:"btn btn-primary",onClick:()=>n.current.runCommand("save-template"),children:"Save"}),Ie.jsx("button",{type:"button",className:"btn btn-primary dropdown-toggle dropdown-toggle-split",onClick:()=>c(!u),children:Ie.jsx("span",{className:"visually-hidden",children:"Toggle Dropdown"})}),Ie.jsx("ul",{className:`dropdown-menu ${u?"show":""}`,children:Ie.jsx("li",{children:Ie.jsx("button",{className:"dropdown-item",onClick:()=>{c(!1),n.current.runCommand("save-as-template")},children:"Save As..."})})})]}),Ie.jsx("button",{className:"btn btn-secondary me-2",onClick:nt,children:"New"}),Ie.jsx("button",{className:"btn btn-danger me-2",onClick:un,children:"Delete"}),Ie.jsxs("select",{className:"form-select d-inline w-auto",onChange:vt,ref:e,children:[Ie.jsx("option",{value:""}),t.map(E=>Ie.jsx("option",{value:E,children:E},E))]}),Ie.jsx("button",{className:"toolbar-button",onClick:()=>W(!0),title:"Edit Custom Messages",children:Ie.jsx("span",{className:"button-text",children:"Messages"})}),Ie.jsxs("div",{className:"d-flex align-items-center ms-2",children:[Ie.jsx("span",{className:"me-2",children:"Duration:"}),Ie.jsx("input",{type:"number",className:"form-control",style:{width:"60px"},value:ge,onChange:E=>Rt(parseInt(E.target.value)||0),onBlur:E=>{(parseInt(E.target.value)||0)<0&&Rt(0)}}),Ie.jsx("span",{className:"ms-1",children:"sec"})]})]}),Ie.jsxs("div",{className:"canvas-builder__workspace",children:[Ie.jsx("div",{id:"blocks",className:"canvas-builder__blocks"}),Ie.jsx("div",{id:"gjs",className:"canvas-builder__editor"}),Ie.jsxs("div",{className:"canvas-builder__right-panel",children:[Ie.jsx("div",{className:"panel__right"}),Ie.jsx("div",{id:"style",className:"canvas-builder__styles"})]})]}),Ie.jsx(hV,{isOpen:D,onClose:()=>V(!1),imageUrl:re==null?void 0:re.imageUrl,targetWidth:re==null?void 0:re.targetWidth,targetHeight:re==null?void 0:re.targetHeight,onCropComplete:tn}),Ie.jsx(vV,{isOpen:Y,onClose:()=>W(!1)})]})}function CV(){return Ie.jsx("div",{className:"container-fluid p-3",children:Ie.jsx("div",{children:Ie.jsx("div",{className:"display-container",children:Ie.jsx(xV,{})})})})}function SV({className:o,html:n,css:e,data:t,canvasWidth:r=800,canvasHeight:i=600}){var pe,ne,me;const s=We.useRef(null),[u,c]=We.useState(null),[f,h]=We.useState(1),[v,m]=We.useState({x:0,y:0}),[_,C]=We.useState(!1),[T,k]=We.useState({x:0,y:0}),P=(Y,W)=>{if(!Y)return Y;if(!W)return console.log("TemplateViewer: No runner data available for substitution"),Y;console.log("TemplateViewer: Substituting variables with data:",W);let te=Y;const q=/\{\{(\w+)\}\}/g;return te=te.replace(q,(ge,R)=>{const ke=W[R];return console.log(`TemplateViewer: Replacing ${ge} with ${ke}`),ke!==void 0?ke:ge}),te};We.useEffect(()=>{const Y=localStorage.getItem("currentDisplayTemplate");Y&&c(JSON.parse(Y))},[]),We.useEffect(()=>{if(!u||!s.current)return;const Y=s.current,W=u.canvasWidth||r,te=u.canvasHeight||i,q=Y.clientWidth,ge=Y.clientHeight,R=q/W,ke=ge/te;let he=1;q<W?he=R:(ge<te,he=1);const Le=W*he,$e=te*he,be=(q-Le)/2,Re=(ge-$e)/2;console.log("TemplateViewer: Scaling calculation:",{templateCanvasWidth:W,templateCanvasHeight:te,containerWidth:q,containerHeight:ge,scaleX:R,scaleY:ke,newScale:he,position:{x:be,y:Re}}),h(he),m({x:be,y:Re})},[u,r,i]),We.useEffect(()=>{const Y=()=>{if(!u||!s.current)return;const W=s.current,te=u.canvasWidth||r,q=u.canvasHeight||i,ge=W.clientWidth,R=W.clientHeight,ke=ge/te;let he=1;ge<te?he=ke:(R<q,he=1);const Le=te*he,$e=q*he,be=(ge-Le)/2,Re=(R-$e)/2;h(he),m({x:be,y:Re})};return window.addEventListener("resize",Y),()=>window.removeEventListener("resize",Y)},[u,r,i]);const L=Y=>{C(!0),k({x:Y.clientX-v.x,y:Y.clientY-v.y})},D=Y=>{_&&m({x:Y.clientX-T.x,y:Y.clientY-T.y})},V=()=>{C(!1)};if(!u)return null;const re=((pe=u==null?void 0:u.backgroundStyles)==null?void 0:pe["background-color"])||"transparent",_e=u.canvasWidth||r,Q=u.canvasHeight||i;return Ie.jsx("div",{ref:s,className:"template-viewer",onMouseDown:L,onMouseMove:D,onMouseUp:V,onMouseLeave:V,style:{width:"100vw",height:"100vh",overflow:"hidden",position:"relative",backgroundColor:re||"transparent"},children:Ie.jsx("div",{style:{position:"absolute",transform:`translate(${v.x}px, ${v.y}px) scale(${f})`,transformOrigin:"top left",width:_e,height:Q,backgroundColor:re||"transparent"},dangerouslySetInnerHTML:{__html:`
          <!DOCTYPE html>
          <html>
            <head>
              <meta charset="utf-8">
              <meta name="viewport" content="width=device-width, initial-scale=1">
              <style>
                html, body {
                  margin: 0;
                  padding: 0;
                  overflow: hidden;
                  background: transparent;
                  box-sizing: border-box;
                  width: 100%;
                  height: 100%;
                }
                body {
                  position: relative;
                  transform-origin: top left;
                  background: transparent;
                  width: ${_e}px;
                  height: ${Q}px;
                }
                /* Ensure the layout-root maintains the template dimensions */
                .layout-root {
                  position: relative !important;
                  width: ${_e}px !important;
                  height: ${Q}px !important;
                  margin: 0 !important;
                  padding: 0 !important;
                  display: block !important;
                  ${u!=null&&u.backgroundStyles?Object.entries(u.backgroundStyles).map(([Y,W])=>Y==="background-size"&&u.backgroundStyles["background-image"]&&u.backgroundStyles["background-image"]!=="none"?`${Y}: 100% 100%;`:`${Y}: ${W};`).join(" "):"background: transparent;"}
                  ${(ne=u==null?void 0:u.backgroundStyles)!=null&&ne["background-image"]&&((me=u==null?void 0:u.backgroundStyles)==null?void 0:me["background-image"])!=="none"?"background-size: 100% 100% !important;":""}
                }
                /* Preserve exact positioning for all elements */
                * {
                  box-sizing: border-box;
                }
                /* Ensure absolute positioned elements maintain their coordinates */
                [style*="position: absolute"], [style*="position:absolute"] {
                  position: absolute !important;
                }
                /* Prevent images from stretching */
                img {
                  object-fit: contain;
                  max-width: none !important;
                  max-height: none !important;
                }
                /* Debug: Add info showing the scaling approach */
                body::after {
                  content: 'Canvas: ${_e}x${Q} | Uniform Scaling';
                  position: absolute;
                  top: 5px;
                  left: 5px;
                  background: rgba(0,0,0,0.7);
                  color: white;
                  padding: 2px 6px;
                  font-size: 10px;
                  border-radius: 3px;
                  pointer-events: none;
                  z-index: 10000;
                }
              </style>
              <style>${e||""}</style>
            </head>
            <body>
              ${P(n,t)||""}
            </body>
          </html>
        `}})})}function OV({runner:o,template:n}){const[e,t]=We.useState(!1),r=We.useRef(null),[i,s]=We.useState(""),u=We.useRef(null),c=We.useRef(!1),f=(v,m=8,_=.5)=>{if(!v)return;if(!v.dataset.originalFontSize){const L=window.getComputedStyle(v);v.dataset.originalFontSize=parseFloat(L.fontSize)}const C=parseFloat(v.dataset.originalFontSize);let T=C;v.style.setProperty("white-space","normal","important"),v.style.setProperty("font-size",T+"px","important");const k=(L,D)=>{const V=L.cloneNode(!0);V.style.visibility="hidden",V.style.position="absolute",V.style.height="auto",V.style.width=L.clientWidth+"px",V.style.whiteSpace="nowrap",V.style.fontSize=D+"px",L.parentNode.appendChild(V);const re=V.scrollHeight;return V.remove(),re};let P=k(v,T);for(console.log("[shrinkToFit] BEFORE:",{text:v.textContent,width:v.clientWidth,originalFontSize:C,fontSize:T,scrollHeight:v.scrollHeight,singleLineHeight:P});v.scrollHeight>P+1&&T>m;)T-=_,v.style.setProperty("font-size",T+"px","important"),P=k(v,T),console.log("[shrinkToFit] shrinking:",{fontSize:T,scrollHeight:v.scrollHeight,singleLineHeight:P});v.style.setProperty("white-space","nowrap","important"),v.scrollHeight>P+1?(v.style.setProperty("text-overflow","ellipsis","important"),v.style.setProperty("overflow","hidden","important")):(v.style.setProperty("text-overflow","","important"),v.style.setProperty("overflow","","important")),console.log("[shrinkToFit] AFTER:",{text:v.textContent,width:v.clientWidth,originalFontSize:C,finalFontSize:T,scrollHeight:v.scrollHeight,singleLineHeight:P})};We.useEffect(()=>{if(!o||!n)return;console.log("[RunnerDisplay] Setting up observer for runner:",o.first_name||o.name);const v=()=>{console.log("[RunnerDisplay] Attempting to find placeholders...");const C=[".runner-template",".template-viewer","[data-placeholder]"];let T=null,k=[];for(const P of C)if(T=document.querySelector(P),T&&(console.log(`[RunnerDisplay] Found container with selector: ${P}`,T),k=T.querySelectorAll("[data-placeholder]"),console.log(`[RunnerDisplay] Found ${k.length} placeholders in container`),k.length>0))break;return k.length===0&&(k=document.querySelectorAll("[data-placeholder]"),console.log(`[RunnerDisplay] Document-wide search found ${k.length} placeholders`)),k.forEach((P,L)=>{console.log(`[RunnerDisplay] Processing placeholder ${L}:`,{element:P,id:P.id,placeholder:P.getAttribute("data-placeholder"),text:P.textContent});const D=P.getAttribute("data-placeholder");let V=o[D];if(D==="custom_message"){const _e=(P.getAttribute("data-messages")||"").split(",").map(Q=>Q.trim()).filter(Q=>Q);if(_e.length){const Q=parseInt(P.getAttribute("data-message-index")||"0");V=_e[Q%_e.length],P.setAttribute("data-message-index",(Q+1).toString())}else V=""}V!==void 0&&(P.tagName==="IMG"?(P.src=V,console.log(`[RunnerDisplay] Set image src for ${D}: ${V}`)):(P.textContent=V||"",console.log(`[RunnerDisplay] Set text for ${D}: ${V}`))),P.tagName!=="IMG"&&(console.log("[RunnerDisplay] Calling shrinkToFit for:",P),f(P,6,.5))}),k.length>0};setTimeout(()=>{if(console.log("[RunnerDisplay] Trying immediate update..."),v()){console.log("[RunnerDisplay] Immediate update successful");return}},100);const m=new MutationObserver(C=>{console.log("[RunnerDisplay] MutationObserver triggered, mutations:",C.length),v()&&(console.log("[RunnerDisplay] Observer update successful, disconnecting"),m.disconnect())});m.observe(document.body,{childList:!0,subtree:!0});const _=setTimeout(()=>{console.log("[RunnerDisplay] Cleaning up observer after timeout"),m.disconnect()},5e3);return()=>{m.disconnect(),clearTimeout(_)}},[o,n]);const h=We.useCallback(()=>{if(!r.current||!(n!=null&&n.html))return"";const v=window.innerWidth,m=window.innerHeight,_=document.createElement("div");_.innerHTML=n.html;const C=_.querySelector(".layout-root");let T=1920,k=1080;if(C){const _e=parseInt(C.getAttribute("data-design-w")),Q=parseInt(C.getAttribute("data-design-h"));!isNaN(_e)&&!isNaN(Q)&&(T=_e,k=Q)}else n.canvasWidth&&n.canvasHeight&&(T=n.canvasWidth,k=n.canvasHeight);const P=v/T,L=m/k,D=Math.min(P,L),V=(v-T*D)/2,re=(m-k*D)/2;return`translate(${V}px, ${re}px) scale(${D})`},[n]);return We.useEffect(()=>{const v=h();v&&s(v)},[n,h]),We.useEffect(()=>{const v=()=>{c.current=!0},m=()=>{c.current=!1,u.current&&clearTimeout(u.current);const C=h();C&&s(C)},_=()=>{c.current||(u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{const C=h();C&&s(C)},150))};return window.addEventListener("resize",_),window.addEventListener("resizestart",v),window.addEventListener("resizeend",m),()=>{window.removeEventListener("resize",_),window.removeEventListener("resizestart",v),window.removeEventListener("resizeend",m),u.current&&clearTimeout(u.current)}},[h]),We.useEffect(()=>{const v=()=>{t(!!document.fullscreenElement);const m=h();m&&s(m)};return document.addEventListener("fullscreenchange",v),()=>{document.removeEventListener("fullscreenchange",v)}},[h]),Ie.jsx("div",{className:`runner-display-container ${e?"fullscreen":""}`,children:Ie.jsx("div",{ref:r,className:"runner-stage",style:{width:"100%",height:"100%",position:"relative",overflow:"hidden",backgroundColor:"#000",transform:i,transformOrigin:"top left",willChange:"transform"},children:(()=>{if(!(n!=null&&n.html))return null;const v=document.createElement("div");v.innerHTML=n.html;const m=v.querySelector(".layout-root");let _=1920,C=1080;if(m){const T=parseInt(m.getAttribute("data-design-w")),k=parseInt(m.getAttribute("data-design-h"));!isNaN(T)&&!isNaN(k)&&(_=T,C=k)}else n.canvasWidth&&n.canvasHeight&&(_=n.canvasWidth,C=n.canvasHeight);return Ie.jsx(SV,{className:"runner-template",html:n==null?void 0:n.html,css:n==null?void 0:n.css,data:o,canvasWidth:_,canvasHeight:C})})()})})}function b1(){const[o,n]=We.useState(null),[e,t]=We.useState(null),[r,i]=We.useState(5e3),[s,u]=We.useState(0),[c,f]=We.useState(!1);return We.useEffect(()=>{(async()=>{try{const v=await fetch("/api/display-settings");if(v.ok){const m=await v.json();i(m.duration*1e3)}}catch(v){console.error("Failed to load display duration:",v)}})()},[]),We.useEffect(()=>{const h=localStorage.getItem("currentDisplayTemplate");if(h){const v=JSON.parse(h);t({html:v.html,css:v.css,canvasWidth:v.canvasWidth||800,canvasHeight:v.canvasHeight||600,backgroundStyles:v.backgroundStyles||v.backgroundColor||"transparent"})}},[]),We.useEffect(()=>{let h=null,v=null;const m=async()=>{try{const _=await fetch("/api/current-runner");if(_.ok){const C=await _.json(),T=Date.now();if(!o){n(C),u(T);return}T-s>=r&&C.bib!==o.bib&&(n(C),u(T),f(!1))}}catch(_){console.error("Failed to load runner data:",_)}};return m(),v=setTimeout(()=>{f(!0)},r),c&&(h=setInterval(m,1e3)),()=>{v&&clearTimeout(v),h&&clearInterval(h)}},[o,r,s,c]),Ie.jsx("div",{style:{width:"100vw",height:"100vh"},children:Ie.jsx(OV,{runner:o,template:e,displayDuration:r})})}function TV(){var f,h,v,m,_;const o=ty(),[n,e]=We.useState(!1),[t,r]=We.useState(!1),[i,s]=We.useState(null);We.useEffect(()=>{const C=localStorage.getItem("currentDisplayTemplate");if(C)try{const T=JSON.parse(C);s(T)}catch(T){console.error("Failed to parse template data:",T)}},[]);const u=async()=>{try{document.fullscreenElement?await document.exitFullscreen():await document.documentElement.requestFullscreen()}catch(C){console.error("Fullscreen toggle failed:",C)}},c=()=>{o("/builder")};return We.useEffect(()=>{const C=T=>{T.key==="Escape"&&(document.fullscreenElement?document.exitFullscreen():c()),(T.key==="d"||T.key==="D")&&r(!t)};return document.addEventListener("keydown",C),()=>document.removeEventListener("keydown",C)},[t]),We.useEffect(()=>{const C=()=>{e(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",C),()=>{document.removeEventListener("fullscreenchange",C)}},[]),Ie.jsxs("div",{className:"fullscreen-display",children:[Ie.jsxs("div",{className:"fullscreen-display__controls",children:[Ie.jsx("button",{className:"control-btn",onClick:u,title:"Toggle Fullscreen",children:"⛶"}),Ie.jsx("button",{className:"control-btn",onClick:()=>r(!t),title:"Toggle Debug Info (or press D)",children:"🐛"}),Ie.jsx("button",{className:"control-btn exit-btn",onClick:c,title:"Exit Display Mode",children:"✕"})]}),t&&i&&Ie.jsxs("div",{className:"debug-overlay",children:[Ie.jsx("h3",{children:"Template Debug Info"}),Ie.jsxs("p",{children:[Ie.jsx("strong",{children:"Original Canvas:"})," ",i.canvasWidth," x ",i.canvasHeight]}),Ie.jsxs("p",{children:[Ie.jsx("strong",{children:"Screen Dimensions:"})," ",window.innerWidth," x ",window.innerHeight]}),Ie.jsxs("p",{children:[Ie.jsx("strong",{children:"Scale X:"})," ",(window.innerWidth/i.canvasWidth).toFixed(3)]}),Ie.jsxs("p",{children:[Ie.jsx("strong",{children:"Scale Y:"})," ",(window.innerHeight/i.canvasHeight).toFixed(3)]}),Ie.jsxs("p",{children:[Ie.jsx("strong",{children:"HTML Length:"})," ",((f=i.html)==null?void 0:f.length)||0," chars"]}),Ie.jsxs("p",{children:[Ie.jsx("strong",{children:"CSS Length:"})," ",((h=i.css)==null?void 0:h.length)||0," chars"]}),Ie.jsxs("p",{children:[Ie.jsx("strong",{children:"Timestamp:"})," ",new Date(i.timestamp).toLocaleString()]}),Ie.jsxs("p",{children:[Ie.jsx("strong",{children:"Background Styles:"})," ",i.backgroundStyles?Object.keys(i.backgroundStyles).join(", "):"None"]}),Ie.jsxs("p",{children:[Ie.jsx("strong",{children:"Layout Check:"})," ",(v=i.html)!=null&&v.includes("layout-root")?"✅ Structure OK":"❌ Missing layout-root"]}),Ie.jsxs("p",{children:[Ie.jsx("strong",{children:"Scaling Mode:"})," 🖥️ Fullscreen Fill"]}),Ie.jsxs("details",{children:[Ie.jsx("summary",{children:"HTML Preview"}),Ie.jsxs("pre",{children:[(m=i.html)==null?void 0:m.substring(0,500),"..."]})]}),Ie.jsxs("details",{children:[Ie.jsx("summary",{children:"CSS Preview"}),Ie.jsxs("pre",{children:[(_=i.css)==null?void 0:_.substring(0,300),"..."]})]})]}),Ie.jsx(b1,{})]})}function EV(){return Ie.jsxs(tk,{children:[Ie.jsx(ic,{path:"/",element:Ie.jsx(ik,{})}),Ie.jsx(ic,{path:"/builder",element:Ie.jsx(CV,{})}),Ie.jsx(ic,{path:"/display",element:Ie.jsx(TV,{})}),Ie.jsx(ic,{path:"/runner-display",element:Ie.jsx(b1,{})})]})}Vv.createRoot(document.getElementById("root")).render(Ie.jsx(mn.StrictMode,{children:Ie.jsx(ok,{children:Ie.jsx(EV,{})})}));
